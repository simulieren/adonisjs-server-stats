(function(){"use strict";var oe,S,He,Q,ze,qe,We,Ve,xe,$e,ke,ae={},ce=[],tn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,te=Array.isArray;function z(e,n){for(var r in n)e[r]=n[r];return e}function Ce(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Z(e,n,r){var s,i,l,a={};for(l in n)l=="key"?s=n[l]:l=="ref"?i=n[l]:a[l]=n[l];if(arguments.length>2&&(a.children=arguments.length>3?oe.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(l in e.defaultProps)a[l]===void 0&&(a[l]=e.defaultProps[l]);return de(e,a,s,i,null)}function de(e,n,r,s,i){var l={type:e,props:n,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++He,__i:-1,__u:0};return i==null&&S.vnode!=null&&S.vnode(l),l}function B(e){return e.children}function q(e,n){this.props=e,this.context=n}function ee(e,n){if(n==null)return e.__?ee(e.__,e.__i+1):null;for(var r;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?ee(e):null}function nn(e){if(e.__P&&e.__d){var n=e.__v,r=n.__e,s=[],i=[],l=z({},n);l.__v=n.__v+1,S.vnode&&S.vnode(l),Se(e.__P,l,n,e.__n,e.__P.namespaceURI,32&n.__u?[r]:null,s,r??ee(n),!!(32&n.__u),i),l.__v=n.__v,l.__.__k[l.__i]=l,Ze(s,l,i),n.__e=n.__=null,l.__e!=r&&Ke(l)}}function Ke(e){if((e=e.__)!=null&&e.__c!=null)return e.__e=e.__c.base=null,e.__k.some(function(n){if(n!=null&&n.__e!=null)return e.__e=e.__c.base=n.__e}),Ke(e)}function Je(e){(!e.__d&&(e.__d=!0)&&Q.push(e)&&!ue.__r++||ze!=S.debounceRendering)&&((ze=S.debounceRendering)||qe)(ue)}function ue(){for(var e,n=1;Q.length;)Q.length>n&&Q.sort(We),e=Q.shift(),n=Q.length,nn(e);ue.__r=0}function Ge(e,n,r,s,i,l,a,c,u,d,p){var o,f,h,m,y,b,g,_=s&&s.__k||ce,N=n.length;for(u=rn(r,n,_,u,N),o=0;o<N;o++)(h=r.__k[o])!=null&&(f=h.__i!=-1&&_[h.__i]||ae,h.__i=o,b=Se(e,h,f,i,l,a,c,u,d,p),m=h.__e,h.ref&&f.ref!=h.ref&&(f.ref&&Le(f.ref,null,h),p.push(h.ref,h.__c||m,h)),y==null&&m!=null&&(y=m),(g=!!(4&h.__u))||f.__k===h.__k?u=Qe(h,u,e,g):typeof h.type=="function"&&b!==void 0?u=b:m&&(u=m.nextSibling),h.__u&=-7);return r.__e=y,u}function rn(e,n,r,s,i){var l,a,c,u,d,p=r.length,o=p,f=0;for(e.__k=new Array(i),l=0;l<i;l++)(a=n[l])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=e.__k[l]=de(null,a,null,null,null):te(a)?a=e.__k[l]=de(B,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=e.__k[l]=de(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):e.__k[l]=a,u=l+f,a.__=e,a.__b=e.__b+1,c=null,(d=a.__i=sn(a,r,u,o))!=-1&&(o--,(c=r[d])&&(c.__u|=2)),c==null||c.__v==null?(d==-1&&(i>p?f--:i<p&&f++),typeof a.type!="function"&&(a.__u|=4)):d!=u&&(d==u-1?f--:d==u+1?f++:(d>u?f--:f++,a.__u|=4))):e.__k[l]=null;if(o)for(l=0;l<p;l++)(c=r[l])!=null&&(2&c.__u)==0&&(c.__e==s&&(s=ee(c)),tt(c,c));return s}function Qe(e,n,r,s){var i,l;if(typeof e.type=="function"){for(i=e.__k,l=0;i&&l<i.length;l++)i[l]&&(i[l].__=e,n=Qe(i[l],n,r,s));return n}e.__e!=n&&(s&&(n&&e.type&&!n.parentNode&&(n=ee(e)),r.insertBefore(e.__e,n||null)),n=e.__e);do n=n&&n.nextSibling;while(n!=null&&n.nodeType==8);return n}function he(e,n){return n=n||[],e==null||typeof e=="boolean"||(te(e)?e.some(function(r){he(r,n)}):n.push(e)),n}function sn(e,n,r,s){var i,l,a,c=e.key,u=e.type,d=n[r],p=d!=null&&(2&d.__u)==0;if(d===null&&c==null||p&&c==d.key&&u==d.type)return r;if(s>(p?1:0)){for(i=r-1,l=r+1;i>=0||l<n.length;)if((d=n[a=i>=0?i--:l++])!=null&&(2&d.__u)==0&&c==d.key&&u==d.type)return a}return-1}function Xe(e,n,r){n[0]=="-"?e.setProperty(n,r??""):e[n]=r==null?"":typeof r!="number"||tn.test(n)?r:r+"px"}function pe(e,n,r,s,i){var l,a;e:if(n=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof s=="string"&&(e.style.cssText=s=""),s)for(n in s)r&&n in r||Xe(e.style,n,"");if(r)for(n in r)s&&r[n]==s[n]||Xe(e.style,n,r[n])}else if(n[0]=="o"&&n[1]=="n")l=n!=(n=n.replace(Ve,"$1")),a=n.toLowerCase(),n=a in e||n=="onFocusOut"||n=="onFocusIn"?a.slice(2):n.slice(2),e.l||(e.l={}),e.l[n+l]=r,r?s?r.u=s.u:(r.u=xe,e.addEventListener(n,l?ke:$e,l)):e.removeEventListener(n,l?ke:$e,l);else{if(i=="http://www.w3.org/2000/svg")n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!="width"&&n!="height"&&n!="href"&&n!="list"&&n!="form"&&n!="tabIndex"&&n!="download"&&n!="rowSpan"&&n!="colSpan"&&n!="role"&&n!="popover"&&n in e)try{e[n]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&n[4]!="-"?e.removeAttribute(n):e.setAttribute(n,n=="popover"&&r==1?"":r))}}function Ye(e){return function(n){if(this.l){var r=this.l[n.type+e];if(n.t==null)n.t=xe++;else if(n.t<r.u)return;return r(S.event?S.event(n):n)}}}function Se(e,n,r,s,i,l,a,c,u,d){var p,o,f,h,m,y,b,g,_,N,k,v,C,w,E,x=n.type;if(n.constructor!==void 0)return null;128&r.__u&&(u=!!(32&r.__u),l=[c=n.__e=r.__e]),(p=S.__b)&&p(n);e:if(typeof x=="function")try{if(g=n.props,_="prototype"in x&&x.prototype.render,N=(p=x.contextType)&&s[p.__c],k=p?N?N.props.value:p.__:s,r.__c?b=(o=n.__c=r.__c).__=o.__E:(_?n.__c=o=new x(g,k):(n.__c=o=new q(g,k),o.constructor=x,o.render=on),N&&N.sub(o),o.state||(o.state={}),o.__n=s,f=o.__d=!0,o.__h=[],o._sb=[]),_&&o.__s==null&&(o.__s=o.state),_&&x.getDerivedStateFromProps!=null&&(o.__s==o.state&&(o.__s=z({},o.__s)),z(o.__s,x.getDerivedStateFromProps(g,o.__s))),h=o.props,m=o.state,o.__v=n,f)_&&x.getDerivedStateFromProps==null&&o.componentWillMount!=null&&o.componentWillMount(),_&&o.componentDidMount!=null&&o.__h.push(o.componentDidMount);else{if(_&&x.getDerivedStateFromProps==null&&g!==h&&o.componentWillReceiveProps!=null&&o.componentWillReceiveProps(g,k),n.__v==r.__v||!o.__e&&o.shouldComponentUpdate!=null&&o.shouldComponentUpdate(g,o.__s,k)===!1){n.__v!=r.__v&&(o.props=g,o.state=o.__s,o.__d=!1),n.__e=r.__e,n.__k=r.__k,n.__k.some(function(F){F&&(F.__=n)}),ce.push.apply(o.__h,o._sb),o._sb=[],o.__h.length&&a.push(o);break e}o.componentWillUpdate!=null&&o.componentWillUpdate(g,o.__s,k),_&&o.componentDidUpdate!=null&&o.__h.push(function(){o.componentDidUpdate(h,m,y)})}if(o.context=k,o.props=g,o.__P=e,o.__e=!1,v=S.__r,C=0,_)o.state=o.__s,o.__d=!1,v&&v(n),p=o.render(o.props,o.state,o.context),ce.push.apply(o.__h,o._sb),o._sb=[];else do o.__d=!1,v&&v(n),p=o.render(o.props,o.state,o.context),o.state=o.__s;while(o.__d&&++C<25);o.state=o.__s,o.getChildContext!=null&&(s=z(z({},s),o.getChildContext())),_&&!f&&o.getSnapshotBeforeUpdate!=null&&(y=o.getSnapshotBeforeUpdate(h,m)),w=p!=null&&p.type===B&&p.key==null?et(p.props.children):p,c=Ge(e,te(w)?w:[w],n,r,s,i,l,a,c,u,d),o.base=n.__e,n.__u&=-161,o.__h.length&&a.push(o),b&&(o.__E=o.__=null)}catch(F){if(n.__v=null,u||l!=null)if(F.then){for(n.__u|=u?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;l[l.indexOf(c)]=null,n.__e=c}else{for(E=l.length;E--;)Ce(l[E]);Te(n)}else n.__e=r.__e,n.__k=r.__k,F.then||Te(n);S.__e(F,n,r)}else l==null&&n.__v==r.__v?(n.__k=r.__k,n.__e=r.__e):c=n.__e=ln(r.__e,n,r,s,i,l,a,u,d);return(p=S.diffed)&&p(n),128&n.__u?void 0:c}function Te(e){e&&(e.__c&&(e.__c.__e=!0),e.__k&&e.__k.some(Te))}function Ze(e,n,r){for(var s=0;s<r.length;s++)Le(r[s],r[++s],r[++s]);S.__c&&S.__c(n,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(l){l.call(i)})}catch(l){S.__e(l,i.__v)}})}function et(e){return typeof e!="object"||e==null||e.__b>0?e:te(e)?e.map(et):z({},e)}function ln(e,n,r,s,i,l,a,c,u){var d,p,o,f,h,m,y,b=r.props||ae,g=n.props,_=n.type;if(_=="svg"?i="http://www.w3.org/2000/svg":_=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),l!=null){for(d=0;d<l.length;d++)if((h=l[d])&&"setAttribute"in h==!!_&&(_?h.localName==_:h.nodeType==3)){e=h,l[d]=null;break}}if(e==null){if(_==null)return document.createTextNode(g);e=document.createElementNS(i,_,g.is&&g),c&&(S.__m&&S.__m(n,l),c=!1),l=null}if(_==null)b===g||c&&e.data==g||(e.data=g);else{if(l=l&&oe.call(e.childNodes),!c&&l!=null)for(b={},d=0;d<e.attributes.length;d++)b[(h=e.attributes[d]).name]=h.value;for(d in b)h=b[d],d=="dangerouslySetInnerHTML"?o=h:d=="children"||d in g||d=="value"&&"defaultValue"in g||d=="checked"&&"defaultChecked"in g||pe(e,d,null,h,i);for(d in g)h=g[d],d=="children"?f=h:d=="dangerouslySetInnerHTML"?p=h:d=="value"?m=h:d=="checked"?y=h:c&&typeof h!="function"||b[d]===h||pe(e,d,h,b[d],i);if(p)c||o&&(p.__html==o.__html||p.__html==e.innerHTML)||(e.innerHTML=p.__html),n.__k=[];else if(o&&(e.innerHTML=""),Ge(n.type=="template"?e.content:e,te(f)?f:[f],n,r,s,_=="foreignObject"?"http://www.w3.org/1999/xhtml":i,l,a,l?l[0]:r.__k&&ee(r,0),c,u),l!=null)for(d=l.length;d--;)Ce(l[d]);c||(d="value",_=="progress"&&m==null?e.removeAttribute("value"):m!=null&&(m!==e[d]||_=="progress"&&!m||_=="option"&&m!=b[d])&&pe(e,d,m,b[d],i),d="checked",y!=null&&y!=e[d]&&pe(e,d,y,b[d],i))}return e}function Le(e,n,r){try{if(typeof e=="function"){var s=typeof e.__u=="function";s&&e.__u(),s&&n==null||(e.__u=e(n))}else e.current=n}catch(i){S.__e(i,r)}}function tt(e,n,r){var s,i;if(S.unmount&&S.unmount(e),(s=e.ref)&&(s.current&&s.current!=e.__e||Le(s,null,n)),(s=e.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(l){S.__e(l,n)}s.base=s.__P=null}if(s=e.__k)for(i=0;i<s.length;i++)s[i]&&tt(s[i],n,r||typeof e.type!="function");r||Ce(e.__e),e.__c=e.__=e.__e=void 0}function on(e,n,r){return this.constructor(e,r)}function Ee(e,n,r){var s,i,l,a;n==document&&(n=document.documentElement),S.__&&S.__(e,n),i=(s=!1)?null:n.__k,l=[],a=[],Se(n,e=n.__k=Z(B,null,[e]),i||ae,ae,n.namespaceURI,i?null:n.firstChild?oe.call(n.childNodes):null,l,i?i.__e:n.firstChild,s,a),Ze(l,e,a)}oe=ce.slice,S={__e:function(e,n,r,s){for(var i,l,a;n=n.__;)if((i=n.__c)&&!i.__)try{if((l=i.constructor)&&l.getDerivedStateFromError!=null&&(i.setState(l.getDerivedStateFromError(e)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,s||{}),a=i.__d),a)return i.__E=i}catch(c){e=c}throw e}},He=0,q.prototype.setState=function(e,n){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=z({},this.state),typeof e=="function"&&(e=e(z({},r),this.props)),e&&z(r,e),e!=null&&this.__v&&(n&&this._sb.push(n),Je(this))},q.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Je(this))},q.prototype.render=B,Q=[],qe=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,We=function(e,n){return e.__v.__b-n.__v.__b},ue.__r=0,Ve=/(PointerCapture)$|Capture$/i,xe=0,$e=Ye(!1),ke=Ye(!0);var an=0;function t(e,n,r,s,i,l){n||(n={});var a,c,u=n;if("ref"in u)for(c in u={},n)c=="ref"?a=n[c]:u[c]=n[c];var d={type:e,props:u,key:r,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--an,__i:-1,__u:0,__source:i,__self:l};if(typeof e=="function"&&(a=e.defaultProps))for(c in a)u[c]===void 0&&(u[c]=a[c]);return S.vnode&&S.vnode(d),d}var ne,O,Me,nt,re=0,rt=[],I=S,st=I.__b,it=I.__r,lt=I.diffed,ot=I.__c,at=I.unmount,ct=I.__;function Pe(e,n){I.__h&&I.__h(O,e,re||n),re=0;var r=O.__H||(O.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function $(e){return re=1,cn(ht,e)}function cn(e,n,r){var s=Pe(ne++,2);if(s.t=e,!s.__c&&(s.__=[r?r(n):ht(void 0,n),function(c){var u=s.__N?s.__N[0]:s.__[0],d=s.t(u,c);u!==d&&(s.__N=[d,s.__[1]],s.__c.setState({}))}],s.__c=O,!O.__f)){var i=function(c,u,d){if(!s.__c.__H)return!0;var p=s.__c.__H.__.filter(function(f){return f.__c});if(p.every(function(f){return!f.__N}))return!l||l.call(this,c,u,d);var o=s.__c.props!==c;return p.some(function(f){if(f.__N){var h=f.__[0];f.__=f.__N,f.__N=void 0,h!==f.__[0]&&(o=!0)}}),l&&l.call(this,c,u,d)||o};O.__f=!0;var l=O.shouldComponentUpdate,a=O.componentWillUpdate;O.componentWillUpdate=function(c,u,d){if(this.__e){var p=l;l=void 0,i(c,u,d),l=p}a&&a.call(this,c,u,d)},O.shouldComponentUpdate=i}return s.__N||s.__}function P(e,n){var r=Pe(ne++,3);!I.__s&&ut(r.__H,n)&&(r.__=e,r.u=n,O.__H.__h.push(r))}function M(e){return re=5,L(function(){return{current:e}},[])}function L(e,n){var r=Pe(ne++,7);return ut(r.__H,n)&&(r.__=e(),r.__H=n,r.__h=e),r.__}function T(e,n){return re=8,L(function(){return e},n)}function dn(){for(var e;e=rt.shift();){var n=e.__H;if(e.__P&&n)try{n.__h.some(fe),n.__h.some(Ae),n.__h=[]}catch(r){n.__h=[],I.__e(r,e.__v)}}}I.__b=function(e){O=null,st&&st(e)},I.__=function(e,n){e&&n.__k&&n.__k.__m&&(e.__m=n.__k.__m),ct&&ct(e,n)},I.__r=function(e){it&&it(e),ne=0;var n=(O=e.__c).__H;n&&(Me===O?(n.__h=[],O.__h=[],n.__.some(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(n.__h.some(fe),n.__h.some(Ae),n.__h=[],ne=0)),Me=O},I.diffed=function(e){lt&&lt(e);var n=e.__c;n&&n.__H&&(n.__H.__h.length&&(rt.push(n)!==1&&nt===I.requestAnimationFrame||((nt=I.requestAnimationFrame)||un)(dn)),n.__H.__.some(function(r){r.u&&(r.__H=r.u),r.u=void 0})),Me=O=null},I.__c=function(e,n){n.some(function(r){try{r.__h.some(fe),r.__h=r.__h.filter(function(s){return!s.__||Ae(s)})}catch(s){n.some(function(i){i.__h&&(i.__h=[])}),n=[],I.__e(s,r.__v)}}),ot&&ot(e,n)},I.unmount=function(e){at&&at(e);var n,r=e.__c;r&&r.__H&&(r.__H.__.some(function(s){try{fe(s)}catch(i){n=i}}),r.__H=void 0,n&&I.__e(n,r.__v))};var dt=typeof requestAnimationFrame=="function";function un(e){var n,r=function(){clearTimeout(s),dt&&cancelAnimationFrame(n),setTimeout(e)},s=setTimeout(r,35);dt&&(n=requestAnimationFrame(r))}function fe(e){var n=O,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),O=n}function Ae(e){var n=O;e.__c=e.__(),O=n}function ut(e,n){return!e||e.length!==n.length||n.some(function(r,s){return r!==e[s]})}function ht(e,n){return typeof n=="function"?n(e):n}function hn(e,n){for(var r in n)e[r]=n[r];return e}function pt(e,n){for(var r in e)if(r!=="__source"&&!(r in n))return!0;for(var s in n)if(s!=="__source"&&e[s]!==n[s])return!0;return!1}function ft(e,n){this.props=e,this.context=n}(ft.prototype=new q).isPureReactComponent=!0,ft.prototype.shouldComponentUpdate=function(e,n){return pt(this.props,e)||pt(this.state,n)};var mt=S.__b;S.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),mt&&mt(e)};var pn=S.__e;S.__e=function(e,n,r,s){if(e.then){for(var i,l=n;l=l.__;)if((i=l.__c)&&i.__c)return n.__e==null&&(n.__e=r.__e,n.__k=r.__k),i.__c(e,n)}pn(e,n,r,s)};var gt=S.unmount;function _t(e,n,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(s){typeof s.__c=="function"&&s.__c()}),e.__c.__H=null),(e=hn({},e)).__c!=null&&(e.__c.__P===r&&(e.__c.__P=n),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(s){return _t(s,n,r)})),e}function bt(e,n,r){return e&&r&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(s){return bt(s,n,r)}),e.__c&&e.__c.__P===n&&(e.__e&&r.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=r)),e}function se(){this.__u=0,this.o=null,this.__b=null}function yt(e){if(!e.__)return null;var n=e.__.__c;return n&&n.__a&&n.__a(e)}function D(e){var n,r,s,i=null;function l(a){if(n||(n=e()).then(function(c){c&&(i=c.default||c),s=!0},function(c){r=c,s=!0}),r)throw r;if(!s)throw n;return i?Z(i,a):null}return l.displayName="Lazy",l.__f=!0,l}function me(){this.i=null,this.l=null}S.unmount=function(e){var n=e.__c;n&&(n.__z=!0),n&&n.__R&&n.__R(),n&&32&e.__u&&(e.type=null),gt&&gt(e)},(se.prototype=new q).__c=function(e,n){var r=n.__c,s=this;s.o==null&&(s.o=[]),s.o.push(r);var i=yt(s.__v),l=!1,a=function(){l||s.__z||(l=!0,r.__R=null,i?i(u):u())};r.__R=a;var c=r.__P;r.__P=null;var u=function(){if(!--s.__u){if(s.state.__a){var d=s.state.__a;s.__v.__k[0]=bt(d,d.__c.__P,d.__c.__O)}var p;for(s.setState({__a:s.__b=null});p=s.o.pop();)p.__P=c,p.forceUpdate()}};s.__u++||32&n.__u||s.setState({__a:s.__b=s.__v.__k[0]}),e.then(a,a)},se.prototype.componentWillUnmount=function(){this.o=[]},se.prototype.render=function(e,n){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=_t(this.__b,r,s.__O=s.__P)}this.__b=null}var i=n.__a&&Z(B,null,e.fallback);return i&&(i.__u&=-33),[Z(B,null,n.__a?null:e.children),i]};var vt=function(e,n,r){if(++r[1]===r[0]&&e.l.delete(n),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(r=e.i;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;e.i=r=r[2]}};function fn(e){return this.getChildContext=function(){return e.context},e.children}function mn(e){var n=this,r=e.h;if(n.componentWillUnmount=function(){Ee(null,n.v),n.v=null,n.h=null},n.h&&n.h!==r&&n.componentWillUnmount(),!n.v){for(var s=n.__v;s!==null&&!s.__m&&s.__!==null;)s=s.__;n.h=r,n.v={nodeType:1,parentNode:r,childNodes:[],__k:{__m:s.__m},contains:function(){return!0},namespaceURI:r.namespaceURI,insertBefore:function(i,l){this.childNodes.push(i),n.h.insertBefore(i,l)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),n.h.removeChild(i)}}}Ee(Z(fn,{context:n.context},e.__v),n.v)}function gn(e,n){var r=Z(mn,{__v:e,h:n});return r.containerInfo=n,r}(me.prototype=new q).__a=function(e){var n=this,r=yt(n.__v),s=n.l.get(e);return s[0]++,function(i){var l=function(){n.props.revealOrder?(s.push(i),vt(n,e,s)):i()};r?r(l):l()}},me.prototype.render=function(e){this.i=null,this.l=new Map;var n=he(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&n.reverse();for(var r=n.length;r--;)this.l.set(n[r],this.i=[1,0,this.i]);return e.children},me.prototype.componentDidUpdate=me.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(n,r){vt(e,r,n)})};var _n=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,bn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,yn=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,vn=/[A-Z0-9]/g,wn=typeof document<"u",Nn=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};q.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(q.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(n){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:n})}})});var wt=S.event;function xn(){}function $n(){return this.cancelBubble}function kn(){return this.defaultPrevented}S.event=function(e){return wt&&(e=wt(e)),e.persist=xn,e.isPropagationStopped=$n,e.isDefaultPrevented=kn,e.nativeEvent=e};var Cn={enumerable:!1,configurable:!0,get:function(){return this.class}},Nt=S.vnode;S.vnode=function(e){typeof e.type=="string"&&(function(n){var r=n.props,s=n.type,i={},l=s.indexOf("-")===-1;for(var a in r){var c=r[a];if(!(a==="value"&&"defaultValue"in r&&c==null||wn&&a==="children"&&s==="noscript"||a==="class"||a==="className")){var u=a.toLowerCase();a==="defaultValue"&&"value"in r&&r.value==null?a="value":a==="download"&&c===!0?c="":u==="translate"&&c==="no"?c=!1:u[0]==="o"&&u[1]==="n"?u==="ondoubleclick"?a="ondblclick":u!=="onchange"||s!=="input"&&s!=="textarea"||Nn(r.type)?u==="onfocus"?a="onfocusin":u==="onblur"?a="onfocusout":yn.test(a)&&(a=u):u=a="oninput":l&&bn.test(a)?a=a.replace(vn,"-$&").toLowerCase():c===null&&(c=void 0),u==="oninput"&&i[a=u]&&(a="oninputCapture"),i[a]=c}}s=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=he(r.children).forEach(function(d){d.props.selected=i.value.indexOf(d.props.value)!=-1})),s=="select"&&i.defaultValue!=null&&(i.value=he(r.children).forEach(function(d){d.props.selected=i.multiple?i.defaultValue.indexOf(d.props.value)!=-1:i.defaultValue==d.props.value})),r.class&&!r.className?(i.class=r.class,Object.defineProperty(i,"className",Cn)):r.className&&(i.class=i.className=r.className),n.props=i})(e),e.$$typeof=_n,Nt&&Nt(e)};var xt=S.__r;S.__r=function(e){xt&&xt(e),e.__c};var $t=S.diffed;S.diffed=function(e){$t&&$t(e);var n=e.props,r=e.__e;r!=null&&e.type==="textarea"&&"value"in n&&n.value!==r.value&&(r.value=n.value==null?"":n.value)};var Sn={Fragment:B};class ge extends Error{status;constructor(n=403){super(`Unauthorized (HTTP ${n})`),this.name="UnauthorizedError",this.status=n}}class Tn extends Error{status;body;constructor(n,r){super(`API error (HTTP ${n})`),this.name="ApiError",this.status=n,this.body=r}}class ie{baseUrl;authToken;constructor(n){this.baseUrl=n.baseUrl.replace(/\/+$/,""),this.authToken=n.authToken}async fetch(n,r){const i={...{Accept:"application/json",...this.authToken?{Authorization:`Bearer ${this.authToken}`}:{}},...r?.headers},l=await globalThis.fetch(`${this.baseUrl}${n}`,{...r,headers:i,credentials:this.authToken?"omit":"include"});if(l.status===401||l.status===403)throw new ge(l.status);if(!l.ok){const a=await l.text().catch(()=>"");throw new Tn(l.status,a)}return l.json()}async get(n,r){const s=r?`${n}?${r}`:n;return this.fetch(s)}async post(n,r){const s={method:"POST",...r!==void 0?{body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}:{}};return this.fetch(n,s)}async delete(n){return this.fetch(n,{method:"DELETE"})}}const kt="/admin/api/debug",Ct={tracing:!1,process:!1,system:!1,http:!1,db:!1,redis:!1,queues:!1,cache:!1,app:!1,log:!1,emails:!1,dashboard:!1,customPanes:[]};function Ln(e){return{tracing:e.features?.tracing??!1,process:e.features?.process??!1,system:e.features?.system??!1,http:e.features?.http??!1,db:e.features?.db??!1,redis:e.features?.redis??!1,queues:e.features?.queues??!1,cache:e.features?.cache??!1,app:e.features?.app??!1,log:e.features?.log??!1,emails:e.features?.emails??!1,dashboard:e.features?.dashboard??!1,customPanes:e.customPanes??[]}}async function En(e,n=kt){const r=`${n.replace(/\/+$/,"")}/config`;return e.fetch(r)}async function Mn(e){const{baseUrl:n="",debugEndpoint:r=kt,authToken:s}=e,i=new ie({baseUrl:n,authToken:s});try{const l=await En(i,r);return Ln(l)}catch{return Ct}}function Pn(e){const n=new Set,r="features"in e&&typeof e.features=="object"&&e.features!==null?e.features:e;return"process"in r&&r.process&&n.add("process"),("process"in r&&r.process||"system"in r&&r.system)&&n.add("memory"),"http"in r&&r.http&&n.add("http"),"db"in r&&r.db&&n.add("db"),"redis"in r&&r.redis&&n.add("redis"),"queues"in r&&r.queues&&n.add("queue"),"app"in r&&r.app&&n.add("app"),"log"in r&&r.log&&n.add("log"),n}function An(e){const n=new Set;return(A(e.cpuPercent)||A(e.uptime)||On(e.nodeVersion))&&n.add("process"),(A(e.memHeapUsed)||A(e.memRss))&&n.add("memory"),(A(e.systemMemoryTotalMb)||A(e.systemMemoryFreeMb))&&n.add("memory"),(A(e.requestsPerSecond)||A(e.avgResponseTimeMs)||A(e.errorRate)||A(e.activeHttpConnections))&&n.add("http"),(A(e.dbPoolMax)||A(e.dbPoolUsed)||A(e.dbPoolFree)||A(e.dbPoolPending))&&n.add("db"),e.redisOk!==void 0&&e.redisOk!==null&&n.add("redis"),(A(e.queueActive)||A(e.queueWaiting)||A(e.queueWorkerCount))&&n.add("queue"),(A(e.onlineUsers)||A(e.pendingWebhooks)||A(e.pendingEmails))&&n.add("app"),(A(e.logErrorsLast5m)||A(e.logEntriesPerMinute))&&n.add("log"),n}function A(e){return typeof e=="number"&&!Number.isNaN(e)}function On(e){return typeof e=="string"&&e.length>0}function Rn(e){const n=Math.floor(e/86400),r=Math.floor(e%86400/3600),s=Math.floor(e%3600/60);return n>0?`${n}d ${r}h`:r>0?`${r}h ${s}m`:`${s}m`}function Oe(e){const n=e/1048576;return n>=1024?`${(n/1024).toFixed(1)}G`:`${n.toFixed(0)}M`}function St(e){return e>=1024?`${(e/1024).toFixed(1)}G`:`${e.toFixed(1)}M`}function In(e){return e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:`${e}`}function W(e){return e>=1e3?`${(e/1e3).toFixed(2)}s`:e>=1?`${e.toFixed(0)}ms`:`${e.toFixed(2)}ms`}function V(e){if(!e)return"-";const n=typeof e=="string"?new Date(e):new Date(e);return Number.isNaN(n.getTime())?"-":n.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})+"."+String(n.getMilliseconds()).padStart(3,"0")}function K(e){if(!e)return"-";const n=typeof e=="string"?new Date(e).getTime():e,r=Math.floor((Date.now()-n)/1e3);return r<0?"just now":r<60?`${r}s ago`:r<3600?`${Math.floor(r/60)}m ago`:r<86400?`${Math.floor(r/3600)}h ago`:`${Math.floor(r/86400)}d ago`}function Re(e,n){switch(n){case"%":return`${e.toFixed(1)}%`;case"ms":return`${e.toFixed(0)}ms`;case"MB":return`${e.toFixed(1)}M`;case"bytes":return Oe(e);case"/s":case"/m":return e.toFixed(1);default:return e.toFixed(1)}}function _e(e,n,r){return e>r?"red":e>n?"amber":"green"}function Bn(e,n,r){return e<r?"red":e<n?"amber":"green"}function Tt(e,n){if(n===0)return"green";const r=e/n;return r>.8?"red":r>.5?"amber":"green"}const Fn={green:"ss-green",amber:"ss-amber",red:"ss-red"};function be(e,n=100){if(e===null)return"null";if(e===void 0)return"-";if(typeof e=="string")return'"'+(e.length>40?e.slice(0,40)+"...":e)+'"';if(typeof e=="number"||typeof e=="boolean")return String(e);if(Array.isArray(e)){if(e.length===0)return"[]";const s="["+e.slice(0,3).map(i=>be(i,30)).join(", ")+(e.length>3?", ..."+e.length+" items":"")+"]";return s.length>n?"["+e.length+" items]":s}if(typeof e=="object"){const r=Object.keys(e);if(r.length===0)return"{}";const s=[];for(let l=0;l<Math.min(r.length,4);l++)s.push(r[l]+": "+be(e[r[l]],30));const i="{ "+s.join(", ")+(r.length>4?", ...+"+(r.length-4):"")+" }";return i.length>n?"{ "+r.slice(0,6).join(", ")+(r.length>6?", ...":"")+" }":i}return String(e)}function X(e){return Fn[e]||""}const Lt=[{id:"node",label:"NODE",title:"Node.js Runtime",unit:"",group:"process",extract:e=>0,format:e=>e.nodeVersion,color:()=>""},{id:"uptime",label:"UP",title:"Process Uptime",unit:"",group:"process",extract:e=>e.uptime,format:e=>Rn(e.uptime),color:()=>""},{id:"cpu",label:"CPU",title:"CPU Usage",unit:"%",group:"process",warnThreshold:50,critThreshold:80,extract:e=>e.cpuPercent,format:e=>`${e.cpuPercent.toFixed(1)}%`,color:e=>X(_e(e.cpuPercent,50,80)),historyKey:"cpuPercent"},{id:"eventLoop",label:"EVT",title:"Event Loop Latency",unit:"ms",group:"process",warnThreshold:20,critThreshold:50,extract:e=>e.eventLoopLag,format:e=>`${e.eventLoopLag.toFixed(1)}ms`,color:e=>X(_e(e.eventLoopLag,20,50)),historyKey:"eventLoopLag"},{id:"memory",label:"HEAP",title:"V8 Heap Usage",unit:"bytes",group:"memory",extract:e=>e.memHeapUsed,format:e=>Oe(e.memHeapUsed),color:()=>"",historyKey:"memHeapUsed"},{id:"rss",label:"RSS",title:"Resident Set Size",unit:"bytes",group:"memory",extract:e=>e.memRss,format:e=>Oe(e.memRss),color:()=>"",historyKey:"memRss"},{id:"systemMemory",label:"SYS",title:"System Memory",unit:"MB",group:"memory",extract:e=>e.systemMemoryTotalMb-e.systemMemoryFreeMb,format:e=>`${St(e.systemMemoryTotalMb-e.systemMemoryFreeMb)}/${St(e.systemMemoryTotalMb)}`,color:e=>{const n=e.systemMemoryTotalMb;if(n===0)return"";const r=n-e.systemMemoryFreeMb;return X(Tt(r,n))},historyKey:"_sysMemUsed",show:e=>e.systemMemoryTotalMb!==null&&e.systemMemoryTotalMb!==void 0},{id:"reqPerSec",label:"REQ/s",title:"Requests per Second",unit:"/s",group:"http",extract:e=>e.requestsPerSecond,format:e=>e.requestsPerSecond.toFixed(1),color:()=>"",historyKey:"requestsPerSecond"},{id:"avgResponse",label:"AVG",title:"Avg Response Time",unit:"ms",group:"http",warnThreshold:200,critThreshold:500,extract:e=>e.avgResponseTimeMs,format:e=>`${e.avgResponseTimeMs.toFixed(0)}ms`,color:e=>X(_e(e.avgResponseTimeMs,200,500)),historyKey:"avgResponseTimeMs"},{id:"errorRate",label:"ERR",title:"Error Rate",unit:"%",group:"http",warnThreshold:1,critThreshold:5,extract:e=>e.errorRate,format:e=>`${e.errorRate.toFixed(1)}%`,color:e=>X(_e(e.errorRate,1,5)),historyKey:"errorRate"},{id:"connections",label:"CONN",title:"Active Connections",unit:"",group:"http",extract:e=>e.activeHttpConnections,format:e=>`${e.activeHttpConnections}`,color:()=>"",historyKey:"activeHttpConnections"},{id:"dbPool",label:"DB",title:"Database Pool",unit:"",group:"db",extract:e=>e.dbPoolUsed,format:e=>`${e.dbPoolUsed}/${e.dbPoolFree}/${e.dbPoolMax}`,color:e=>X(Tt(e.dbPoolUsed,e.dbPoolMax)),historyKey:"dbPoolUsed"},{id:"redis",label:"REDIS",title:"Redis Status",unit:"",group:"redis",extract:e=>e.redisOk?1:0,format:e=>e.redisOk?"✓":"✗",color:e=>e.redisOk?"ss-green":"ss-red"},{id:"redisMem",label:"MEM",title:"Redis Memory",unit:"MB",group:"redis",extract:e=>e.redisMemoryUsedMb,format:e=>`${e.redisMemoryUsedMb.toFixed(1)}M`,color:()=>"",historyKey:"redisMemoryUsedMb",show:e=>e.redisOk},{id:"redisKeys",label:"KEYS",title:"Redis Keys",unit:"",group:"redis",extract:e=>e.redisKeysCount,format:e=>In(e.redisKeysCount),color:()=>"",historyKey:"redisKeysCount",show:e=>e.redisOk},{id:"redisHitRate",label:"HIT",title:"Redis Hit Rate",unit:"%",group:"redis",warnThreshold:90,critThreshold:70,inverseThreshold:!0,extract:e=>e.redisHitRate,format:e=>`${e.redisHitRate.toFixed(0)}%`,color:e=>X(Bn(e.redisHitRate,90,70)),historyKey:"redisHitRate",show:e=>e.redisOk},{id:"queue",label:"Q",title:"Job Queue",unit:"",group:"queue",extract:e=>e.queueActive,format:e=>`${e.queueActive}/${e.queueWaiting}/${e.queueDelayed}`,color:e=>e.queueFailed>0?"ss-amber":"ss-green",historyKey:"queueActive"},{id:"queueWorkers",label:"WORKERS",title:"Queue Workers",unit:"",group:"queue",extract:e=>e.queueWorkerCount,format:e=>`${e.queueWorkerCount}`,color:()=>""},{id:"onlineUsers",label:"USERS",title:"Online Users",unit:"",group:"app",extract:e=>e.onlineUsers,format:e=>`${e.onlineUsers}`,color:()=>"",historyKey:"onlineUsers"},{id:"pendingWebhooks",label:"HOOKS",title:"Pending Webhooks",unit:"",group:"app",extract:e=>e.pendingWebhooks,format:e=>`${e.pendingWebhooks}`,color:e=>e.pendingWebhooks>0?"ss-amber":"",historyKey:"pendingWebhooks"},{id:"pendingEmails",label:"MAIL",title:"Pending Emails",unit:"",group:"app",extract:e=>e.pendingEmails,format:e=>`${e.pendingEmails}`,color:e=>e.pendingEmails>0?"ss-amber":"",historyKey:"pendingEmails"},{id:"logErrors",label:"LOG ERR",title:"Log Errors (5m)",unit:"",group:"log",extract:e=>e.logErrorsLast5m,format:e=>`${e.logErrorsLast5m}`,color:e=>e.logErrorsLast5m>0?"ss-red":e.logWarningsLast5m>0?"ss-amber":"",historyKey:"logErrorsLast5m"},{id:"logRate",label:"LOG/m",title:"Log Entries / Minute",unit:"/m",group:"log",extract:e=>e.logEntriesPerMinute,format:e=>`${e.logEntriesPerMinute}`,color:()=>"",historyKey:"logEntriesPerMinute"}],jn=60,Un=1e4;function Et(e={}){const{baseUrl:n="",debugEndpoint:r="/admin/api/debug",authToken:s}=e,[i,l]=$(Ct),[a,c]=$(!0),[u,d]=$(null),p=M(!1);return P(()=>{if(p.current)return;p.current=!0;let o=!1;return(async()=>{try{const h=await Mn({baseUrl:n,debugEndpoint:r,authToken:s});o||(l(h),c(!1))}catch(h){o||(d(h instanceof Error?h:new Error(String(h))),c(!1))}})(),()=>{o=!0}},[n,r,s]),{features:i,isLoading:a,error:u}}function Dn(e=jn){const n={};return{push(r){for(const s of Lt){const i=s.historyKey;if(!i)continue;const l=s.extract(r);typeof l=="number"&&(n[i]||(n[i]=[]),n[i].push(l),n[i].length>e&&n[i].shift())}},get(r){return n[r]||[]},getAll(){return n}}}async function Hn(){if(typeof window<"u"&&window.Transmit&&typeof window.Transmit=="function")return window.Transmit;try{const e=await import("@adonisjs/transmit-client");return e.Transmit??e.default??null}catch{return null}}function zn(e){let n=null,r=null,s=!1;return{subscribe:async()=>{try{const a=await Hn();if(!a)throw new Error("Transmit client not available (neither window.Transmit nor @adonisjs/transmit-client)");if(s)return;n=new a({baseUrl:e.baseUrl||window.location.origin,...e.authToken?{beforeSubscribe(c){return{headers:{Authorization:`Bearer ${e.authToken}`}}},beforeUnsubscribe(c){return{headers:{Authorization:`Bearer ${e.authToken}`}}}}:{}}),r=n.subscription(e.channelName),r.onMessage(c=>{s||e.onMessage(c)}),await r.create()}catch(a){e.onError&&e.onError(a)}},unsubscribe:async()=>{s=!0;try{r&&(await r.delete(),r=null),n&&(n=null)}catch{}}}}function qn(e){let n=!1;const r=zn({baseUrl:e.baseUrl,channelName:e.channelName,authToken:e.authToken,onMessage:e.onMessage,onError:s=>{n=!0,e.onError?.(s),e.onDisconnect?.()}});return r.subscribe().then(()=>{n||e.onConnect?.()}).catch(s=>{e.onError?.(s),e.onDisconnect?.()}),{unsubscribe:()=>{r.unsubscribe().catch(()=>{})}}}function Wn(e={}){const{baseUrl:n="",endpoint:r="/admin/api/server-stats",channelName:s="admin/server-stats",authToken:i,pollInterval:l=3e3}=e,[a,c]=$(null),[u,d]=$(!1),[p,o]=$(!1),[f,h]=$(null),[m,y]=$(!1),b=M(Dn()),g=M(0),_=M(null),N=M(null),k=M(null),v=M(null),C=T(x=>{c(x),h(null),g.current=Date.now(),o(!1),b.current.push(x)},[]),w=T(async()=>{if(!m){v.current||(v.current=new ie({baseUrl:n,authToken:i}));try{const x=await v.current.get(r);C(x)}catch(x){x instanceof ge&&(y(!0),h(x))}}},[n,r,i,m,C]);P(()=>{if(m)return;let x=!1;try{const F=qn({baseUrl:n,channelName:s,authToken:i,onMessage:G=>{G&&typeof G=="object"&&"timestamp"in G&&C(G)},onConnect:()=>{d(!0),_.current&&(clearInterval(_.current),_.current=null)},onDisconnect:()=>{d(!1),!_.current&&!m&&(_.current=setInterval(w,l))},onError:()=>{x=!0}});k.current=F}catch{x=!0}if(w(),x||!k.current)_.current=setInterval(w,l);else{const F=setTimeout(()=>{!u&&!_.current&&(_.current=setInterval(w,l))},3e3),G=k.current?.unsubscribe;k.current&&(k.current.unsubscribe=()=>{clearTimeout(F),G?.()})}return N.current=setInterval(()=>{g.current>0&&Date.now()-g.current>Un&&o(!0)},2e3),()=>{k.current?.unsubscribe(),k.current=null,_.current&&(clearInterval(_.current),_.current=null),N.current&&(clearInterval(N.current),N.current=null)}},[n,s,i,l,m]);const E=T(x=>b.current.get(x),[]);return{stats:a,history:b.current.getAll(),getHistory:E,isConnected:u,isStale:p,error:f,unauthorized:m}}const ye="ss-dash-theme",Ie="ss-theme-change";function Be(){if(typeof window>"u")return"light";const e=localStorage.getItem(ye);return e==="dark"||e==="light"?e:window.matchMedia?.("(prefers-color-scheme: dark)").matches?"dark":"light"}function Vn(e){typeof window>"u"||(localStorage.setItem(ye,e),window.dispatchEvent(new CustomEvent(Ie,{detail:e})))}function Kn(){const n=Be()==="dark"?"light":"dark";return Vn(n),n}function Jn(e){if(typeof window>"u")return()=>{};const n=l=>{const a=l.detail;(a==="dark"||a==="light")&&e(a)},r=l=>{if(l.key===ye){const a=l.newValue;e(a==="dark"||a==="light"?a:Be())}},s=window.matchMedia("(prefers-color-scheme: dark)"),i=l=>{localStorage.getItem(ye)||e(l.matches?"dark":"light")};return window.addEventListener(Ie,n),window.addEventListener("storage",r),s.addEventListener("change",i),()=>{window.removeEventListener(Ie,n),window.removeEventListener("storage",r),s.removeEventListener("change",i)}}function Mt(){const[e,n]=$(()=>Be());P(()=>Jn(i=>{n(i)}),[]);const r=T(()=>{const s=Kn();return n(s),s},[]);return{theme:e,toggleTheme:r}}const Y={color:"#34d399",fillOpacityTop:.25,fillOpacityBottom:.02,strokeWidth:1.5,width:120,height:32,padding:2};function Gn(e){return{...Y,...e}}function Qn(e,n=Y.width,r=Y.height,s=Y.padding){if(e.length<2)return null;const i=n-s*2,l=r-s*2,a=Math.min(...e),u=Math.max(...e)-a||1;return e.map((p,o)=>{const f=s+o/(e.length-1)*i,h=s+l-(p-a)/u*l;return`${f.toFixed(1)},${h.toFixed(1)}`}).join(" ")}function Xn(e,n=Y.width,r=Y.height,s=Y.padding){if(e.length<2)return null;const i=n-s*2,l=r-s*2,a=Math.min(...e),u=Math.max(...e)-a||1,d=e.map((h,m)=>{const y=s+m/(e.length-1)*i,b=s+l-(h-a)/u*l;return`${y.toFixed(1)},${b.toFixed(1)}`}),p=(s+i).toFixed(1),o=(s+l).toFixed(1),f=s.toFixed(1);return`M${d[0]} `+d.slice(1).map(h=>`L${h}`).join(" ")+` L${p},${o} L${f},${o} Z`}let Yn=0;function Zn(){return`ss-grad-${Yn++}`}function Pt(e){if(e.length===0)return null;const n=Math.min(...e),r=Math.max(...e),s=e.reduce((i,l)=>i+l,0)/e.length;return{min:n,max:r,avg:s}}function er(e,n){const r=Gn(n),s=Qn(e,r.width,r.height,r.padding),i=Xn(e,r.width,r.height,r.padding);return!s||!i?null:{points:s,areaPath:i,gradientId:Zn(),options:r,stats:Pt(e)}}function tr({data:e,color:n="#34d399",width:r=120,height:s=32,className:i=""}){const l=L(()=>er(e,{width:r,height:s}),[e,r,s]),a=L(()=>"ss-grad-"+Math.random().toString(36).slice(2,8),[]),c={"--ss-accent":n};if(!l)return t("div",{className:`ss-dash-sparkline ${i}`,style:c,children:t("svg",{width:r,height:s,viewBox:`0 0 ${r} ${s}`,style:{display:"block"},children:t("text",{x:r/2,y:s/2+3,textAnchor:"middle",fill:"#737373",fontSize:"9",children:["collecting","…"]})})});const u=n||"var(--ss-accent)";return t("div",{className:`ss-dash-sparkline ${i}`,style:c,children:t("svg",{width:r,height:s,viewBox:`0 0 ${r} ${s}`,style:{display:"block"},children:[t("defs",{children:t("linearGradient",{id:a,x1:"0",y1:"0",x2:"0",y2:"1",children:[t("stop",{offset:"0%",stopColor:u,stopOpacity:"0.25"}),t("stop",{offset:"100%",stopColor:u,stopOpacity:"0.02"})]})}),t("path",{d:l.areaPath,fill:`url(#${a})`}),t("path",{className:"ss-dash-sparkline-line",d:"M"+l.points.replace(/ /g," L"),fill:"none",stroke:u,strokeWidth:"1.5",strokeLinejoin:"round",strokeLinecap:"round"})]})})}const nr={"ss-red":"#f87171","ss-amber":"#fbbf24","ss-green":"#34d399","ss-muted":"#737373"};function rr(e,n,r){const[s,i]=$({position:"absolute",bottom:"100%",left:0,marginBottom:"10px",zIndex:180});return P(()=>{if(!r)return;const l=()=>{const c=e.current,u=n.current;if(!c||!u)return;const d=c.closest(".ss-bar");if(!d)return;const p=c.getBoundingClientRect(),o=d.getBoundingClientRect(),f=p.left-o.left+p.width/2;i({position:"absolute",bottom:"100%",left:`${f}px`,transform:"translateX(-50%)",marginBottom:"10px",zIndex:180}),requestAnimationFrame(()=>{const h=u.getBoundingClientRect();let m=0;h.left<8?m=8-h.left:h.right>window.innerWidth-8&&(m=window.innerWidth-8-h.right),m&&i(y=>({...y,transform:`translateX(calc(-50% + ${m}px))`}))})};l();const a=e.current?.closest(".ss-bar-scroll");return a?.addEventListener("scroll",l),window.addEventListener("resize",l),()=>{a?.removeEventListener("scroll",l),window.removeEventListener("resize",l)}},[r,e,n]),s}function sr({metric:e,stats:n,history:r,className:s=""}){const[i,l]=$(!1),[a,c]=$(!1),u=M(null),d=M(null);if(e.show&&!e.show(n))return null;const p=e.value?e.value(n):e.format(n),o=e.color?e.color(n):"",f=o&&nr[o]||"#34d399",h=typeof e.detail=="function"?e.detail(n):e.detail,m=L(()=>Pt(r),[r]),y=i||a,b=rr(u,d,y),g=T(k=>{k.stopPropagation(),l(v=>!v)},[]);P(()=>{if(!i)return;const k=C=>{const w=C.target;u.current&&!u.current.contains(w)&&d.current&&!d.current.contains(w)&&l(!1)},v=C=>{C.key==="Escape"&&l(!1)};return document.addEventListener("click",k),document.addEventListener("keydown",v),()=>{document.removeEventListener("click",k),document.removeEventListener("keydown",v)}},[i]);const _=u.current?.closest(".ss-bar"),N=y&&_?gn(t("div",{ref:d,className:`ss-tooltip ${i?"ss-pinned":""}`,style:b,children:[t("div",{className:"ss-tooltip-inner",style:{position:"relative"},children:[i&&t("button",{className:"ss-tooltip-close",onClick:k=>{k.stopPropagation(),l(!1)},type:"button",children:"×"}),t("div",{className:"ss-tooltip-header",children:[t("span",{className:"ss-tooltip-title",children:e.title}),e.unit&&t("span",{className:"ss-tooltip-unit",children:e.unit})]}),t("div",{className:"ss-tooltip-current",children:[t("span",{className:"ss-tooltip-current-label",children:"Current: "}),t("span",{className:"ss-tooltip-current-value",children:p})]}),m&&t("div",{className:"ss-tooltip-stats",children:[t("span",{children:["Min: ",Re(m.min,e.unit)]}),t("span",{children:["Max: ",Re(m.max,e.unit)]}),t("span",{children:["Avg: ",Re(m.avg,e.unit)]})]}),h&&t("div",{className:"ss-tooltip-details",children:h}),r.length>0&&t(B,{children:[t("div",{className:"ss-tooltip-sparkline",children:t(tr,{data:r,color:f})}),t("div",{className:"ss-tooltip-samples",children:["Last ",Math.min(r.length,60)," samples (~",Math.round(Math.min(r.length,60)*3/60)," min)"]})]})]}),t("div",{className:"ss-tooltip-arrow"})]}),_):null;return t(B,{children:[t("div",{ref:u,className:`ss-badge ${i?"ss-pinned":""} ${s}`,onClick:g,onMouseEnter:()=>!i&&c(!0),onMouseLeave:()=>c(!1),role:"button",tabIndex:0,onKeyDown:k=>k.key==="Enter"&&g(k),children:[t("span",{className:"ss-label",children:e.label}),t("span",{className:`ss-value ${o}`,children:p})]}),N]})}const R={queries:{viewBox:"0 0 24 24",elements:['<ellipse cx="12" cy="5" rx="9" ry="3"/>','<path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/>','<path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/>']},events:{viewBox:"0 0 24 24",elements:['<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>']},emails:{viewBox:"0 0 24 24",elements:['<path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>','<polyline points="22,6 12,13 2,6"/>']},routes:{viewBox:"0 0 24 24",elements:['<circle cx="12" cy="12" r="10"/>','<line x1="2" y1="12" x2="22" y2="12"/>','<path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>']},logs:{viewBox:"0 0 24 24",elements:['<line x1="8" y1="6" x2="21" y2="6"/>','<line x1="8" y1="12" x2="21" y2="12"/>','<line x1="8" y1="18" x2="21" y2="18"/>','<line x1="3" y1="6" x2="3.01" y2="6"/>','<line x1="3" y1="12" x2="3.01" y2="12"/>','<line x1="3" y1="18" x2="3.01" y2="18"/>']},timeline:{viewBox:"0 0 24 24",elements:['<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>']},cache:{viewBox:"0 0 24 24",elements:['<rect x="2" y="2" width="20" height="8" rx="2" ry="2"/>','<rect x="2" y="14" width="20" height="8" rx="2" ry="2"/>','<line x1="6" y1="6" x2="6.01" y2="6"/>','<line x1="6" y1="18" x2="6.01" y2="18"/>']},jobs:{viewBox:"0 0 24 24",elements:['<rect x="2" y="7" width="20" height="14" rx="2" ry="2"/>','<path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/>']},config:{viewBox:"0 0 24 24",elements:['<circle cx="12" cy="12" r="3"/>','<path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>']},internals:{viewBox:"0 0 24 24",elements:['<rect x="4" y="4" width="16" height="16" rx="2"/>','<rect x="9" y="9" width="6" height="6"/>','<line x1="9" y1="1" x2="9" y2="4"/>','<line x1="15" y1="1" x2="15" y2="4"/>','<line x1="9" y1="20" x2="9" y2="23"/>','<line x1="15" y1="20" x2="15" y2="23"/>','<line x1="20" y1="9" x2="23" y2="9"/>','<line x1="20" y1="14" x2="23" y2="14"/>','<line x1="1" y1="9" x2="4" y2="9"/>','<line x1="1" y1="14" x2="4" y2="14"/>']},overview:{viewBox:"0 0 24 24",elements:['<rect x="3" y="3" width="7" height="7"/>','<rect x="14" y="3" width="7" height="7"/>','<rect x="14" y="14" width="7" height="7"/>','<rect x="3" y="14" width="7" height="7"/>']},requests:{viewBox:"0 0 24 24",elements:['<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>']},"dashboard-timeline":{viewBox:"0 0 24 24",elements:['<circle cx="12" cy="12" r="10"/>','<polyline points="12 6 12 12 16 14"/>']},"custom-pane":{viewBox:"0 0 24 24",elements:['<rect x="3" y="3" width="18" height="18" rx="2"/>','<path d="M9 3v18"/>']},wrench:{viewBox:"0 0 24 24",elements:['<path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>']},"external-link":{viewBox:"0 0 24 24",elements:['<path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>','<polyline points="15 3 21 3 21 9"/>','<line x1="10" y1="14" x2="21" y2="3"/>']},sun:{viewBox:"0 0 24 24",elements:['<circle cx="12" cy="12" r="5"/>','<line x1="12" y1="1" x2="12" y2="3"/>','<line x1="12" y1="21" x2="12" y2="23"/>','<line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>','<line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>','<line x1="1" y1="12" x2="3" y2="12"/>','<line x1="21" y1="12" x2="23" y2="12"/>','<line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>','<line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>']},moon:{viewBox:"0 0 24 24",elements:['<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>']},search:{viewBox:"0 0 24 24",elements:['<circle cx="11" cy="11" r="8"/>','<line x1="21" y1="21" x2="16.65" y2="16.65"/>']},eye:{viewBox:"0 0 24 24",elements:['<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>','<circle cx="12" cy="12" r="3"/>']},"eye-off":{viewBox:"0 0 24 24",elements:['<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94"/>','<path d="M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19"/>','<line x1="1" y1="1" x2="23" y2="23"/>','<path d="M14.12 14.12a3 3 0 1 1-4.24-4.24"/>']},"chevron-right":{viewBox:"0 0 24 24",elements:['<path d="M9 18l6-6-6-6"/>']},"chevron-left":{viewBox:"0 0 24 24",elements:['<path d="M15 18l-6-6 6-6"/>']},"open-external":{viewBox:"0 0 16 16",elements:['<path d="M6 3H3v10h10v-3M9 1h6v6M7 9L15 1"/>']}};function ir(e){const{featureOptions:n,autoHideOnUnauthorized:r=!0,onOpenDebugPanel:s,debugPanelOpen:i=!1,onConnectionChange:l,...a}=e,{stats:c,getHistory:u,isConnected:d,isStale:p,unauthorized:o}=Wn(a);P(()=>{l?.(d)},[d,l]);const{features:f}=Et(n),{theme:h}=Mt(),[m,y]=$(()=>typeof window>"u"?!0:localStorage.getItem("admin:stats-bar")!=="hidden"),b=M(null),g=M(null);P(()=>{r&&o&&y(!1)},[r,o]);const _=T(()=>{y(C=>{const w=!C;return localStorage.setItem("admin:stats-bar",w?"visible":"hidden"),w})},[]);P(()=>{const C=g.current;if(!C)return;const w=E=>{Math.abs(E.deltaX)>Math.abs(E.deltaY)||(E.preventDefault(),C.scrollLeft+=E.deltaY)};return C.addEventListener("wheel",w,{passive:!1}),()=>C.removeEventListener("wheel",w)},[]);const N=L(()=>c?An(c):Pn(f),[c,f]),k=L(()=>Lt.filter(C=>N.has(C.group||"core")),[N]),v=L(()=>{const C=[];let w="";for(const E of k){const x=E.group||"core";x!==w&&(w=x,C.push({group:w,metrics:[]})),C[C.length-1].metrics.push(E)}return C},[k]);return r&&o?null:t(B,{children:[t("button",{type:"button",className:`ss-toggle ${m?"ss-visible":"ss-collapsed"}`,onClick:_,title:m?"Hide stats bar":"Show stats bar","data-ss-theme":h,children:[!m&&c&&t("span",{className:"ss-toggle-summary",style:{display:"flex"},children:[N.has("process")&&t(B,{children:[t("span",{className:`ss-value ${c.cpuPercent>80?"ss-red":c.cpuPercent>50?"ss-amber":"ss-green"}`,children:[c.cpuPercent.toFixed(0),"%"]}),t("span",{className:"ss-value ss-green",children:c.memHeapUsed!==void 0?Math.round(c.memHeapUsed/(1024*1024))+"M":"-"})]}),N.has("redis")&&c.redisOk!==void 0&&t("span",{className:`ss-value ${c.redisOk?"ss-green":"ss-red"}`,children:c.redisOk?"✓":"✗"})]}),m&&t("span",{className:"ss-toggle-label",style:{color:"#737373"},children:"hide stats"}),t("span",{className:"ss-toggle-arrow",children:m?"▼":"▲"})]}),t("div",{ref:b,className:m?"ss-bar":"ss-bar ss-hidden","data-ss-theme":h,children:[t("div",{className:"ss-bar-left",children:[s&&t("button",{type:"button",className:`ss-dbg-btn ${i?"ss-dbg-active":""}`,onClick:s,title:"Toggle debug panel",id:"ss-dbg-wrench",children:t("svg",{width:"14",height:"14",viewBox:R.wrench.viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:R.wrench.elements.join("")}})}),t("div",{className:p?"ss-dot ss-stale":"ss-dot"})]}),t("div",{ref:g,className:"ss-bar-scroll",id:"ss-bar-scroll",children:c&&v.map((C,w)=>t(Sn.Fragment,{children:[w>0&&t("div",{className:"ss-group-sep"}),t("div",{className:"ss-group",children:C.metrics.map(E=>t(sr,{metric:E,stats:c,history:u(E.historyKey||"")},E.id))})]},C.group))})]})]})}function lr({theme:e,onToggle:n,className:r="",classPrefix:s="ss-dash"}){const i=e==="dark";return t("button",{type:"button",className:`${s==="ss-dbg"?"ss-dbg-theme-toggle":"ss-dash-theme-btn"} ${r}`,onClick:n,title:i?"Switch to light theme":"Switch to dark theme","aria-label":i?"Switch to light theme":"Switch to dark theme",children:i?t("svg",{width:"16",height:"16",viewBox:R.sun.viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:R.sun.elements.join("")}}):t("svg",{width:"16",height:"16",viewBox:R.moon.viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:R.moon.elements.join("")}})})}const or=D(()=>Promise.resolve().then(()=>$r)),ar=D(()=>Promise.resolve().then(()=>kr)),cr=D(()=>Promise.resolve().then(()=>Cr)),dr=D(()=>Promise.resolve().then(()=>Sr)),ur=D(()=>Promise.resolve().then(()=>Lr)),hr=D(()=>Promise.resolve().then(()=>Mr)),pr=D(()=>Promise.resolve().then(()=>Pr)),fr=D(()=>Promise.resolve().then(()=>Or)),mr=D(()=>Promise.resolve().then(()=>Hr)),gr=D(()=>Promise.resolve().then(()=>Qr)),_r=D(()=>Promise.resolve().then(()=>Xr));function br(e){const{defaultOpen:n=!1,dashboardPath:r,isOpen:s,onOpenChange:i,isLive:l=!1,...a}=e,[c,u]=$(n),d=s!==void 0?s:c,p=v=>{i?i(v):u(v)},[o,f]=$("queries"),{features:h}=Et(a),{theme:m,toggleTheme:y}=Mt(),b=h.customPanes||[];P(()=>{const v=C=>{C.key==="Escape"&&d&&p(!1)};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[d]);const g=L(()=>[{id:"queries",label:"Queries",visible:!0},{id:"events",label:"Events",visible:!0},{id:"emails",label:"Emails",visible:!0},{id:"routes",label:"Routes",visible:!0},{id:"logs",label:"Logs",visible:!0},{id:"timeline",label:"Timeline",visible:h.tracing},{id:"cache",label:"Cache",visible:h.cache},{id:"jobs",label:"Jobs",visible:h.queues},{id:"config",label:"Config",visible:!0},{id:"internals",label:"Internals",visible:!0}],[h]),_=L(()=>g.filter(v=>v.visible),[g]);P(()=>{const v=[..._.map(C=>C.id),...b.map(C=>C.id)];!v.includes(o)&&v.length>0&&f(v[0])},[_,b,o]);const N=T(()=>{p(!d)},[d]),k=T(()=>{const v={options:a},C=b.find(E=>E.id===o);if(C)return t(se,{fallback:t("div",{className:"ss-dbg-empty",children:"Loading..."}),children:t(_r,{pane:C,options:a})});const w={queries:t(or,{...v}),events:t(ar,{...v}),emails:t(cr,{...v}),routes:t(dr,{...v,currentPath:typeof window<"u"?window.location.pathname:""}),logs:t(ur,{...v}),timeline:t(hr,{...v}),cache:t(pr,{...v,dashboardPath:r}),jobs:t(fr,{...v,dashboardPath:r}),config:t(mr,{...v,dashboardPath:r}),internals:t(gr,{...v})};return t(se,{fallback:t("div",{className:"ss-dbg-empty",children:"Loading..."}),children:w[o]||t("div",{className:"ss-dbg-empty",children:"Unknown tab"})})},[o,a,b]);return t(B,{children:[s===void 0&&t("button",{type:"button",className:`ss-dbg-btn ${d?"ss-dbg-active":""}`,onClick:N,title:"Toggle debug panel",id:"ss-dbg-wrench",children:t("svg",{width:"14",height:"14",viewBox:R.wrench.viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:R.wrench.elements.join("")}})}),t("div",{className:`ss-dbg-panel ${d?"ss-dbg-open":""}`,"data-ss-theme":m,id:"ss-dbg-panel",children:[t("div",{className:"ss-dbg-tabs",children:[t("div",{className:"ss-dbg-tabs-scroll",children:[_.map(v=>t("button",{type:"button",className:`ss-dbg-tab ${o===v.id?"ss-dbg-active":""}`,onClick:()=>f(v.id),children:[R[v.id]?t("svg",{className:"ss-dbg-tab-icon",viewBox:R[v.id].viewBox,dangerouslySetInnerHTML:{__html:R[v.id].elements.join("")}}):null,v.label]},v.id)),b.map(v=>t("button",{type:"button",className:`ss-dbg-tab ${o===v.id?"ss-dbg-active":""}`,onClick:()=>f(v.id),children:v.label},v.id))]}),t("div",{className:"ss-dbg-tabs-right",children:[t("span",{className:`ss-dbg-conn-mode ${l?"ss-dbg-conn-live":"ss-dbg-conn-polling"}`,title:l?"Connected via Transmit (SSE) — real-time updates":"Polling every 3s",children:l?"live":"polling"}),t(lr,{theme:m,onToggle:y,classPrefix:"ss-dbg"}),r&&t("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"ss-dbg-dashboard-link",title:"Open dashboard",children:t("svg",{width:"14",height:"14",viewBox:R["external-link"].viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:R["external-link"].elements.join("")}})}),t("button",{type:"button",className:"ss-dbg-close",onClick:()=>p(!1),title:"Close panel",children:"×"})]})]}),t("div",{className:"ss-dbg-content",children:d&&k()})]})]})}const At=document.getElementById("ss-bar-config"),U=At?JSON.parse(At.textContent||"{}"):{};function yr(){const[e,n]=$(!1),[r,s]=$(!1),i=U.showDebug?{debugEndpoint:U.debugEndpoint,authToken:U.authToken}:void 0;return t(B,{children:[t(ir,{endpoint:U.endpoint,pollInterval:U.pollInterval,channelName:U.channelName,authToken:U.authToken,featureOptions:i,autoHideOnUnauthorized:!1,onOpenDebugPanel:U.showDebug?()=>n(l=>!l):void 0,debugPanelOpen:e,onConnectionChange:s}),U.showDebug&&t(br,{debugEndpoint:U.debugEndpoint,authToken:U.authToken,dashboardPath:U.dashboardPath||void 0,isOpen:e,onOpenChange:n,isLive:r})]})}const Ot=document.getElementById("ss-bar");Ot&&Ee(t(yr,{}),Ot);const vr="ss-col-resize",Rt="ss-resizing";function J(e){const n=Array.from(e.querySelectorAll("thead th"));if(n.length===0)return()=>{};const r=[];let s=!1;function i(){if(!s){s=!0;for(const l of n)l.style.width=l.offsetWidth+"px";e.style.tableLayout="fixed"}}for(const l of n){let a=function(u){u.preventDefault(),u.stopPropagation(),i();const d=u.clientX,p=l.offsetWidth;c.classList.add(Rt),c.setPointerCapture(u.pointerId);function o(h){const m=h.clientX-d,y=Math.max(30,p+m);l.style.width=y+"px"}function f(){c.classList.remove(Rt),c.removeEventListener("pointermove",o),c.removeEventListener("pointerup",f)}c.addEventListener("pointermove",o),c.addEventListener("pointerup",f)};if(!l.textContent?.trim())continue;const c=document.createElement("div");c.className=vr,l.appendChild(c),c.addEventListener("pointerdown",a),r.push(()=>{c.removeEventListener("pointerdown",a),c.remove()})}return()=>{for(const l of r)l()}}const wr={queries:"/queries",events:"/events",emails:"/emails",routes:"/routes",logs:"/logs",timeline:"/traces",cache:"/cache",jobs:"/jobs",config:"/config",internals:"/diagnostics"};function Nr(e){return wr[e]||`/${e}`}const xr=3e3;function H(e,n={}){const{baseUrl:r="",debugEndpoint:s="/admin/api/debug",authToken:i}=n,[l,a]=$(null),[c,u]=$(!0),[d,p]=$(null),o=M(null),f=M(null),h=M({}),m=T(()=>(o.current||(o.current=new ie({baseUrl:r,authToken:i})),o.current),[r,i]),y=T(async()=>{if(h.current[e]){a(h.current[e]),u(!1);return}try{const N=m(),k=`${s}${Nr(e)}`,v=await N.get(k);a(v),p(null),u(!1)}catch(N){if(N instanceof ge){p(N),u(!1),f.current&&(clearInterval(f.current),f.current=null);return}p(N instanceof Error?N:new Error(String(N))),u(!1)}},[e,s,m]);P(()=>(u(!0),p(null),y(),f.current=setInterval(y,xr),()=>{f.current&&(clearInterval(f.current),f.current=null)}),[e,y]);const b=T(()=>{y()},[y]),g=T(()=>{a(null)},[]),_=T((N,k)=>{h.current[N]=k},[]);return{data:l,isLoading:c,error:d,refresh:b,clearData:g,cacheForTab:_}}function It({options:e}){const{data:n,isLoading:r,error:s}=H("queries",e),[i,l]=$(""),[a,c]=$(null),u=L(()=>{const h=n?.queries||[];if(!i)return h;const m=i.toLowerCase();return h.filter(y=>y.sql.toLowerCase().includes(m)||y.model&&y.model.toLowerCase().includes(m)||y.method.toLowerCase().includes(m))},[n,i]),d=L(()=>{const h={};for(const m of n?.queries||[])h[m.sql]=(h[m.sql]||0)+1;return h},[n]),p=L(()=>{const h=n?.queries||[],m=h.filter(g=>g.duration>100).length,y=Object.values(d).filter(g=>g>1).length,b=h.length>0?h.reduce((g,_)=>g+_.duration,0)/h.length:0;return{slowCount:m,dupCount:y,avgDuration:b}},[n,d]),o=T(h=>{c(m=>m===h?null:h)},[]),f=M(null);return P(()=>{if(f.current)return J(f.current)},[u]),r&&!n?t("div",{className:"ss-dbg-empty",children:"Loading queries..."}):s?t("div",{className:"ss-dbg-empty",children:["Error: ",s.message]}):t("div",{children:[t("div",{className:"ss-dbg-search-bar",children:[t("input",{type:"text",className:"ss-dbg-search",placeholder:"Filter queries...",value:i,onChange:h=>l(h.target.value)}),t("span",{className:"ss-dbg-summary",children:[u.length," queries",p.slowCount>0&&` | ${p.slowCount} slow`,p.dupCount>0&&` | ${p.dupCount} dup`,u.length>0&&` | avg ${W(p.avgDuration)}`]})]}),u.length===0?t("div",{className:"ss-dbg-empty",children:"No queries captured"}):t("table",{ref:f,className:"ss-dbg-table",children:[t("colgroup",{children:[t("col",{style:{width:"50px"}}),t("col",{}),t("col",{style:{width:"80px"}}),t("col",{style:{width:"70px"}}),t("col",{style:{width:"100px"}}),t("col",{style:{width:"80px"}})]}),t("thead",{children:t("tr",{children:[t("th",{children:"#"}),t("th",{children:"SQL"}),t("th",{children:"Duration"}),t("th",{children:"Method"}),t("th",{children:"Model"}),t("th",{children:"Time"})]})}),t("tbody",{children:u.map(h=>t("tr",{children:[t("td",{className:"ss-dbg-c-dim",style:{whiteSpace:"nowrap"},children:h.id}),t("td",{children:[t("span",{className:`ss-dbg-sql ${a===h.id?"ss-dbg-expanded":""}`,onClick:()=>o(h.id),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&o(h.id),children:h.sql}),d[h.sql]>1&&t("span",{className:"ss-dbg-dup",children:[" x",d[h.sql]]}),h.inTransaction&&t("span",{className:"ss-dbg-dup",children:" TXN"})]}),t("td",{className:`ss-dbg-duration ${h.duration>500?"ss-dbg-very-slow":h.duration>100?"ss-dbg-slow":""}`,children:W(h.duration)}),t("td",{children:t("span",{className:`ss-dbg-method ss-dbg-method-${h.method.toLowerCase()}`,children:h.method})}),t("td",{className:"ss-dbg-c-muted",children:h.model||"-"}),t("td",{className:"ss-dbg-event-time",title:V(h.timestamp),children:K(h.timestamp)})]},h.id))})]})]})}const $r=Object.freeze(Object.defineProperty({__proto__:null,QueriesTab:It,default:It},Symbol.toStringTag,{value:"Module"}));function Fe({data:e,maxPreviewLength:n=100,className:r="",classPrefix:s="ss-dash"}){const[i,l]=$(!1),a=L(()=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},[e]),c=L(()=>typeof a=="object"&&a!==null?be(a,n):String(a??"-"),[a,n]),u=L(()=>typeof a=="object"&&a!==null?JSON.stringify(a,null,2):String(a),[a]),d=T(()=>{l(o=>!o)},[]),p=T(async()=>{try{await navigator.clipboard.writeText(u)}catch{}},[u]);return!e&&e!==0&&e!==!1?t("span",{className:`ss-dim ${s}-c-dim`,children:"-"}):t("div",{className:`${s}-data-cell ${r}`,children:[t("span",{className:`${s}-data-preview`,onClick:d,role:"button",tabIndex:0,onKeyDown:o=>o.key==="Enter"&&d(),children:c}),i&&t("div",{className:`${s}-data-full`,onClick:d,children:[t("button",{className:`${s}-copy-btn`,onClick:o=>{o.stopPropagation(),p()},title:"Copy to clipboard",type:"button",children:"Copy"}),t("pre",{children:u})]})]})}function Bt({options:e}){const{data:n,isLoading:r,error:s}=H("events",e),[i,l]=$(""),a=L(()=>{const u=n?.events||[];if(!i)return u;const d=i.toLowerCase();return u.filter(p=>(p.event||"").toLowerCase().includes(d)||(p.data||"").toLowerCase().includes(d))},[n,i]),c=M(null);return P(()=>{if(c.current)return J(c.current)},[a]),r&&!n?t("div",{className:"ss-dbg-empty",children:"Loading events..."}):s?t("div",{className:"ss-dbg-empty",children:["Error: ",s.message]}):t("div",{children:[t("div",{className:"ss-dbg-search-bar",children:[t("input",{type:"text",className:"ss-dbg-search",placeholder:"Filter events...",value:i,onChange:u=>l(u.target.value)}),t("span",{className:"ss-dbg-summary",children:[a.length," events"]})]}),a.length===0?t("div",{className:"ss-dbg-empty",children:"No events captured"}):t("table",{ref:c,className:"ss-dbg-table",children:[t("colgroup",{children:[t("col",{style:{width:"50px"}}),t("col",{style:{width:"20%"}}),t("col",{}),t("col",{style:{width:"80px"}})]}),t("thead",{children:t("tr",{children:[t("th",{children:"#"}),t("th",{children:"Event"}),t("th",{children:"Data"}),t("th",{children:"Time"})]})}),t("tbody",{children:a.map(u=>{const d=u.timestamp||u.created_at||u.createdAt;return t("tr",{children:[t("td",{className:"ss-dbg-c-dim",style:{whiteSpace:"nowrap"},children:u.id}),t("td",{className:"ss-dbg-event-name",children:u.event}),t("td",{className:"ss-dbg-event-data",children:t(Fe,{data:u.data,maxPreviewLength:80,classPrefix:"ss-dbg"})}),t("td",{className:"ss-dbg-event-time",title:V(d),children:K(d)})]},u.id)})})]})]})}const kr=Object.freeze(Object.defineProperty({__proto__:null,EventsTab:Bt,default:Bt},Symbol.toStringTag,{value:"Module"}));function Ft({options:e}){const{data:n,isLoading:r,error:s}=H("emails",e),[i,l]=$(""),[a,c]=$(null),u=L(()=>{const h=n?.emails||[];if(!i)return h;const m=i.toLowerCase();return h.filter(y=>(y.subject||"").toLowerCase().includes(m)||(y.to||"").toLowerCase().includes(m)||(y.from||"").toLowerCase().includes(m)||(y.mailer||"").toLowerCase().includes(m))},[n,i]),d=L(()=>u.find(h=>h.id===a),[u,a]),p=T(()=>c(null),[]),o={sent:"ss-dbg-email-status-sent",sending:"ss-dbg-email-status-sending",queued:"ss-dbg-email-status-queued",failed:"ss-dbg-email-status-failed"},f=M(null);return P(()=>{if(f.current)return J(f.current)},[u]),r&&!n?t("div",{className:"ss-dbg-empty",children:"Loading emails..."}):s?t("div",{className:"ss-dbg-empty",children:["Error: ",s.message]}):d?t("div",{className:"ss-dbg-email-preview",children:[t("div",{className:"ss-dbg-email-preview-header",children:[t("div",{className:"ss-dbg-email-preview-meta",children:[t("div",{children:[t("strong",{children:"Subject:"})," ",d.subject]}),t("div",{children:[t("strong",{children:"From:"})," ",d.from]}),t("div",{children:[t("strong",{children:"To:"})," ",d.to]}),d.cc&&t("div",{children:[t("strong",{children:"CC:"})," ",d.cc]})]}),t("button",{className:"ss-dbg-btn-clear",onClick:p,type:"button",children:"×"})]}),d.html?t("iframe",{className:"ss-dbg-email-iframe",srcDoc:d.html,title:"Email preview",sandbox:""}):t("div",{style:{padding:"12px",whiteSpace:"pre-wrap"},children:d.text||"No content"})]}):t("div",{children:[t("div",{className:"ss-dbg-search-bar",children:[t("input",{type:"text",className:"ss-dbg-search",placeholder:"Filter emails...",value:i,onChange:h=>l(h.target.value)}),t("span",{className:"ss-dbg-summary",children:[u.length," emails"]})]}),u.length===0?t("div",{className:"ss-dbg-empty",children:"No emails captured"}):t("table",{ref:f,className:"ss-dbg-table",children:[t("colgroup",{children:[t("col",{style:{width:"50px"}}),t("col",{style:{width:"140px"}}),t("col",{style:{width:"140px"}}),t("col",{}),t("col",{style:{width:"70px"}}),t("col",{style:{width:"80px"}}),t("col",{style:{width:"40px"}}),t("col",{style:{width:"80px"}})]}),t("thead",{children:t("tr",{children:[t("th",{children:"#"}),t("th",{children:"From"}),t("th",{children:"To"}),t("th",{children:"Subject"}),t("th",{children:"Status"}),t("th",{children:"Mailer"}),t("th",{title:"Attachments",children:"📎"}),t("th",{children:"Time"})]})}),t("tbody",{children:u.map(h=>t("tr",{className:"ss-dbg-email-row",onClick:()=>c(h.id),children:[t("td",{className:"ss-dbg-c-dim",style:{whiteSpace:"nowrap"},children:h.id}),t("td",{className:"ss-dbg-c-secondary",title:h.from,children:h.from}),t("td",{className:"ss-dbg-c-secondary",title:h.to,children:h.to}),t("td",{className:"ss-dbg-c-sql",children:h.subject}),t("td",{children:t("span",{className:`ss-dbg-email-status ${o[h.status]||""}`,children:h.status})}),t("td",{className:"ss-dbg-c-muted",children:h.mailer}),t("td",{className:"ss-dbg-c-dim",style:{textAlign:"center"},children:h.attachmentCount>0?h.attachmentCount:"-"}),t("td",{className:"ss-dbg-event-time",title:V(h.timestamp||h.created_at||h.createdAt),children:K(h.timestamp||h.created_at||h.createdAt)})]},h.id))})]})]})}const Cr=Object.freeze(Object.defineProperty({__proto__:null,EmailsTab:Ft,default:Ft},Symbol.toStringTag,{value:"Module"}));function jt({options:e,currentPath:n}){const{data:r,isLoading:s,error:i}=H("routes",e),[l,a]=$(""),c=L(()=>{const d=r?.routes||[];if(!l)return d;const p=l.toLowerCase();return d.filter(o=>o.pattern.toLowerCase().includes(p)||o.handler.toLowerCase().includes(p)||o.method.toLowerCase().includes(p)||o.name&&o.name.toLowerCase().includes(p))},[r,l]),u=M(null);return P(()=>{if(u.current)return J(u.current)},[c]),s&&!r?t("div",{className:"ss-dbg-empty",children:"Loading routes..."}):i?t("div",{className:"ss-dbg-empty",children:["Error: ",i.message]}):t("div",{children:[t("div",{className:"ss-dbg-search-bar",children:[t("input",{type:"text",className:"ss-dbg-search",placeholder:"Filter routes...",value:l,onChange:d=>a(d.target.value)}),t("span",{className:"ss-dbg-summary",children:[c.length," routes"]})]}),c.length===0?t("div",{className:"ss-dbg-empty",children:"No routes found"}):t("table",{ref:u,className:"ss-dbg-table",children:[t("colgroup",{children:[t("col",{style:{width:"70px"}}),t("col",{style:{width:"25%"}}),t("col",{style:{width:"15%"}}),t("col",{}),t("col",{style:{width:"20%"}})]}),t("thead",{children:t("tr",{children:[t("th",{children:"Method"}),t("th",{children:"Pattern"}),t("th",{children:"Name"}),t("th",{children:"Handler"}),t("th",{children:"Middleware"})]})}),t("tbody",{children:c.map((d,p)=>{const o=n&&(d.pattern===n||new RegExp("^"+d.pattern.replace(/:[^/]+/g,"[^/]+")+"$").test(n));return t("tr",{className:o?"ss-dbg-current-route":"",children:[t("td",{children:t("span",{className:`ss-dbg-method ss-dbg-method-${d.method.toLowerCase()}`,children:d.method})}),t("td",{className:"ss-dbg-c-text",children:d.pattern}),t("td",{className:"ss-dbg-c-muted",children:d.name||"-"}),t("td",{className:"ss-dbg-c-sql",children:d.handler}),t("td",{className:"ss-dbg-c-dim",style:{fontSize:"10px"},children:d.middleware.length>0?d.middleware.join(", "):"-"})]},`${d.method}-${d.pattern}-${p}`)})})]})]})}const Sr=Object.freeze(Object.defineProperty({__proto__:null,RoutesTab:jt,default:jt},Symbol.toStringTag,{value:"Module"})),Tr=["all","error","warn","info","debug"];function Ut({options:e}){const{data:n,isLoading:r,error:s}=H("logs",e),[i,l]=$("all"),[a,c]=$(""),[u,d]=$(""),p=T(g=>(g.levelName||g.level_name||(typeof g.level=="string"?g.level:"")||"info").toLowerCase(),[]),o=T(g=>g.msg||g.message||JSON.stringify(g),[]),f=T(g=>g.time||g.timestamp||0,[]),h=T(g=>g.requestId||g.request_id||g["x-request-id"]||"",[]),m=L(()=>{let g=Array.isArray(n)?n:n?.logs||n?.entries||[];if(i!=="all"&&(g=g.filter(_=>{const N=p(_);return i==="error"?N==="error"||N==="fatal":N===i})),u){const _=u.toLowerCase();g=g.filter(N=>h(N).toLowerCase().includes(_))}if(a){const _=a.toLowerCase();g=g.filter(N=>o(N).toLowerCase().includes(_))}return g},[n,i,a,u,p,o,h]),y=T(g=>{switch(g){case"error":case"fatal":return"ss-dbg-log-level-error";case"warn":return"ss-dbg-log-level-warn";case"info":return"ss-dbg-log-level-info";case"debug":return"ss-dbg-log-level-debug";case"trace":return"ss-dbg-log-level-trace";default:return"ss-dbg-log-level-info"}},[]),b=T(g=>{d(_=>_===g?"":g)},[]);return r&&!n?t("div",{className:"ss-dbg-empty",children:"Loading logs..."}):s?t("div",{className:"ss-dbg-empty",children:["Error: ",s.message]}):t("div",{children:[t("div",{className:"ss-dbg-log-filters",children:[Tr.map(g=>t("button",{type:"button",className:`ss-dbg-log-filter ${i===g?"ss-dbg-active":""}`,onClick:()=>l(g),children:g},g)),u&&t("button",{type:"button",className:"ss-dbg-log-filter ss-dbg-active",onClick:()=>d(""),children:["req: ",u.slice(0,8)," x"]}),t("span",{className:"ss-dbg-summary",style:{marginLeft:"auto"},children:[m.length," entries"]})]}),t("div",{className:"ss-dbg-search-bar",children:t("input",{type:"text",className:"ss-dbg-search",placeholder:"Filter log messages...",value:a,onChange:g=>c(g.target.value)})}),t("div",{style:{overflow:"auto",flex:1},children:m.length===0?t("div",{className:"ss-dbg-empty",children:"No log entries"}):m.slice(-200).reverse().map((g,_)=>{const N=p(g),k=o(g),v=f(g),C=h(g);return t("div",{className:"ss-dbg-log-entry",children:[t("span",{className:`ss-dbg-log-level ${y(N)}`,children:N.toUpperCase()}),t("span",{className:"ss-dbg-log-time",title:v?V(v):"",children:v?K(v):"-"}),C?t("span",{className:"ss-dbg-log-reqid",onClick:()=>b(C),role:"button",tabIndex:0,title:C,onKeyDown:w=>w.key==="Enter"&&b(C),children:C.slice(0,8)}):t("span",{className:"ss-dbg-log-reqid-empty",children:"-"}),t("span",{className:"ss-dbg-log-msg",children:k})]},_)})})]})}const Lr=Object.freeze(Object.defineProperty({__proto__:null,LogsTab:Ut,default:Ut},Symbol.toStringTag,{value:"Module"})),Dt={request:"#1e3a5f",middleware:"rgba(30, 58, 95, 0.7)",db:"#6d28d9",view:"#0e7490",mail:"#059669",event:"#b45309",custom:"#525252"},Er=[{label:"Request",color:"#1e3a5f"},{label:"Middleware",color:"rgba(30, 58, 95, 0.7)"},{label:"Database",color:"#6d28d9"},{label:"View",color:"#0e7490"},{label:"Mail",color:"#059669"},{label:"Event",color:"#b45309"}];function Ht({options:e}){const{baseUrl:n="",debugEndpoint:r="/admin/api/debug",authToken:s}=e||{},{data:i,isLoading:l,error:a}=H("timeline",e),[c,u]=$(""),[d,p]=$(null),[o,f]=$(null),[h,m]=$(!1),[y,b]=$(null),g=L(()=>{const w=i?.traces||[];if(!c)return w;const E=c.toLowerCase();return w.filter(x=>x.url.toLowerCase().includes(E)||x.method.toLowerCase().includes(E)||String(x.statusCode).includes(E))},[i,c]),_=M(null),N=T(()=>(_.current||(_.current=new ie({baseUrl:n,authToken:s})),_.current),[n,s]);P(()=>{if(d===null){f(null),b(null);return}let w=!1;return m(!0),b(null),N().get(`${r}/traces/${d}`).then(x=>{w||(f(x),m(!1))}).catch(x=>{w||(b(x instanceof Error?x.message:"Failed to load trace"),m(!1))}),()=>{w=!0}},[d,r,N]);const k=T(w=>{p(E=>E===w?null:w)},[]),v=T(w=>w>=500?"ss-dbg-status-5xx":w>=400?"ss-dbg-status-4xx":w>=300?"ss-dbg-status-3xx":"ss-dbg-status-2xx",[]),C=M(null);if(P(()=>{if(C.current)return J(C.current)},[g]),l&&!i)return t("div",{className:"ss-dbg-empty",children:"Loading traces..."});if(a)return t("div",{className:"ss-dbg-empty",children:["Error: ",a.message]});if(d!==null){if(h)return t("div",{className:"ss-dbg-empty",children:"Loading trace detail..."});if(y)return t("div",{children:[t("div",{className:"ss-dbg-tl-detail-header",children:t("button",{type:"button",className:"ss-dbg-btn-clear",onClick:()=>p(null),children:"← Back"})}),t("div",{className:"ss-dbg-empty",children:["Error: ",y]})]});if(!o)return t("div",{className:"ss-dbg-empty",children:"Loading trace detail..."});const w=o.spans||[],E=o.warnings||[];return t("div",{children:[t("div",{className:"ss-dbg-tl-detail-header",children:[t("button",{type:"button",className:"ss-dbg-btn-clear",onClick:()=>p(null),children:"← Back"}),t("span",{className:`ss-dbg-method ss-dbg-method-${o.method.toLowerCase()}`,children:o.method}),t("span",{className:"ss-dbg-tl-detail-url",children:o.url}),t("span",{className:`ss-dbg-status ${v(o.statusCode)}`,children:o.statusCode}),t("span",{className:"ss-dbg-tl-meta",children:[W(o.totalDuration)," ·"," ",o.spanCount," spans"]})]}),t("div",{className:"ss-dbg-tl-legend",children:Er.map(x=>t("div",{className:"ss-dbg-tl-legend-item",children:[t("div",{className:"ss-dbg-tl-legend-dot",style:{background:x.color}}),t("span",{children:x.label})]},x.label))}),t("div",{style:{padding:"8px 12px",overflow:"auto"},children:w.length===0?t("div",{className:"ss-dbg-empty",children:"No spans captured for this request"}):w.map(x=>{const F=o.totalDuration||1,G=x.startOffset/F*100,Yr=Math.max(x.duration/F*100,.5);return t("div",{className:"ss-dbg-tl-row",children:[t("div",{className:"ss-dbg-tl-label",title:x.label,children:x.label}),t("div",{className:"ss-dbg-tl-track",children:t("div",{className:`ss-dbg-tl-bar ss-dbg-tl-bar-${x.category}`,style:{left:`${G}%`,width:`${Yr}%`,background:Dt[x.category]||Dt.custom},title:`${x.label}: ${W(x.duration)}`})}),t("span",{className:"ss-dbg-tl-dur",children:W(x.duration)})]},x.id)})}),E.length>0&&t("div",{className:"ss-dbg-tl-warnings",children:[t("div",{className:"ss-dbg-tl-warnings-title",children:"Warnings"}),E.map((x,F)=>t("div",{className:"ss-dbg-tl-warning",children:x},F))]})]})}return t("div",{children:[t("div",{className:"ss-dbg-search-bar",children:[t("input",{type:"text",className:"ss-dbg-search",placeholder:"Filter traces...",value:c,onChange:w=>u(w.target.value)}),t("span",{className:"ss-dbg-summary",children:[g.length," traces"]})]}),g.length===0?t("div",{className:"ss-dbg-empty",children:"No traces captured. Enable tracing in config."}):t("table",{ref:C,className:"ss-dbg-table",children:[t("colgroup",{children:[t("col",{style:{width:"50px"}}),t("col",{style:{width:"70px"}}),t("col",{}),t("col",{style:{width:"60px"}}),t("col",{style:{width:"80px"}}),t("col",{style:{width:"50px"}}),t("col",{style:{width:"80px"}})]}),t("thead",{children:t("tr",{children:[t("th",{children:"#"}),t("th",{children:"Method"}),t("th",{children:"URL"}),t("th",{children:"Status"}),t("th",{children:"Duration"}),t("th",{children:"Spans"}),t("th",{children:"Time"})]})}),t("tbody",{children:g.map(w=>t("tr",{className:"ss-dbg-email-row",onClick:()=>k(w.id),children:[t("td",{className:"ss-dbg-c-dim",style:{whiteSpace:"nowrap"},children:w.id}),t("td",{children:t("span",{className:`ss-dbg-method ss-dbg-method-${w.method.toLowerCase()}`,children:w.method})}),t("td",{title:w.url,children:w.url}),t("td",{children:t("span",{className:`ss-dbg-status ${v(w.statusCode)}`,children:w.statusCode})}),t("td",{className:`ss-dbg-duration ${w.totalDuration>500?"ss-dbg-very-slow":w.totalDuration>100?"ss-dbg-slow":""}`,children:W(w.totalDuration)}),t("td",{className:"ss-dbg-c-muted",style:{textAlign:"center"},children:w.spanCount}),t("td",{className:"ss-dbg-event-time",title:V(w.timestamp),children:K(w.timestamp)})]},w.id))})]})]})}const Mr=Object.freeze(Object.defineProperty({__proto__:null,TimelineTab:Ht,default:Ht},Symbol.toStringTag,{value:"Module"}));function zt({options:e,dashboardPath:n}){const r=L(()=>n?n.replace(/\/+$/,"")+"/api":null,[n]),s=L(()=>r?{...e,debugEndpoint:r}:e,[r,e]),{data:i,isLoading:l,error:a}=H("cache",s),[c,u]=$(""),[d,p]=$(null),[o,f]=$(null),h=L(()=>{const _=i?.keys||[];if(!c)return _;const N=c.toLowerCase();return _.filter(k=>k.key.toLowerCase().includes(N))},[i,c]),m=T(async _=>{if(d===_){p(null),f(null);return}p(_);try{const{baseUrl:N="",authToken:k}=e||{},v=r||e?.debugEndpoint||"/admin/api/debug",C=`${N}${v}/cache/${encodeURIComponent(_)}`,w={Accept:"application/json"};k&&(w.Authorization=`Bearer ${k}`);const x=await(await fetch(C,{headers:w,credentials:k?"omit":"same-origin"})).json();f(x)}catch{f({error:"Failed to fetch key value"})}},[d,e,r]),y=M(null);if(P(()=>{if(y.current)return J(y.current)},[h]),l&&!i)return t("div",{className:"ss-dbg-empty",children:"Loading cache data..."});if(a)return t("div",{className:"ss-dbg-empty",children:["Error: ",a.message]});if(!i)return t("div",{className:"ss-dbg-empty",children:"Cache inspector not available"});const g=i.stats||i;return t("div",{children:[t("div",{className:"ss-dbg-cache-stats",children:[t("div",{className:"ss-dbg-cache-stat",children:[t("span",{className:"ss-dbg-cache-stat-label",children:"Hit Rate:"}),t("span",{className:"ss-dbg-cache-stat-value",children:[g.hitRate!==null&&g.hitRate!==void 0?g.hitRate.toFixed(1):"0","%"]})]}),t("div",{className:"ss-dbg-cache-stat",children:[t("span",{className:"ss-dbg-cache-stat-label",children:"Hits:"}),t("span",{className:"ss-dbg-cache-stat-value",children:g.totalHits??0})]}),t("div",{className:"ss-dbg-cache-stat",children:[t("span",{className:"ss-dbg-cache-stat-label",children:"Misses:"}),t("span",{className:"ss-dbg-cache-stat-value",children:g.totalMisses??0})]}),t("div",{className:"ss-dbg-cache-stat",children:[t("span",{className:"ss-dbg-cache-stat-label",children:"Keys:"}),t("span",{className:"ss-dbg-cache-stat-value",children:g.keyCount??"-"})]})]}),t("div",{className:"ss-dbg-search-bar",children:[t("input",{type:"text",className:"ss-dbg-search",placeholder:"Filter keys...",value:c,onChange:_=>u(_.target.value)}),t("span",{className:"ss-dbg-summary",children:[h.length," keys"]})]}),d&&o&&t("div",{className:"ss-dbg-cache-detail",children:[t("strong",{children:d}),t("button",{type:"button",className:"ss-dbg-btn-clear",onClick:()=>p(null),children:["←"," Back"]}),t(Fe,{data:o,classPrefix:"ss-dbg"})]}),h.length===0?t("div",{className:"ss-dbg-empty",children:"No cache keys found"}):t("table",{ref:y,className:"ss-dbg-table",children:[t("colgroup",{children:[t("col",{}),t("col",{style:{width:"80px"}}),t("col",{style:{width:"80px"}}),t("col",{style:{width:"80px"}})]}),t("thead",{children:t("tr",{children:[t("th",{children:"Key"}),t("th",{children:"Type"}),t("th",{children:"TTL"}),t("th",{children:"Size"})]})}),t("tbody",{children:h.map(_=>t("tr",{className:"ss-dbg-email-row",onClick:()=>m(_.key),children:[t("td",{className:"ss-dbg-c-sql",children:_.key}),t("td",{className:"ss-dbg-c-muted",children:_.type}),t("td",{className:"ss-dbg-c-muted",children:_.ttl>0?`${_.ttl}s`:"-"}),t("td",{className:"ss-dbg-c-dim",children:_.size>0?`${_.size}B`:"-"})]},_.key))})]})]})}const Pr=Object.freeze(Object.defineProperty({__proto__:null,CacheTab:zt,default:zt},Symbol.toStringTag,{value:"Module"})),Ar=["all","active","waiting","delayed","completed","failed"];function qt({options:e,dashboardPath:n}){const r=L(()=>n?n.replace(/\/+$/,"")+"/api":null,[n]),s=L(()=>r?{...e,debugEndpoint:r}:e,[r,e]),{data:i,isLoading:l,error:a}=H("jobs",s),[c,u]=$("all"),[d,p]=$(null),o=L(()=>{if(!i)return[];const b=i.data||i.jobs||[];return c==="all"?b:b.filter(g=>g.status===c)},[i,c]),f=T(async b=>{p(b);try{const{baseUrl:g="",authToken:_}=e||{},N=r||e?.debugEndpoint||"/admin/api/debug",k=`${g}${N}/jobs/${b}/retry`,v={Accept:"application/json"};_&&(v.Authorization=`Bearer ${_}`),await fetch(k,{method:"POST",headers:v,credentials:_?"omit":"same-origin"})}catch{}p(null)},[e,r]),h={completed:"ss-dbg-job-status-completed",failed:"ss-dbg-job-status-failed",active:"ss-dbg-job-status-active",waiting:"ss-dbg-job-status-waiting",delayed:"ss-dbg-job-status-delayed"},m=M(null);if(P(()=>{if(m.current)return J(m.current)},[o]),!r)return t("div",{className:"ss-dbg-empty",children:"Queue inspector not available (no dashboard configured)"});if(l&&!i)return t("div",{className:"ss-dbg-empty",children:"Loading jobs..."});if(a)return t("div",{className:"ss-dbg-empty",children:["Error: ",a.message]});if(!i)return t("div",{className:"ss-dbg-empty",children:"Queue inspector not available"});const y=i.stats||i.overview;return t("div",{children:[t("div",{className:"ss-dbg-job-stats-area",children:[t("div",{className:"ss-dbg-job-stats",children:[t("div",{className:"ss-dbg-job-stat",children:[t("span",{className:"ss-dbg-job-stat-label",children:"Active:"}),t("span",{className:"ss-dbg-job-stat-value",children:y?.active??0})]}),t("div",{className:"ss-dbg-job-stat",children:[t("span",{className:"ss-dbg-job-stat-label",children:"Waiting:"}),t("span",{className:"ss-dbg-job-stat-value",children:y?.waiting??0})]}),t("div",{className:"ss-dbg-job-stat",children:[t("span",{className:"ss-dbg-job-stat-label",children:"Delayed:"}),t("span",{className:"ss-dbg-job-stat-value",children:y?.delayed??0})]}),t("div",{className:"ss-dbg-job-stat",children:[t("span",{className:"ss-dbg-job-stat-label",children:"Completed:"}),t("span",{className:"ss-dbg-job-stat-value",children:y?.completed??0})]}),t("div",{className:"ss-dbg-job-stat",children:[t("span",{className:"ss-dbg-job-stat-label",children:"Failed:"}),t("span",{className:"ss-dbg-job-stat-value ss-dbg-c-red",children:y?.failed??0})]})]}),t("div",{className:"ss-dbg-log-filters",children:Ar.map(b=>t("button",{type:"button",className:`ss-dbg-job-filter ${c===b?"ss-dbg-active":""}`,onClick:()=>u(b),children:b},b))})]}),o.length===0?t("div",{className:"ss-dbg-empty",children:"No jobs found"}):t("table",{ref:m,className:"ss-dbg-table",children:[t("colgroup",{children:[t("col",{style:{width:"50px"}}),t("col",{style:{width:"15%"}}),t("col",{style:{width:"80px"}}),t("col",{}),t("col",{style:{width:"50px"}}),t("col",{style:{width:"80px"}}),t("col",{style:{width:"80px"}}),t("col",{style:{width:"60px"}})]}),t("thead",{children:t("tr",{children:[t("th",{children:"ID"}),t("th",{children:"Name"}),t("th",{children:"Status"}),t("th",{children:"Payload"}),t("th",{children:"Tries"}),t("th",{children:"Duration"}),t("th",{children:"Time"}),t("th",{})]})}),t("tbody",{children:o.map(b=>{const g=b;return t("tr",{children:[t("td",{className:"ss-dbg-c-dim",children:b.id}),t("td",{className:"ss-dbg-c-sql",title:b.name,children:b.name}),t("td",{children:t("span",{className:`ss-dbg-badge ${h[b.status]||"ss-dbg-badge-muted"}`,children:b.status})}),t("td",{children:t(Fe,{data:b.payload||b.data,maxPreviewLength:60,classPrefix:"ss-dbg"})}),t("td",{className:"ss-dbg-c-muted",style:{textAlign:"center"},children:b.attempts||g.attemptsMade||0}),t("td",{className:"ss-dbg-duration",children:b.duration!==null?W(b.duration):"-"}),t("td",{className:"ss-dbg-event-time",title:V(b.timestamp||b.createdAt||g.processedAt||g.created_at),children:K(b.timestamp||b.createdAt||g.processedAt||g.created_at)}),t("td",{children:b.status==="failed"&&t("button",{type:"button",className:"ss-dbg-retry-btn",onClick:()=>f(b.id),disabled:d===b.id,children:d===b.id?"...":"Retry"})})]},b.id)})})]})]})}const Or=Object.freeze(Object.defineProperty({__proto__:null,JobsTab:qt,default:qt},Symbol.toStringTag,{value:"Module"}));function j(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)&&e.__redacted===!0}function je(e,n){if(typeof e!="object"||e===null||e===void 0)return[{path:n,value:e}];if(Array.isArray(e)||j(e))return[{path:n,value:e}];const r=[];for(const s of Object.keys(e)){const i=n?`${n}.${s}`:s,l=e[s];typeof l=="object"&&l!==null&&!Array.isArray(l)&&!j(l)?r.push(...je(l,i)):r.push({path:i,value:l})}return r}function Ue(e){return e==null?{text:"null",color:"var(--ss-dim)"}:typeof e=="boolean"?{text:String(e),color:e?"var(--ss-green-fg)":"var(--ss-red-fg)"}:typeof e=="number"?{text:String(e),color:"var(--ss-amber-fg)"}:Array.isArray(e)?{text:`[${e.map(r=>r==null?"null":typeof r=="object"?JSON.stringify(r):String(r)).join(", ")}]`,color:"var(--ss-purple-fg)"}:typeof e=="object"?{text:JSON.stringify(e),color:"var(--ss-dim)"}:{text:String(e)}}function Wt(e){if(e==null||typeof e!="object"||Array.isArray(e)||j(e))return 1;let n=0;for(const r of Object.keys(e))n+=Wt(e[r]);return n}function Rr(e){if(e==null||typeof e!="object"||Array.isArray(e)||j(e))return[];const n=[];for(const r of Object.keys(e)){const s=e[r];s!==null&&typeof s=="object"&&!Array.isArray(s)&&!j(s)&&n.push(r)}return n}function ve(e,n,r){n&&navigator.clipboard.writeText(e).then(()=>{const s=n.textContent;n.textContent="✓",n.classList.add(`${r}-copy-row-ok`),setTimeout(()=>{n.textContent=s,n.classList.remove(`${r}-copy-row-ok`)},1200)}).catch(()=>{})}function we({redacted:e,p:n}){const[r,s]=$(!1);return t("span",{className:`${n}-config-redacted`,style:{display:"inline-flex",alignItems:"center",gap:"4px"},children:[t("span",{children:r?e.value:e.display}),t("button",{type:"button",className:`${n}-btn`,title:r?"Hide":"Reveal",style:{padding:"0 4px",fontSize:"0.85em",lineHeight:1,minWidth:"auto"},onClick:i=>{i.stopPropagation(),s(l=>!l)},children:r?t("svg",{width:"14",height:"14",viewBox:R["eye-off"].viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:R["eye-off"].elements.join("")}}):t("svg",{width:"14",height:"14",viewBox:R.eye.viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:R.eye.elements.join("")}})})]})}function Ir({env:e,search:n,p:r}){const s=M(new Map),i=n.toLowerCase(),l=Object.entries(e).filter(([a,c])=>{if(!i)return!0;const u=j(c)?c.display:c==null?"":String(c);return a.toLowerCase().includes(i)||u.toLowerCase().includes(i)});return t("div",{className:`${r}-config-table-wrap`,children:t("table",{className:`${r}-table ${r}-config-env-table`,children:[t("thead",{children:t("tr",{children:[t("th",{children:"Variable"}),t("th",{children:"Value"}),t("th",{style:{width:36}})]})}),t("tbody",{children:[l.map(([a,c])=>{const u=j(c),d=u?c.display:c==null?"null":String(c),p=`${a}=${d}`;return t("tr",{children:[t("td",{className:`${r}-env-key`,children:t("span",{className:`${r}-config-key`,children:a})}),t("td",{className:`${r}-env-val`,children:u?t(we,{redacted:c,p:r}):t("span",{className:`${r}-config-val`,children:d})}),t("td",{children:!u&&t("button",{type:"button",className:`${r}-copy-row-btn`,title:"Copy",ref:o=>{s.current.set(a,o)},onClick:o=>{o.stopPropagation(),ve(p,s.current.get(a)??null,r)},children:"⎘"})})]},a)}),l.length===0&&t("tr",{children:t("td",{colSpan:3,style:{textAlign:"center",color:"var(--ss-dim)"},children:"No matching variables"})})]})]})})}function Br({source:e,search:n,p:r}){const s=M(new Map),i=n.toLowerCase(),l=je(e,""),a=l.filter(c=>{const u=j(c.value)?c.value.display:c.value===null||c.value===void 0?"":String(c.value);return c.path.toLowerCase().includes(i)||u.toLowerCase().includes(i)});return t("div",{className:`${r}-config-table-wrap`,children:[t("table",{className:`${r}-table`,children:[t("thead",{children:t("tr",{children:[t("th",{children:"Path"}),t("th",{children:"Value"}),t("th",{style:{width:36}})]})}),t("tbody",{children:[a.map(c=>{const u=j(c.value),d=u?null:Ue(c.value),p=u?c.value.display:d.text,o=`${c.path}: ${p}`;return t("tr",{children:[t("td",{children:t("span",{className:`${r}-config-key`,style:{whiteSpace:"nowrap"},children:c.path})}),t("td",{children:u?t(we,{redacted:c.value,p:r}):t("span",{className:`${r}-config-val`,style:{wordBreak:"break-all",color:d.color},children:d.text})}),t("td",{children:!u&&t("button",{type:"button",className:`${r}-copy-row-btn`,title:"Copy",ref:f=>{s.current.set(c.path,f)},onClick:f=>{f.stopPropagation(),ve(o,s.current.get(c.path)??null,r)},children:"⎘"})})]},c.path)}),a.length===0&&t("tr",{children:t("td",{colSpan:3,style:{textAlign:"center",color:"var(--ss-dim)"},children:"No matching entries"})})]})]}),t("div",{style:{padding:"4px 16px",fontSize:"10px",color:"var(--ss-muted)"},children:[a.length," of ",l.length," entries"]})]})}function Fr({obj:e,prefix:n,p:r}){const s=M(new Map),i=je(e,n);return t("table",{className:`${r}-table ${r}-config-inner-table`,children:[t("thead",{children:t("tr",{children:[t("th",{style:{width:"35%"},children:"Key"}),t("th",{children:"Value"}),t("th",{style:{width:36}})]})}),t("tbody",{children:i.map(l=>{const a=l.path.indexOf(n+".")===0?l.path.slice(n.length+1):l.path,c=j(l.value),u=c?null:Ue(l.value),d=c?l.value.display:u.text,p=`${l.path}: ${d}`;return t("tr",{children:[t("td",{title:a,children:t("span",{className:`${r}-config-key`,children:a})}),t("td",{title:d,children:c?t(we,{redacted:l.value,p:r}):t("span",{className:`${r}-config-val`,style:{color:u.color},children:u.text})}),t("td",{children:!c&&t("button",{type:"button",className:`${r}-copy-row-btn`,title:"Copy",ref:o=>{s.current.set(l.path,o)},onClick:o=>{o.stopPropagation(),ve(p,s.current.get(l.path)??null,r)},children:"⎘"})})]},l.path)})})]})}function jr({value:e,p:n}){if(e==null)return t("span",{className:`${n}-config-val`,style:{color:"var(--ss-dim)"},children:"null"});if(j(e))return t(we,{redacted:e,p:n});if(typeof e=="boolean")return t("span",{className:`${n}-config-val`,style:{color:e?"var(--ss-green-fg)":"var(--ss-red-fg)"},children:String(e)});if(typeof e=="number")return t("span",{className:`${n}-config-val`,style:{color:"var(--ss-amber-fg)"},children:String(e)});if(Array.isArray(e)){const r=e.map(s=>s==null?"null":typeof s=="object"?JSON.stringify(s):String(s));return t("span",{className:`${n}-config-val`,style:{color:"var(--ss-purple-fg)"},children:["[",r.join(", "),"]"]})}return typeof e=="object"?t("span",{className:`${n}-config-val`,style:{color:"var(--ss-dim)"},children:JSON.stringify(e)}):t("span",{className:`${n}-config-val`,children:String(e)})}function Ur({obj:e,expandedPaths:n,onToggle:r,p:s}){if(e==null||typeof e!="object"||Array.isArray(e)||j(e))return null;const i=Object.keys(e),l=M(new Map);return t("div",{className:`${s}-config-sections`,children:i.map(a=>{const c=e[a],u=c!==null&&typeof c=="object"&&!Array.isArray(c)&&!j(c),d=n.has(a),p=j(c);return t("div",{className:`${s}-config-section`,children:[t("div",{className:`${s}-config-section-header${u?"":` ${s}-config-leaf`}`,onClick:u?()=>r(a):void 0,style:{cursor:u?"pointer":"default"},children:[u?t("span",{className:`${s}-config-toggle`,children:d?"▼":"▶"}):t("span",{className:`${s}-config-toggle`,style:{visibility:"hidden"},children:"•"}),t("span",{className:`${s}-config-key`,children:a}),u?t("span",{className:`${s}-config-count`,children:[Wt(c)," entries"]}):t(B,{children:[t("span",{className:`${s}-config-val`,style:{marginLeft:"8px"},children:t(jr,{value:c,p:s})}),!p&&t("button",{type:"button",className:`${s}-copy-row-btn`,style:{marginLeft:"4px"},title:"Copy",ref:o=>{l.current.set(a,o)},onClick:o=>{o.stopPropagation();const f=Ue(c);ve(`${a}: ${f.text}`,l.current.get(a)??null,s)},children:"⎘"})]})]}),u&&d&&t("div",{className:`${s}-config-section-body`,children:t(Fr,{obj:c,prefix:a,p:s})})]},a)})})}function Dr({data:e,isLoading:n,classPrefix:r}){const s=r,[i,l]=$(""),[a,c]=$(""),[u,d]=$("app"),[p,o]=$(new Set),[f,h]=$("Copy JSON");P(()=>{const N=setTimeout(()=>c(i),200);return()=>clearTimeout(N)},[i]);const m=e,y=T(N=>{o(k=>{const v=new Set(k);return v.has(N)?v.delete(N):v.add(N),v})},[]),b=T(()=>{if(!m)return;const N=u==="app"?m.app:m.env;if(!N)return;const k=Rr(N);o(new Set(k))},[m,u]),g=T(()=>{o(new Set)},[]),_=T(async()=>{if(m)try{const N=u==="app"?m.app:m.env;await navigator.clipboard.writeText(JSON.stringify(N,null,2)),h("Copied!"),setTimeout(()=>h("Copy JSON"),1500)}catch{}},[m,u]);return t("div",{children:[t("div",{className:`${s}-config-toolbar`,style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px"},children:[t("button",{type:"button",className:`${s}-config-tab${u==="app"?` ${s}-active`:""}`,onClick:()=>d("app"),children:"App Config"}),t("button",{type:"button",className:`${s}-config-tab${u==="env"?` ${s}-active`:""}`,onClick:()=>d("env"),children:"Env"}),t("div",{style:{position:"relative",flex:1},children:[t("input",{type:"text",className:`${s}-search`,placeholder:"Search keys and values...",value:i,onChange:N=>l(N.target.value),style:{width:"100%"}}),i&&t("button",{type:"button",onClick:()=>l(""),style:{position:"absolute",right:"6px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"14px",color:"var(--ss-dim)",padding:"0 2px",lineHeight:1},children:"×"})]}),u==="app"&&!a&&t(B,{children:[t("button",{type:"button",className:`${s}-btn`,onClick:b,children:"Expand All"}),t("button",{type:"button",className:`${s}-btn`,onClick:g,children:"Collapse All"})]}),t("button",{type:"button",className:`${s}-btn`,onClick:_,children:f})]}),n&&!e?t("div",{className:`${s}-empty`,children:"Loading config..."}):m?u==="env"?t(Ir,{env:m.env??{},search:a,p:s}):a?t(Br,{source:m.app??{},search:a,p:s}):t("div",{className:`${s}-config-table-wrap`,children:t(Ur,{obj:m.app,expandedPaths:p,onToggle:y,p:s})}):t("div",{className:`${s}-empty`,children:"Config not available"})]})}function Vt({options:e,dashboardPath:n}){const r=L(()=>n?n.replace(/\/+$/,"")+"/api":null,[n]),s=L(()=>r?{...e,debugEndpoint:r}:e,[r,e]),{data:i,isLoading:l,error:a}=H("config",s);return a?t("div",{className:"ss-dbg-empty",children:["Error: ",a.message]}):t(Dr,{data:i,isLoading:l,classPrefix:"ss-dbg"})}const Hr=Object.freeze(Object.defineProperty({__proto__:null,ConfigTab:Vt,default:Vt},Symbol.toStringTag,{value:"Module"})),zr=["password","secret","token","key","credential","auth"];function Kt(e){const n=e.toLowerCase();return zr.some(r=>n.includes(r))}function Jt(e){const n=Date.now()-e,r=Math.floor(n/1e3);if(r<60)return`${r}s ago`;const s=Math.floor(r/60);if(s<60)return`${s}m ago`;const i=Math.floor(s/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}function De(e){return e.toLocaleString()}function Gt(e){return e<1e3?`${e}ms`:e<6e4?`${e/1e3}s`:e<36e5?`${e/6e4}m`:`${e/36e5}h`}function qr(e){if(!e&&e!==0)return"-";const n=Math.floor(e),r=Math.floor(n/86400),s=Math.floor(n%86400/3600),i=Math.floor(n%3600/60);return r>0?`${r}d ${s}h`:s>0?`${s}h ${i}m`:i>0?`${i}m ${n%60}s`:`${n}s`}function Qt(e){if(e==null)return"-";if(typeof e=="string"||typeof e=="number"||typeof e=="boolean")return String(e);if(Array.isArray(e))return e.join(", ")||"-";try{return JSON.stringify(e)}catch{return String(e)}}function le({status:e,prefix:n}){let r=`${n}-dot`;return["healthy","active","connected","available","ready"].includes(e)?r+=` ${n}-dot-ok`:["errored","unavailable"].includes(e)&&(r+=` ${n}-dot-err`),t("span",{className:r})}const Xt=()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:R.eye.viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:R.eye.elements.join("")}}),Yt=()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:R["eye-off"].viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:R["eye-off"].elements.join("")}});function Wr({value:e}){const[n,r]=$(!1);return t("span",{children:[n?e:"••••••••"," ",t("button",{type:"button",onClick:()=>r(s=>!s),style:{background:"none",border:"1px solid var(--ss-border)",borderRadius:3,padding:"0 4px",fontSize:"10px",color:"var(--ss-dim)",cursor:"pointer",verticalAlign:"middle"},children:n?t(Yt,{}):t(Xt,{})})]})}function Vr({current:e,max:n,prefix:r}){const s=n>0?Math.min(100,Math.round(e/n*100)):0,i=s>=100;return t("div",{className:`${r}-bar`,children:[t("div",{className:`${r}-bar-track`,children:t("div",{className:`${r}-bar-fill${i?` ${r}-bar-fill-warn`:""}`,style:{width:`${s}%`}})}),t("span",{className:`${r}-bar-pct${i?` ${r}-bar-pct-warn`:""}`,children:[s,"%"]})]})}function Kr({config:e,prefix:n}){const r=Object.entries(e);return r.length===0?t("span",{className:`${n}-c-dim`,children:"-"}):t("span",{className:`${n}-c-muted`,children:r.map(([s,i],l)=>t("span",{children:[l>0&&", ",t("span",{className:`${n}-c-dim`,children:s}),"=",Kt(s)&&typeof i=="string"?t(Wr,{value:i}):t("span",{children:Qt(i)})]},s))})}function Ne({label:e,value:n,prefix:r}){return t("div",{className:`${r}-info-card`,children:[t("span",{className:`${r}-info-card-label`,children:e}),t("span",{className:`${r}-info-card-value`,children:n})]})}function Jr({data:e,tableClassName:n,classPrefix:r}){const s=r||"ss-dash",[i,l]=$(new Set),a=T(p=>{l(o=>{const f=new Set(o);return f.has(p)?f.delete(p):f.add(p),f})},[]),c=T((p,o)=>{if(o==null)return t("span",{className:`${s}-c-dim`,children:"null"});if(typeof o=="boolean")return t("span",{className:o?`${s}-c-green`:`${s}-c-red`,children:String(o)});if(Array.isArray(o))return t("span",{children:o.join(", ")||"-"});const f=Qt(o);if(Kt(p)){const h=i.has(p);return t("span",{children:[h?f:"••••••••"," ",t("button",{type:"button",onClick:()=>a(p),style:{background:"none",border:"1px solid var(--ss-border)",borderRadius:3,padding:"0 4px",fontSize:"10px",color:"var(--ss-dim)",cursor:"pointer",verticalAlign:"middle"},children:h?t(Yt,{}):t(Xt,{})})]})}return t("span",{children:f})},[i,a,s]),u={collectionInterval:"Stats Collection",dashboardBroadcast:"Dashboard Broadcast",debugBroadcast:"Debug Broadcast",persistFlush:"Persist Flush",retentionCleanup:"Retention Cleanup"},d={prometheus:"Prometheus",pinoHook:"Pino Log Hook",edgePlugin:"Edge Plugin",cacheInspector:"Cache Inspector",queueInspector:"Queue Inspector"};return t("div",{children:[t("h3",{className:`${s}-internals-title`,children:"Package Info"}),t("div",{className:`${s}-info-cards`,children:[t(Ne,{label:"Version",value:e.package.version||"-",prefix:s}),t(Ne,{label:"Node.js",value:e.package.nodeVersion||"-",prefix:s}),t(Ne,{label:"AdonisJS",value:e.package.adonisVersion||"-",prefix:s}),t(Ne,{label:"Uptime",value:qr(e.package.uptime),prefix:s})]}),e.collectors.length>0&&t(B,{children:[t("h3",{className:`${s}-internals-title`,children:"Collectors"}),t("table",{className:n,children:[t("thead",{children:t("tr",{children:[t("th",{children:"Collector"}),t("th",{children:"Status"}),t("th",{children:"Last Error"}),t("th",{children:"Config"})]})}),t("tbody",{children:e.collectors.map(p=>t("tr",{children:[t("td",{children:[t("code",{children:p.name}),p.label&&p.label!==p.name&&t("span",{className:`${s}-c-dim`,children:[" ",p.label]})]}),t("td",{children:[t(le,{status:p.status,prefix:s}),p.status]}),t("td",{className:p.lastError?`${s}-c-red`:`${s}-c-dim`,children:p.lastError?t(B,{children:[p.lastError,p.lastErrorAt&&t("span",{className:`${s}-c-dim`,style:{fontSize:"10px"},children:Jt(p.lastErrorAt)})]}):"-"}),t("td",{children:t(Kr,{config:p.config,prefix:s})})]},p.name))})]})]}),t("h3",{className:`${s}-internals-title`,children:"Buffers"}),t("table",{className:n,children:[t("thead",{children:t("tr",{children:[t("th",{children:"Buffer"}),t("th",{children:"Usage"}),t("th",{children:"Fill %"})]})}),t("tbody",{children:Object.entries(e.buffers).map(([p,o])=>t("tr",{children:[t("td",{style:{textTransform:"capitalize"},children:p}),t("td",{children:[De(o.current)," / ",De(o.max)]}),t("td",{children:t(Vr,{current:o.current,max:o.max,prefix:s})})]},p))})]}),t("h3",{className:`${s}-internals-title`,children:"Timers"}),t("table",{className:n,children:[t("thead",{children:t("tr",{children:[t("th",{children:"Timer"}),t("th",{children:"Status"}),t("th",{children:"Interval"})]})}),t("tbody",{children:Object.entries(e.timers).map(([p,o])=>t("tr",{children:[t("td",{children:u[p]||p}),t("td",{children:[t(le,{status:o.active?"active":"inactive",prefix:s}),t("span",{className:o.active?`${s}-c-green`:`${s}-c-dim`,children:o.active?"active":"inactive"})]}),t("td",{children:o.active?o.intervalMs?Gt(o.intervalMs):o.debounceMs?`${Gt(o.debounceMs)} (debounce)`:"-":t("span",{className:`${s}-c-dim`,children:"—"})})]},p))})]}),t("h3",{className:`${s}-internals-title`,children:"Integrations"}),t("table",{className:n,children:[t("thead",{children:t("tr",{children:[t("th",{children:"Integration"}),t("th",{children:"Status"}),t("th",{children:"Details"})]})}),t("tbody",{children:[t("tr",{children:[t("td",{children:"Transmit (SSE)"}),t("td",{children:[t(le,{status:e.transmit.available?"connected":"inactive",prefix:s}),e.transmit.available?"connected":"unavailable"]}),t("td",{style:{fontSize:"11px"},children:e.transmit.channels.length>0?`Channels: ${e.transmit.channels.join(", ")}`:"-"})]}),Object.entries(e.integrations).map(([p,o])=>{const f=o.active??o.available??!1,h=o.active?"active":o.available?"available":"unavailable";let m=o.mode?`Mode: ${o.mode}`:"-";return p==="edgePlugin"&&o.active?m="@serverStats() tag registered":p==="cacheInspector"&&o.available?m="Redis dependency detected":p==="queueInspector"&&o.available&&(m="Queue dependency detected"),t("tr",{children:[t("td",{children:d[p]||p}),t("td",{children:[t(le,{status:f?"active":"inactive",prefix:s}),h]}),t("td",{className:`${s}-c-dim`,style:{fontSize:"11px"},children:m})]},p)})]})]}),e.storage&&t(B,{children:[t("h3",{className:`${s}-internals-title`,children:"Storage (SQLite)"}),t("table",{className:n,children:[t("thead",{children:t("tr",{children:[t("th",{style:{width:"200px"},children:"Metric"}),t("th",{children:"Value"})]})}),t("tbody",{children:[t("tr",{children:[t("td",{children:"Status"}),t("td",{children:[t(le,{status:e.storage.ready?"ready":"inactive",prefix:s}),e.storage.ready?"ready":"not ready"]})]}),t("tr",{children:[t("td",{children:"DB Path"}),t("td",{children:t("code",{children:e.storage.dbPath})})]}),t("tr",{children:[t("td",{children:"File Size"}),t("td",{children:[e.storage.fileSizeMb.toFixed(1)," MB"]})]}),t("tr",{children:[t("td",{children:"WAL Size"}),t("td",{children:[e.storage.walSizeMb.toFixed(1)," MB"]})]}),t("tr",{children:[t("td",{children:"Retention"}),t("td",{children:[e.storage.retentionDays," days"]})]}),t("tr",{children:[t("td",{children:"Last Cleanup"}),t("td",{children:e.storage.lastCleanupAt?Jt(e.storage.lastCleanupAt):"-"})]})]})]}),e.storage.tables.length>0&&t("table",{className:n,style:{marginTop:8},children:[t("thead",{children:t("tr",{children:[t("th",{children:"Table"}),t("th",{children:"Rows"})]})}),t("tbody",{children:e.storage.tables.map(p=>t("tr",{children:[t("td",{children:t("code",{children:p.name})}),t("td",{children:De(p.rowCount)})]},p.name))})]})]}),t("h3",{className:`${s}-internals-title`,children:"Resolved Config"}),t("table",{className:n,children:[t("thead",{children:t("tr",{children:[t("th",{style:{width:"200px"},children:"Setting"}),t("th",{children:"Value"})]})}),t("tbody",{children:[t("tr",{children:[t("td",{children:"intervalMs"}),t("td",{children:e.config.intervalMs})]}),t("tr",{children:[t("td",{children:"transport"}),t("td",{children:e.config.transport})]}),t("tr",{children:[t("td",{children:"channelName"}),t("td",{children:e.config.channelName})]}),t("tr",{children:[t("td",{children:"endpoint"}),t("td",{children:e.config.endpoint===!1?"false":e.config.endpoint})]}),t("tr",{children:[t("td",{children:"skipInTest"}),t("td",{children:c("skipInTest",e.config.skipInTest)})]}),t("tr",{children:[t("td",{children:"onStats callback"}),t("td",{children:e.config.hasOnStatsCallback?"defined":"not defined"})]}),t("tr",{children:[t("td",{children:"shouldShow callback"}),t("td",{children:e.config.hasShouldShowCallback?"defined":"not defined"})]})]})]}),t("h4",{className:`${s}-internals-title`,children:"DevToolbar"}),t("table",{className:n,children:[t("thead",{children:t("tr",{children:[t("th",{style:{width:"200px"},children:"Setting"}),t("th",{children:"Value"})]})}),t("tbody",{children:Object.entries(e.devToolbar).map(([p,o])=>t("tr",{children:[t("td",{children:p==="customPaneCount"?"customPanes":p}),t("td",{children:p==="customPaneCount"?`${o} registered`:c(p,o)})]},p))})]})]})}const Gr=3e3;function Zt({options:e}){const{baseUrl:n="",debugEndpoint:r="/admin/api/debug",authToken:s}=e||{},[i,l]=$(null),[a,c]=$(!0),[u,d]=$(null),p=M(null),o=M(null),f=T(()=>(p.current||(p.current=new ie({baseUrl:n,authToken:s})),p.current),[n,s]),h=T(async()=>{try{const y=await f().get(`${r}/diagnostics`);l(y),d(null),c(!1)}catch(m){if(m instanceof ge){d(m),c(!1),o.current&&(clearInterval(o.current),o.current=null);return}d(m instanceof Error?m:new Error(String(m))),c(!1)}},[r,f]);return P(()=>(c(!0),d(null),h(),o.current=setInterval(h,Gr),()=>{o.current&&(clearInterval(o.current),o.current=null)}),[h]),a&&!i?t("div",{className:"ss-dbg-empty",children:"Loading diagnostics..."}):u?t("div",{className:"ss-dbg-empty",children:["Error: ",u.message]}):i?t(Jr,{data:i,tableClassName:"ss-dbg-table",classPrefix:"ss-dbg"}):t("div",{className:"ss-dbg-empty",children:"Diagnostics not available"})}const Qr=Object.freeze(Object.defineProperty({__proto__:null,InternalsTab:Zt,default:Zt},Symbol.toStringTag,{value:"Module"}));function en({pane:e,options:n}){({...n});const{data:r,isLoading:s,error:i,clearData:l}=H(e.endpoint.replace(/^\//,""),{...n,debugEndpoint:""}),[a,c]=$(""),u=L(()=>{if(!r)return[];const f=e.dataKey||e.id;let h=r;for(const m of f.split("."))h=h?.[m];return Array.isArray(h)?h:[]},[r,e.dataKey,e.id]),d=L(()=>{if(!a)return u;const f=a.toLowerCase(),h=e.columns.filter(m=>m.searchable).map(m=>m.key);return h.length===0?u:u.filter(m=>h.some(y=>{const b=m[y];return b!==null&&String(b).toLowerCase().includes(f)}))},[u,a,e.columns]),p=(f,h)=>{if(f==null)return t("span",{className:"ss-dbg-c-dim",children:"-"});switch(h.format||"text"){case"time":return t("span",{className:"ss-dbg-event-time",title:V(f),children:typeof f=="number"?K(f):String(f)});case"timeAgo":return t("span",{className:"ss-dbg-event-time",title:V(f),children:K(f)});case"duration":{const y=typeof f=="number"?f:parseFloat(String(f));return isNaN(y)?String(f):t("span",{className:`ss-dbg-duration ${y>500?"ss-dbg-very-slow":y>100?"ss-dbg-slow":""}`,children:W(y)})}case"method":return t("span",{className:`ss-dbg-method ss-dbg-method-${String(f).toLowerCase()}`,children:String(f)});case"json":{let y=f;if(typeof f=="string")try{y=JSON.parse(f)}catch{}return be(y,80)}case"badge":{const y=String(f).toLowerCase(),g=(h.badgeColorMap||{})[y]||"muted";return t("span",{className:`ss-dbg-badge ss-dbg-badge-${g}`,children:String(f)})}default:return String(f)}},o=M(null);return P(()=>{if(o.current)return J(o.current)},[d]),s&&!r?t("div",{className:"ss-dbg-empty",children:["Loading ",e.label,"..."]}):i?t("div",{className:"ss-dbg-empty",children:["Error: ",i.message]}):t("div",{children:[e.search&&t("div",{className:"ss-dbg-search-bar",children:[t("input",{type:"text",className:"ss-dbg-search",placeholder:e.search.placeholder,value:a,onChange:f=>c(f.target.value)}),t("span",{className:"ss-dbg-summary",children:[d.length," items"]}),e.clearable&&t("button",{type:"button",className:"ss-dbg-btn-clear",onClick:l,children:"Clear"})]}),d.length===0?t("div",{className:"ss-dbg-empty",children:"No data"}):t("table",{ref:o,className:"ss-dbg-table",children:[t("thead",{children:t("tr",{children:e.columns.map(f=>t("th",{children:f.label},f.key))})}),t("tbody",{children:d.map((f,h)=>t("tr",{children:e.columns.map(m=>t("td",{children:p(f[m.key],m)},m.key))},f.id??h))})]})]})}const Xr=Object.freeze(Object.defineProperty({__proto__:null,CustomPaneTab:en,default:en},Symbol.toStringTag,{value:"Module"}))})();
