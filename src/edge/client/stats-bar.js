(function(){"use strict";var le,S,He,G,Be,ze,qe,We,we,xe,$e,oe={},ae=[],en=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ee=Array.isArray;function B(e,n){for(var r in n)e[r]=n[r];return e}function Ce(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Y(e,n,r){var s,i,l,a={};for(l in n)l=="key"?s=n[l]:l=="ref"?i=n[l]:a[l]=n[l];if(arguments.length>2&&(a.children=arguments.length>3?le.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(l in e.defaultProps)a[l]===void 0&&(a[l]=e.defaultProps[l]);return ce(e,a,s,i,null)}function ce(e,n,r,s,i){var l={type:e,props:n,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++He,__i:-1,__u:0};return i==null&&S.vnode!=null&&S.vnode(l),l}function I(e){return e.children}function z(e,n){this.props=e,this.context=n}function Z(e,n){if(n==null)return e.__?Z(e.__,e.__i+1):null;for(var r;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?Z(e):null}function tn(e){if(e.__P&&e.__d){var n=e.__v,r=n.__e,s=[],i=[],l=B({},n);l.__v=n.__v+1,S.vnode&&S.vnode(l),ke(e.__P,l,n,e.__n,e.__P.namespaceURI,32&n.__u?[r]:null,s,r??Z(n),!!(32&n.__u),i),l.__v=n.__v,l.__.__k[l.__i]=l,Ye(s,l,i),n.__e=n.__=null,l.__e!=r&&Ve(l)}}function Ve(e){if((e=e.__)!=null&&e.__c!=null)return e.__e=e.__c.base=null,e.__k.some(function(n){if(n!=null&&n.__e!=null)return e.__e=e.__c.base=n.__e}),Ve(e)}function Ke(e){(!e.__d&&(e.__d=!0)&&G.push(e)&&!de.__r++||Be!=S.debounceRendering)&&((Be=S.debounceRendering)||ze)(de)}function de(){for(var e,n=1;G.length;)G.length>n&&G.sort(qe),e=G.shift(),n=G.length,tn(e);de.__r=0}function Je(e,n,r,s,i,l,a,c,u,d,p){var o,f,h,m,y,_,g,b=s&&s.__k||ae,w=n.length;for(u=nn(r,n,b,u,w),o=0;o<w;o++)(h=r.__k[o])!=null&&(f=h.__i!=-1&&b[h.__i]||oe,h.__i=o,_=ke(e,h,f,i,l,a,c,u,d,p),m=h.__e,h.ref&&f.ref!=h.ref&&(f.ref&&Te(f.ref,null,h),p.push(h.ref,h.__c||m,h)),y==null&&m!=null&&(y=m),(g=!!(4&h.__u))||f.__k===h.__k?u=Ge(h,u,e,g):typeof h.type=="function"&&_!==void 0?u=_:m&&(u=m.nextSibling),h.__u&=-7);return r.__e=y,u}function nn(e,n,r,s,i){var l,a,c,u,d,p=r.length,o=p,f=0;for(e.__k=new Array(i),l=0;l<i;l++)(a=n[l])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=e.__k[l]=ce(null,a,null,null,null):ee(a)?a=e.__k[l]=ce(I,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=e.__k[l]=ce(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):e.__k[l]=a,u=l+f,a.__=e,a.__b=e.__b+1,c=null,(d=a.__i=rn(a,r,u,o))!=-1&&(o--,(c=r[d])&&(c.__u|=2)),c==null||c.__v==null?(d==-1&&(i>p?f--:i<p&&f++),typeof a.type!="function"&&(a.__u|=4)):d!=u&&(d==u-1?f--:d==u+1?f++:(d>u?f--:f++,a.__u|=4))):e.__k[l]=null;if(o)for(l=0;l<p;l++)(c=r[l])!=null&&(2&c.__u)==0&&(c.__e==s&&(s=Z(c)),et(c,c));return s}function Ge(e,n,r,s){var i,l;if(typeof e.type=="function"){for(i=e.__k,l=0;i&&l<i.length;l++)i[l]&&(i[l].__=e,n=Ge(i[l],n,r,s));return n}e.__e!=n&&(s&&(n&&e.type&&!n.parentNode&&(n=Z(e)),r.insertBefore(e.__e,n||null)),n=e.__e);do n=n&&n.nextSibling;while(n!=null&&n.nodeType==8);return n}function ue(e,n){return n=n||[],e==null||typeof e=="boolean"||(ee(e)?e.some(function(r){ue(r,n)}):n.push(e)),n}function rn(e,n,r,s){var i,l,a,c=e.key,u=e.type,d=n[r],p=d!=null&&(2&d.__u)==0;if(d===null&&c==null||p&&c==d.key&&u==d.type)return r;if(s>(p?1:0)){for(i=r-1,l=r+1;i>=0||l<n.length;)if((d=n[a=i>=0?i--:l++])!=null&&(2&d.__u)==0&&c==d.key&&u==d.type)return a}return-1}function Qe(e,n,r){n[0]=="-"?e.setProperty(n,r??""):e[n]=r==null?"":typeof r!="number"||en.test(n)?r:r+"px"}function he(e,n,r,s,i){var l,a;e:if(n=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof s=="string"&&(e.style.cssText=s=""),s)for(n in s)r&&n in r||Qe(e.style,n,"");if(r)for(n in r)s&&r[n]==s[n]||Qe(e.style,n,r[n])}else if(n[0]=="o"&&n[1]=="n")l=n!=(n=n.replace(We,"$1")),a=n.toLowerCase(),n=a in e||n=="onFocusOut"||n=="onFocusIn"?a.slice(2):n.slice(2),e.l||(e.l={}),e.l[n+l]=r,r?s?r.u=s.u:(r.u=we,e.addEventListener(n,l?$e:xe,l)):e.removeEventListener(n,l?$e:xe,l);else{if(i=="http://www.w3.org/2000/svg")n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!="width"&&n!="height"&&n!="href"&&n!="list"&&n!="form"&&n!="tabIndex"&&n!="download"&&n!="rowSpan"&&n!="colSpan"&&n!="role"&&n!="popover"&&n in e)try{e[n]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&n[4]!="-"?e.removeAttribute(n):e.setAttribute(n,n=="popover"&&r==1?"":r))}}function Xe(e){return function(n){if(this.l){var r=this.l[n.type+e];if(n.t==null)n.t=we++;else if(n.t<r.u)return;return r(S.event?S.event(n):n)}}}function ke(e,n,r,s,i,l,a,c,u,d){var p,o,f,h,m,y,_,g,b,w,C,v,k,N,L,x=n.type;if(n.constructor!==void 0)return null;128&r.__u&&(u=!!(32&r.__u),l=[c=n.__e=r.__e]),(p=S.__b)&&p(n);e:if(typeof x=="function")try{if(g=n.props,b="prototype"in x&&x.prototype.render,w=(p=x.contextType)&&s[p.__c],C=p?w?w.props.value:p.__:s,r.__c?_=(o=n.__c=r.__c).__=o.__E:(b?n.__c=o=new x(g,C):(n.__c=o=new z(g,C),o.constructor=x,o.render=ln),w&&w.sub(o),o.state||(o.state={}),o.__n=s,f=o.__d=!0,o.__h=[],o._sb=[]),b&&o.__s==null&&(o.__s=o.state),b&&x.getDerivedStateFromProps!=null&&(o.__s==o.state&&(o.__s=B({},o.__s)),B(o.__s,x.getDerivedStateFromProps(g,o.__s))),h=o.props,m=o.state,o.__v=n,f)b&&x.getDerivedStateFromProps==null&&o.componentWillMount!=null&&o.componentWillMount(),b&&o.componentDidMount!=null&&o.__h.push(o.componentDidMount);else{if(b&&x.getDerivedStateFromProps==null&&g!==h&&o.componentWillReceiveProps!=null&&o.componentWillReceiveProps(g,C),n.__v==r.__v||!o.__e&&o.shouldComponentUpdate!=null&&o.shouldComponentUpdate(g,o.__s,C)===!1){n.__v!=r.__v&&(o.props=g,o.state=o.__s,o.__d=!1),n.__e=r.__e,n.__k=r.__k,n.__k.some(function(F){F&&(F.__=n)}),ae.push.apply(o.__h,o._sb),o._sb=[],o.__h.length&&a.push(o);break e}o.componentWillUpdate!=null&&o.componentWillUpdate(g,o.__s,C),b&&o.componentDidUpdate!=null&&o.__h.push(function(){o.componentDidUpdate(h,m,y)})}if(o.context=C,o.props=g,o.__P=e,o.__e=!1,v=S.__r,k=0,b)o.state=o.__s,o.__d=!1,v&&v(n),p=o.render(o.props,o.state,o.context),ae.push.apply(o.__h,o._sb),o._sb=[];else do o.__d=!1,v&&v(n),p=o.render(o.props,o.state,o.context),o.state=o.__s;while(o.__d&&++k<25);o.state=o.__s,o.getChildContext!=null&&(s=B(B({},s),o.getChildContext())),b&&!f&&o.getSnapshotBeforeUpdate!=null&&(y=o.getSnapshotBeforeUpdate(h,m)),N=p!=null&&p.type===I&&p.key==null?Ze(p.props.children):p,c=Je(e,ee(N)?N:[N],n,r,s,i,l,a,c,u,d),o.base=n.__e,n.__u&=-161,o.__h.length&&a.push(o),_&&(o.__E=o.__=null)}catch(F){if(n.__v=null,u||l!=null)if(F.then){for(n.__u|=u?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;l[l.indexOf(c)]=null,n.__e=c}else{for(L=l.length;L--;)Ce(l[L]);Se(n)}else n.__e=r.__e,n.__k=r.__k,F.then||Se(n);S.__e(F,n,r)}else l==null&&n.__v==r.__v?(n.__k=r.__k,n.__e=r.__e):c=n.__e=sn(r.__e,n,r,s,i,l,a,u,d);return(p=S.diffed)&&p(n),128&n.__u?void 0:c}function Se(e){e&&(e.__c&&(e.__c.__e=!0),e.__k&&e.__k.some(Se))}function Ye(e,n,r){for(var s=0;s<r.length;s++)Te(r[s],r[++s],r[++s]);S.__c&&S.__c(n,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(l){l.call(i)})}catch(l){S.__e(l,i.__v)}})}function Ze(e){return typeof e!="object"||e==null||e.__b>0?e:ee(e)?e.map(Ze):B({},e)}function sn(e,n,r,s,i,l,a,c,u){var d,p,o,f,h,m,y,_=r.props||oe,g=n.props,b=n.type;if(b=="svg"?i="http://www.w3.org/2000/svg":b=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),l!=null){for(d=0;d<l.length;d++)if((h=l[d])&&"setAttribute"in h==!!b&&(b?h.localName==b:h.nodeType==3)){e=h,l[d]=null;break}}if(e==null){if(b==null)return document.createTextNode(g);e=document.createElementNS(i,b,g.is&&g),c&&(S.__m&&S.__m(n,l),c=!1),l=null}if(b==null)_===g||c&&e.data==g||(e.data=g);else{if(l=l&&le.call(e.childNodes),!c&&l!=null)for(_={},d=0;d<e.attributes.length;d++)_[(h=e.attributes[d]).name]=h.value;for(d in _)h=_[d],d=="dangerouslySetInnerHTML"?o=h:d=="children"||d in g||d=="value"&&"defaultValue"in g||d=="checked"&&"defaultChecked"in g||he(e,d,null,h,i);for(d in g)h=g[d],d=="children"?f=h:d=="dangerouslySetInnerHTML"?p=h:d=="value"?m=h:d=="checked"?y=h:c&&typeof h!="function"||_[d]===h||he(e,d,h,_[d],i);if(p)c||o&&(p.__html==o.__html||p.__html==e.innerHTML)||(e.innerHTML=p.__html),n.__k=[];else if(o&&(e.innerHTML=""),Je(n.type=="template"?e.content:e,ee(f)?f:[f],n,r,s,b=="foreignObject"?"http://www.w3.org/1999/xhtml":i,l,a,l?l[0]:r.__k&&Z(r,0),c,u),l!=null)for(d=l.length;d--;)Ce(l[d]);c||(d="value",b=="progress"&&m==null?e.removeAttribute("value"):m!=null&&(m!==e[d]||b=="progress"&&!m||b=="option"&&m!=_[d])&&he(e,d,m,_[d],i),d="checked",y!=null&&y!=e[d]&&he(e,d,y,_[d],i))}return e}function Te(e,n,r){try{if(typeof e=="function"){var s=typeof e.__u=="function";s&&e.__u(),s&&n==null||(e.__u=e(n))}else e.current=n}catch(i){S.__e(i,r)}}function et(e,n,r){var s,i;if(S.unmount&&S.unmount(e),(s=e.ref)&&(s.current&&s.current!=e.__e||Te(s,null,n)),(s=e.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(l){S.__e(l,n)}s.base=s.__P=null}if(s=e.__k)for(i=0;i<s.length;i++)s[i]&&et(s[i],n,r||typeof e.type!="function");r||Ce(e.__e),e.__c=e.__=e.__e=void 0}function ln(e,n,r){return this.constructor(e,r)}function Ee(e,n,r){var s,i,l,a;n==document&&(n=document.documentElement),S.__&&S.__(e,n),i=(s=!1)?null:n.__k,l=[],a=[],ke(n,e=n.__k=Y(I,null,[e]),i||oe,oe,n.namespaceURI,i?null:n.firstChild?le.call(n.childNodes):null,l,i?i.__e:n.firstChild,s,a),Ye(l,e,a)}le=ae.slice,S={__e:function(e,n,r,s){for(var i,l,a;n=n.__;)if((i=n.__c)&&!i.__)try{if((l=i.constructor)&&l.getDerivedStateFromError!=null&&(i.setState(l.getDerivedStateFromError(e)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,s||{}),a=i.__d),a)return i.__E=i}catch(c){e=c}throw e}},He=0,z.prototype.setState=function(e,n){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=B({},this.state),typeof e=="function"&&(e=e(B({},r),this.props)),e&&B(r,e),e!=null&&this.__v&&(n&&this._sb.push(n),Ke(this))},z.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ke(this))},z.prototype.render=I,G=[],ze=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,qe=function(e,n){return e.__v.__b-n.__v.__b},de.__r=0,We=/(PointerCapture)$|Capture$/i,we=0,xe=Xe(!1),$e=Xe(!0);var on=0;function t(e,n,r,s,i,l){n||(n={});var a,c,u=n;if("ref"in u)for(c in u={},n)c=="ref"?a=n[c]:u[c]=n[c];var d={type:e,props:u,key:r,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--on,__i:-1,__u:0,__source:i,__self:l};if(typeof e=="function"&&(a=e.defaultProps))for(c in a)u[c]===void 0&&(u[c]=a[c]);return S.vnode&&S.vnode(d),d}var te,O,Le,tt,ne=0,nt=[],R=S,rt=R.__b,st=R.__r,it=R.diffed,lt=R.__c,ot=R.unmount,at=R.__;function Me(e,n){R.__h&&R.__h(O,e,ne||n),ne=0;var r=O.__H||(O.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function $(e){return ne=1,an(ut,e)}function an(e,n,r){var s=Me(te++,2);if(s.t=e,!s.__c&&(s.__=[r?r(n):ut(void 0,n),function(c){var u=s.__N?s.__N[0]:s.__[0],d=s.t(u,c);u!==d&&(s.__N=[d,s.__[1]],s.__c.setState({}))}],s.__c=O,!O.__f)){var i=function(c,u,d){if(!s.__c.__H)return!0;var p=s.__c.__H.__.filter(function(f){return f.__c});if(p.every(function(f){return!f.__N}))return!l||l.call(this,c,u,d);var o=s.__c.props!==c;return p.some(function(f){if(f.__N){var h=f.__[0];f.__=f.__N,f.__N=void 0,h!==f.__[0]&&(o=!0)}}),l&&l.call(this,c,u,d)||o};O.__f=!0;var l=O.shouldComponentUpdate,a=O.componentWillUpdate;O.componentWillUpdate=function(c,u,d){if(this.__e){var p=l;l=void 0,i(c,u,d),l=p}a&&a.call(this,c,u,d)},O.shouldComponentUpdate=i}return s.__N||s.__}function P(e,n){var r=Me(te++,3);!R.__s&&dt(r.__H,n)&&(r.__=e,r.u=n,O.__H.__h.push(r))}function M(e){return ne=5,E(function(){return{current:e}},[])}function E(e,n){var r=Me(te++,7);return dt(r.__H,n)&&(r.__=e(),r.__H=n,r.__h=e),r.__}function T(e,n){return ne=8,E(function(){return e},n)}function cn(){for(var e;e=nt.shift();){var n=e.__H;if(e.__P&&n)try{n.__h.some(pe),n.__h.some(Pe),n.__h=[]}catch(r){n.__h=[],R.__e(r,e.__v)}}}R.__b=function(e){O=null,rt&&rt(e)},R.__=function(e,n){e&&n.__k&&n.__k.__m&&(e.__m=n.__k.__m),at&&at(e,n)},R.__r=function(e){st&&st(e),te=0;var n=(O=e.__c).__H;n&&(Le===O?(n.__h=[],O.__h=[],n.__.some(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(n.__h.some(pe),n.__h.some(Pe),n.__h=[],te=0)),Le=O},R.diffed=function(e){it&&it(e);var n=e.__c;n&&n.__H&&(n.__H.__h.length&&(nt.push(n)!==1&&tt===R.requestAnimationFrame||((tt=R.requestAnimationFrame)||dn)(cn)),n.__H.__.some(function(r){r.u&&(r.__H=r.u),r.u=void 0})),Le=O=null},R.__c=function(e,n){n.some(function(r){try{r.__h.some(pe),r.__h=r.__h.filter(function(s){return!s.__||Pe(s)})}catch(s){n.some(function(i){i.__h&&(i.__h=[])}),n=[],R.__e(s,r.__v)}}),lt&&lt(e,n)},R.unmount=function(e){ot&&ot(e);var n,r=e.__c;r&&r.__H&&(r.__H.__.some(function(s){try{pe(s)}catch(i){n=i}}),r.__H=void 0,n&&R.__e(n,r.__v))};var ct=typeof requestAnimationFrame=="function";function dn(e){var n,r=function(){clearTimeout(s),ct&&cancelAnimationFrame(n),setTimeout(e)},s=setTimeout(r,35);ct&&(n=requestAnimationFrame(r))}function pe(e){var n=O,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),O=n}function Pe(e){var n=O;e.__c=e.__(),O=n}function dt(e,n){return!e||e.length!==n.length||n.some(function(r,s){return r!==e[s]})}function ut(e,n){return typeof n=="function"?n(e):n}function un(e,n){for(var r in n)e[r]=n[r];return e}function ht(e,n){for(var r in e)if(r!=="__source"&&!(r in n))return!0;for(var s in n)if(s!=="__source"&&e[s]!==n[s])return!0;return!1}function pt(e,n){this.props=e,this.context=n}(pt.prototype=new z).isPureReactComponent=!0,pt.prototype.shouldComponentUpdate=function(e,n){return ht(this.props,e)||ht(this.state,n)};var ft=S.__b;S.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),ft&&ft(e)};var hn=S.__e;S.__e=function(e,n,r,s){if(e.then){for(var i,l=n;l=l.__;)if((i=l.__c)&&i.__c)return n.__e==null&&(n.__e=r.__e,n.__k=r.__k),i.__c(e,n)}hn(e,n,r,s)};var mt=S.unmount;function gt(e,n,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(s){typeof s.__c=="function"&&s.__c()}),e.__c.__H=null),(e=un({},e)).__c!=null&&(e.__c.__P===r&&(e.__c.__P=n),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(s){return gt(s,n,r)})),e}function bt(e,n,r){return e&&r&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(s){return bt(s,n,r)}),e.__c&&e.__c.__P===n&&(e.__e&&r.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=r)),e}function re(){this.__u=0,this.o=null,this.__b=null}function _t(e){if(!e.__)return null;var n=e.__.__c;return n&&n.__a&&n.__a(e)}function j(e){var n,r,s,i=null;function l(a){if(n||(n=e()).then(function(c){c&&(i=c.default||c),s=!0},function(c){r=c,s=!0}),r)throw r;if(!s)throw n;return i?Y(i,a):null}return l.displayName="Lazy",l.__f=!0,l}function fe(){this.i=null,this.l=null}S.unmount=function(e){var n=e.__c;n&&(n.__z=!0),n&&n.__R&&n.__R(),n&&32&e.__u&&(e.type=null),mt&&mt(e)},(re.prototype=new z).__c=function(e,n){var r=n.__c,s=this;s.o==null&&(s.o=[]),s.o.push(r);var i=_t(s.__v),l=!1,a=function(){l||s.__z||(l=!0,r.__R=null,i?i(u):u())};r.__R=a;var c=r.__P;r.__P=null;var u=function(){if(!--s.__u){if(s.state.__a){var d=s.state.__a;s.__v.__k[0]=bt(d,d.__c.__P,d.__c.__O)}var p;for(s.setState({__a:s.__b=null});p=s.o.pop();)p.__P=c,p.forceUpdate()}};s.__u++||32&n.__u||s.setState({__a:s.__b=s.__v.__k[0]}),e.then(a,a)},re.prototype.componentWillUnmount=function(){this.o=[]},re.prototype.render=function(e,n){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=gt(this.__b,r,s.__O=s.__P)}this.__b=null}var i=n.__a&&Y(I,null,e.fallback);return i&&(i.__u&=-33),[Y(I,null,n.__a?null:e.children),i]};var yt=function(e,n,r){if(++r[1]===r[0]&&e.l.delete(n),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(r=e.i;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;e.i=r=r[2]}};function pn(e){return this.getChildContext=function(){return e.context},e.children}function fn(e){var n=this,r=e.h;if(n.componentWillUnmount=function(){Ee(null,n.v),n.v=null,n.h=null},n.h&&n.h!==r&&n.componentWillUnmount(),!n.v){for(var s=n.__v;s!==null&&!s.__m&&s.__!==null;)s=s.__;n.h=r,n.v={nodeType:1,parentNode:r,childNodes:[],__k:{__m:s.__m},contains:function(){return!0},namespaceURI:r.namespaceURI,insertBefore:function(i,l){this.childNodes.push(i),n.h.insertBefore(i,l)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),n.h.removeChild(i)}}}Ee(Y(pn,{context:n.context},e.__v),n.v)}function mn(e,n){var r=Y(fn,{__v:e,h:n});return r.containerInfo=n,r}(fe.prototype=new z).__a=function(e){var n=this,r=_t(n.__v),s=n.l.get(e);return s[0]++,function(i){var l=function(){n.props.revealOrder?(s.push(i),yt(n,e,s)):i()};r?r(l):l()}},fe.prototype.render=function(e){this.i=null,this.l=new Map;var n=ue(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&n.reverse();for(var r=n.length;r--;)this.l.set(n[r],this.i=[1,0,this.i]);return e.children},fe.prototype.componentDidUpdate=fe.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(n,r){yt(e,r,n)})};var gn=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,bn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,_n=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,yn=/[A-Z0-9]/g,vn=typeof document<"u",Nn=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};z.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(z.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(n){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:n})}})});var vt=S.event;function wn(){}function xn(){return this.cancelBubble}function $n(){return this.defaultPrevented}S.event=function(e){return vt&&(e=vt(e)),e.persist=wn,e.isPropagationStopped=xn,e.isDefaultPrevented=$n,e.nativeEvent=e};var Cn={enumerable:!1,configurable:!0,get:function(){return this.class}},Nt=S.vnode;S.vnode=function(e){typeof e.type=="string"&&(function(n){var r=n.props,s=n.type,i={},l=s.indexOf("-")===-1;for(var a in r){var c=r[a];if(!(a==="value"&&"defaultValue"in r&&c==null||vn&&a==="children"&&s==="noscript"||a==="class"||a==="className")){var u=a.toLowerCase();a==="defaultValue"&&"value"in r&&r.value==null?a="value":a==="download"&&c===!0?c="":u==="translate"&&c==="no"?c=!1:u[0]==="o"&&u[1]==="n"?u==="ondoubleclick"?a="ondblclick":u!=="onchange"||s!=="input"&&s!=="textarea"||Nn(r.type)?u==="onfocus"?a="onfocusin":u==="onblur"?a="onfocusout":_n.test(a)&&(a=u):u=a="oninput":l&&bn.test(a)?a=a.replace(yn,"-$&").toLowerCase():c===null&&(c=void 0),u==="oninput"&&i[a=u]&&(a="oninputCapture"),i[a]=c}}s=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=ue(r.children).forEach(function(d){d.props.selected=i.value.indexOf(d.props.value)!=-1})),s=="select"&&i.defaultValue!=null&&(i.value=ue(r.children).forEach(function(d){d.props.selected=i.multiple?i.defaultValue.indexOf(d.props.value)!=-1:i.defaultValue==d.props.value})),r.class&&!r.className?(i.class=r.class,Object.defineProperty(i,"className",Cn)):r.className&&(i.class=i.className=r.className),n.props=i})(e),e.$$typeof=gn,Nt&&Nt(e)};var wt=S.__r;S.__r=function(e){wt&&wt(e),e.__c};var xt=S.diffed;S.diffed=function(e){xt&&xt(e);var n=e.props,r=e.__e;r!=null&&e.type==="textarea"&&"value"in n&&n.value!==r.value&&(r.value=n.value==null?"":n.value)};var kn={Fragment:I};class me extends Error{status;constructor(n=403){super(`Unauthorized (HTTP ${n})`),this.name="UnauthorizedError",this.status=n}}class Sn extends Error{status;body;constructor(n,r){super(`API error (HTTP ${n})`),this.name="ApiError",this.status=n,this.body=r}}class se{baseUrl;authToken;constructor(n){this.baseUrl=n.baseUrl.replace(/\/+$/,""),this.authToken=n.authToken}async fetch(n,r){const i={...{Accept:"application/json",...this.authToken?{Authorization:`Bearer ${this.authToken}`}:{}},...r?.headers},l=await globalThis.fetch(`${this.baseUrl}${n}`,{...r,headers:i,credentials:this.authToken?"omit":"include"});if(l.status===401||l.status===403)throw new me(l.status);if(!l.ok){const a=await l.text().catch(()=>"");throw new Sn(l.status,a)}return l.json()}async get(n,r){const s=r?`${n}?${r}`:n;return this.fetch(s)}async post(n,r){const s={method:"POST",...r!==void 0?{body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}:{}};return this.fetch(n,s)}async delete(n){return this.fetch(n,{method:"DELETE"})}}const $t="/admin/api/debug",Ct={tracing:!1,process:!1,system:!1,http:!1,db:!1,redis:!1,queues:!1,cache:!1,app:!1,log:!1,emails:!1,dashboard:!1,customPanes:[]};function Tn(e){return{tracing:e.features?.tracing??!1,process:e.features?.process??!1,system:e.features?.system??!1,http:e.features?.http??!1,db:e.features?.db??!1,redis:e.features?.redis??!1,queues:e.features?.queues??!1,cache:e.features?.cache??!1,app:e.features?.app??!1,log:e.features?.log??!1,emails:e.features?.emails??!1,dashboard:e.features?.dashboard??!1,customPanes:e.customPanes??[]}}async function En(e,n=$t){const r=`${n.replace(/\/+$/,"")}/config`;return e.fetch(r)}async function Ln(e){const{baseUrl:n="",debugEndpoint:r=$t,authToken:s}=e,i=new se({baseUrl:n,authToken:s});try{const l=await En(i,r);return Tn(l)}catch{return Ct}}function Mn(e){const n=new Set,r="features"in e&&typeof e.features=="object"&&e.features!==null?e.features:e;return"process"in r&&r.process&&n.add("process"),("process"in r&&r.process||"system"in r&&r.system)&&n.add("memory"),"http"in r&&r.http&&n.add("http"),"db"in r&&r.db&&n.add("db"),"redis"in r&&r.redis&&n.add("redis"),"queues"in r&&r.queues&&n.add("queue"),"app"in r&&r.app&&n.add("app"),"log"in r&&r.log&&n.add("log"),n}function Pn(e){const n=new Set;return(A(e.cpuPercent)||A(e.uptime)||An(e.nodeVersion))&&n.add("process"),(A(e.memHeapUsed)||A(e.memRss))&&n.add("memory"),(A(e.systemMemoryTotalMb)||A(e.systemMemoryFreeMb))&&n.add("memory"),(A(e.requestsPerSecond)||A(e.avgResponseTimeMs)||A(e.errorRate)||A(e.activeHttpConnections))&&n.add("http"),(A(e.dbPoolMax)||A(e.dbPoolUsed)||A(e.dbPoolFree)||A(e.dbPoolPending))&&n.add("db"),e.redisOk!==void 0&&e.redisOk!==null&&n.add("redis"),(A(e.queueActive)||A(e.queueWaiting)||A(e.queueWorkerCount))&&n.add("queue"),(A(e.onlineUsers)||A(e.pendingWebhooks)||A(e.pendingEmails))&&n.add("app"),(A(e.logErrorsLast5m)||A(e.logEntriesPerMinute))&&n.add("log"),n}function A(e){return typeof e=="number"&&!Number.isNaN(e)}function An(e){return typeof e=="string"&&e.length>0}function On(e){const n=Math.floor(e/86400),r=Math.floor(e%86400/3600),s=Math.floor(e%3600/60);return n>0?`${n}d ${r}h`:r>0?`${r}h ${s}m`:`${s}m`}function Ae(e){const n=e/1048576;return n>=1024?`${(n/1024).toFixed(1)}G`:`${n.toFixed(0)}M`}function kt(e){return e>=1024?`${(e/1024).toFixed(1)}G`:`${e.toFixed(1)}M`}function Rn(e){return e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:`${e}`}function q(e){return e>=1e3?`${(e/1e3).toFixed(2)}s`:e>=1?`${e.toFixed(0)}ms`:`${e.toFixed(2)}ms`}function W(e){if(!e)return"-";const n=typeof e=="string"?new Date(e):new Date(e);return Number.isNaN(n.getTime())?"-":n.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})+"."+String(n.getMilliseconds()).padStart(3,"0")}function V(e){if(!e)return"-";const n=typeof e=="string"?new Date(e).getTime():e,r=Math.floor((Date.now()-n)/1e3);return r<0?"just now":r<60?`${r}s ago`:r<3600?`${Math.floor(r/60)}m ago`:r<86400?`${Math.floor(r/3600)}h ago`:`${Math.floor(r/86400)}d ago`}function Oe(e,n){switch(n){case"%":return`${e.toFixed(1)}%`;case"ms":return`${e.toFixed(0)}ms`;case"MB":return`${e.toFixed(1)}M`;case"bytes":return Ae(e);case"/s":case"/m":return e.toFixed(1);default:return e.toFixed(1)}}function ge(e,n,r){return e>r?"red":e>n?"amber":"green"}function In(e,n,r){return e<r?"red":e<n?"amber":"green"}function St(e,n){if(n===0)return"green";const r=e/n;return r>.8?"red":r>.5?"amber":"green"}const Fn={green:"ss-green",amber:"ss-amber",red:"ss-red"};function be(e,n=100){if(e===null)return"null";if(e===void 0)return"-";if(typeof e=="string")return'"'+(e.length>40?e.slice(0,40)+"...":e)+'"';if(typeof e=="number"||typeof e=="boolean")return String(e);if(Array.isArray(e)){if(e.length===0)return"[]";const s="["+e.slice(0,3).map(i=>be(i,30)).join(", ")+(e.length>3?", ..."+e.length+" items":"")+"]";return s.length>n?"["+e.length+" items]":s}if(typeof e=="object"){const r=Object.keys(e);if(r.length===0)return"{}";const s=[];for(let l=0;l<Math.min(r.length,4);l++)s.push(r[l]+": "+be(e[r[l]],30));const i="{ "+s.join(", ")+(r.length>4?", ...+"+(r.length-4):"")+" }";return i.length>n?"{ "+r.slice(0,6).join(", ")+(r.length>6?", ...":"")+" }":i}return String(e)}function Q(e){return Fn[e]||""}const Tt=[{id:"node",label:"NODE",title:"Node.js Runtime",unit:"",group:"process",extract:e=>0,format:e=>e.nodeVersion,color:()=>""},{id:"uptime",label:"UP",title:"Process Uptime",unit:"",group:"process",extract:e=>e.uptime,format:e=>On(e.uptime),color:()=>""},{id:"cpu",label:"CPU",title:"CPU Usage",unit:"%",group:"process",warnThreshold:50,critThreshold:80,extract:e=>e.cpuPercent,format:e=>`${e.cpuPercent.toFixed(1)}%`,color:e=>Q(ge(e.cpuPercent,50,80)),historyKey:"cpuPercent"},{id:"eventLoop",label:"EVT",title:"Event Loop Latency",unit:"ms",group:"process",warnThreshold:20,critThreshold:50,extract:e=>e.eventLoopLag,format:e=>`${e.eventLoopLag.toFixed(1)}ms`,color:e=>Q(ge(e.eventLoopLag,20,50)),historyKey:"eventLoopLag"},{id:"memory",label:"HEAP",title:"V8 Heap Usage",unit:"bytes",group:"memory",extract:e=>e.memHeapUsed,format:e=>Ae(e.memHeapUsed),color:()=>"",historyKey:"memHeapUsed"},{id:"rss",label:"RSS",title:"Resident Set Size",unit:"bytes",group:"memory",extract:e=>e.memRss,format:e=>Ae(e.memRss),color:()=>"",historyKey:"memRss"},{id:"systemMemory",label:"SYS",title:"System Memory",unit:"MB",group:"memory",extract:e=>e.systemMemoryTotalMb-e.systemMemoryFreeMb,format:e=>`${kt(e.systemMemoryTotalMb-e.systemMemoryFreeMb)}/${kt(e.systemMemoryTotalMb)}`,color:e=>{const n=e.systemMemoryTotalMb;if(n===0)return"";const r=n-e.systemMemoryFreeMb;return Q(St(r,n))},historyKey:"_sysMemUsed",show:e=>e.systemMemoryTotalMb!==null&&e.systemMemoryTotalMb!==void 0},{id:"reqPerSec",label:"REQ/s",title:"Requests per Second",unit:"/s",group:"http",extract:e=>e.requestsPerSecond,format:e=>e.requestsPerSecond.toFixed(1),color:()=>"",historyKey:"requestsPerSecond"},{id:"avgResponse",label:"AVG",title:"Avg Response Time",unit:"ms",group:"http",warnThreshold:200,critThreshold:500,extract:e=>e.avgResponseTimeMs,format:e=>`${e.avgResponseTimeMs.toFixed(0)}ms`,color:e=>Q(ge(e.avgResponseTimeMs,200,500)),historyKey:"avgResponseTimeMs"},{id:"errorRate",label:"ERR",title:"Error Rate",unit:"%",group:"http",warnThreshold:1,critThreshold:5,extract:e=>e.errorRate,format:e=>`${e.errorRate.toFixed(1)}%`,color:e=>Q(ge(e.errorRate,1,5)),historyKey:"errorRate"},{id:"connections",label:"CONN",title:"Active Connections",unit:"",group:"http",extract:e=>e.activeHttpConnections,format:e=>`${e.activeHttpConnections}`,color:()=>"",historyKey:"activeHttpConnections"},{id:"dbPool",label:"DB",title:"Database Pool",unit:"",group:"db",extract:e=>e.dbPoolUsed,format:e=>`${e.dbPoolUsed}/${e.dbPoolFree}/${e.dbPoolMax}`,color:e=>Q(St(e.dbPoolUsed,e.dbPoolMax)),historyKey:"dbPoolUsed"},{id:"redis",label:"REDIS",title:"Redis Status",unit:"",group:"redis",extract:e=>e.redisOk?1:0,format:e=>e.redisOk?"✓":"✗",color:e=>e.redisOk?"ss-green":"ss-red"},{id:"redisMem",label:"MEM",title:"Redis Memory",unit:"MB",group:"redis",extract:e=>e.redisMemoryUsedMb,format:e=>`${e.redisMemoryUsedMb.toFixed(1)}M`,color:()=>"",historyKey:"redisMemoryUsedMb",show:e=>e.redisOk},{id:"redisKeys",label:"KEYS",title:"Redis Keys",unit:"",group:"redis",extract:e=>e.redisKeysCount,format:e=>Rn(e.redisKeysCount),color:()=>"",historyKey:"redisKeysCount",show:e=>e.redisOk},{id:"redisHitRate",label:"HIT",title:"Redis Hit Rate",unit:"%",group:"redis",warnThreshold:90,critThreshold:70,inverseThreshold:!0,extract:e=>e.redisHitRate,format:e=>`${e.redisHitRate.toFixed(0)}%`,color:e=>Q(In(e.redisHitRate,90,70)),historyKey:"redisHitRate",show:e=>e.redisOk},{id:"queue",label:"Q",title:"Job Queue",unit:"",group:"queue",extract:e=>e.queueActive,format:e=>`${e.queueActive}/${e.queueWaiting}/${e.queueDelayed}`,color:e=>e.queueFailed>0?"ss-amber":"ss-green",historyKey:"queueActive"},{id:"queueWorkers",label:"WORKERS",title:"Queue Workers",unit:"",group:"queue",extract:e=>e.queueWorkerCount,format:e=>`${e.queueWorkerCount}`,color:()=>""},{id:"onlineUsers",label:"USERS",title:"Online Users",unit:"",group:"app",extract:e=>e.onlineUsers,format:e=>`${e.onlineUsers}`,color:()=>"",historyKey:"onlineUsers"},{id:"pendingWebhooks",label:"HOOKS",title:"Pending Webhooks",unit:"",group:"app",extract:e=>e.pendingWebhooks,format:e=>`${e.pendingWebhooks}`,color:e=>e.pendingWebhooks>0?"ss-amber":"",historyKey:"pendingWebhooks"},{id:"pendingEmails",label:"MAIL",title:"Pending Emails",unit:"",group:"app",extract:e=>e.pendingEmails,format:e=>`${e.pendingEmails}`,color:e=>e.pendingEmails>0?"ss-amber":"",historyKey:"pendingEmails"},{id:"logErrors",label:"LOG ERR",title:"Log Errors (5m)",unit:"",group:"log",extract:e=>e.logErrorsLast5m,format:e=>`${e.logErrorsLast5m}`,color:e=>e.logErrorsLast5m>0?"ss-red":e.logWarningsLast5m>0?"ss-amber":"",historyKey:"logErrorsLast5m"},{id:"logRate",label:"LOG/m",title:"Log Entries / Minute",unit:"/m",group:"log",extract:e=>e.logEntriesPerMinute,format:e=>`${e.logEntriesPerMinute}`,color:()=>"",historyKey:"logEntriesPerMinute"}],Un=60,Dn=1e4;function Et(e={}){const{baseUrl:n="",debugEndpoint:r="/admin/api/debug",authToken:s}=e,[i,l]=$(Ct),[a,c]=$(!0),[u,d]=$(null),p=M(!1);return P(()=>{if(p.current)return;p.current=!0;let o=!1;return(async()=>{try{const h=await Ln({baseUrl:n,debugEndpoint:r,authToken:s});o||(l(h),c(!1))}catch(h){o||(d(h instanceof Error?h:new Error(String(h))),c(!1))}})(),()=>{o=!0}},[n,r,s]),{features:i,isLoading:a,error:u}}function jn(e=Un){const n={};return{push(r){for(const s of Tt){const i=s.historyKey;if(!i)continue;const l=s.extract(r);typeof l=="number"&&(n[i]||(n[i]=[]),n[i].push(l),n[i].length>e&&n[i].shift())}},get(r){return n[r]||[]},getAll(){return n}}}async function Hn(){if(typeof window<"u"&&window.Transmit&&typeof window.Transmit=="function")return window.Transmit;try{const e=await import("@adonisjs/transmit-client");return e.Transmit??e.default??null}catch{return null}}function Bn(e){let n=null,r=null,s=!1;return{subscribe:async()=>{try{const a=await Hn();if(!a)throw new Error("Transmit client not available (neither window.Transmit nor @adonisjs/transmit-client)");if(s)return;n=new a({baseUrl:e.baseUrl||window.location.origin,...e.authToken?{beforeSubscribe(c){return{headers:{Authorization:`Bearer ${e.authToken}`}}},beforeUnsubscribe(c){return{headers:{Authorization:`Bearer ${e.authToken}`}}}}:{}}),r=n.subscription(e.channelName),r.onMessage(c=>{s||e.onMessage(c)}),await r.create()}catch(a){e.onError&&e.onError(a)}},unsubscribe:async()=>{s=!0;try{r&&(await r.delete(),r=null),n&&(n=null)}catch{}}}}function zn(e){let n=!1;const r=Bn({baseUrl:e.baseUrl,channelName:e.channelName,authToken:e.authToken,onMessage:e.onMessage,onError:s=>{n=!0,e.onError?.(s),e.onDisconnect?.()}});return r.subscribe().then(()=>{n||e.onConnect?.()}).catch(s=>{e.onError?.(s),e.onDisconnect?.()}),{unsubscribe:()=>{r.unsubscribe().catch(()=>{})}}}function qn(e={}){const{baseUrl:n="",endpoint:r="/admin/api/server-stats",channelName:s="admin/server-stats",authToken:i,pollInterval:l=3e3}=e,[a,c]=$(null),[u,d]=$(!1),[p,o]=$(!1),[f,h]=$(null),[m,y]=$(!1),_=M(jn()),g=M(0),b=M(null),w=M(null),C=M(null),v=M(null),k=T(x=>{c(x),h(null),g.current=Date.now(),o(!1),_.current.push(x)},[]),N=T(async()=>{if(!m){v.current||(v.current=new se({baseUrl:n,authToken:i}));try{const x=await v.current.get(r);k(x)}catch(x){x instanceof me&&(y(!0),h(x))}}},[n,r,i,m,k]);P(()=>{if(m)return;let x=!1;try{const F=zn({baseUrl:n,channelName:s,authToken:i,onMessage:J=>{J&&typeof J=="object"&&"timestamp"in J&&k(J)},onConnect:()=>{d(!0),b.current&&(clearInterval(b.current),b.current=null)},onDisconnect:()=>{d(!1),!b.current&&!m&&(b.current=setInterval(N,l))},onError:()=>{x=!0}});C.current=F}catch{x=!0}if(N(),x||!C.current)b.current=setInterval(N,l);else{const F=setTimeout(()=>{!u&&!b.current&&(b.current=setInterval(N,l))},3e3),J=C.current?.unsubscribe;C.current&&(C.current.unsubscribe=()=>{clearTimeout(F),J?.()})}return w.current=setInterval(()=>{g.current>0&&Date.now()-g.current>Dn&&o(!0)},2e3),()=>{C.current?.unsubscribe(),C.current=null,b.current&&(clearInterval(b.current),b.current=null),w.current&&(clearInterval(w.current),w.current=null)}},[n,s,i,l,m]);const L=T(x=>_.current.get(x),[]);return{stats:a,history:_.current.getAll(),getHistory:L,isConnected:u,isStale:p,error:f,unauthorized:m}}const _e="ss-dash-theme",Re="ss-theme-change";function Ie(){if(typeof window>"u")return"light";const e=localStorage.getItem(_e);return e==="dark"||e==="light"?e:window.matchMedia?.("(prefers-color-scheme: dark)").matches?"dark":"light"}function Wn(e){typeof window>"u"||(localStorage.setItem(_e,e),window.dispatchEvent(new CustomEvent(Re,{detail:e})))}function Vn(){const n=Ie()==="dark"?"light":"dark";return Wn(n),n}function Kn(e){if(typeof window>"u")return()=>{};const n=l=>{const a=l.detail;(a==="dark"||a==="light")&&e(a)},r=l=>{if(l.key===_e){const a=l.newValue;e(a==="dark"||a==="light"?a:Ie())}},s=window.matchMedia("(prefers-color-scheme: dark)"),i=l=>{localStorage.getItem(_e)||e(l.matches?"dark":"light")};return window.addEventListener(Re,n),window.addEventListener("storage",r),s.addEventListener("change",i),()=>{window.removeEventListener(Re,n),window.removeEventListener("storage",r),s.removeEventListener("change",i)}}function Lt(){const[e,n]=$(()=>Ie());P(()=>Kn(i=>{n(i)}),[]);const r=T(()=>{const s=Vn();return n(s),s},[]);return{theme:e,toggleTheme:r}}const X={color:"#34d399",fillOpacityTop:.25,fillOpacityBottom:.02,strokeWidth:1.5,width:120,height:32,padding:2};function Jn(e){return{...X,...e}}function Gn(e,n=X.width,r=X.height,s=X.padding){if(e.length<2)return null;const i=n-s*2,l=r-s*2,a=Math.min(...e),u=Math.max(...e)-a||1;return e.map((p,o)=>{const f=s+o/(e.length-1)*i,h=s+l-(p-a)/u*l;return`${f.toFixed(1)},${h.toFixed(1)}`}).join(" ")}function Qn(e,n=X.width,r=X.height,s=X.padding){if(e.length<2)return null;const i=n-s*2,l=r-s*2,a=Math.min(...e),u=Math.max(...e)-a||1,d=e.map((h,m)=>{const y=s+m/(e.length-1)*i,_=s+l-(h-a)/u*l;return`${y.toFixed(1)},${_.toFixed(1)}`}),p=(s+i).toFixed(1),o=(s+l).toFixed(1),f=s.toFixed(1);return`M${d[0]} `+d.slice(1).map(h=>`L${h}`).join(" ")+` L${p},${o} L${f},${o} Z`}let Xn=0;function Yn(){return`ss-grad-${Xn++}`}function Mt(e){if(e.length===0)return null;const n=Math.min(...e),r=Math.max(...e),s=e.reduce((i,l)=>i+l,0)/e.length;return{min:n,max:r,avg:s}}function Zn(e,n){const r=Jn(n),s=Gn(e,r.width,r.height,r.padding),i=Qn(e,r.width,r.height,r.padding);return!s||!i?null:{points:s,areaPath:i,gradientId:Yn(),options:r,stats:Mt(e)}}function er({data:e,color:n="#34d399",width:r=120,height:s=32,className:i=""}){const l=E(()=>Zn(e,{width:r,height:s}),[e,r,s]),a=E(()=>"ss-grad-"+Math.random().toString(36).slice(2,8),[]),c={"--ss-accent":n};if(!l)return t("div",{className:`ss-dash-sparkline ${i}`,style:c,children:t("svg",{width:r,height:s,viewBox:`0 0 ${r} ${s}`,style:{display:"block"},children:t("text",{x:r/2,y:s/2+3,textAnchor:"middle",fill:"#737373",fontSize:"9",children:["collecting","…"]})})});const u=n||"var(--ss-accent)";return t("div",{className:`ss-dash-sparkline ${i}`,style:c,children:t("svg",{width:r,height:s,viewBox:`0 0 ${r} ${s}`,style:{display:"block"},children:[t("defs",{children:t("linearGradient",{id:a,x1:"0",y1:"0",x2:"0",y2:"1",children:[t("stop",{offset:"0%",stopColor:u,stopOpacity:"0.25"}),t("stop",{offset:"100%",stopColor:u,stopOpacity:"0.02"})]})}),t("path",{d:l.areaPath,fill:`url(#${a})`}),t("path",{className:"ss-dash-sparkline-line",d:"M"+l.points.replace(/ /g," L"),fill:"none",stroke:u,strokeWidth:"1.5",strokeLinejoin:"round",strokeLinecap:"round"})]})})}const tr={"ss-red":"#f87171","ss-amber":"#fbbf24","ss-green":"#34d399","ss-muted":"#737373"};function nr(e,n,r){const[s,i]=$({position:"absolute",bottom:"100%",left:0,marginBottom:"10px",zIndex:180});return P(()=>{if(!r)return;const l=()=>{const c=e.current,u=n.current;if(!c||!u)return;const d=c.closest(".ss-bar");if(!d)return;const p=c.getBoundingClientRect(),o=d.getBoundingClientRect(),f=p.left-o.left+p.width/2;i({position:"absolute",bottom:"100%",left:`${f}px`,transform:"translateX(-50%)",marginBottom:"10px",zIndex:180}),requestAnimationFrame(()=>{const h=u.getBoundingClientRect();let m=0;h.left<8?m=8-h.left:h.right>window.innerWidth-8&&(m=window.innerWidth-8-h.right),m&&i(y=>({...y,transform:`translateX(calc(-50% + ${m}px))`}))})};l();const a=e.current?.closest(".ss-bar-scroll");return a?.addEventListener("scroll",l),window.addEventListener("resize",l),()=>{a?.removeEventListener("scroll",l),window.removeEventListener("resize",l)}},[r,e,n]),s}function rr({metric:e,stats:n,history:r,className:s=""}){const[i,l]=$(!1),[a,c]=$(!1),u=M(null),d=M(null);if(e.show&&!e.show(n))return null;const p=e.value?e.value(n):e.format(n),o=e.color?e.color(n):"",f=o&&tr[o]||"#34d399",h=typeof e.detail=="function"?e.detail(n):e.detail,m=E(()=>Mt(r),[r]),y=i||a,_=nr(u,d,y),g=T(C=>{C.stopPropagation(),l(v=>!v)},[]);P(()=>{if(!i)return;const C=k=>{const N=k.target;u.current&&!u.current.contains(N)&&d.current&&!d.current.contains(N)&&l(!1)},v=k=>{k.key==="Escape"&&l(!1)};return document.addEventListener("click",C),document.addEventListener("keydown",v),()=>{document.removeEventListener("click",C),document.removeEventListener("keydown",v)}},[i]);const b=u.current?.closest(".ss-bar"),w=y&&b?mn(t("div",{ref:d,className:`ss-tooltip ${i?"ss-pinned":""}`,style:_,children:[t("div",{className:"ss-tooltip-inner",style:{position:"relative"},children:[i&&t("button",{className:"ss-tooltip-close",onClick:C=>{C.stopPropagation(),l(!1)},type:"button",children:"×"}),t("div",{className:"ss-tooltip-header",children:[t("span",{className:"ss-tooltip-title",children:e.title}),e.unit&&t("span",{className:"ss-tooltip-unit",children:e.unit})]}),t("div",{className:"ss-tooltip-current",children:[t("span",{className:"ss-tooltip-current-label",children:"Current: "}),t("span",{className:"ss-tooltip-current-value",children:p})]}),m&&t("div",{className:"ss-tooltip-stats",children:[t("span",{children:["Min: ",Oe(m.min,e.unit)]}),t("span",{children:["Max: ",Oe(m.max,e.unit)]}),t("span",{children:["Avg: ",Oe(m.avg,e.unit)]})]}),h&&t("div",{className:"ss-tooltip-details",children:h}),r.length>0&&t(I,{children:[t("div",{className:"ss-tooltip-sparkline",children:t(er,{data:r,color:f})}),t("div",{className:"ss-tooltip-samples",children:["Last ",Math.min(r.length,60)," samples (~",Math.round(Math.min(r.length,60)*3/60)," min)"]})]})]}),t("div",{className:"ss-tooltip-arrow"})]}),b):null;return t(I,{children:[t("div",{ref:u,className:`ss-badge ${i?"ss-pinned":""} ${s}`,onClick:g,onMouseEnter:()=>!i&&c(!0),onMouseLeave:()=>c(!1),role:"button",tabIndex:0,onKeyDown:C=>C.key==="Enter"&&g(C),children:[t("span",{className:"ss-label",children:e.label}),t("span",{className:`ss-value ${o}`,children:p})]}),w]})}function sr(e){const{featureOptions:n,autoHideOnUnauthorized:r=!0,onOpenDebugPanel:s,debugPanelOpen:i=!1,onConnectionChange:l,...a}=e,{stats:c,getHistory:u,isConnected:d,isStale:p,unauthorized:o}=qn(a);P(()=>{l?.(d)},[d,l]);const{features:f}=Et(n),{theme:h}=Lt(),[m,y]=$(()=>typeof window>"u"?!0:localStorage.getItem("admin:stats-bar")!=="hidden"),_=M(null),g=M(null);P(()=>{r&&o&&y(!1)},[r,o]);const b=T(()=>{y(k=>{const N=!k;return localStorage.setItem("admin:stats-bar",N?"visible":"hidden"),N})},[]);P(()=>{const k=g.current;if(!k)return;const N=L=>{Math.abs(L.deltaX)>Math.abs(L.deltaY)||(L.preventDefault(),k.scrollLeft+=L.deltaY)};return k.addEventListener("wheel",N,{passive:!1}),()=>k.removeEventListener("wheel",N)},[]);const w=E(()=>c?Pn(c):Mn(f),[c,f]),C=E(()=>Tt.filter(k=>w.has(k.group||"core")),[w]),v=E(()=>{const k=[];let N="";for(const L of C){const x=L.group||"core";x!==N&&(N=x,k.push({group:N,metrics:[]})),k[k.length-1].metrics.push(L)}return k},[C]);return r&&o?null:t(I,{children:[t("button",{type:"button",className:`ss-toggle ${m?"ss-visible":"ss-collapsed"}`,onClick:b,title:m?"Hide stats bar":"Show stats bar","data-ss-theme":h,children:[!m&&c&&t("span",{className:"ss-toggle-summary",style:{display:"flex"},children:[w.has("process")&&t(I,{children:[t("span",{className:`ss-value ${c.cpuPercent>80?"ss-red":c.cpuPercent>50?"ss-amber":"ss-green"}`,children:[c.cpuPercent.toFixed(0),"%"]}),t("span",{className:"ss-value ss-green",children:c.memHeapUsed!==void 0?Math.round(c.memHeapUsed/(1024*1024))+"M":"-"})]}),w.has("redis")&&c.redisOk!==void 0&&t("span",{className:`ss-value ${c.redisOk?"ss-green":"ss-red"}`,children:c.redisOk?"✓":"✗"})]}),m&&t("span",{className:"ss-toggle-label",style:{color:"#737373"},children:"hide stats"}),t("span",{className:"ss-toggle-arrow",children:m?"▼":"▲"})]}),t("div",{ref:_,className:m?"ss-bar":"ss-bar ss-hidden","data-ss-theme":h,children:[t("div",{className:"ss-bar-left",children:[s&&t("button",{type:"button",className:`ss-dbg-btn ${i?"ss-dbg-active":""}`,onClick:s,title:"Toggle debug panel",id:"ss-dbg-wrench",children:t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})})}),t("div",{className:p?"ss-dot ss-stale":"ss-dot"})]}),t("div",{ref:g,className:"ss-bar-scroll",id:"ss-bar-scroll",children:c&&v.map((k,N)=>t(kn.Fragment,{children:[N>0&&t("div",{className:"ss-group-sep"}),t("div",{className:"ss-group",children:k.metrics.map(L=>t(rr,{metric:L,stats:c,history:u(L.historyKey||"")},L.id))})]},k.group))})]})]})}function ir({theme:e,onToggle:n,className:r="",classPrefix:s="ss-dash"}){const i=e==="dark";return t("button",{type:"button",className:`${s==="ss-dbg"?"ss-dbg-theme-toggle":"ss-dash-theme-btn"} ${r}`,onClick:n,title:i?"Switch to light theme":"Switch to dark theme","aria-label":i?"Switch to light theme":"Switch to dark theme",children:i?t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t("circle",{cx:"12",cy:"12",r:"5"}),t("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),t("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),t("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),t("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),t("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),t("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),t("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),t("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}):t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})}const lr=j(()=>Promise.resolve().then(()=>$r)),or=j(()=>Promise.resolve().then(()=>Cr)),ar=j(()=>Promise.resolve().then(()=>kr)),cr=j(()=>Promise.resolve().then(()=>Sr)),dr=j(()=>Promise.resolve().then(()=>Er)),ur=j(()=>Promise.resolve().then(()=>Mr)),hr=j(()=>Promise.resolve().then(()=>Pr)),pr=j(()=>Promise.resolve().then(()=>Or)),fr=j(()=>Promise.resolve().then(()=>Br)),mr=j(()=>Promise.resolve().then(()=>Qr)),gr=j(()=>Promise.resolve().then(()=>Xr)),br={queries:t("svg",{className:"ss-dbg-tab-icon",viewBox:"0 0 24 24",children:[t("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}),t("path",{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"}),t("path",{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"})]}),events:t("svg",{className:"ss-dbg-tab-icon",viewBox:"0 0 24 24",children:t("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),emails:t("svg",{className:"ss-dbg-tab-icon",viewBox:"0 0 24 24",children:[t("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),t("polyline",{points:"22,6 12,13 2,6"})]}),routes:t("svg",{className:"ss-dbg-tab-icon",viewBox:"0 0 24 24",children:[t("circle",{cx:"12",cy:"12",r:"10"}),t("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),t("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),logs:t("svg",{className:"ss-dbg-tab-icon",viewBox:"0 0 24 24",children:[t("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),t("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),t("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),t("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),t("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),t("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),timeline:t("svg",{className:"ss-dbg-tab-icon",viewBox:"0 0 24 24",children:t("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),cache:t("svg",{className:"ss-dbg-tab-icon",viewBox:"0 0 24 24",children:[t("rect",{x:"2",y:"2",width:"20",height:"8",rx:"2",ry:"2"}),t("rect",{x:"2",y:"14",width:"20",height:"8",rx:"2",ry:"2"}),t("line",{x1:"6",y1:"6",x2:"6.01",y2:"6"}),t("line",{x1:"6",y1:"18",x2:"6.01",y2:"18"})]}),jobs:t("svg",{className:"ss-dbg-tab-icon",viewBox:"0 0 24 24",children:[t("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),t("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),config:t("svg",{className:"ss-dbg-tab-icon",viewBox:"0 0 24 24",children:[t("circle",{cx:"12",cy:"12",r:"3"}),t("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),internals:t("svg",{className:"ss-dbg-tab-icon",viewBox:"0 0 24 24",children:[t("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),t("rect",{x:"9",y:"9",width:"6",height:"6"}),t("line",{x1:"9",y1:"1",x2:"9",y2:"4"}),t("line",{x1:"15",y1:"1",x2:"15",y2:"4"}),t("line",{x1:"9",y1:"20",x2:"9",y2:"23"}),t("line",{x1:"15",y1:"20",x2:"15",y2:"23"}),t("line",{x1:"20",y1:"9",x2:"23",y2:"9"}),t("line",{x1:"20",y1:"14",x2:"23",y2:"14"}),t("line",{x1:"1",y1:"9",x2:"4",y2:"9"}),t("line",{x1:"1",y1:"14",x2:"4",y2:"14"})]})};function _r(e){const{defaultOpen:n=!1,dashboardPath:r,isOpen:s,onOpenChange:i,isLive:l=!1,...a}=e,[c,u]=$(n),d=s!==void 0?s:c,p=v=>{i?i(v):u(v)},[o,f]=$("queries"),{features:h}=Et(a),{theme:m,toggleTheme:y}=Lt(),_=h.customPanes||[];P(()=>{const v=k=>{k.key==="Escape"&&d&&p(!1)};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[d]);const g=E(()=>[{id:"queries",label:"Queries",visible:!0},{id:"events",label:"Events",visible:!0},{id:"emails",label:"Emails",visible:!0},{id:"routes",label:"Routes",visible:!0},{id:"logs",label:"Logs",visible:!0},{id:"timeline",label:"Timeline",visible:h.tracing},{id:"cache",label:"Cache",visible:h.cache},{id:"jobs",label:"Jobs",visible:h.queues},{id:"config",label:"Config",visible:!0},{id:"internals",label:"Internals",visible:!0}],[h]),b=E(()=>g.filter(v=>v.visible),[g]);P(()=>{const v=[...b.map(k=>k.id),..._.map(k=>k.id)];!v.includes(o)&&v.length>0&&f(v[0])},[b,_,o]);const w=T(()=>{p(!d)},[d]),C=T(()=>{const v={options:a},k=_.find(L=>L.id===o);if(k)return t(re,{fallback:t("div",{className:"ss-dbg-empty",children:"Loading..."}),children:t(gr,{pane:k,options:a})});const N={queries:t(lr,{...v}),events:t(or,{...v}),emails:t(ar,{...v}),routes:t(cr,{...v,currentPath:typeof window<"u"?window.location.pathname:""}),logs:t(dr,{...v}),timeline:t(ur,{...v}),cache:t(hr,{...v,dashboardPath:r}),jobs:t(pr,{...v,dashboardPath:r}),config:t(fr,{...v,dashboardPath:r}),internals:t(mr,{...v})};return t(re,{fallback:t("div",{className:"ss-dbg-empty",children:"Loading..."}),children:N[o]||t("div",{className:"ss-dbg-empty",children:"Unknown tab"})})},[o,a,_]);return t(I,{children:[s===void 0&&t("button",{type:"button",className:`ss-dbg-btn ${d?"ss-dbg-active":""}`,onClick:w,title:"Toggle debug panel",id:"ss-dbg-wrench",children:t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:t("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})})}),t("div",{className:`ss-dbg-panel ${d?"ss-dbg-open":""}`,"data-ss-theme":m,id:"ss-dbg-panel",children:[t("div",{className:"ss-dbg-tabs",children:[t("div",{className:"ss-dbg-tabs-scroll",children:[b.map(v=>t("button",{type:"button",className:`ss-dbg-tab ${o===v.id?"ss-dbg-active":""}`,onClick:()=>f(v.id),children:[br[v.id]||null,v.label]},v.id)),_.map(v=>t("button",{type:"button",className:`ss-dbg-tab ${o===v.id?"ss-dbg-active":""}`,onClick:()=>f(v.id),children:v.label},v.id))]}),t("div",{className:"ss-dbg-tabs-right",children:[t("span",{className:`ss-dbg-conn-mode ${l?"ss-dbg-conn-live":"ss-dbg-conn-polling"}`,title:l?"Connected via Transmit (SSE) — real-time updates":"Polling every 3s",children:l?"live":"polling"}),t(ir,{theme:m,onToggle:y,classPrefix:"ss-dbg"}),r&&t("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"ss-dbg-dashboard-link",title:"Open dashboard",children:t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),t("polyline",{points:"15 3 21 3 21 9"}),t("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})}),t("button",{type:"button",className:"ss-dbg-close",onClick:()=>p(!1),title:"Close panel",children:"×"})]})]}),t("div",{className:"ss-dbg-content",children:d&&C()})]})]})}const Pt=document.getElementById("ss-bar-config"),D=Pt?JSON.parse(Pt.textContent||"{}"):{};function yr(){const[e,n]=$(!1),[r,s]=$(!1),i=D.showDebug?{debugEndpoint:D.debugEndpoint,authToken:D.authToken}:void 0;return t(I,{children:[t(sr,{endpoint:D.endpoint,pollInterval:D.pollInterval,channelName:D.channelName,authToken:D.authToken,featureOptions:i,autoHideOnUnauthorized:!1,onOpenDebugPanel:D.showDebug?()=>n(l=>!l):void 0,debugPanelOpen:e,onConnectionChange:s}),D.showDebug&&t(_r,{debugEndpoint:D.debugEndpoint,authToken:D.authToken,dashboardPath:D.dashboardPath||void 0,isOpen:e,onOpenChange:n,isLive:r})]})}const At=document.getElementById("ss-bar");At&&Ee(t(yr,{}),At);const vr="ss-col-resize",Ot="ss-resizing";function K(e){const n=Array.from(e.querySelectorAll("thead th"));if(n.length===0)return()=>{};const r=[];let s=!1;function i(){if(!s){s=!0;for(const l of n)l.style.width=l.offsetWidth+"px";e.style.tableLayout="fixed"}}for(const l of n){let a=function(u){u.preventDefault(),u.stopPropagation(),i();const d=u.clientX,p=l.offsetWidth;c.classList.add(Ot),c.setPointerCapture(u.pointerId);function o(h){const m=h.clientX-d,y=Math.max(30,p+m);l.style.width=y+"px"}function f(){c.classList.remove(Ot),c.removeEventListener("pointermove",o),c.removeEventListener("pointerup",f)}c.addEventListener("pointermove",o),c.addEventListener("pointerup",f)};if(!l.textContent?.trim())continue;const c=document.createElement("div");c.className=vr,l.appendChild(c),c.addEventListener("pointerdown",a),r.push(()=>{c.removeEventListener("pointerdown",a),c.remove()})}return()=>{for(const l of r)l()}}const Nr={queries:"/queries",events:"/events",emails:"/emails",routes:"/routes",logs:"/logs",timeline:"/traces",cache:"/cache",jobs:"/jobs",config:"/config",internals:"/diagnostics"};function wr(e){return Nr[e]||`/${e}`}const xr=3e3;function H(e,n={}){const{baseUrl:r="",debugEndpoint:s="/admin/api/debug",authToken:i}=n,[l,a]=$(null),[c,u]=$(!0),[d,p]=$(null),o=M(null),f=M(null),h=M({}),m=T(()=>(o.current||(o.current=new se({baseUrl:r,authToken:i})),o.current),[r,i]),y=T(async()=>{if(h.current[e]){a(h.current[e]),u(!1);return}try{const w=m(),C=`${s}${wr(e)}`,v=await w.get(C);a(v),p(null),u(!1)}catch(w){if(w instanceof me){p(w),u(!1),f.current&&(clearInterval(f.current),f.current=null);return}p(w instanceof Error?w:new Error(String(w))),u(!1)}},[e,s,m]);P(()=>(u(!0),p(null),y(),f.current=setInterval(y,xr),()=>{f.current&&(clearInterval(f.current),f.current=null)}),[e,y]);const _=T(()=>{y()},[y]),g=T(()=>{a(null)},[]),b=T((w,C)=>{h.current[w]=C},[]);return{data:l,isLoading:c,error:d,refresh:_,clearData:g,cacheForTab:b}}function Rt({options:e}){const{data:n,isLoading:r,error:s}=H("queries",e),[i,l]=$(""),[a,c]=$(null),u=E(()=>{const h=n?.queries||[];if(!i)return h;const m=i.toLowerCase();return h.filter(y=>y.sql.toLowerCase().includes(m)||y.model&&y.model.toLowerCase().includes(m)||y.method.toLowerCase().includes(m))},[n,i]),d=E(()=>{const h={};for(const m of n?.queries||[])h[m.sql]=(h[m.sql]||0)+1;return h},[n]),p=E(()=>{const h=n?.queries||[],m=h.filter(g=>g.duration>100).length,y=Object.values(d).filter(g=>g>1).length,_=h.length>0?h.reduce((g,b)=>g+b.duration,0)/h.length:0;return{slowCount:m,dupCount:y,avgDuration:_}},[n,d]),o=T(h=>{c(m=>m===h?null:h)},[]),f=M(null);return P(()=>{if(f.current)return K(f.current)},[u]),r&&!n?t("div",{className:"ss-dbg-empty",children:"Loading queries..."}):s?t("div",{className:"ss-dbg-empty",children:["Error: ",s.message]}):t("div",{children:[t("div",{className:"ss-dbg-search-bar",children:[t("input",{type:"text",className:"ss-dbg-search",placeholder:"Filter queries...",value:i,onChange:h=>l(h.target.value)}),t("span",{className:"ss-dbg-summary",children:[u.length," queries",p.slowCount>0&&` | ${p.slowCount} slow`,p.dupCount>0&&` | ${p.dupCount} dup`,u.length>0&&` | avg ${q(p.avgDuration)}`]})]}),u.length===0?t("div",{className:"ss-dbg-empty",children:"No queries captured"}):t("table",{ref:f,className:"ss-dbg-table",children:[t("colgroup",{children:[t("col",{style:{width:"50px"}}),t("col",{}),t("col",{style:{width:"80px"}}),t("col",{style:{width:"70px"}}),t("col",{style:{width:"100px"}}),t("col",{style:{width:"80px"}})]}),t("thead",{children:t("tr",{children:[t("th",{children:"#"}),t("th",{children:"SQL"}),t("th",{children:"Duration"}),t("th",{children:"Method"}),t("th",{children:"Model"}),t("th",{children:"Time"})]})}),t("tbody",{children:u.map(h=>t("tr",{children:[t("td",{className:"ss-dbg-c-dim",style:{whiteSpace:"nowrap"},children:h.id}),t("td",{children:[t("span",{className:`ss-dbg-sql ${a===h.id?"ss-dbg-expanded":""}`,onClick:()=>o(h.id),role:"button",tabIndex:0,onKeyDown:m=>m.key==="Enter"&&o(h.id),children:h.sql}),d[h.sql]>1&&t("span",{className:"ss-dbg-dup",children:[" x",d[h.sql]]}),h.inTransaction&&t("span",{className:"ss-dbg-dup",children:" TXN"})]}),t("td",{className:`ss-dbg-duration ${h.duration>500?"ss-dbg-very-slow":h.duration>100?"ss-dbg-slow":""}`,children:q(h.duration)}),t("td",{children:t("span",{className:`ss-dbg-method ss-dbg-method-${h.method.toLowerCase()}`,children:h.method})}),t("td",{className:"ss-dbg-c-muted",children:h.model||"-"}),t("td",{className:"ss-dbg-event-time",title:W(h.timestamp),children:V(h.timestamp)})]},h.id))})]})]})}const $r=Object.freeze(Object.defineProperty({__proto__:null,QueriesTab:Rt,default:Rt},Symbol.toStringTag,{value:"Module"}));function Fe({data:e,maxPreviewLength:n=100,className:r="",classPrefix:s="ss-dash"}){const[i,l]=$(!1),a=E(()=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},[e]),c=E(()=>typeof a=="object"&&a!==null?be(a,n):String(a??"-"),[a,n]),u=E(()=>typeof a=="object"&&a!==null?JSON.stringify(a,null,2):String(a),[a]),d=T(()=>{l(o=>!o)},[]),p=T(async()=>{try{await navigator.clipboard.writeText(u)}catch{}},[u]);return!e&&e!==0&&e!==!1?t("span",{className:`ss-dim ${s}-c-dim`,children:"-"}):t("div",{className:`${s}-data-cell ${r}`,children:[t("span",{className:`${s}-data-preview`,onClick:d,role:"button",tabIndex:0,onKeyDown:o=>o.key==="Enter"&&d(),children:c}),i&&t("div",{className:`${s}-data-full`,onClick:d,children:[t("button",{className:`${s}-copy-btn`,onClick:o=>{o.stopPropagation(),p()},title:"Copy to clipboard",type:"button",children:"Copy"}),t("pre",{children:u})]})]})}function It({options:e}){const{data:n,isLoading:r,error:s}=H("events",e),[i,l]=$(""),a=E(()=>{const u=n?.events||[];if(!i)return u;const d=i.toLowerCase();return u.filter(p=>(p.event||"").toLowerCase().includes(d)||(p.data||"").toLowerCase().includes(d))},[n,i]),c=M(null);return P(()=>{if(c.current)return K(c.current)},[a]),r&&!n?t("div",{className:"ss-dbg-empty",children:"Loading events..."}):s?t("div",{className:"ss-dbg-empty",children:["Error: ",s.message]}):t("div",{children:[t("div",{className:"ss-dbg-search-bar",children:[t("input",{type:"text",className:"ss-dbg-search",placeholder:"Filter events...",value:i,onChange:u=>l(u.target.value)}),t("span",{className:"ss-dbg-summary",children:[a.length," events"]})]}),a.length===0?t("div",{className:"ss-dbg-empty",children:"No events captured"}):t("table",{ref:c,className:"ss-dbg-table",children:[t("colgroup",{children:[t("col",{style:{width:"50px"}}),t("col",{style:{width:"20%"}}),t("col",{}),t("col",{style:{width:"80px"}})]}),t("thead",{children:t("tr",{children:[t("th",{children:"#"}),t("th",{children:"Event"}),t("th",{children:"Data"}),t("th",{children:"Time"})]})}),t("tbody",{children:a.map(u=>{const d=u.timestamp||u.created_at||u.createdAt;return t("tr",{children:[t("td",{className:"ss-dbg-c-dim",style:{whiteSpace:"nowrap"},children:u.id}),t("td",{className:"ss-dbg-event-name",children:u.event}),t("td",{className:"ss-dbg-event-data",children:t(Fe,{data:u.data,maxPreviewLength:80,classPrefix:"ss-dbg"})}),t("td",{className:"ss-dbg-event-time",title:W(d),children:V(d)})]},u.id)})})]})]})}const Cr=Object.freeze(Object.defineProperty({__proto__:null,EventsTab:It,default:It},Symbol.toStringTag,{value:"Module"}));function Ft({options:e}){const{data:n,isLoading:r,error:s}=H("emails",e),[i,l]=$(""),[a,c]=$(null),u=E(()=>{const h=n?.emails||[];if(!i)return h;const m=i.toLowerCase();return h.filter(y=>(y.subject||"").toLowerCase().includes(m)||(y.to||"").toLowerCase().includes(m)||(y.from||"").toLowerCase().includes(m)||(y.mailer||"").toLowerCase().includes(m))},[n,i]),d=E(()=>u.find(h=>h.id===a),[u,a]),p=T(()=>c(null),[]),o={sent:"ss-dbg-email-status-sent",sending:"ss-dbg-email-status-sending",queued:"ss-dbg-email-status-queued",failed:"ss-dbg-email-status-failed"},f=M(null);return P(()=>{if(f.current)return K(f.current)},[u]),r&&!n?t("div",{className:"ss-dbg-empty",children:"Loading emails..."}):s?t("div",{className:"ss-dbg-empty",children:["Error: ",s.message]}):d?t("div",{className:"ss-dbg-email-preview",children:[t("div",{className:"ss-dbg-email-preview-header",children:[t("div",{className:"ss-dbg-email-preview-meta",children:[t("div",{children:[t("strong",{children:"Subject:"})," ",d.subject]}),t("div",{children:[t("strong",{children:"From:"})," ",d.from]}),t("div",{children:[t("strong",{children:"To:"})," ",d.to]}),d.cc&&t("div",{children:[t("strong",{children:"CC:"})," ",d.cc]})]}),t("button",{className:"ss-dbg-btn-clear",onClick:p,type:"button",children:"×"})]}),d.html?t("iframe",{className:"ss-dbg-email-iframe",srcDoc:d.html,title:"Email preview",sandbox:""}):t("div",{style:{padding:"12px",whiteSpace:"pre-wrap"},children:d.text||"No content"})]}):t("div",{children:[t("div",{className:"ss-dbg-search-bar",children:[t("input",{type:"text",className:"ss-dbg-search",placeholder:"Filter emails...",value:i,onChange:h=>l(h.target.value)}),t("span",{className:"ss-dbg-summary",children:[u.length," emails"]})]}),u.length===0?t("div",{className:"ss-dbg-empty",children:"No emails captured"}):t("table",{ref:f,className:"ss-dbg-table",children:[t("colgroup",{children:[t("col",{style:{width:"50px"}}),t("col",{style:{width:"140px"}}),t("col",{style:{width:"140px"}}),t("col",{}),t("col",{style:{width:"70px"}}),t("col",{style:{width:"80px"}}),t("col",{style:{width:"40px"}}),t("col",{style:{width:"80px"}})]}),t("thead",{children:t("tr",{children:[t("th",{children:"#"}),t("th",{children:"From"}),t("th",{children:"To"}),t("th",{children:"Subject"}),t("th",{children:"Status"}),t("th",{children:"Mailer"}),t("th",{title:"Attachments",children:"📎"}),t("th",{children:"Time"})]})}),t("tbody",{children:u.map(h=>t("tr",{className:"ss-dbg-email-row",onClick:()=>c(h.id),children:[t("td",{className:"ss-dbg-c-dim",style:{whiteSpace:"nowrap"},children:h.id}),t("td",{className:"ss-dbg-c-secondary",title:h.from,children:h.from}),t("td",{className:"ss-dbg-c-secondary",title:h.to,children:h.to}),t("td",{className:"ss-dbg-c-sql",children:h.subject}),t("td",{children:t("span",{className:`ss-dbg-email-status ${o[h.status]||""}`,children:h.status})}),t("td",{className:"ss-dbg-c-muted",children:h.mailer}),t("td",{className:"ss-dbg-c-dim",style:{textAlign:"center"},children:h.attachmentCount>0?h.attachmentCount:"-"}),t("td",{className:"ss-dbg-event-time",title:W(h.timestamp||h.created_at||h.createdAt),children:V(h.timestamp||h.created_at||h.createdAt)})]},h.id))})]})]})}const kr=Object.freeze(Object.defineProperty({__proto__:null,EmailsTab:Ft,default:Ft},Symbol.toStringTag,{value:"Module"}));function Ut({options:e,currentPath:n}){const{data:r,isLoading:s,error:i}=H("routes",e),[l,a]=$(""),c=E(()=>{const d=r?.routes||[];if(!l)return d;const p=l.toLowerCase();return d.filter(o=>o.pattern.toLowerCase().includes(p)||o.handler.toLowerCase().includes(p)||o.method.toLowerCase().includes(p)||o.name&&o.name.toLowerCase().includes(p))},[r,l]),u=M(null);return P(()=>{if(u.current)return K(u.current)},[c]),s&&!r?t("div",{className:"ss-dbg-empty",children:"Loading routes..."}):i?t("div",{className:"ss-dbg-empty",children:["Error: ",i.message]}):t("div",{children:[t("div",{className:"ss-dbg-search-bar",children:[t("input",{type:"text",className:"ss-dbg-search",placeholder:"Filter routes...",value:l,onChange:d=>a(d.target.value)}),t("span",{className:"ss-dbg-summary",children:[c.length," routes"]})]}),c.length===0?t("div",{className:"ss-dbg-empty",children:"No routes found"}):t("table",{ref:u,className:"ss-dbg-table",children:[t("colgroup",{children:[t("col",{style:{width:"70px"}}),t("col",{style:{width:"25%"}}),t("col",{style:{width:"15%"}}),t("col",{}),t("col",{style:{width:"20%"}})]}),t("thead",{children:t("tr",{children:[t("th",{children:"Method"}),t("th",{children:"Pattern"}),t("th",{children:"Name"}),t("th",{children:"Handler"}),t("th",{children:"Middleware"})]})}),t("tbody",{children:c.map((d,p)=>{const o=n&&(d.pattern===n||new RegExp("^"+d.pattern.replace(/:[^/]+/g,"[^/]+")+"$").test(n));return t("tr",{className:o?"ss-dbg-current-route":"",children:[t("td",{children:t("span",{className:`ss-dbg-method ss-dbg-method-${d.method.toLowerCase()}`,children:d.method})}),t("td",{className:"ss-dbg-c-text",children:d.pattern}),t("td",{className:"ss-dbg-c-muted",children:d.name||"-"}),t("td",{className:"ss-dbg-c-sql",children:d.handler}),t("td",{className:"ss-dbg-c-dim",style:{fontSize:"10px"},children:d.middleware.length>0?d.middleware.join(", "):"-"})]},`${d.method}-${d.pattern}-${p}`)})})]})]})}const Sr=Object.freeze(Object.defineProperty({__proto__:null,RoutesTab:Ut,default:Ut},Symbol.toStringTag,{value:"Module"})),Tr=["all","error","warn","info","debug"];function Dt({options:e}){const{data:n,isLoading:r,error:s}=H("logs",e),[i,l]=$("all"),[a,c]=$(""),[u,d]=$(""),p=T(g=>(g.levelName||g.level_name||(typeof g.level=="string"?g.level:"")||"info").toLowerCase(),[]),o=T(g=>g.msg||g.message||JSON.stringify(g),[]),f=T(g=>g.time||g.timestamp||0,[]),h=T(g=>g.requestId||g.request_id||g["x-request-id"]||"",[]),m=E(()=>{let g=Array.isArray(n)?n:n?.logs||n?.entries||[];if(i!=="all"&&(g=g.filter(b=>{const w=p(b);return i==="error"?w==="error"||w==="fatal":w===i})),u){const b=u.toLowerCase();g=g.filter(w=>h(w).toLowerCase().includes(b))}if(a){const b=a.toLowerCase();g=g.filter(w=>o(w).toLowerCase().includes(b))}return g},[n,i,a,u,p,o,h]),y=T(g=>{switch(g){case"error":case"fatal":return"ss-dbg-log-level-error";case"warn":return"ss-dbg-log-level-warn";case"info":return"ss-dbg-log-level-info";case"debug":return"ss-dbg-log-level-debug";case"trace":return"ss-dbg-log-level-trace";default:return"ss-dbg-log-level-info"}},[]),_=T(g=>{d(b=>b===g?"":g)},[]);return r&&!n?t("div",{className:"ss-dbg-empty",children:"Loading logs..."}):s?t("div",{className:"ss-dbg-empty",children:["Error: ",s.message]}):t("div",{children:[t("div",{className:"ss-dbg-log-filters",children:[Tr.map(g=>t("button",{type:"button",className:`ss-dbg-log-filter ${i===g?"ss-dbg-active":""}`,onClick:()=>l(g),children:g},g)),u&&t("button",{type:"button",className:"ss-dbg-log-filter ss-dbg-active",onClick:()=>d(""),children:["req: ",u.slice(0,8)," x"]}),t("span",{className:"ss-dbg-summary",style:{marginLeft:"auto"},children:[m.length," entries"]})]}),t("div",{className:"ss-dbg-search-bar",children:t("input",{type:"text",className:"ss-dbg-search",placeholder:"Filter log messages...",value:a,onChange:g=>c(g.target.value)})}),t("div",{style:{overflow:"auto",flex:1},children:m.length===0?t("div",{className:"ss-dbg-empty",children:"No log entries"}):m.slice(-200).reverse().map((g,b)=>{const w=p(g),C=o(g),v=f(g),k=h(g);return t("div",{className:"ss-dbg-log-entry",children:[t("span",{className:`ss-dbg-log-level ${y(w)}`,children:w.toUpperCase()}),t("span",{className:"ss-dbg-log-time",title:v?W(v):"",children:v?V(v):"-"}),k?t("span",{className:"ss-dbg-log-reqid",onClick:()=>_(k),role:"button",tabIndex:0,title:k,onKeyDown:N=>N.key==="Enter"&&_(k),children:k.slice(0,8)}):t("span",{className:"ss-dbg-log-reqid-empty",children:"-"}),t("span",{className:"ss-dbg-log-msg",children:C})]},b)})})]})}const Er=Object.freeze(Object.defineProperty({__proto__:null,LogsTab:Dt,default:Dt},Symbol.toStringTag,{value:"Module"})),jt={request:"#1e3a5f",middleware:"rgba(30, 58, 95, 0.7)",db:"#6d28d9",view:"#0e7490",mail:"#059669",event:"#b45309",custom:"#525252"},Lr=[{label:"Request",color:"#1e3a5f"},{label:"Middleware",color:"rgba(30, 58, 95, 0.7)"},{label:"Database",color:"#6d28d9"},{label:"View",color:"#0e7490"},{label:"Mail",color:"#059669"},{label:"Event",color:"#b45309"}];function Ht({options:e}){const{baseUrl:n="",debugEndpoint:r="/admin/api/debug",authToken:s}=e||{},{data:i,isLoading:l,error:a}=H("timeline",e),[c,u]=$(""),[d,p]=$(null),[o,f]=$(null),[h,m]=$(!1),[y,_]=$(null),g=E(()=>{const N=i?.traces||[];if(!c)return N;const L=c.toLowerCase();return N.filter(x=>x.url.toLowerCase().includes(L)||x.method.toLowerCase().includes(L)||String(x.statusCode).includes(L))},[i,c]),b=M(null),w=T(()=>(b.current||(b.current=new se({baseUrl:n,authToken:s})),b.current),[n,s]);P(()=>{if(d===null){f(null),_(null);return}let N=!1;return m(!0),_(null),w().get(`${r}/traces/${d}`).then(x=>{N||(f(x),m(!1))}).catch(x=>{N||(_(x instanceof Error?x.message:"Failed to load trace"),m(!1))}),()=>{N=!0}},[d,r,w]);const C=T(N=>{p(L=>L===N?null:N)},[]),v=T(N=>N>=500?"ss-dbg-status-5xx":N>=400?"ss-dbg-status-4xx":N>=300?"ss-dbg-status-3xx":"ss-dbg-status-2xx",[]),k=M(null);if(P(()=>{if(k.current)return K(k.current)},[g]),l&&!i)return t("div",{className:"ss-dbg-empty",children:"Loading traces..."});if(a)return t("div",{className:"ss-dbg-empty",children:["Error: ",a.message]});if(d!==null){if(h)return t("div",{className:"ss-dbg-empty",children:"Loading trace detail..."});if(y)return t("div",{children:[t("div",{className:"ss-dbg-tl-detail-header",children:t("button",{type:"button",className:"ss-dbg-btn-clear",onClick:()=>p(null),children:"← Back"})}),t("div",{className:"ss-dbg-empty",children:["Error: ",y]})]});if(!o)return t("div",{className:"ss-dbg-empty",children:"Loading trace detail..."});const N=o.spans||[],L=o.warnings||[];return t("div",{children:[t("div",{className:"ss-dbg-tl-detail-header",children:[t("button",{type:"button",className:"ss-dbg-btn-clear",onClick:()=>p(null),children:"← Back"}),t("span",{className:`ss-dbg-method ss-dbg-method-${o.method.toLowerCase()}`,children:o.method}),t("span",{className:"ss-dbg-tl-detail-url",children:o.url}),t("span",{className:`ss-dbg-status ${v(o.statusCode)}`,children:o.statusCode}),t("span",{className:"ss-dbg-tl-meta",children:[q(o.totalDuration)," ·"," ",o.spanCount," spans"]})]}),t("div",{className:"ss-dbg-tl-legend",children:Lr.map(x=>t("div",{className:"ss-dbg-tl-legend-item",children:[t("div",{className:"ss-dbg-tl-legend-dot",style:{background:x.color}}),t("span",{children:x.label})]},x.label))}),t("div",{style:{padding:"8px 12px",overflow:"auto"},children:N.length===0?t("div",{className:"ss-dbg-empty",children:"No spans captured for this request"}):N.map(x=>{const F=o.totalDuration||1,J=x.startOffset/F*100,Yr=Math.max(x.duration/F*100,.5);return t("div",{className:"ss-dbg-tl-row",children:[t("div",{className:"ss-dbg-tl-label",title:x.label,children:x.label}),t("div",{className:"ss-dbg-tl-track",children:t("div",{className:`ss-dbg-tl-bar ss-dbg-tl-bar-${x.category}`,style:{left:`${J}%`,width:`${Yr}%`,background:jt[x.category]||jt.custom},title:`${x.label}: ${q(x.duration)}`})}),t("span",{className:"ss-dbg-tl-dur",children:q(x.duration)})]},x.id)})}),L.length>0&&t("div",{className:"ss-dbg-tl-warnings",children:[t("div",{className:"ss-dbg-tl-warnings-title",children:"Warnings"}),L.map((x,F)=>t("div",{className:"ss-dbg-tl-warning",children:x},F))]})]})}return t("div",{children:[t("div",{className:"ss-dbg-search-bar",children:[t("input",{type:"text",className:"ss-dbg-search",placeholder:"Filter traces...",value:c,onChange:N=>u(N.target.value)}),t("span",{className:"ss-dbg-summary",children:[g.length," traces"]})]}),g.length===0?t("div",{className:"ss-dbg-empty",children:"No traces captured. Enable tracing in config."}):t("table",{ref:k,className:"ss-dbg-table",children:[t("colgroup",{children:[t("col",{style:{width:"50px"}}),t("col",{style:{width:"70px"}}),t("col",{}),t("col",{style:{width:"60px"}}),t("col",{style:{width:"80px"}}),t("col",{style:{width:"50px"}}),t("col",{style:{width:"80px"}})]}),t("thead",{children:t("tr",{children:[t("th",{children:"#"}),t("th",{children:"Method"}),t("th",{children:"URL"}),t("th",{children:"Status"}),t("th",{children:"Duration"}),t("th",{children:"Spans"}),t("th",{children:"Time"})]})}),t("tbody",{children:g.map(N=>t("tr",{className:"ss-dbg-email-row",onClick:()=>C(N.id),children:[t("td",{className:"ss-dbg-c-dim",style:{whiteSpace:"nowrap"},children:N.id}),t("td",{children:t("span",{className:`ss-dbg-method ss-dbg-method-${N.method.toLowerCase()}`,children:N.method})}),t("td",{title:N.url,children:N.url}),t("td",{children:t("span",{className:`ss-dbg-status ${v(N.statusCode)}`,children:N.statusCode})}),t("td",{className:`ss-dbg-duration ${N.totalDuration>500?"ss-dbg-very-slow":N.totalDuration>100?"ss-dbg-slow":""}`,children:q(N.totalDuration)}),t("td",{className:"ss-dbg-c-muted",style:{textAlign:"center"},children:N.spanCount}),t("td",{className:"ss-dbg-event-time",title:W(N.timestamp),children:V(N.timestamp)})]},N.id))})]})]})}const Mr=Object.freeze(Object.defineProperty({__proto__:null,TimelineTab:Ht,default:Ht},Symbol.toStringTag,{value:"Module"}));function Bt({options:e,dashboardPath:n}){const r=E(()=>n?n.replace(/\/+$/,"")+"/api":null,[n]),s=E(()=>r?{...e,debugEndpoint:r}:e,[r,e]),{data:i,isLoading:l,error:a}=H("cache",s),[c,u]=$(""),[d,p]=$(null),[o,f]=$(null),h=E(()=>{const b=i?.keys||[];if(!c)return b;const w=c.toLowerCase();return b.filter(C=>C.key.toLowerCase().includes(w))},[i,c]),m=T(async b=>{if(d===b){p(null),f(null);return}p(b);try{const{baseUrl:w="",authToken:C}=e||{},v=r||e?.debugEndpoint||"/admin/api/debug",k=`${w}${v}/cache/${encodeURIComponent(b)}`,N={Accept:"application/json"};C&&(N.Authorization=`Bearer ${C}`);const x=await(await fetch(k,{headers:N,credentials:C?"omit":"same-origin"})).json();f(x)}catch{f({error:"Failed to fetch key value"})}},[d,e,r]),y=M(null);if(P(()=>{if(y.current)return K(y.current)},[h]),l&&!i)return t("div",{className:"ss-dbg-empty",children:"Loading cache data..."});if(a)return t("div",{className:"ss-dbg-empty",children:["Error: ",a.message]});if(!i)return t("div",{className:"ss-dbg-empty",children:"Cache inspector not available"});const g=i.stats||i;return t("div",{children:[t("div",{className:"ss-dbg-cache-stats",children:[t("div",{className:"ss-dbg-cache-stat",children:[t("span",{className:"ss-dbg-cache-stat-label",children:"Hit Rate:"}),t("span",{className:"ss-dbg-cache-stat-value",children:[g.hitRate!==null&&g.hitRate!==void 0?g.hitRate.toFixed(1):"0","%"]})]}),t("div",{className:"ss-dbg-cache-stat",children:[t("span",{className:"ss-dbg-cache-stat-label",children:"Hits:"}),t("span",{className:"ss-dbg-cache-stat-value",children:g.totalHits??0})]}),t("div",{className:"ss-dbg-cache-stat",children:[t("span",{className:"ss-dbg-cache-stat-label",children:"Misses:"}),t("span",{className:"ss-dbg-cache-stat-value",children:g.totalMisses??0})]}),t("div",{className:"ss-dbg-cache-stat",children:[t("span",{className:"ss-dbg-cache-stat-label",children:"Keys:"}),t("span",{className:"ss-dbg-cache-stat-value",children:g.keyCount??"-"})]})]}),t("div",{className:"ss-dbg-search-bar",children:[t("input",{type:"text",className:"ss-dbg-search",placeholder:"Filter keys...",value:c,onChange:b=>u(b.target.value)}),t("span",{className:"ss-dbg-summary",children:[h.length," keys"]})]}),d&&o&&t("div",{className:"ss-dbg-cache-detail",children:[t("strong",{children:d}),t("button",{type:"button",className:"ss-dbg-btn-clear",onClick:()=>p(null),children:["←"," Back"]}),t(Fe,{data:o,classPrefix:"ss-dbg"})]}),h.length===0?t("div",{className:"ss-dbg-empty",children:"No cache keys found"}):t("table",{ref:y,className:"ss-dbg-table",children:[t("colgroup",{children:[t("col",{}),t("col",{style:{width:"80px"}}),t("col",{style:{width:"80px"}}),t("col",{style:{width:"80px"}})]}),t("thead",{children:t("tr",{children:[t("th",{children:"Key"}),t("th",{children:"Type"}),t("th",{children:"TTL"}),t("th",{children:"Size"})]})}),t("tbody",{children:h.map(b=>t("tr",{className:"ss-dbg-email-row",onClick:()=>m(b.key),children:[t("td",{className:"ss-dbg-c-sql",children:b.key}),t("td",{className:"ss-dbg-c-muted",children:b.type}),t("td",{className:"ss-dbg-c-muted",children:b.ttl>0?`${b.ttl}s`:"-"}),t("td",{className:"ss-dbg-c-dim",children:b.size>0?`${b.size}B`:"-"})]},b.key))})]})]})}const Pr=Object.freeze(Object.defineProperty({__proto__:null,CacheTab:Bt,default:Bt},Symbol.toStringTag,{value:"Module"})),Ar=["all","active","waiting","delayed","completed","failed"];function zt({options:e,dashboardPath:n}){const r=E(()=>n?n.replace(/\/+$/,"")+"/api":null,[n]),s=E(()=>r?{...e,debugEndpoint:r}:e,[r,e]),{data:i,isLoading:l,error:a}=H("jobs",s),[c,u]=$("all"),[d,p]=$(null),o=E(()=>{if(!i)return[];const _=i.data||i.jobs||[];return c==="all"?_:_.filter(g=>g.status===c)},[i,c]),f=T(async _=>{p(_);try{const{baseUrl:g="",authToken:b}=e||{},w=r||e?.debugEndpoint||"/admin/api/debug",C=`${g}${w}/jobs/${_}/retry`,v={Accept:"application/json"};b&&(v.Authorization=`Bearer ${b}`),await fetch(C,{method:"POST",headers:v,credentials:b?"omit":"same-origin"})}catch{}p(null)},[e,r]),h={completed:"ss-dbg-job-status-completed",failed:"ss-dbg-job-status-failed",active:"ss-dbg-job-status-active",waiting:"ss-dbg-job-status-waiting",delayed:"ss-dbg-job-status-delayed"},m=M(null);if(P(()=>{if(m.current)return K(m.current)},[o]),!r)return t("div",{className:"ss-dbg-empty",children:"Queue inspector not available (no dashboard configured)"});if(l&&!i)return t("div",{className:"ss-dbg-empty",children:"Loading jobs..."});if(a)return t("div",{className:"ss-dbg-empty",children:["Error: ",a.message]});if(!i)return t("div",{className:"ss-dbg-empty",children:"Queue inspector not available"});const y=i.stats||i.overview;return t("div",{children:[t("div",{className:"ss-dbg-job-stats-area",children:[t("div",{className:"ss-dbg-job-stats",children:[t("div",{className:"ss-dbg-job-stat",children:[t("span",{className:"ss-dbg-job-stat-label",children:"Active:"}),t("span",{className:"ss-dbg-job-stat-value",children:y?.active??0})]}),t("div",{className:"ss-dbg-job-stat",children:[t("span",{className:"ss-dbg-job-stat-label",children:"Waiting:"}),t("span",{className:"ss-dbg-job-stat-value",children:y?.waiting??0})]}),t("div",{className:"ss-dbg-job-stat",children:[t("span",{className:"ss-dbg-job-stat-label",children:"Delayed:"}),t("span",{className:"ss-dbg-job-stat-value",children:y?.delayed??0})]}),t("div",{className:"ss-dbg-job-stat",children:[t("span",{className:"ss-dbg-job-stat-label",children:"Completed:"}),t("span",{className:"ss-dbg-job-stat-value",children:y?.completed??0})]}),t("div",{className:"ss-dbg-job-stat",children:[t("span",{className:"ss-dbg-job-stat-label",children:"Failed:"}),t("span",{className:"ss-dbg-job-stat-value ss-dbg-c-red",children:y?.failed??0})]})]}),t("div",{className:"ss-dbg-log-filters",children:Ar.map(_=>t("button",{type:"button",className:`ss-dbg-job-filter ${c===_?"ss-dbg-active":""}`,onClick:()=>u(_),children:_},_))})]}),o.length===0?t("div",{className:"ss-dbg-empty",children:"No jobs found"}):t("table",{ref:m,className:"ss-dbg-table",children:[t("colgroup",{children:[t("col",{style:{width:"50px"}}),t("col",{style:{width:"15%"}}),t("col",{style:{width:"80px"}}),t("col",{}),t("col",{style:{width:"50px"}}),t("col",{style:{width:"80px"}}),t("col",{style:{width:"80px"}}),t("col",{style:{width:"60px"}})]}),t("thead",{children:t("tr",{children:[t("th",{children:"ID"}),t("th",{children:"Name"}),t("th",{children:"Status"}),t("th",{children:"Payload"}),t("th",{children:"Tries"}),t("th",{children:"Duration"}),t("th",{children:"Time"}),t("th",{})]})}),t("tbody",{children:o.map(_=>{const g=_;return t("tr",{children:[t("td",{className:"ss-dbg-c-dim",children:_.id}),t("td",{className:"ss-dbg-c-sql",title:_.name,children:_.name}),t("td",{children:t("span",{className:`ss-dbg-badge ${h[_.status]||"ss-dbg-badge-muted"}`,children:_.status})}),t("td",{children:t(Fe,{data:_.payload||_.data,maxPreviewLength:60,classPrefix:"ss-dbg"})}),t("td",{className:"ss-dbg-c-muted",style:{textAlign:"center"},children:_.attempts||g.attemptsMade||0}),t("td",{className:"ss-dbg-duration",children:_.duration!==null?q(_.duration):"-"}),t("td",{className:"ss-dbg-event-time",title:W(_.timestamp||_.createdAt||g.processedAt||g.created_at),children:V(_.timestamp||_.createdAt||g.processedAt||g.created_at)}),t("td",{children:_.status==="failed"&&t("button",{type:"button",className:"ss-dbg-retry-btn",onClick:()=>f(_.id),disabled:d===_.id,children:d===_.id?"...":"Retry"})})]},_.id)})})]})]})}const Or=Object.freeze(Object.defineProperty({__proto__:null,JobsTab:zt,default:zt},Symbol.toStringTag,{value:"Module"}));function U(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)&&e.__redacted===!0}function Ue(e,n){if(typeof e!="object"||e===null||e===void 0)return[{path:n,value:e}];if(Array.isArray(e)||U(e))return[{path:n,value:e}];const r=[];for(const s of Object.keys(e)){const i=n?`${n}.${s}`:s,l=e[s];typeof l=="object"&&l!==null&&!Array.isArray(l)&&!U(l)?r.push(...Ue(l,i)):r.push({path:i,value:l})}return r}function De(e){return e==null?{text:"null",color:"var(--ss-dim)"}:typeof e=="boolean"?{text:String(e),color:e?"var(--ss-green-fg)":"var(--ss-red-fg)"}:typeof e=="number"?{text:String(e),color:"var(--ss-amber-fg)"}:Array.isArray(e)?{text:`[${e.map(r=>r==null?"null":typeof r=="object"?JSON.stringify(r):String(r)).join(", ")}]`,color:"var(--ss-purple-fg)"}:typeof e=="object"?{text:JSON.stringify(e),color:"var(--ss-dim)"}:{text:String(e)}}function qt(e){if(e==null||typeof e!="object"||Array.isArray(e)||U(e))return 1;let n=0;for(const r of Object.keys(e))n+=qt(e[r]);return n}function Rr(e){if(e==null||typeof e!="object"||Array.isArray(e)||U(e))return[];const n=[];for(const r of Object.keys(e)){const s=e[r];s!==null&&typeof s=="object"&&!Array.isArray(s)&&!U(s)&&n.push(r)}return n}function ye(e,n,r){n&&navigator.clipboard.writeText(e).then(()=>{const s=n.textContent;n.textContent="✓",n.classList.add(`${r}-copy-row-ok`),setTimeout(()=>{n.textContent=s,n.classList.remove(`${r}-copy-row-ok`)},1200)}).catch(()=>{})}function ve({redacted:e,p:n}){const[r,s]=$(!1);return t("span",{className:`${n}-config-redacted`,style:{display:"inline-flex",alignItems:"center",gap:"4px"},children:[t("span",{children:r?e.value:e.display}),t("button",{type:"button",className:`${n}-btn`,title:r?"Hide":"Reveal",style:{padding:"0 4px",fontSize:"0.85em",lineHeight:1,minWidth:"auto"},onClick:i=>{i.stopPropagation(),s(l=>!l)},children:r?t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94"}),t("path",{d:"M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19"}),t("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t("circle",{cx:"12",cy:"12",r:"3"})]})})]})}function Ir({env:e,search:n,p:r}){const s=M(new Map),i=n.toLowerCase(),l=Object.entries(e).filter(([a,c])=>{if(!i)return!0;const u=U(c)?c.display:c==null?"":String(c);return a.toLowerCase().includes(i)||u.toLowerCase().includes(i)});return t("div",{className:`${r}-config-table-wrap`,children:t("table",{className:`${r}-table ${r}-config-env-table`,children:[t("thead",{children:t("tr",{children:[t("th",{children:"Variable"}),t("th",{children:"Value"}),t("th",{style:{width:36}})]})}),t("tbody",{children:[l.map(([a,c])=>{const u=U(c),d=u?c.display:c==null?"null":String(c),p=`${a}=${d}`;return t("tr",{children:[t("td",{className:`${r}-env-key`,children:t("span",{className:`${r}-config-key`,children:a})}),t("td",{className:`${r}-env-val`,children:u?t(ve,{redacted:c,p:r}):t("span",{className:`${r}-config-val`,children:d})}),t("td",{children:!u&&t("button",{type:"button",className:`${r}-copy-row-btn`,title:"Copy",ref:o=>{s.current.set(a,o)},onClick:o=>{o.stopPropagation(),ye(p,s.current.get(a)??null,r)},children:"⎘"})})]},a)}),l.length===0&&t("tr",{children:t("td",{colSpan:3,style:{textAlign:"center",color:"var(--ss-dim)"},children:"No matching variables"})})]})]})})}function Fr({source:e,search:n,p:r}){const s=M(new Map),i=n.toLowerCase(),l=Ue(e,""),a=l.filter(c=>{const u=U(c.value)?c.value.display:c.value===null||c.value===void 0?"":String(c.value);return c.path.toLowerCase().includes(i)||u.toLowerCase().includes(i)});return t("div",{className:`${r}-config-table-wrap`,children:[t("table",{className:`${r}-table`,children:[t("thead",{children:t("tr",{children:[t("th",{children:"Path"}),t("th",{children:"Value"}),t("th",{style:{width:36}})]})}),t("tbody",{children:[a.map(c=>{const u=U(c.value),d=u?null:De(c.value),p=u?c.value.display:d.text,o=`${c.path}: ${p}`;return t("tr",{children:[t("td",{children:t("span",{className:`${r}-config-key`,style:{whiteSpace:"nowrap"},children:c.path})}),t("td",{children:u?t(ve,{redacted:c.value,p:r}):t("span",{className:`${r}-config-val`,style:{wordBreak:"break-all",color:d.color},children:d.text})}),t("td",{children:!u&&t("button",{type:"button",className:`${r}-copy-row-btn`,title:"Copy",ref:f=>{s.current.set(c.path,f)},onClick:f=>{f.stopPropagation(),ye(o,s.current.get(c.path)??null,r)},children:"⎘"})})]},c.path)}),a.length===0&&t("tr",{children:t("td",{colSpan:3,style:{textAlign:"center",color:"var(--ss-dim)"},children:"No matching entries"})})]})]}),t("div",{style:{padding:"4px 16px",fontSize:"10px",color:"var(--ss-muted)"},children:[a.length," of ",l.length," entries"]})]})}function Ur({obj:e,prefix:n,p:r}){const s=M(new Map),i=Ue(e,n);return t("table",{className:`${r}-table ${r}-config-inner-table`,children:[t("thead",{children:t("tr",{children:[t("th",{style:{width:"35%"},children:"Key"}),t("th",{children:"Value"}),t("th",{style:{width:36}})]})}),t("tbody",{children:i.map(l=>{const a=l.path.indexOf(n+".")===0?l.path.slice(n.length+1):l.path,c=U(l.value),u=c?null:De(l.value),d=c?l.value.display:u.text,p=`${l.path}: ${d}`;return t("tr",{children:[t("td",{title:a,children:t("span",{className:`${r}-config-key`,children:a})}),t("td",{title:d,children:c?t(ve,{redacted:l.value,p:r}):t("span",{className:`${r}-config-val`,style:{color:u.color},children:u.text})}),t("td",{children:!c&&t("button",{type:"button",className:`${r}-copy-row-btn`,title:"Copy",ref:o=>{s.current.set(l.path,o)},onClick:o=>{o.stopPropagation(),ye(p,s.current.get(l.path)??null,r)},children:"⎘"})})]},l.path)})})]})}function Dr({value:e,p:n}){if(e==null)return t("span",{className:`${n}-config-val`,style:{color:"var(--ss-dim)"},children:"null"});if(U(e))return t(ve,{redacted:e,p:n});if(typeof e=="boolean")return t("span",{className:`${n}-config-val`,style:{color:e?"var(--ss-green-fg)":"var(--ss-red-fg)"},children:String(e)});if(typeof e=="number")return t("span",{className:`${n}-config-val`,style:{color:"var(--ss-amber-fg)"},children:String(e)});if(Array.isArray(e)){const r=e.map(s=>s==null?"null":typeof s=="object"?JSON.stringify(s):String(s));return t("span",{className:`${n}-config-val`,style:{color:"var(--ss-purple-fg)"},children:["[",r.join(", "),"]"]})}return typeof e=="object"?t("span",{className:`${n}-config-val`,style:{color:"var(--ss-dim)"},children:JSON.stringify(e)}):t("span",{className:`${n}-config-val`,children:String(e)})}function jr({obj:e,expandedPaths:n,onToggle:r,p:s}){if(e==null||typeof e!="object"||Array.isArray(e)||U(e))return null;const i=Object.keys(e),l=M(new Map);return t("div",{className:`${s}-config-sections`,children:i.map(a=>{const c=e[a],u=c!==null&&typeof c=="object"&&!Array.isArray(c)&&!U(c),d=n.has(a),p=U(c);return t("div",{className:`${s}-config-section`,children:[t("div",{className:`${s}-config-section-header${u?"":` ${s}-config-leaf`}`,onClick:u?()=>r(a):void 0,style:{cursor:u?"pointer":"default"},children:[u?t("span",{className:`${s}-config-toggle`,children:d?"▼":"▶"}):t("span",{className:`${s}-config-toggle`,style:{visibility:"hidden"},children:"•"}),t("span",{className:`${s}-config-key`,children:a}),u?t("span",{className:`${s}-config-count`,children:[qt(c)," entries"]}):t(I,{children:[t("span",{className:`${s}-config-val`,style:{marginLeft:"8px"},children:t(Dr,{value:c,p:s})}),!p&&t("button",{type:"button",className:`${s}-copy-row-btn`,style:{marginLeft:"4px"},title:"Copy",ref:o=>{l.current.set(a,o)},onClick:o=>{o.stopPropagation();const f=De(c);ye(`${a}: ${f.text}`,l.current.get(a)??null,s)},children:"⎘"})]})]}),u&&d&&t("div",{className:`${s}-config-section-body`,children:t(Ur,{obj:c,prefix:a,p:s})})]},a)})})}function Hr({data:e,isLoading:n,classPrefix:r}){const s=r,[i,l]=$(""),[a,c]=$(""),[u,d]=$("app"),[p,o]=$(new Set),[f,h]=$("Copy JSON");P(()=>{const w=setTimeout(()=>c(i),200);return()=>clearTimeout(w)},[i]);const m=e,y=T(w=>{o(C=>{const v=new Set(C);return v.has(w)?v.delete(w):v.add(w),v})},[]),_=T(()=>{if(!m)return;const w=u==="app"?m.app:m.env;if(!w)return;const C=Rr(w);o(new Set(C))},[m,u]),g=T(()=>{o(new Set)},[]),b=T(async()=>{if(m)try{const w=u==="app"?m.app:m.env;await navigator.clipboard.writeText(JSON.stringify(w,null,2)),h("Copied!"),setTimeout(()=>h("Copy JSON"),1500)}catch{}},[m,u]);return t("div",{children:[t("div",{className:`${s}-config-toolbar`,style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px"},children:[t("button",{type:"button",className:`${s}-config-tab${u==="app"?` ${s}-active`:""}`,onClick:()=>d("app"),children:"App Config"}),t("button",{type:"button",className:`${s}-config-tab${u==="env"?` ${s}-active`:""}`,onClick:()=>d("env"),children:"Env"}),t("div",{style:{position:"relative",flex:1},children:[t("input",{type:"text",className:`${s}-search`,placeholder:"Search keys and values...",value:i,onChange:w=>l(w.target.value),style:{width:"100%"}}),i&&t("button",{type:"button",onClick:()=>l(""),style:{position:"absolute",right:"6px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"14px",color:"var(--ss-dim)",padding:"0 2px",lineHeight:1},children:"×"})]}),u==="app"&&!a&&t(I,{children:[t("button",{type:"button",className:`${s}-btn`,onClick:_,children:"Expand All"}),t("button",{type:"button",className:`${s}-btn`,onClick:g,children:"Collapse All"})]}),t("button",{type:"button",className:`${s}-btn`,onClick:b,children:f})]}),n&&!e?t("div",{className:`${s}-empty`,children:"Loading config..."}):m?u==="env"?t(Ir,{env:m.env??{},search:a,p:s}):a?t(Fr,{source:m.app??{},search:a,p:s}):t("div",{className:`${s}-config-table-wrap`,children:t(jr,{obj:m.app,expandedPaths:p,onToggle:y,p:s})}):t("div",{className:`${s}-empty`,children:"Config not available"})]})}function Wt({options:e,dashboardPath:n}){const r=E(()=>n?n.replace(/\/+$/,"")+"/api":null,[n]),s=E(()=>r?{...e,debugEndpoint:r}:e,[r,e]),{data:i,isLoading:l,error:a}=H("config",s);return a?t("div",{className:"ss-dbg-empty",children:["Error: ",a.message]}):t(Hr,{data:i,isLoading:l,classPrefix:"ss-dbg"})}const Br=Object.freeze(Object.defineProperty({__proto__:null,ConfigTab:Wt,default:Wt},Symbol.toStringTag,{value:"Module"})),zr=["password","secret","token","key","credential","auth"];function Vt(e){const n=e.toLowerCase();return zr.some(r=>n.includes(r))}function Kt(e){const n=Date.now()-e,r=Math.floor(n/1e3);if(r<60)return`${r}s ago`;const s=Math.floor(r/60);if(s<60)return`${s}m ago`;const i=Math.floor(s/60);return i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`}function je(e){return e.toLocaleString()}function Jt(e){return e<1e3?`${e}ms`:e<6e4?`${e/1e3}s`:e<36e5?`${e/6e4}m`:`${e/36e5}h`}function qr(e){if(!e&&e!==0)return"-";const n=Math.floor(e),r=Math.floor(n/86400),s=Math.floor(n%86400/3600),i=Math.floor(n%3600/60);return r>0?`${r}d ${s}h`:s>0?`${s}h ${i}m`:i>0?`${i}m ${n%60}s`:`${n}s`}function Gt(e){if(e==null)return"-";if(typeof e=="string"||typeof e=="number"||typeof e=="boolean")return String(e);if(Array.isArray(e))return e.join(", ")||"-";try{return JSON.stringify(e)}catch{return String(e)}}function ie({status:e,prefix:n}){let r=`${n}-dot`;return["healthy","active","connected","available","ready"].includes(e)?r+=` ${n}-dot-ok`:["errored","unavailable"].includes(e)&&(r+=` ${n}-dot-err`),t("span",{className:r})}const Qt=()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t("circle",{cx:"12",cy:"12",r:"3"})]}),Xt=()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[t("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94"}),t("path",{d:"M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19"}),t("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),t("path",{d:"M14.12 14.12a3 3 0 1 1-4.24-4.24"})]});function Wr({value:e}){const[n,r]=$(!1);return t("span",{children:[n?e:"••••••••"," ",t("button",{type:"button",onClick:()=>r(s=>!s),style:{background:"none",border:"1px solid var(--ss-border)",borderRadius:3,padding:"0 4px",fontSize:"10px",color:"var(--ss-dim)",cursor:"pointer",verticalAlign:"middle"},children:n?t(Xt,{}):t(Qt,{})})]})}function Vr({current:e,max:n,prefix:r}){const s=n>0?Math.min(100,Math.round(e/n*100)):0,i=s>=100;return t("div",{className:`${r}-bar`,children:[t("div",{className:`${r}-bar-track`,children:t("div",{className:`${r}-bar-fill${i?` ${r}-bar-fill-warn`:""}`,style:{width:`${s}%`}})}),t("span",{className:`${r}-bar-pct${i?` ${r}-bar-pct-warn`:""}`,children:[s,"%"]})]})}function Kr({config:e,prefix:n}){const r=Object.entries(e);return r.length===0?t("span",{className:`${n}-c-dim`,children:"-"}):t("span",{className:`${n}-c-muted`,children:r.map(([s,i],l)=>t("span",{children:[l>0&&", ",t("span",{className:`${n}-c-dim`,children:s}),"=",Vt(s)&&typeof i=="string"?t(Wr,{value:i}):t("span",{children:Gt(i)})]},s))})}function Ne({label:e,value:n,prefix:r}){return t("div",{className:`${r}-info-card`,children:[t("span",{className:`${r}-info-card-label`,children:e}),t("span",{className:`${r}-info-card-value`,children:n})]})}function Jr({data:e,tableClassName:n,classPrefix:r}){const s=r||"ss-dash",[i,l]=$(new Set),a=T(p=>{l(o=>{const f=new Set(o);return f.has(p)?f.delete(p):f.add(p),f})},[]),c=T((p,o)=>{if(o==null)return t("span",{className:`${s}-c-dim`,children:"null"});if(typeof o=="boolean")return t("span",{className:o?`${s}-c-green`:`${s}-c-red`,children:String(o)});if(Array.isArray(o))return t("span",{children:o.join(", ")||"-"});const f=Gt(o);if(Vt(p)){const h=i.has(p);return t("span",{children:[h?f:"••••••••"," ",t("button",{type:"button",onClick:()=>a(p),style:{background:"none",border:"1px solid var(--ss-border)",borderRadius:3,padding:"0 4px",fontSize:"10px",color:"var(--ss-dim)",cursor:"pointer",verticalAlign:"middle"},children:h?t(Xt,{}):t(Qt,{})})]})}return t("span",{children:f})},[i,a,s]),u={collectionInterval:"Stats Collection",dashboardBroadcast:"Dashboard Broadcast",debugBroadcast:"Debug Broadcast",persistFlush:"Persist Flush",retentionCleanup:"Retention Cleanup"},d={prometheus:"Prometheus",pinoHook:"Pino Log Hook",edgePlugin:"Edge Plugin",cacheInspector:"Cache Inspector",queueInspector:"Queue Inspector"};return t("div",{children:[t("h3",{className:`${s}-internals-title`,children:"Package Info"}),t("div",{className:`${s}-info-cards`,children:[t(Ne,{label:"Version",value:e.package.version||"-",prefix:s}),t(Ne,{label:"Node.js",value:e.package.nodeVersion||"-",prefix:s}),t(Ne,{label:"AdonisJS",value:e.package.adonisVersion||"-",prefix:s}),t(Ne,{label:"Uptime",value:qr(e.package.uptime),prefix:s})]}),e.collectors.length>0&&t(I,{children:[t("h3",{className:`${s}-internals-title`,children:"Collectors"}),t("table",{className:n,children:[t("thead",{children:t("tr",{children:[t("th",{children:"Collector"}),t("th",{children:"Status"}),t("th",{children:"Last Error"}),t("th",{children:"Config"})]})}),t("tbody",{children:e.collectors.map(p=>t("tr",{children:[t("td",{children:[t("code",{children:p.name}),p.label&&p.label!==p.name&&t("span",{className:`${s}-c-dim`,children:[" ",p.label]})]}),t("td",{children:[t(ie,{status:p.status,prefix:s}),p.status]}),t("td",{className:p.lastError?`${s}-c-red`:`${s}-c-dim`,children:p.lastError?t(I,{children:[p.lastError,p.lastErrorAt&&t("span",{className:`${s}-c-dim`,style:{fontSize:"10px"},children:Kt(p.lastErrorAt)})]}):"-"}),t("td",{children:t(Kr,{config:p.config,prefix:s})})]},p.name))})]})]}),t("h3",{className:`${s}-internals-title`,children:"Buffers"}),t("table",{className:n,children:[t("thead",{children:t("tr",{children:[t("th",{children:"Buffer"}),t("th",{children:"Usage"}),t("th",{children:"Fill %"})]})}),t("tbody",{children:Object.entries(e.buffers).map(([p,o])=>t("tr",{children:[t("td",{style:{textTransform:"capitalize"},children:p}),t("td",{children:[je(o.current)," / ",je(o.max)]}),t("td",{children:t(Vr,{current:o.current,max:o.max,prefix:s})})]},p))})]}),t("h3",{className:`${s}-internals-title`,children:"Timers"}),t("table",{className:n,children:[t("thead",{children:t("tr",{children:[t("th",{children:"Timer"}),t("th",{children:"Status"}),t("th",{children:"Interval"})]})}),t("tbody",{children:Object.entries(e.timers).map(([p,o])=>t("tr",{children:[t("td",{children:u[p]||p}),t("td",{children:[t(ie,{status:o.active?"active":"inactive",prefix:s}),t("span",{className:o.active?`${s}-c-green`:`${s}-c-dim`,children:o.active?"active":"inactive"})]}),t("td",{children:o.active?o.intervalMs?Jt(o.intervalMs):o.debounceMs?`${Jt(o.debounceMs)} (debounce)`:"-":t("span",{className:`${s}-c-dim`,children:"—"})})]},p))})]}),t("h3",{className:`${s}-internals-title`,children:"Integrations"}),t("table",{className:n,children:[t("thead",{children:t("tr",{children:[t("th",{children:"Integration"}),t("th",{children:"Status"}),t("th",{children:"Details"})]})}),t("tbody",{children:[t("tr",{children:[t("td",{children:"Transmit (SSE)"}),t("td",{children:[t(ie,{status:e.transmit.available?"connected":"inactive",prefix:s}),e.transmit.available?"connected":"unavailable"]}),t("td",{style:{fontSize:"11px"},children:e.transmit.channels.length>0?`Channels: ${e.transmit.channels.join(", ")}`:"-"})]}),Object.entries(e.integrations).map(([p,o])=>{const f=o.active??o.available??!1,h=o.active?"active":o.available?"available":"unavailable";let m=o.mode?`Mode: ${o.mode}`:"-";return p==="edgePlugin"&&o.active?m="@serverStats() tag registered":p==="cacheInspector"&&o.available?m="Redis dependency detected":p==="queueInspector"&&o.available&&(m="Queue dependency detected"),t("tr",{children:[t("td",{children:d[p]||p}),t("td",{children:[t(ie,{status:f?"active":"inactive",prefix:s}),h]}),t("td",{className:`${s}-c-dim`,style:{fontSize:"11px"},children:m})]},p)})]})]}),e.storage&&t(I,{children:[t("h3",{className:`${s}-internals-title`,children:"Storage (SQLite)"}),t("table",{className:n,children:[t("thead",{children:t("tr",{children:[t("th",{style:{width:"200px"},children:"Metric"}),t("th",{children:"Value"})]})}),t("tbody",{children:[t("tr",{children:[t("td",{children:"Status"}),t("td",{children:[t(ie,{status:e.storage.ready?"ready":"inactive",prefix:s}),e.storage.ready?"ready":"not ready"]})]}),t("tr",{children:[t("td",{children:"DB Path"}),t("td",{children:t("code",{children:e.storage.dbPath})})]}),t("tr",{children:[t("td",{children:"File Size"}),t("td",{children:[e.storage.fileSizeMb.toFixed(1)," MB"]})]}),t("tr",{children:[t("td",{children:"WAL Size"}),t("td",{children:[e.storage.walSizeMb.toFixed(1)," MB"]})]}),t("tr",{children:[t("td",{children:"Retention"}),t("td",{children:[e.storage.retentionDays," days"]})]}),t("tr",{children:[t("td",{children:"Last Cleanup"}),t("td",{children:e.storage.lastCleanupAt?Kt(e.storage.lastCleanupAt):"-"})]})]})]}),e.storage.tables.length>0&&t("table",{className:n,style:{marginTop:8},children:[t("thead",{children:t("tr",{children:[t("th",{children:"Table"}),t("th",{children:"Rows"})]})}),t("tbody",{children:e.storage.tables.map(p=>t("tr",{children:[t("td",{children:t("code",{children:p.name})}),t("td",{children:je(p.rowCount)})]},p.name))})]})]}),t("h3",{className:`${s}-internals-title`,children:"Resolved Config"}),t("table",{className:n,children:[t("thead",{children:t("tr",{children:[t("th",{style:{width:"200px"},children:"Setting"}),t("th",{children:"Value"})]})}),t("tbody",{children:[t("tr",{children:[t("td",{children:"intervalMs"}),t("td",{children:e.config.intervalMs})]}),t("tr",{children:[t("td",{children:"transport"}),t("td",{children:e.config.transport})]}),t("tr",{children:[t("td",{children:"channelName"}),t("td",{children:e.config.channelName})]}),t("tr",{children:[t("td",{children:"endpoint"}),t("td",{children:e.config.endpoint===!1?"false":e.config.endpoint})]}),t("tr",{children:[t("td",{children:"skipInTest"}),t("td",{children:c("skipInTest",e.config.skipInTest)})]}),t("tr",{children:[t("td",{children:"onStats callback"}),t("td",{children:e.config.hasOnStatsCallback?"defined":"not defined"})]}),t("tr",{children:[t("td",{children:"shouldShow callback"}),t("td",{children:e.config.hasShouldShowCallback?"defined":"not defined"})]})]})]}),t("h4",{className:`${s}-internals-title`,children:"DevToolbar"}),t("table",{className:n,children:[t("thead",{children:t("tr",{children:[t("th",{style:{width:"200px"},children:"Setting"}),t("th",{children:"Value"})]})}),t("tbody",{children:Object.entries(e.devToolbar).map(([p,o])=>t("tr",{children:[t("td",{children:p==="customPaneCount"?"customPanes":p}),t("td",{children:p==="customPaneCount"?`${o} registered`:c(p,o)})]},p))})]})]})}const Gr=3e3;function Yt({options:e}){const{baseUrl:n="",debugEndpoint:r="/admin/api/debug",authToken:s}=e||{},[i,l]=$(null),[a,c]=$(!0),[u,d]=$(null),p=M(null),o=M(null),f=T(()=>(p.current||(p.current=new se({baseUrl:n,authToken:s})),p.current),[n,s]),h=T(async()=>{try{const y=await f().get(`${r}/diagnostics`);l(y),d(null),c(!1)}catch(m){if(m instanceof me){d(m),c(!1),o.current&&(clearInterval(o.current),o.current=null);return}d(m instanceof Error?m:new Error(String(m))),c(!1)}},[r,f]);return P(()=>(c(!0),d(null),h(),o.current=setInterval(h,Gr),()=>{o.current&&(clearInterval(o.current),o.current=null)}),[h]),a&&!i?t("div",{className:"ss-dbg-empty",children:"Loading diagnostics..."}):u?t("div",{className:"ss-dbg-empty",children:["Error: ",u.message]}):i?t(Jr,{data:i,tableClassName:"ss-dbg-table",classPrefix:"ss-dbg"}):t("div",{className:"ss-dbg-empty",children:"Diagnostics not available"})}const Qr=Object.freeze(Object.defineProperty({__proto__:null,InternalsTab:Yt,default:Yt},Symbol.toStringTag,{value:"Module"}));function Zt({pane:e,options:n}){({...n});const{data:r,isLoading:s,error:i,clearData:l}=H(e.endpoint.replace(/^\//,""),{...n,debugEndpoint:""}),[a,c]=$(""),u=E(()=>{if(!r)return[];const f=e.dataKey||e.id;let h=r;for(const m of f.split("."))h=h?.[m];return Array.isArray(h)?h:[]},[r,e.dataKey,e.id]),d=E(()=>{if(!a)return u;const f=a.toLowerCase(),h=e.columns.filter(m=>m.searchable).map(m=>m.key);return h.length===0?u:u.filter(m=>h.some(y=>{const _=m[y];return _!==null&&String(_).toLowerCase().includes(f)}))},[u,a,e.columns]),p=(f,h)=>{if(f==null)return t("span",{className:"ss-dbg-c-dim",children:"-"});switch(h.format||"text"){case"time":return t("span",{className:"ss-dbg-event-time",title:W(f),children:typeof f=="number"?V(f):String(f)});case"timeAgo":return t("span",{className:"ss-dbg-event-time",title:W(f),children:V(f)});case"duration":{const y=typeof f=="number"?f:parseFloat(String(f));return isNaN(y)?String(f):t("span",{className:`ss-dbg-duration ${y>500?"ss-dbg-very-slow":y>100?"ss-dbg-slow":""}`,children:q(y)})}case"method":return t("span",{className:`ss-dbg-method ss-dbg-method-${String(f).toLowerCase()}`,children:String(f)});case"json":{let y=f;if(typeof f=="string")try{y=JSON.parse(f)}catch{}return be(y,80)}case"badge":{const y=String(f).toLowerCase(),g=(h.badgeColorMap||{})[y]||"muted";return t("span",{className:`ss-dbg-badge ss-dbg-badge-${g}`,children:String(f)})}default:return String(f)}},o=M(null);return P(()=>{if(o.current)return K(o.current)},[d]),s&&!r?t("div",{className:"ss-dbg-empty",children:["Loading ",e.label,"..."]}):i?t("div",{className:"ss-dbg-empty",children:["Error: ",i.message]}):t("div",{children:[e.search&&t("div",{className:"ss-dbg-search-bar",children:[t("input",{type:"text",className:"ss-dbg-search",placeholder:e.search.placeholder,value:a,onChange:f=>c(f.target.value)}),t("span",{className:"ss-dbg-summary",children:[d.length," items"]}),e.clearable&&t("button",{type:"button",className:"ss-dbg-btn-clear",onClick:l,children:"Clear"})]}),d.length===0?t("div",{className:"ss-dbg-empty",children:"No data"}):t("table",{ref:o,className:"ss-dbg-table",children:[t("thead",{children:t("tr",{children:e.columns.map(f=>t("th",{children:f.label},f.key))})}),t("tbody",{children:d.map((f,h)=>t("tr",{children:e.columns.map(m=>t("td",{children:p(f[m.key],m)},m.key))},f.id??h))})]})]})}const Xr=Object.freeze(Object.defineProperty({__proto__:null,CustomPaneTab:Zt,default:Zt},Symbol.toStringTag,{value:"Module"}))})();
