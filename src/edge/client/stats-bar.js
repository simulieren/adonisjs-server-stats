(function(){"use strict";var le,$,je,G,ze,qe,We,Ve,xe,Ce,$e,ae={},ce=[],rn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,te=Array.isArray;function q(e,n){for(var s in n)e[s]=n[s];return e}function Se(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Y(e,n,s){var r,i,o,a={};for(o in n)o=="key"?r=n[o]:o=="ref"?i=n[o]:a[o]=n[o];if(arguments.length>2&&(a.children=arguments.length>3?le.call(arguments,2):s),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)a[o]===void 0&&(a[o]=e.defaultProps[o]);return de(e,a,r,i,null)}function de(e,n,s,r,i){var o={type:e,props:n,key:s,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++je,__i:-1,__u:0};return i==null&&$.vnode!=null&&$.vnode(o),o}function R(e){return e.children}function W(e,n){this.props=e,this.context=n}function Z(e,n){if(n==null)return e.__?Z(e.__,e.__i+1):null;for(var s;n<e.__k.length;n++)if((s=e.__k[n])!=null&&s.__e!=null)return s.__e;return typeof e.type=="function"?Z(e):null}function on(e){if(e.__P&&e.__d){var n=e.__v,s=n.__e,r=[],i=[],o=q({},n);o.__v=n.__v+1,$.vnode&&$.vnode(o),ke(e.__P,o,n,e.__n,e.__P.namespaceURI,32&n.__u?[s]:null,r,s??Z(n),!!(32&n.__u),i),o.__v=n.__v,o.__.__k[o.__i]=o,Ze(r,o,i),n.__e=n.__=null,o.__e!=s&&Ke(o)}}function Ke(e){if((e=e.__)!=null&&e.__c!=null)return e.__e=e.__c.base=null,e.__k.some(function(n){if(n!=null&&n.__e!=null)return e.__e=e.__c.base=n.__e}),Ke(e)}function Je(e){(!e.__d&&(e.__d=!0)&&G.push(e)&&!ue.__r++||ze!=$.debounceRendering)&&((ze=$.debounceRendering)||qe)(ue)}function ue(){for(var e,n=1;G.length;)G.length>n&&G.sort(We),e=G.shift(),n=G.length,on(e);ue.__r=0}function Ge(e,n,s,r,i,o,a,d,c,l,f){var u,p,h,m,g,y,v,_=r&&r.__k||ce,x=n.length;for(c=ln(s,n,_,c,x),u=0;u<x;u++)(h=s.__k[u])!=null&&(p=h.__i!=-1&&_[h.__i]||ae,h.__i=u,y=ke(e,h,p,i,o,a,d,c,l,f),m=h.__e,h.ref&&p.ref!=h.ref&&(p.ref&&Le(p.ref,null,h),f.push(h.ref,h.__c||m,h)),g==null&&m!=null&&(g=m),(v=!!(4&h.__u))||p.__k===h.__k?c=Qe(h,c,e,v):typeof h.type=="function"&&y!==void 0?c=y:m&&(c=m.nextSibling),h.__u&=-7);return s.__e=g,c}function ln(e,n,s,r,i){var o,a,d,c,l,f=s.length,u=f,p=0;for(e.__k=new Array(i),o=0;o<i;o++)(a=n[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=e.__k[o]=de(null,a,null,null,null):te(a)?a=e.__k[o]=de(R,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=e.__k[o]=de(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):e.__k[o]=a,c=o+p,a.__=e,a.__b=e.__b+1,d=null,(l=a.__i=an(a,s,c,u))!=-1&&(u--,(d=s[l])&&(d.__u|=2)),d==null||d.__v==null?(l==-1&&(i>f?p--:i<f&&p++),typeof a.type!="function"&&(a.__u|=4)):l!=c&&(l==c-1?p--:l==c+1?p++:(l>c?p--:p++,a.__u|=4))):e.__k[o]=null;if(u)for(o=0;o<f;o++)(d=s[o])!=null&&(2&d.__u)==0&&(d.__e==r&&(r=Z(d)),tt(d,d));return r}function Qe(e,n,s,r){var i,o;if(typeof e.type=="function"){for(i=e.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=e,n=Qe(i[o],n,s,r));return n}e.__e!=n&&(r&&(n&&e.type&&!n.parentNode&&(n=Z(e)),s.insertBefore(e.__e,n||null)),n=e.__e);do n=n&&n.nextSibling;while(n!=null&&n.nodeType==8);return n}function he(e,n){return n=n||[],e==null||typeof e=="boolean"||(te(e)?e.some(function(s){he(s,n)}):n.push(e)),n}function an(e,n,s,r){var i,o,a,d=e.key,c=e.type,l=n[s],f=l!=null&&(2&l.__u)==0;if(l===null&&d==null||f&&d==l.key&&c==l.type)return s;if(r>(f?1:0)){for(i=s-1,o=s+1;i>=0||o<n.length;)if((l=n[a=i>=0?i--:o++])!=null&&(2&l.__u)==0&&d==l.key&&c==l.type)return a}return-1}function Xe(e,n,s){n[0]=="-"?e.setProperty(n,s??""):e[n]=s==null?"":typeof s!="number"||rn.test(n)?s:s+"px"}function pe(e,n,s,r,i){var o,a;e:if(n=="style")if(typeof s=="string")e.style.cssText=s;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(n in r)s&&n in s||Xe(e.style,n,"");if(s)for(n in s)r&&s[n]==r[n]||Xe(e.style,n,s[n])}else if(n[0]=="o"&&n[1]=="n")o=n!=(n=n.replace(Ve,"$1")),a=n.toLowerCase(),n=a in e||n=="onFocusOut"||n=="onFocusIn"?a.slice(2):n.slice(2),e.l||(e.l={}),e.l[n+o]=s,s?r?s.u=r.u:(s.u=xe,e.addEventListener(n,o?$e:Ce,o)):e.removeEventListener(n,o?$e:Ce,o);else{if(i=="http://www.w3.org/2000/svg")n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!="width"&&n!="height"&&n!="href"&&n!="list"&&n!="form"&&n!="tabIndex"&&n!="download"&&n!="rowSpan"&&n!="colSpan"&&n!="role"&&n!="popover"&&n in e)try{e[n]=s??"";break e}catch{}typeof s=="function"||(s==null||s===!1&&n[4]!="-"?e.removeAttribute(n):e.setAttribute(n,n=="popover"&&s==1?"":s))}}function Ye(e){return function(n){if(this.l){var s=this.l[n.type+e];if(n.t==null)n.t=xe++;else if(n.t<s.u)return;return s($.event?$.event(n):n)}}}function ke(e,n,s,r,i,o,a,d,c,l){var f,u,p,h,m,g,y,v,_,x,S,w,b,k,C,O=n.type;if(n.constructor!==void 0)return null;128&s.__u&&(c=!!(32&s.__u),o=[d=n.__e=s.__e]),(f=$.__b)&&f(n);e:if(typeof O=="function")try{if(v=n.props,_="prototype"in O&&O.prototype.render,x=(f=O.contextType)&&r[f.__c],S=f?x?x.props.value:f.__:r,s.__c?y=(u=n.__c=s.__c).__=u.__E:(_?n.__c=u=new O(v,S):(n.__c=u=new W(v,S),u.constructor=O,u.render=dn),x&&x.sub(u),u.state||(u.state={}),u.__n=r,p=u.__d=!0,u.__h=[],u._sb=[]),_&&u.__s==null&&(u.__s=u.state),_&&O.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=q({},u.__s)),q(u.__s,O.getDerivedStateFromProps(v,u.__s))),h=u.props,m=u.state,u.__v=n,p)_&&O.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),_&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(_&&O.getDerivedStateFromProps==null&&v!==h&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(v,S),n.__v==s.__v||!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(v,u.__s,S)===!1){n.__v!=s.__v&&(u.props=v,u.state=u.__s,u.__d=!1),n.__e=s.__e,n.__k=s.__k,n.__k.some(function(J){J&&(J.__=n)}),ce.push.apply(u.__h,u._sb),u._sb=[],u.__h.length&&a.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(v,u.__s,S),_&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(h,m,g)})}if(u.context=S,u.props=v,u.__P=e,u.__e=!1,w=$.__r,b=0,_)u.state=u.__s,u.__d=!1,w&&w(n),f=u.render(u.props,u.state,u.context),ce.push.apply(u.__h,u._sb),u._sb=[];else do u.__d=!1,w&&w(n),f=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++b<25);u.state=u.__s,u.getChildContext!=null&&(r=q(q({},r),u.getChildContext())),_&&!p&&u.getSnapshotBeforeUpdate!=null&&(g=u.getSnapshotBeforeUpdate(h,m)),k=f!=null&&f.type===R&&f.key==null?et(f.props.children):f,d=Ge(e,te(k)?k:[k],n,s,r,i,o,a,d,c,l),u.base=n.__e,n.__u&=-161,u.__h.length&&a.push(u),y&&(u.__E=u.__=null)}catch(J){if(n.__v=null,c||o!=null)if(J.then){for(n.__u|=c?160:128;d&&d.nodeType==8&&d.nextSibling;)d=d.nextSibling;o[o.indexOf(d)]=null,n.__e=d}else{for(C=o.length;C--;)Se(o[C]);Te(n)}else n.__e=s.__e,n.__k=s.__k,J.then||Te(n);$.__e(J,n,s)}else o==null&&n.__v==s.__v?(n.__k=s.__k,n.__e=s.__e):d=n.__e=cn(s.__e,n,s,r,i,o,a,c,l);return(f=$.diffed)&&f(n),128&n.__u?void 0:d}function Te(e){e&&(e.__c&&(e.__c.__e=!0),e.__k&&e.__k.some(Te))}function Ze(e,n,s){for(var r=0;r<s.length;r++)Le(s[r],s[++r],s[++r]);$.__c&&$.__c(n,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(o){o.call(i)})}catch(o){$.__e(o,i.__v)}})}function et(e){return typeof e!="object"||e==null||e.__b>0?e:te(e)?e.map(et):q({},e)}function cn(e,n,s,r,i,o,a,d,c){var l,f,u,p,h,m,g,y=s.props||ae,v=n.props,_=n.type;if(_=="svg"?i="http://www.w3.org/2000/svg":_=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(l=0;l<o.length;l++)if((h=o[l])&&"setAttribute"in h==!!_&&(_?h.localName==_:h.nodeType==3)){e=h,o[l]=null;break}}if(e==null){if(_==null)return document.createTextNode(v);e=document.createElementNS(i,_,v.is&&v),d&&($.__m&&$.__m(n,o),d=!1),o=null}if(_==null)y===v||d&&e.data==v||(e.data=v);else{if(o=o&&le.call(e.childNodes),!d&&o!=null)for(y={},l=0;l<e.attributes.length;l++)y[(h=e.attributes[l]).name]=h.value;for(l in y)h=y[l],l=="dangerouslySetInnerHTML"?u=h:l=="children"||l in v||l=="value"&&"defaultValue"in v||l=="checked"&&"defaultChecked"in v||pe(e,l,null,h,i);for(l in v)h=v[l],l=="children"?p=h:l=="dangerouslySetInnerHTML"?f=h:l=="value"?m=h:l=="checked"?g=h:d&&typeof h!="function"||y[l]===h||pe(e,l,h,y[l],i);if(f)d||u&&(f.__html==u.__html||f.__html==e.innerHTML)||(e.innerHTML=f.__html),n.__k=[];else if(u&&(e.innerHTML=""),Ge(n.type=="template"?e.content:e,te(p)?p:[p],n,s,r,_=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,a,o?o[0]:s.__k&&Z(s,0),d,c),o!=null)for(l=o.length;l--;)Se(o[l]);d||(l="value",_=="progress"&&m==null?e.removeAttribute("value"):m!=null&&(m!==e[l]||_=="progress"&&!m||_=="option"&&m!=y[l])&&pe(e,l,m,y[l],i),l="checked",g!=null&&g!=e[l]&&pe(e,l,g,y[l],i))}return e}function Le(e,n,s){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&n==null||(e.__u=e(n))}else e.current=n}catch(i){$.__e(i,s)}}function tt(e,n,s){var r,i;if($.unmount&&$.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||Le(r,null,n)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){$.__e(o,n)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&tt(r[i],n,s||typeof e.type!="function");s||Se(e.__e),e.__c=e.__=e.__e=void 0}function dn(e,n,s){return this.constructor(e,s)}function Ee(e,n,s){var r,i,o,a;n==document&&(n=document.documentElement),$.__&&$.__(e,n),i=(r=!1)?null:n.__k,o=[],a=[],ke(n,e=n.__k=Y(R,null,[e]),i||ae,ae,n.namespaceURI,i?null:n.firstChild?le.call(n.childNodes):null,o,i?i.__e:n.firstChild,r,a),Ze(o,e,a)}le=ce.slice,$={__e:function(e,n,s,r){for(var i,o,a;n=n.__;)if((i=n.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(e)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),a=i.__d),a)return i.__E=i}catch(d){e=d}throw e}},je=0,W.prototype.setState=function(e,n){var s;s=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=q({},this.state),typeof e=="function"&&(e=e(q({},s),this.props)),e&&q(s,e),e!=null&&this.__v&&(n&&this._sb.push(n),Je(this))},W.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Je(this))},W.prototype.render=R,G=[],qe=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,We=function(e,n){return e.__v.__b-n.__v.__b},ue.__r=0,Ve=/(PointerCapture)$|Capture$/i,xe=0,Ce=Ye(!1),$e=Ye(!0);var un=0;function t(e,n,s,r,i,o){n||(n={});var a,d,c=n;if("ref"in c)for(d in c={},n)d=="ref"?a=n[d]:c[d]=n[d];var l={type:e,props:c,key:s,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--un,__i:-1,__u:0,__source:i,__self:o};if(typeof e=="function"&&(a=e.defaultProps))for(d in a)c[d]===void 0&&(c[d]=a[d]);return $.vnode&&$.vnode(l),l}var ne,M,Me,nt,se=0,st=[],A=$,rt=A.__b,it=A.__r,ot=A.diffed,lt=A.__c,at=A.unmount,ct=A.__;function Pe(e,n){A.__h&&A.__h(M,e,se||n),se=0;var s=M.__H||(M.__H={__:[],__h:[]});return e>=s.__.length&&s.__.push({}),s.__[e]}function N(e){return se=1,hn(ht,e)}function hn(e,n,s){var r=Pe(ne++,2);if(r.t=e,!r.__c&&(r.__=[s?s(n):ht(void 0,n),function(d){var c=r.__N?r.__N[0]:r.__[0],l=r.t(c,d);c!==l&&(r.__N=[l,r.__[1]],r.__c.setState({}))}],r.__c=M,!M.__f)){var i=function(d,c,l){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(p){return p.__c});if(f.every(function(p){return!p.__N}))return!o||o.call(this,d,c,l);var u=r.__c.props!==d;return f.some(function(p){if(p.__N){var h=p.__[0];p.__=p.__N,p.__N=void 0,h!==p.__[0]&&(u=!0)}}),o&&o.call(this,d,c,l)||u};M.__f=!0;var o=M.shouldComponentUpdate,a=M.componentWillUpdate;M.componentWillUpdate=function(d,c,l){if(this.__e){var f=o;o=void 0,i(d,c,l),o=f}a&&a.call(this,d,c,l)},M.shouldComponentUpdate=i}return r.__N||r.__}function I(e,n){var s=Pe(ne++,3);!A.__s&&ut(s.__H,n)&&(s.__=e,s.u=n,M.__H.__h.push(s))}function U(e){return se=5,T(function(){return{current:e}},[])}function T(e,n){var s=Pe(ne++,7);return ut(s.__H,n)&&(s.__=e(),s.__H=n,s.__h=e),s.__}function L(e,n){return se=8,T(function(){return e},n)}function pn(){for(var e;e=st.shift();){var n=e.__H;if(e.__P&&n)try{n.__h.some(fe),n.__h.some(Ae),n.__h=[]}catch(s){n.__h=[],A.__e(s,e.__v)}}}A.__b=function(e){M=null,rt&&rt(e)},A.__=function(e,n){e&&n.__k&&n.__k.__m&&(e.__m=n.__k.__m),ct&&ct(e,n)},A.__r=function(e){it&&it(e),ne=0;var n=(M=e.__c).__H;n&&(Me===M?(n.__h=[],M.__h=[],n.__.some(function(s){s.__N&&(s.__=s.__N),s.u=s.__N=void 0})):(n.__h.some(fe),n.__h.some(Ae),n.__h=[],ne=0)),Me=M},A.diffed=function(e){ot&&ot(e);var n=e.__c;n&&n.__H&&(n.__H.__h.length&&(st.push(n)!==1&&nt===A.requestAnimationFrame||((nt=A.requestAnimationFrame)||fn)(pn)),n.__H.__.some(function(s){s.u&&(s.__H=s.u),s.u=void 0})),Me=M=null},A.__c=function(e,n){n.some(function(s){try{s.__h.some(fe),s.__h=s.__h.filter(function(r){return!r.__||Ae(r)})}catch(r){n.some(function(i){i.__h&&(i.__h=[])}),n=[],A.__e(r,s.__v)}}),lt&&lt(e,n)},A.unmount=function(e){at&&at(e);var n,s=e.__c;s&&s.__H&&(s.__H.__.some(function(r){try{fe(r)}catch(i){n=i}}),s.__H=void 0,n&&A.__e(n,s.__v))};var dt=typeof requestAnimationFrame=="function";function fn(e){var n,s=function(){clearTimeout(r),dt&&cancelAnimationFrame(n),setTimeout(e)},r=setTimeout(s,35);dt&&(n=requestAnimationFrame(s))}function fe(e){var n=M,s=e.__c;typeof s=="function"&&(e.__c=void 0,s()),M=n}function Ae(e){var n=M;e.__c=e.__(),M=n}function ut(e,n){return!e||e.length!==n.length||n.some(function(s,r){return s!==e[r]})}function ht(e,n){return typeof n=="function"?n(e):n}function mn(e,n){for(var s in n)e[s]=n[s];return e}function pt(e,n){for(var s in e)if(s!=="__source"&&!(s in n))return!0;for(var r in n)if(r!=="__source"&&e[r]!==n[r])return!0;return!1}function ft(e,n){this.props=e,this.context=n}(ft.prototype=new W).isPureReactComponent=!0,ft.prototype.shouldComponentUpdate=function(e,n){return pt(this.props,e)||pt(this.state,n)};var mt=$.__b;$.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),mt&&mt(e)};var gn=$.__e;$.__e=function(e,n,s,r){if(e.then){for(var i,o=n;o=o.__;)if((i=o.__c)&&i.__c)return n.__e==null&&(n.__e=s.__e,n.__k=s.__k),i.__c(e,n)}gn(e,n,s,r)};var gt=$.unmount;function bt(e,n,s){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),e.__c.__H=null),(e=mn({},e)).__c!=null&&(e.__c.__P===s&&(e.__c.__P=n),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(r){return bt(r,n,s)})),e}function _t(e,n,s){return e&&s&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(r){return _t(r,n,s)}),e.__c&&e.__c.__P===n&&(e.__e&&s.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=s)),e}function re(){this.__u=0,this.o=null,this.__b=null}function yt(e){if(!e.__)return null;var n=e.__.__c;return n&&n.__a&&n.__a(e)}function H(e){var n,s,r,i=null;function o(a){if(n||(n=e()).then(function(d){d&&(i=d.default||d),r=!0},function(d){s=d,r=!0}),s)throw s;if(!r)throw n;return i?Y(i,a):null}return o.displayName="Lazy",o.__f=!0,o}function me(){this.i=null,this.l=null}$.unmount=function(e){var n=e.__c;n&&(n.__z=!0),n&&n.__R&&n.__R(),n&&32&e.__u&&(e.type=null),gt&&gt(e)},(re.prototype=new W).__c=function(e,n){var s=n.__c,r=this;r.o==null&&(r.o=[]),r.o.push(s);var i=yt(r.__v),o=!1,a=function(){o||r.__z||(o=!0,s.__R=null,i?i(c):c())};s.__R=a;var d=s.__P;s.__P=null;var c=function(){if(!--r.__u){if(r.state.__a){var l=r.state.__a;r.__v.__k[0]=_t(l,l.__c.__P,l.__c.__O)}var f;for(r.setState({__a:r.__b=null});f=r.o.pop();)f.__P=d,f.forceUpdate()}};r.__u++||32&n.__u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(a,a)},re.prototype.componentWillUnmount=function(){this.o=[]},re.prototype.render=function(e,n){if(this.__b){if(this.__v.__k){var s=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=bt(this.__b,s,r.__O=r.__P)}this.__b=null}var i=n.__a&&Y(R,null,e.fallback);return i&&(i.__u&=-33),[Y(R,null,n.__a?null:e.children),i]};var vt=function(e,n,s){if(++s[1]===s[0]&&e.l.delete(n),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(s=e.i;s;){for(;s.length>3;)s.pop()();if(s[1]<s[0])break;e.i=s=s[2]}};function bn(e){return this.getChildContext=function(){return e.context},e.children}function _n(e){var n=this,s=e.h;if(n.componentWillUnmount=function(){Ee(null,n.v),n.v=null,n.h=null},n.h&&n.h!==s&&n.componentWillUnmount(),!n.v){for(var r=n.__v;r!==null&&!r.__m&&r.__!==null;)r=r.__;n.h=s,n.v={nodeType:1,parentNode:s,childNodes:[],__k:{__m:r.__m},contains:function(){return!0},namespaceURI:s.namespaceURI,insertBefore:function(i,o){this.childNodes.push(i),n.h.insertBefore(i,o)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),n.h.removeChild(i)}}}Ee(Y(bn,{context:n.context},e.__v),n.v)}function yn(e,n){var s=Y(_n,{__v:e,h:n});return s.containerInfo=n,s}(me.prototype=new W).__a=function(e){var n=this,s=yt(n.__v),r=n.l.get(e);return r[0]++,function(i){var o=function(){n.props.revealOrder?(r.push(i),vt(n,e,r)):i()};s?s(o):o()}},me.prototype.render=function(e){this.i=null,this.l=new Map;var n=he(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&n.reverse();for(var s=n.length;s--;)this.l.set(n[s],this.i=[1,0,this.i]);return e.children},me.prototype.componentDidUpdate=me.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(n,s){vt(e,s,n)})};var vn=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,wn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Nn=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,xn=/[A-Z0-9]/g,Cn=typeof document<"u",$n=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};W.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(W.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(n){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:n})}})});var wt=$.event;function Sn(){}function kn(){return this.cancelBubble}function Tn(){return this.defaultPrevented}$.event=function(e){return wt&&(e=wt(e)),e.persist=Sn,e.isPropagationStopped=kn,e.isDefaultPrevented=Tn,e.nativeEvent=e};var Ln={enumerable:!1,configurable:!0,get:function(){return this.class}},Nt=$.vnode;$.vnode=function(e){typeof e.type=="string"&&(function(n){var s=n.props,r=n.type,i={},o=r.indexOf("-")===-1;for(var a in s){var d=s[a];if(!(a==="value"&&"defaultValue"in s&&d==null||Cn&&a==="children"&&r==="noscript"||a==="class"||a==="className")){var c=a.toLowerCase();a==="defaultValue"&&"value"in s&&s.value==null?a="value":a==="download"&&d===!0?d="":c==="translate"&&d==="no"?d=!1:c[0]==="o"&&c[1]==="n"?c==="ondoubleclick"?a="ondblclick":c!=="onchange"||r!=="input"&&r!=="textarea"||$n(s.type)?c==="onfocus"?a="onfocusin":c==="onblur"?a="onfocusout":Nn.test(a)&&(a=c):c=a="oninput":o&&wn.test(a)?a=a.replace(xn,"-$&").toLowerCase():d===null&&(d=void 0),c==="oninput"&&i[a=c]&&(a="oninputCapture"),i[a]=d}}r=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=he(s.children).forEach(function(l){l.props.selected=i.value.indexOf(l.props.value)!=-1})),r=="select"&&i.defaultValue!=null&&(i.value=he(s.children).forEach(function(l){l.props.selected=i.multiple?i.defaultValue.indexOf(l.props.value)!=-1:i.defaultValue==l.props.value})),s.class&&!s.className?(i.class=s.class,Object.defineProperty(i,"className",Ln)):s.className&&(i.class=i.className=s.className),n.props=i})(e),e.$$typeof=vn,Nt&&Nt(e)};var xt=$.__r;$.__r=function(e){xt&&xt(e),e.__c};var Ct=$.diffed;$.diffed=function(e){Ct&&Ct(e);var n=e.props,s=e.__e;s!=null&&e.type==="textarea"&&"value"in n&&n.value!==s.value&&(s.value=n.value==null?"":n.value)};var En={Fragment:R};class ie extends Error{status;constructor(n=403){super(`Unauthorized (HTTP ${n})`),this.name="UnauthorizedError",this.status=n}}class Mn extends Error{status;body;constructor(n,s){super(`API error (HTTP ${n})`),this.name="ApiError",this.status=n,this.body=s}}class ge{baseUrl;authToken;constructor(n){this.baseUrl=n.baseUrl.replace(/\/+$/,""),this.authToken=n.authToken}async fetch(n,s){const i={...{Accept:"application/json",...this.authToken?{Authorization:`Bearer ${this.authToken}`}:{}},...s?.headers},o=await globalThis.fetch(`${this.baseUrl}${n}`,{...s,headers:i,credentials:this.authToken?"omit":"include"});if(o.status===401||o.status===403)throw new ie(o.status);if(!o.ok){const a=await o.text().catch(()=>"");throw new Mn(o.status,a)}return o.json()}async get(n,s){const r=s?`${n}?${s}`:n;return this.fetch(r)}async post(n,s){const r={method:"POST",...s!==void 0?{body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}:{}};return this.fetch(n,r)}async delete(n){return this.fetch(n,{method:"DELETE"})}}const $t="/admin/api/debug",St={tracing:!1,process:!1,system:!1,http:!1,db:!1,redis:!1,queues:!1,cache:!1,app:!1,log:!1,emails:!1,dashboard:!1,customPanes:[]};function Pn(e){return{tracing:e.features?.tracing??!1,process:e.features?.process??!1,system:e.features?.system??!1,http:e.features?.http??!1,db:e.features?.db??!1,redis:e.features?.redis??!1,queues:e.features?.queues??!1,cache:e.features?.cache??!1,app:e.features?.app??!1,log:e.features?.log??!1,emails:e.features?.emails??!1,dashboard:e.features?.dashboard??!1,customPanes:e.customPanes??[]}}async function An(e,n=$t){const s=`${n.replace(/\/+$/,"")}/config`;return e.fetch(s)}async function On(e){const{baseUrl:n="",debugEndpoint:s=$t,authToken:r}=e,i=new ge({baseUrl:n,authToken:r});try{const o=await An(i,s);return Pn(o)}catch{return St}}function Rn(e){const n=new Set,s="features"in e&&typeof e.features=="object"&&e.features!==null?e.features:e;return"process"in s&&s.process&&n.add("process"),("process"in s&&s.process||"system"in s&&s.system)&&n.add("memory"),"http"in s&&s.http&&n.add("http"),"db"in s&&s.db&&n.add("db"),"redis"in s&&s.redis&&n.add("redis"),"queues"in s&&s.queues&&n.add("queue"),"app"in s&&s.app&&n.add("app"),"log"in s&&s.log&&n.add("log"),n}function In(e){const n=new Set;return(E(e.cpuPercent)||E(e.uptime)||Un(e.nodeVersion))&&n.add("process"),(E(e.memHeapUsed)||E(e.memRss))&&n.add("memory"),(E(e.systemMemoryTotalMb)||E(e.systemMemoryFreeMb))&&n.add("memory"),(E(e.requestsPerSecond)||E(e.avgResponseTimeMs)||E(e.errorRate)||E(e.activeHttpConnections))&&n.add("http"),(E(e.dbPoolMax)||E(e.dbPoolUsed)||E(e.dbPoolFree)||E(e.dbPoolPending))&&n.add("db"),e.redisOk!==void 0&&e.redisOk!==null&&n.add("redis"),(E(e.queueActive)||E(e.queueWaiting)||E(e.queueWorkerCount))&&n.add("queue"),(E(e.onlineUsers)||E(e.pendingWebhooks)||E(e.pendingEmails))&&n.add("app"),(E(e.logErrorsLast5m)||E(e.logEntriesPerMinute))&&n.add("log"),n}function E(e){return typeof e=="number"&&!Number.isNaN(e)}function Un(e){return typeof e=="string"&&e.length>0}const Bn=3e3,Dn=100,Hn=500;function kt(e){if(!e&&e!==0)return"-";const n=Math.floor(e),s=Math.floor(n/86400),r=Math.floor(n%86400/3600),i=Math.floor(n%3600/60);return s>0?`${s}d ${r}h`:r>0?`${r}h ${i}m`:i>0?`${i}m ${n%60}s`:`${n}s`}function Oe(e){const n=e/1048576;return n>=1024?`${(n/1024).toFixed(1)}G`:`${n.toFixed(0)}M`}function Tt(e){return e>=1024?`${(e/1024).toFixed(1)}G`:`${e.toFixed(1)}M`}function Fn(e){return e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:`${e}`}function F(e){return e>=1e3?`${(e/1e3).toFixed(2)}s`:e>=1?`${e.toFixed(0)}ms`:`${e.toFixed(2)}ms`}function V(e){if(!e)return"-";const n=typeof e=="string"?new Date(e):new Date(e);return Number.isNaN(n.getTime())?"-":n.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})+"."+String(n.getMilliseconds()).padStart(3,"0")}function j(e){if(!e)return"-";const n=typeof e=="string"?new Date(e).getTime():e,s=Math.floor((Date.now()-n)/1e3);return s<0?"just now":s<60?`${s}s ago`:s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:`${Math.floor(s/86400)}d ago`}function Re(e,n){switch(n){case"%":return`${e.toFixed(1)}%`;case"ms":return`${e.toFixed(0)}ms`;case"MB":return`${e.toFixed(1)}M`;case"bytes":return Oe(e);case"/s":case"/m":return e.toFixed(1);default:return e.toFixed(1)}}function be(e,n,s){return e>s?"red":e>n?"amber":"green"}function jn(e,n,s){return e<s?"red":e<n?"amber":"green"}function Lt(e,n){if(n===0)return"green";const s=e/n;return s>.8?"red":s>.5?"amber":"green"}const zn={green:"ss-green",amber:"ss-amber",red:"ss-red"};function ee(e){return e>Hn?"very-slow":e>Dn?"slow":"normal"}function _e(e,n=100){if(e===null)return"null";if(e===void 0)return"-";if(typeof e=="string")return'"'+(e.length>40?e.slice(0,40)+"...":e)+'"';if(typeof e=="number"||typeof e=="boolean")return String(e);if(Array.isArray(e)){if(e.length===0)return"[]";const r="["+e.slice(0,3).map(i=>_e(i,30)).join(", ")+(e.length>3?", ..."+e.length+" items":"")+"]";return r.length>n?"["+e.length+" items]":r}if(typeof e=="object"){const s=Object.keys(e);if(s.length===0)return"{}";const r=[];for(let o=0;o<Math.min(s.length,4);o++)r.push(s[o]+": "+_e(e[s[o]],30));const i="{ "+r.join(", ")+(s.length>4?", ...+"+(s.length-4):"")+" }";return i.length>n?"{ "+s.slice(0,6).join(", ")+(s.length>6?", ...":"")+" }":i}return String(e)}function qn(e){return e<0?"no expiry":e<60?`${e}s`:e<3600?`${Math.floor(e/60)}m`:e<86400?`${Math.floor(e/3600)}h`:`${Math.floor(e/86400)}d`}function Wn(e){return e<1024?`${e}B`:e<1024*1024?`${(e/1024).toFixed(1)}KB`:`${(e/(1024*1024)).toFixed(1)}MB`}function Q(e){return zn[e]||""}const Et=[{id:"node",label:"NODE",title:"Node.js Runtime",unit:"",group:"process",extract:e=>0,format:e=>e.nodeVersion,color:()=>""},{id:"uptime",label:"UP",title:"Process Uptime",unit:"",group:"process",extract:e=>e.uptime,format:e=>kt(e.uptime),color:()=>""},{id:"cpu",label:"CPU",title:"CPU Usage",unit:"%",group:"process",warnThreshold:50,critThreshold:80,extract:e=>e.cpuPercent,format:e=>`${e.cpuPercent.toFixed(1)}%`,color:e=>Q(be(e.cpuPercent,50,80)),historyKey:"cpuPercent"},{id:"eventLoop",label:"EVT",title:"Event Loop Latency",unit:"ms",group:"process",warnThreshold:20,critThreshold:50,extract:e=>e.eventLoopLag,format:e=>`${e.eventLoopLag.toFixed(1)}ms`,color:e=>Q(be(e.eventLoopLag,20,50)),historyKey:"eventLoopLag"},{id:"memory",label:"HEAP",title:"V8 Heap Usage",unit:"bytes",group:"memory",extract:e=>e.memHeapUsed,format:e=>Oe(e.memHeapUsed),color:()=>"",historyKey:"memHeapUsed"},{id:"rss",label:"RSS",title:"Resident Set Size",unit:"bytes",group:"memory",extract:e=>e.memRss,format:e=>Oe(e.memRss),color:()=>"",historyKey:"memRss"},{id:"systemMemory",label:"SYS",title:"System Memory",unit:"MB",group:"memory",extract:e=>e.systemMemoryTotalMb-e.systemMemoryFreeMb,format:e=>`${Tt(e.systemMemoryTotalMb-e.systemMemoryFreeMb)}/${Tt(e.systemMemoryTotalMb)}`,color:e=>{const n=e.systemMemoryTotalMb;if(n===0)return"";const s=n-e.systemMemoryFreeMb;return Q(Lt(s,n))},historyKey:"_sysMemUsed",show:e=>e.systemMemoryTotalMb!==null&&e.systemMemoryTotalMb!==void 0},{id:"reqPerSec",label:"REQ/s",title:"Requests per Second",unit:"/s",group:"http",extract:e=>e.requestsPerSecond,format:e=>e.requestsPerSecond.toFixed(1),color:()=>"",historyKey:"requestsPerSecond"},{id:"avgResponse",label:"AVG",title:"Avg Response Time",unit:"ms",group:"http",warnThreshold:200,critThreshold:500,extract:e=>e.avgResponseTimeMs,format:e=>`${e.avgResponseTimeMs.toFixed(0)}ms`,color:e=>Q(be(e.avgResponseTimeMs,200,500)),historyKey:"avgResponseTimeMs"},{id:"errorRate",label:"ERR",title:"Error Rate",unit:"%",group:"http",warnThreshold:1,critThreshold:5,extract:e=>e.errorRate,format:e=>`${e.errorRate.toFixed(1)}%`,color:e=>Q(be(e.errorRate,1,5)),historyKey:"errorRate"},{id:"connections",label:"CONN",title:"Active Connections",unit:"",group:"http",extract:e=>e.activeHttpConnections,format:e=>`${e.activeHttpConnections}`,color:()=>"",historyKey:"activeHttpConnections"},{id:"dbPool",label:"DB",title:"Database Pool",unit:"",group:"db",extract:e=>e.dbPoolUsed,format:e=>`${e.dbPoolUsed}/${e.dbPoolFree}/${e.dbPoolMax}`,color:e=>Q(Lt(e.dbPoolUsed,e.dbPoolMax)),historyKey:"dbPoolUsed"},{id:"redis",label:"REDIS",title:"Redis Status",unit:"",group:"redis",extract:e=>e.redisOk?1:0,format:e=>e.redisOk?"✓":"✗",color:e=>e.redisOk?"ss-green":"ss-red"},{id:"redisMem",label:"MEM",title:"Redis Memory",unit:"MB",group:"redis",extract:e=>e.redisMemoryUsedMb,format:e=>`${e.redisMemoryUsedMb.toFixed(1)}M`,color:()=>"",historyKey:"redisMemoryUsedMb",show:e=>e.redisOk},{id:"redisKeys",label:"KEYS",title:"Redis Keys",unit:"",group:"redis",extract:e=>e.redisKeysCount,format:e=>Fn(e.redisKeysCount),color:()=>"",historyKey:"redisKeysCount",show:e=>e.redisOk},{id:"redisHitRate",label:"HIT",title:"Redis Hit Rate",unit:"%",group:"redis",warnThreshold:90,critThreshold:70,inverseThreshold:!0,extract:e=>e.redisHitRate,format:e=>`${e.redisHitRate.toFixed(0)}%`,color:e=>Q(jn(e.redisHitRate,90,70)),historyKey:"redisHitRate",show:e=>e.redisOk},{id:"queue",label:"Q",title:"Job Queue",unit:"",group:"queue",extract:e=>e.queueActive,format:e=>`${e.queueActive}/${e.queueWaiting}/${e.queueDelayed}`,color:e=>e.queueFailed>0?"ss-amber":"ss-green",historyKey:"queueActive"},{id:"queueWorkers",label:"WORKERS",title:"Queue Workers",unit:"",group:"queue",extract:e=>e.queueWorkerCount,format:e=>`${e.queueWorkerCount}`,color:()=>""},{id:"onlineUsers",label:"USERS",title:"Online Users",unit:"",group:"app",extract:e=>e.onlineUsers,format:e=>`${e.onlineUsers}`,color:()=>"",historyKey:"onlineUsers"},{id:"pendingWebhooks",label:"HOOKS",title:"Pending Webhooks",unit:"",group:"app",extract:e=>e.pendingWebhooks,format:e=>`${e.pendingWebhooks}`,color:e=>e.pendingWebhooks>0?"ss-amber":"",historyKey:"pendingWebhooks"},{id:"pendingEmails",label:"MAIL",title:"Pending Emails",unit:"",group:"app",extract:e=>e.pendingEmails,format:e=>`${e.pendingEmails}`,color:e=>e.pendingEmails>0?"ss-amber":"",historyKey:"pendingEmails"},{id:"logErrors",label:"LOG ERR",title:"Log Errors (5m)",unit:"",group:"log",extract:e=>e.logErrorsLast5m,format:e=>`${e.logErrorsLast5m}`,color:e=>e.logErrorsLast5m>0?"ss-red":e.logWarningsLast5m>0?"ss-amber":"",historyKey:"logErrorsLast5m"},{id:"logRate",label:"LOG/m",title:"Log Entries / Minute",unit:"/m",group:"log",extract:e=>e.logEntriesPerMinute,format:e=>`${e.logEntriesPerMinute}`,color:()=>"",historyKey:"logEntriesPerMinute"}],Vn=60,Kn=1e4;function Mt(e={}){const{baseUrl:n="",debugEndpoint:s="/admin/api/debug",authToken:r}=e,[i,o]=N(St),[a,d]=N(!0),[c,l]=N(null),f=U(!1);return I(()=>{if(f.current)return;f.current=!0;let u=!1;return(async()=>{try{const h=await On({baseUrl:n,debugEndpoint:s,authToken:r});u||(o(h),d(!1))}catch(h){u||(l(h instanceof Error?h:new Error(String(h))),d(!1))}})(),()=>{u=!0}},[n,s,r]),{features:i,isLoading:a,error:c}}function Jn(e=Vn){const n={};return{push(s){for(const r of Et){const i=r.historyKey;if(!i)continue;const o=r.extract(s);typeof o=="number"&&(n[i]||(n[i]=[]),n[i].push(o),n[i].length>e&&n[i].shift())}},get(s){return n[s]||[]},getAll(){return n}}}async function Gn(){if(typeof window<"u"&&window.Transmit&&typeof window.Transmit=="function")return window.Transmit;try{const e=await import("@adonisjs/transmit-client");return e.Transmit??e.default??null}catch{return null}}function Qn(e){let n=null,s=null,r=!1;return{subscribe:async()=>{try{const a=await Gn();if(!a)throw new Error("Transmit client not available (neither window.Transmit nor @adonisjs/transmit-client)");if(r)return;n=new a({baseUrl:e.baseUrl||window.location.origin,...e.authToken?{beforeSubscribe(d){return{headers:{Authorization:`Bearer ${e.authToken}`}}},beforeUnsubscribe(d){return{headers:{Authorization:`Bearer ${e.authToken}`}}}}:{}}),s=n.subscription(e.channelName),s.onMessage(d=>{r||e.onMessage(d)}),await s.create()}catch(a){e.onError&&e.onError(a)}},unsubscribe:async()=>{r=!0;try{s&&(await s.delete(),s=null),n&&(n=null)}catch{}}}}function Xn(e){let n=!1;const s=Qn({baseUrl:e.baseUrl,channelName:e.channelName,authToken:e.authToken,onMessage:e.onMessage,onError:r=>{n=!0,e.onError?.(r),e.onDisconnect?.()}});return s.subscribe().then(()=>{n||e.onConnect?.()}).catch(r=>{e.onError?.(r),e.onDisconnect?.()}),{unsubscribe:()=>{s.unsubscribe().catch(()=>{})}}}class Yn{baseUrl;endpoint;channelName;authToken;pollInterval;onStatsUpdate;onConnectionChange;onStaleChange;onError;onUnauthorizedChange;onHistoryChange;onSseActiveChange;onPollActiveChange;historyBuffer;client=null;sseHandle=null;pollTimer=null;staleTimer=null;lastSuccess=0;unauthorized=!1;sseActive=!1;isConnected=!1;isStale=!1;constructor(n={}){this.baseUrl=n.baseUrl??"",this.endpoint=n.endpoint??"/admin/api/server-stats",this.channelName=n.channelName??"admin/server-stats",this.authToken=n.authToken,this.pollInterval=n.pollInterval??3e3,this.onStatsUpdate=n.onStatsUpdate,this.onConnectionChange=n.onConnectionChange,this.onStaleChange=n.onStaleChange,this.onError=n.onError,this.onUnauthorizedChange=n.onUnauthorizedChange,this.onHistoryChange=n.onHistoryChange,this.onSseActiveChange=n.onSseActiveChange,this.onPollActiveChange=n.onPollActiveChange,this.historyBuffer=Jn()}start(){if(this.unauthorized)return;let n=!1;try{const s=Xn({baseUrl:this.baseUrl,channelName:this.channelName,authToken:this.authToken,onMessage:r=>{r&&typeof r=="object"&&"timestamp"in r&&this.processStats(r)},onConnect:()=>{this.setSseActive(!0),this.setConnected(!0),this.stopPolling()},onDisconnect:()=>{this.setSseActive(!1),this.setConnected(!1),!this.pollTimer&&!this.unauthorized&&this.startPollInterval()},onError:()=>{n=!0}});this.sseHandle=s}catch{n=!0}if(this.poll(),n||!this.sseHandle)this.startPollInterval();else{const s=setTimeout(()=>{!this.isConnected&&!this.pollTimer&&this.startPollInterval()},3e3),r=this.sseHandle?.unsubscribe;this.sseHandle&&(this.sseHandle.unsubscribe=()=>{clearTimeout(s),r?.()})}this.staleTimer=setInterval(()=>{this.lastSuccess>0&&Date.now()-this.lastSuccess>Kn&&this.setStale(!0)},2e3)}stop(){this.sseHandle?.unsubscribe(),this.sseHandle=null,this.stopPolling(),this.staleTimer&&(clearInterval(this.staleTimer),this.staleTimer=null)}getHistory(n){return this.historyBuffer.get(n)}getAllHistory(){return this.historyBuffer.getAll()}getConnectionMode(){return this.unauthorized?"disconnected":this.sseActive?"live":this.pollTimer?"polling":"disconnected"}processStats(n){this.onStatsUpdate?.(n),this.onError?.(null),this.lastSuccess=Date.now(),this.setStale(!1),this.historyBuffer.push(n),this.onHistoryChange?.(this.historyBuffer.getAll())}async poll(){if(!this.unauthorized){this.client||(this.client=new ge({baseUrl:this.baseUrl,authToken:this.authToken}));try{const n=await this.client.get(this.endpoint);this.processStats(n)}catch(n){n instanceof ie&&(this.unauthorized=!0,this.onUnauthorizedChange?.(!0),this.onError?.(n),this.stopPolling())}}}startPollInterval(){this.pollTimer||(this.pollTimer=setInterval(()=>this.poll(),this.pollInterval),this.onPollActiveChange?.(!0))}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null,this.onPollActiveChange?.(!1))}setSseActive(n){this.sseActive!==n&&(this.sseActive=n,this.onSseActiveChange?.(n))}setConnected(n){this.isConnected!==n&&(this.isConnected=n,this.onConnectionChange?.(n))}setStale(n){this.isStale!==n&&(this.isStale=n,this.onStaleChange?.(n))}}function Zn(e={}){const{baseUrl:n="",endpoint:s="/admin/api/server-stats",channelName:r="admin/server-stats",authToken:i,pollInterval:o=3e3}=e,[a,d]=N(null),[c,l]=N(!1),[f,u]=N(!1),[p,h]=N(null),[m,g]=N(!1),y=U(null);I(()=>{if(m)return;const _=new Yn({baseUrl:n,endpoint:s,channelName:r,authToken:i,pollInterval:o,onStatsUpdate:x=>d(x),onConnectionChange:x=>l(x),onStaleChange:x=>u(x),onError:x=>h(x),onUnauthorizedChange:x=>g(x)});return y.current=_,_.start(),()=>{_.stop(),y.current=null}},[n,r,i,o,m]);const v=L(_=>y.current?.getHistory(_)??[],[]);return{stats:a,history:y.current?.getAllHistory()??{},getHistory:v,isConnected:c,isStale:f,error:p,unauthorized:m}}const ye="ss-dash-theme",Ie="ss-theme-change";function Ue(){if(typeof window>"u")return"light";const e=localStorage.getItem(ye);return e==="dark"||e==="light"?e:window.matchMedia?.("(prefers-color-scheme: dark)").matches?"dark":"light"}function es(e){typeof window>"u"||(localStorage.setItem(ye,e),window.dispatchEvent(new CustomEvent(Ie,{detail:e})))}function ts(){const n=Ue()==="dark"?"light":"dark";return es(n),n}function ns(e){if(typeof window>"u")return()=>{};const n=o=>{const a=o.detail;(a==="dark"||a==="light")&&e(a)},s=o=>{if(o.key===ye){const a=o.newValue;e(a==="dark"||a==="light"?a:Ue())}},r=window.matchMedia("(prefers-color-scheme: dark)"),i=o=>{localStorage.getItem(ye)||e(o.matches?"dark":"light")};return window.addEventListener(Ie,n),window.addEventListener("storage",s),r.addEventListener("change",i),()=>{window.removeEventListener(Ie,n),window.removeEventListener("storage",s),r.removeEventListener("change",i)}}function Pt(){const[e,n]=N(()=>Ue());I(()=>ns(i=>{n(i)}),[]);const s=L(()=>{const r=ts();return n(r),r},[]);return{theme:e,toggleTheme:s}}const X={color:"#34d399",fillOpacityTop:.25,fillOpacityBottom:.02,strokeWidth:1.5,width:120,height:32,padding:2};function ss(e){return{...X,...e}}function rs(e,n=X.width,s=X.height,r=X.padding){if(e.length<2)return null;const i=n-r*2,o=s-r*2,a=Math.min(...e),c=Math.max(...e)-a||1;return e.map((f,u)=>{const p=r+u/(e.length-1)*i,h=r+o-(f-a)/c*o;return`${p.toFixed(1)},${h.toFixed(1)}`}).join(" ")}function is(e,n=X.width,s=X.height,r=X.padding){if(e.length<2)return null;const i=n-r*2,o=s-r*2,a=Math.min(...e),c=Math.max(...e)-a||1,l=e.map((h,m)=>{const g=r+m/(e.length-1)*i,y=r+o-(h-a)/c*o;return`${g.toFixed(1)},${y.toFixed(1)}`}),f=(r+i).toFixed(1),u=(r+o).toFixed(1),p=r.toFixed(1);return`M${l[0]} `+l.slice(1).map(h=>`L${h}`).join(" ")+` L${f},${u} L${p},${u} Z`}let os=0;function ls(){return`ss-grad-${os++}`}function At(e){if(e.length===0)return null;const n=Math.min(...e),s=Math.max(...e),r=e.reduce((i,o)=>i+o,0)/e.length;return{min:n,max:s,avg:r}}function as(e,n){const s=ss(n),r=rs(e,s.width,s.height,s.padding),i=is(e,s.width,s.height,s.padding);return!r||!i?null:{points:r,areaPath:i,gradientId:ls(),options:s,stats:At(e)}}function cs({data:e,color:n="#34d399",width:s=120,height:r=32,className:i=""}){const o=T(()=>as(e,{width:s,height:r}),[e,s,r]),a=T(()=>"ss-grad-"+Math.random().toString(36).slice(2,8),[]),d={"--ss-accent":n};if(!o)return t("div",{className:`ss-dash-sparkline ${i}`,style:d,children:t("svg",{width:s,height:r,viewBox:`0 0 ${s} ${r}`,style:{display:"block"},children:t("text",{x:s/2,y:r/2+3,textAnchor:"middle",fill:"#737373",fontSize:"9",children:["collecting","…"]})})});const c=n||"var(--ss-accent)";return t("div",{className:`ss-dash-sparkline ${i}`,style:d,children:t("svg",{width:s,height:r,viewBox:`0 0 ${s} ${r}`,style:{display:"block"},children:[t("defs",{children:t("linearGradient",{id:a,x1:"0",y1:"0",x2:"0",y2:"1",children:[t("stop",{offset:"0%",stopColor:c,stopOpacity:"0.25"}),t("stop",{offset:"100%",stopColor:c,stopOpacity:"0.02"})]})}),t("path",{d:o.areaPath,fill:`url(#${a})`}),t("path",{className:"ss-dash-sparkline-line",d:"M"+o.points.replace(/ /g," L"),fill:"none",stroke:c,strokeWidth:"1.5",strokeLinejoin:"round",strokeLinecap:"round"})]})})}const ds={"ss-red":"#f87171","ss-amber":"#fbbf24","ss-green":"#34d399","ss-muted":"#737373"};function us(e,n,s){const[r,i]=N({position:"absolute",bottom:"100%",left:0,marginBottom:"10px",zIndex:180});return I(()=>{if(!s)return;const o=()=>{const d=e.current,c=n.current;if(!d||!c)return;const l=d.closest(".ss-bar");if(!l)return;const f=d.getBoundingClientRect(),u=l.getBoundingClientRect(),p=f.left-u.left+f.width/2;i({position:"absolute",bottom:"100%",left:`${p}px`,transform:"translateX(-50%)",marginBottom:"10px",zIndex:180}),requestAnimationFrame(()=>{const h=c.getBoundingClientRect();let m=0;h.left<8?m=8-h.left:h.right>window.innerWidth-8&&(m=window.innerWidth-8-h.right),m&&i(g=>({...g,transform:`translateX(calc(-50% + ${m}px))`}))})};o();const a=e.current?.closest(".ss-bar-scroll");return a?.addEventListener("scroll",o),window.addEventListener("resize",o),()=>{a?.removeEventListener("scroll",o),window.removeEventListener("resize",o)}},[s,e,n]),r}function hs({metric:e,stats:n,history:s,className:r=""}){const[i,o]=N(!1),[a,d]=N(!1),c=U(null),l=U(null);if(e.show&&!e.show(n))return null;const f=e.value?e.value(n):e.format(n),u=e.color?e.color(n):"",p=u&&ds[u]||"#34d399",h=typeof e.detail=="function"?e.detail(n):e.detail,m=T(()=>At(s),[s]),g=i||a,y=us(c,l,g),v=L(S=>{S.stopPropagation(),o(w=>!w)},[]);I(()=>{if(!i)return;const S=b=>{const k=b.target;c.current&&!c.current.contains(k)&&l.current&&!l.current.contains(k)&&o(!1)},w=b=>{b.key==="Escape"&&o(!1)};return document.addEventListener("click",S),document.addEventListener("keydown",w),()=>{document.removeEventListener("click",S),document.removeEventListener("keydown",w)}},[i]);const _=c.current?.closest(".ss-bar"),x=g&&_?yn(t("div",{ref:l,className:`ss-tooltip ${i?"ss-pinned":""}`,style:y,children:[t("div",{className:"ss-tooltip-inner",style:{position:"relative"},children:[i&&t("button",{className:"ss-tooltip-close",onClick:S=>{S.stopPropagation(),o(!1)},type:"button",children:"×"}),t("div",{className:"ss-tooltip-header",children:[t("span",{className:"ss-tooltip-title",children:e.title}),e.unit&&t("span",{className:"ss-tooltip-unit",children:e.unit})]}),t("div",{className:"ss-tooltip-current",children:[t("span",{className:"ss-tooltip-current-label",children:"Current: "}),t("span",{className:"ss-tooltip-current-value",children:f})]}),m&&t("div",{className:"ss-tooltip-stats",children:[t("span",{children:["Min: ",Re(m.min,e.unit)]}),t("span",{children:["Max: ",Re(m.max,e.unit)]}),t("span",{children:["Avg: ",Re(m.avg,e.unit)]})]}),h&&t("div",{className:"ss-tooltip-details",children:h}),s.length>0&&t(R,{children:[t("div",{className:"ss-tooltip-sparkline",children:t(cs,{data:s,color:p})}),t("div",{className:"ss-tooltip-samples",children:["Last ",Math.min(s.length,60)," samples (~",Math.round(Math.min(s.length,60)*3/60)," min)"]})]})]}),t("div",{className:"ss-tooltip-arrow"})]}),_):null;return t(R,{children:[t("div",{ref:c,className:`ss-badge ${i?"ss-pinned":""} ${r}`,onClick:v,onMouseEnter:()=>!i&&d(!0),onMouseLeave:()=>d(!1),role:"button",tabIndex:0,onKeyDown:S=>S.key==="Enter"&&v(S),children:[t("span",{className:"ss-label",children:e.label}),t("span",{className:`ss-value ${u}`,children:f})]}),x]})}const P={queries:{viewBox:"0 0 24 24",elements:['<ellipse cx="12" cy="5" rx="9" ry="3"/>','<path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/>','<path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/>']},events:{viewBox:"0 0 24 24",elements:['<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>']},emails:{viewBox:"0 0 24 24",elements:['<path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>','<polyline points="22,6 12,13 2,6"/>']},routes:{viewBox:"0 0 24 24",elements:['<circle cx="12" cy="12" r="10"/>','<line x1="2" y1="12" x2="22" y2="12"/>','<path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>']},logs:{viewBox:"0 0 24 24",elements:['<line x1="8" y1="6" x2="21" y2="6"/>','<line x1="8" y1="12" x2="21" y2="12"/>','<line x1="8" y1="18" x2="21" y2="18"/>','<line x1="3" y1="6" x2="3.01" y2="6"/>','<line x1="3" y1="12" x2="3.01" y2="12"/>','<line x1="3" y1="18" x2="3.01" y2="18"/>']},timeline:{viewBox:"0 0 24 24",elements:['<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>']},cache:{viewBox:"0 0 24 24",elements:['<rect x="2" y="2" width="20" height="8" rx="2" ry="2"/>','<rect x="2" y="14" width="20" height="8" rx="2" ry="2"/>','<line x1="6" y1="6" x2="6.01" y2="6"/>','<line x1="6" y1="18" x2="6.01" y2="18"/>']},jobs:{viewBox:"0 0 24 24",elements:['<rect x="2" y="7" width="20" height="14" rx="2" ry="2"/>','<path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/>']},config:{viewBox:"0 0 24 24",elements:['<circle cx="12" cy="12" r="3"/>','<path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>']},internals:{viewBox:"0 0 24 24",elements:['<rect x="4" y="4" width="16" height="16" rx="2"/>','<rect x="9" y="9" width="6" height="6"/>','<line x1="9" y1="1" x2="9" y2="4"/>','<line x1="15" y1="1" x2="15" y2="4"/>','<line x1="9" y1="20" x2="9" y2="23"/>','<line x1="15" y1="20" x2="15" y2="23"/>','<line x1="20" y1="9" x2="23" y2="9"/>','<line x1="20" y1="14" x2="23" y2="14"/>','<line x1="1" y1="9" x2="4" y2="9"/>','<line x1="1" y1="14" x2="4" y2="14"/>']},overview:{viewBox:"0 0 24 24",elements:['<rect x="3" y="3" width="7" height="7"/>','<rect x="14" y="3" width="7" height="7"/>','<rect x="14" y="14" width="7" height="7"/>','<rect x="3" y="14" width="7" height="7"/>']},requests:{viewBox:"0 0 24 24",elements:['<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>']},"dashboard-timeline":{viewBox:"0 0 24 24",elements:['<circle cx="12" cy="12" r="10"/>','<polyline points="12 6 12 12 16 14"/>']},"custom-pane":{viewBox:"0 0 24 24",elements:['<rect x="3" y="3" width="18" height="18" rx="2"/>','<path d="M9 3v18"/>']},wrench:{viewBox:"0 0 24 24",elements:['<path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>']},"external-link":{viewBox:"0 0 24 24",elements:['<path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>','<polyline points="15 3 21 3 21 9"/>','<line x1="10" y1="14" x2="21" y2="3"/>']},sun:{viewBox:"0 0 24 24",elements:['<circle cx="12" cy="12" r="5"/>','<line x1="12" y1="1" x2="12" y2="3"/>','<line x1="12" y1="21" x2="12" y2="23"/>','<line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>','<line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>','<line x1="1" y1="12" x2="3" y2="12"/>','<line x1="21" y1="12" x2="23" y2="12"/>','<line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>','<line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>']},moon:{viewBox:"0 0 24 24",elements:['<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>']},search:{viewBox:"0 0 24 24",elements:['<circle cx="11" cy="11" r="8"/>','<line x1="21" y1="21" x2="16.65" y2="16.65"/>']},eye:{viewBox:"0 0 24 24",elements:['<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>','<circle cx="12" cy="12" r="3"/>']},"eye-off":{viewBox:"0 0 24 24",elements:['<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94"/>','<path d="M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19"/>','<line x1="1" y1="1" x2="23" y2="23"/>','<path d="M14.12 14.12a3 3 0 1 1-4.24-4.24"/>']},"chevron-right":{viewBox:"0 0 24 24",elements:['<path d="M9 18l6-6-6-6"/>']},"chevron-left":{viewBox:"0 0 24 24",elements:['<path d="M15 18l-6-6 6-6"/>']},"open-external":{viewBox:"0 0 16 16",elements:['<path d="M6 3H3v10h10v-3M9 1h6v6M7 9L15 1"/>']}};function ps(e){const{featureOptions:n,autoHideOnUnauthorized:s=!0,onOpenDebugPanel:r,debugPanelOpen:i=!1,onConnectionChange:o,...a}=e,{stats:d,getHistory:c,isConnected:l,isStale:f,unauthorized:u}=Zn(a);I(()=>{o?.(l)},[l,o]);const{features:p}=Mt(n),{theme:h}=Pt(),[m,g]=N(()=>typeof window>"u"?!0:localStorage.getItem("admin:stats-bar")!=="hidden"),y=U(null),v=U(null);I(()=>{s&&u&&g(!1)},[s,u]);const _=L(()=>{g(b=>{const k=!b;return localStorage.setItem("admin:stats-bar",k?"visible":"hidden"),k})},[]);I(()=>{const b=v.current;if(!b)return;const k=C=>{Math.abs(C.deltaX)>Math.abs(C.deltaY)||(C.preventDefault(),b.scrollLeft+=C.deltaY)};return b.addEventListener("wheel",k,{passive:!1}),()=>b.removeEventListener("wheel",k)},[]);const x=T(()=>d?In(d):Rn(p),[d,p]),S=T(()=>Et.filter(b=>x.has(b.group||"core")),[x]),w=T(()=>{const b=[];let k="";for(const C of S){const O=C.group||"core";O!==k&&(k=O,b.push({group:k,metrics:[]})),b[b.length-1].metrics.push(C)}return b},[S]);return s&&u?null:t(R,{children:[t("button",{type:"button",className:`ss-toggle ${m?"ss-visible":"ss-collapsed"}`,onClick:_,title:m?"Hide stats bar":"Show stats bar","data-ss-theme":h,children:[!m&&d&&t("span",{className:"ss-toggle-summary",style:{display:"flex"},children:[x.has("process")&&t(R,{children:[t("span",{className:`ss-value ${d.cpuPercent>80?"ss-red":d.cpuPercent>50?"ss-amber":"ss-green"}`,children:[d.cpuPercent.toFixed(0),"%"]}),t("span",{className:"ss-value ss-green",children:d.memHeapUsed!==void 0?Math.round(d.memHeapUsed/(1024*1024))+"M":"-"})]}),x.has("redis")&&d.redisOk!==void 0&&t("span",{className:`ss-value ${d.redisOk?"ss-green":"ss-red"}`,children:d.redisOk?"✓":"✗"})]}),m&&t("span",{className:"ss-toggle-label",style:{color:"#737373"},children:"hide stats"}),t("span",{className:"ss-toggle-arrow",children:m?"▼":"▲"})]}),t("div",{ref:y,className:m?"ss-bar":"ss-bar ss-hidden","data-ss-theme":h,children:[t("div",{className:"ss-bar-left",children:[r&&t("button",{type:"button",className:`ss-dbg-btn ${i?"ss-dbg-active":""}`,onClick:r,title:"Toggle debug panel",id:"ss-dbg-wrench",children:t("svg",{width:"14",height:"14",viewBox:P.wrench.viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:P.wrench.elements.join("")}})}),t("div",{className:f?"ss-dot ss-stale":"ss-dot"})]}),t("div",{ref:v,className:"ss-bar-scroll",id:"ss-bar-scroll",children:d&&w.map((b,k)=>t(En.Fragment,{children:[k>0&&t("div",{className:"ss-group-sep"}),t("div",{className:"ss-group",children:b.metrics.map(C=>t(hs,{metric:C,stats:d,history:c(C.historyKey||"")},C.id))})]},b.group))})]})]})}function fs({theme:e,onToggle:n,className:s="",classPrefix:r="ss-dash"}){const i=e==="dark";return t("button",{type:"button",className:`${r==="ss-dbg"?"ss-dbg-theme-toggle":"ss-dash-theme-btn"} ${s}`,onClick:n,title:i?"Switch to light theme":"Switch to dark theme","aria-label":i?"Switch to light theme":"Switch to dark theme",children:i?t("svg",{width:"16",height:"16",viewBox:P.sun.viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:P.sun.elements.join("")}}):t("svg",{width:"16",height:"16",viewBox:P.moon.viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:P.moon.elements.join("")}})})}const ms=H(()=>Promise.resolve().then(()=>Is)),gs=H(()=>Promise.resolve().then(()=>Us)),bs=H(()=>Promise.resolve().then(()=>Bs)),_s=H(()=>Promise.resolve().then(()=>Ds)),ys=H(()=>Promise.resolve().then(()=>qs)),vs=H(()=>Promise.resolve().then(()=>Vs)),ws=H(()=>Promise.resolve().then(()=>Ks)),Ns=H(()=>Promise.resolve().then(()=>Ys)),xs=H(()=>Promise.resolve().then(()=>or)),Cs=H(()=>Promise.resolve().then(()=>vr)),$s=H(()=>Promise.resolve().then(()=>wr));function Ss(e){const{defaultOpen:n=!1,dashboardPath:s,isOpen:r,onOpenChange:i,isLive:o=!1,...a}=e,[d,c]=N(n),l=r!==void 0?r:d,f=w=>{i?i(w):c(w)},[u,p]=N("queries"),{features:h}=Mt(a),{theme:m,toggleTheme:g}=Pt(),y=h.customPanes||[];I(()=>{const w=b=>{b.key==="Escape"&&l&&f(!1)};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[l]);const v=T(()=>[{id:"queries",label:"Queries",visible:!0},{id:"events",label:"Events",visible:!0},{id:"emails",label:"Emails",visible:!0},{id:"routes",label:"Routes",visible:!0},{id:"logs",label:"Logs",visible:!0},{id:"timeline",label:"Timeline",visible:h.tracing},{id:"cache",label:"Cache",visible:h.cache},{id:"jobs",label:"Jobs",visible:h.queues},{id:"config",label:"Config",visible:!0},{id:"internals",label:"Internals",visible:!0}],[h]),_=T(()=>v.filter(w=>w.visible),[v]);I(()=>{const w=[..._.map(b=>b.id),...y.map(b=>b.id)];!w.includes(u)&&w.length>0&&p(w[0])},[_,y,u]);const x=L(()=>{f(!l)},[l]),S=L(()=>{const w={options:a},b=y.find(C=>C.id===u);if(b)return t(re,{fallback:t("div",{className:"ss-dbg-empty",children:"Loading..."}),children:t($s,{pane:b,options:a})});const k={queries:t(ms,{...w}),events:t(gs,{...w}),emails:t(bs,{...w}),routes:t(_s,{...w,currentPath:typeof window<"u"?window.location.pathname:""}),logs:t(ys,{...w}),timeline:t(vs,{...w}),cache:t(ws,{...w,dashboardPath:s}),jobs:t(Ns,{...w,dashboardPath:s}),config:t(xs,{...w,dashboardPath:s}),internals:t(Cs,{...w})};return t(re,{fallback:t("div",{className:"ss-dbg-empty",children:"Loading..."}),children:k[u]||t("div",{className:"ss-dbg-empty",children:"Unknown tab"})})},[u,a,y]);return t(R,{children:[r===void 0&&t("button",{type:"button",className:`ss-dbg-btn ${l?"ss-dbg-active":""}`,onClick:x,title:"Toggle debug panel",id:"ss-dbg-wrench",children:t("svg",{width:"14",height:"14",viewBox:P.wrench.viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:P.wrench.elements.join("")}})}),t("div",{className:`ss-dbg-panel ${l?"ss-dbg-open":""}`,"data-ss-theme":m,id:"ss-dbg-panel",children:[t("div",{className:"ss-dbg-tabs",children:[t("div",{className:"ss-dbg-tabs-scroll",children:[_.map(w=>t("button",{type:"button",className:`ss-dbg-tab ${u===w.id?"ss-dbg-active":""}`,onClick:()=>p(w.id),children:[P[w.id]?t("svg",{className:"ss-dbg-tab-icon",viewBox:P[w.id].viewBox,dangerouslySetInnerHTML:{__html:P[w.id].elements.join("")}}):null,w.label]},w.id)),y.map(w=>t("button",{type:"button",className:`ss-dbg-tab ${u===w.id?"ss-dbg-active":""}`,onClick:()=>p(w.id),children:w.label},w.id))]}),t("div",{className:"ss-dbg-tabs-right",children:[t("span",{className:`ss-dbg-conn-mode ${o?"ss-dbg-conn-live":"ss-dbg-conn-polling"}`,title:o?"Connected via Transmit (SSE) — real-time updates":"Polling every 3s",children:o?"live":"polling"}),t(fs,{theme:m,onToggle:g,classPrefix:"ss-dbg"}),s&&t("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"ss-dbg-dashboard-link",title:"Open dashboard",children:t("svg",{width:"14",height:"14",viewBox:P["external-link"].viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:P["external-link"].elements.join("")}})}),t("button",{type:"button",className:"ss-dbg-close",onClick:()=>f(!1),title:"Close panel",children:"×"})]})]}),t("div",{className:"ss-dbg-content",children:l&&S()})]})]})}function ks(e){const n=document.getElementById(e);return n?JSON.parse(n.textContent||"{}"):{}}const D=ks("ss-bar-config");function Ts(){const[e,n]=N(!1),[s,r]=N(!1),i=D.showDebug?{debugEndpoint:D.debugEndpoint,authToken:D.authToken}:void 0;return t(R,{children:[t(ps,{endpoint:D.endpoint,pollInterval:D.pollInterval,channelName:D.channelName,authToken:D.authToken,featureOptions:i,autoHideOnUnauthorized:!1,onOpenDebugPanel:D.showDebug?()=>n(o=>!o):void 0,debugPanelOpen:e,onConnectionChange:r}),D.showDebug&&t(Ss,{debugEndpoint:D.debugEndpoint,authToken:D.authToken,dashboardPath:D.dashboardPath||void 0,isOpen:e,onOpenChange:n,isLive:s})]})}const Ot=document.getElementById("ss-bar");Ot&&Ee(t(Ts,{}),Ot);function Ls(e,n){if(!n)return e;const s=n.toLowerCase();return e.filter(r=>r.sql.toLowerCase().includes(s)||r.model&&r.model.toLowerCase().includes(s)||r.method.toLowerCase().includes(s))}function Es(e){const n={};for(const s of e)n[s.sql]=(n[s.sql]||0)+1;return n}function Ms(e,n){const s=e.filter(o=>o.duration>100).length,r=Object.values(n).filter(o=>o>1).length,i=e.length>0?e.reduce((o,a)=>o+a.duration,0)/e.length:0;return{slowCount:s,dupCount:r,avgDuration:i,totalCount:e.length}}const Ps={queries:"/queries",events:"/events",emails:"/emails",routes:"/routes",logs:"/logs",timeline:"/traces",cache:"/cache",jobs:"/jobs",config:"/config",internals:"/diagnostics"};function As(e){return Ps[e]||`/${e}`}class Os{client;endpoint;refreshInterval;callbacks;timer=null;currentTab=null;fetchOnceCache={};constructor(n){this.client=new ge({baseUrl:n.baseUrl,authToken:n.authToken}),this.endpoint=n.endpoint??"/admin/api/debug",this.refreshInterval=n.refreshInterval??Bn,this.callbacks={onData:n.onData,onLoading:n.onLoading,onError:n.onError,onUnauthorized:n.onUnauthorized}}start(n){this.stop(),this.currentTab=n,this.callbacks.onLoading(!0),this.callbacks.onError(null),this.fetchData(),this.timer=setInterval(()=>this.fetchData(),this.refreshInterval)}stop(){this.timer&&(clearInterval(this.timer),this.timer=null)}switchTab(n){this.start(n)}refresh(){this.currentTab&&this.fetchData()}async fetchCustomPane(n,s=!1){if(s&&this.fetchOnceCache[n]!==void 0){this.callbacks.onData(this.fetchOnceCache[n]),this.callbacks.onLoading(!1);return}this.callbacks.onLoading(!0);try{const r=await this.client.fetch(n);this.callbacks.onData(r),this.callbacks.onError(null),s&&(this.fetchOnceCache[n]=r)}catch(r){if(r instanceof ie){this.callbacks.onUnauthorized(r);return}this.callbacks.onError(r instanceof Error?r:new Error(String(r)))}finally{this.callbacks.onLoading(!1)}}cacheForTab(n,s){this.fetchOnceCache[n]=s}clearCache(){this.fetchOnceCache={}}async fetchData(){const n=this.currentTab;if(n){if(this.fetchOnceCache[n]!==void 0){this.callbacks.onData(this.fetchOnceCache[n]),this.callbacks.onLoading(!1);return}try{const s=`${this.endpoint}${As(n)}`,r=await this.client.fetch(s);this.callbacks.onData(r),this.callbacks.onError(null),this.callbacks.onLoading(!1)}catch(s){if(s instanceof ie){this.callbacks.onError(s),this.callbacks.onLoading(!1),this.stop(),this.callbacks.onUnauthorized(s);return}this.callbacks.onError(s instanceof Error?s:new Error(String(s))),this.callbacks.onLoading(!1)}}}}function z(e,n={}){const{baseUrl:s="",debugEndpoint:r="/admin/api/debug",authToken:i}=n,[o,a]=N(null),[d,c]=N(!0),[l,f]=N(null),u=U(null);u.current||(u.current=new Os({baseUrl:s,endpoint:r,authToken:i,onData:g=>a(g),onLoading:g=>c(g),onError:g=>f(g),onUnauthorized:g=>f(g)})),I(()=>{const g=u.current;return g.start(e),()=>g.stop()},[e]);const p=L(()=>{u.current?.refresh()},[]),h=L(()=>{a(null)},[]),m=L((g,y)=>{u.current?.cacheForTab(g,y)},[]);return{data:o,isLoading:d,error:l,refresh:p,clearData:h,cacheForTab:m}}const Rs="ss-col-resize",Rt="ss-resizing";function It(e){const n=Array.from(e.querySelectorAll("thead th"));if(n.length===0)return()=>{};const s=[];let r=!1;function i(){if(!r){r=!0;for(const o of n)o.style.width=o.offsetWidth+"px";e.style.tableLayout="fixed"}}for(const o of n){let a=function(c){c.preventDefault(),c.stopPropagation(),i();const l=c.clientX,f=o.offsetWidth;d.classList.add(Rt),d.setPointerCapture(c.pointerId);function u(h){const m=h.clientX-l,g=Math.max(30,f+m);o.style.width=g+"px"}function p(){d.classList.remove(Rt),d.removeEventListener("pointermove",u),d.removeEventListener("pointerup",p)}d.addEventListener("pointermove",u),d.addEventListener("pointerup",p)};if(!o.textContent?.trim())continue;const d=document.createElement("div");d.className=Rs,o.appendChild(d),d.addEventListener("pointerdown",a),s.push(()=>{d.removeEventListener("pointerdown",a),d.remove()})}return()=>{for(const o of s)o()}}function K(e=[]){const n=U(null),s=U(null);return I(()=>(n.current&&(s.current?.(),s.current=It(n.current)),()=>{s.current?.(),s.current=null}),e),L(i=>{s.current?.(),s.current=null,n.current=i,i&&(s.current=It(i))},[])}function Ut({options:e}){const{data:n,isLoading:s,error:r}=z("queries",e),[i,o]=N(""),[a,d]=N(null),c=T(()=>n?.queries||[],[n]),l=T(()=>Ls(c,i),[c,i]),f=T(()=>Es(c),[c]),u=T(()=>Ms(c,f),[c,f]),p=L(m=>{d(g=>g===m?null:m)},[]),h=K([l]);return s&&!n?t("div",{className:"ss-dbg-empty",children:"Loading queries..."}):r?t("div",{className:"ss-dbg-empty",children:["Error: ",r.message]}):t("div",{children:[t("div",{className:"ss-dbg-search-bar",children:[t("input",{type:"text",className:"ss-dbg-search",placeholder:"Filter queries...",value:i,onChange:m=>o(m.target.value)}),t("span",{className:"ss-dbg-summary",children:[l.length," queries",u.slowCount>0&&` | ${u.slowCount} slow`,u.dupCount>0&&` | ${u.dupCount} dup`,l.length>0&&` | avg ${F(u.avgDuration)}`]})]}),l.length===0?t("div",{className:"ss-dbg-empty",children:"No queries captured"}):t("table",{ref:h,className:"ss-dbg-table",children:[t("colgroup",{children:[t("col",{style:{width:"50px"}}),t("col",{}),t("col",{style:{width:"80px"}}),t("col",{style:{width:"70px"}}),t("col",{style:{width:"100px"}}),t("col",{style:{width:"80px"}})]}),t("thead",{children:t("tr",{children:[t("th",{children:"#"}),t("th",{children:"SQL"}),t("th",{children:"Duration"}),t("th",{children:"Method"}),t("th",{children:"Model"}),t("th",{children:"Time"})]})}),t("tbody",{children:l.map(m=>t("tr",{children:[t("td",{className:"ss-dbg-c-dim",style:{whiteSpace:"nowrap"},children:m.id}),t("td",{children:[t("span",{className:`ss-dbg-sql ${a===m.id?"ss-dbg-expanded":""}`,onClick:()=>p(m.id),role:"button",tabIndex:0,onKeyDown:g=>g.key==="Enter"&&p(m.id),children:m.sql}),f[m.sql]>1&&t("span",{className:"ss-dbg-dup",children:[" x",f[m.sql]]}),m.inTransaction&&t("span",{className:"ss-dbg-dup",children:" TXN"})]}),t("td",{className:`ss-dbg-duration ${ee(m.duration)==="very-slow"?"ss-dbg-very-slow":ee(m.duration)==="slow"?"ss-dbg-slow":""}`,children:F(m.duration)}),t("td",{children:t("span",{className:`ss-dbg-method ss-dbg-method-${m.method.toLowerCase()}`,children:m.method})}),t("td",{className:"ss-dbg-c-muted",children:m.model||"-"}),t("td",{className:"ss-dbg-event-time",title:V(m.timestamp),children:j(m.timestamp)})]},m.id))})]})]})}const Is=Object.freeze(Object.defineProperty({__proto__:null,QueriesTab:Ut,default:Ut},Symbol.toStringTag,{value:"Module"}));function Be({data:e,maxPreviewLength:n=100,className:s="",classPrefix:r="ss-dash"}){const[i,o]=N(!1),a=T(()=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},[e]),d=T(()=>typeof a=="object"&&a!==null?_e(a,n):String(a??"-"),[a,n]),c=T(()=>typeof a=="object"&&a!==null?JSON.stringify(a,null,2):String(a),[a]),l=L(()=>{o(u=>!u)},[]),f=L(async()=>{try{await navigator.clipboard.writeText(c)}catch{}},[c]);return!e&&e!==0&&e!==!1?t("span",{className:`ss-dim ${r}-c-dim`,children:"-"}):t("div",{className:`${r}-data-cell ${s}`,children:[t("span",{className:`${r}-data-preview`,onClick:l,role:"button",tabIndex:0,onKeyDown:u=>u.key==="Enter"&&l(),children:d}),i&&t("div",{className:`${r}-data-full`,onClick:l,children:[t("button",{className:`${r}-copy-btn`,onClick:u=>{u.stopPropagation(),f()},title:"Copy to clipboard",type:"button",children:"Copy"}),t("pre",{children:c})]})]})}function Bt({options:e}){const{data:n,isLoading:s,error:r}=z("events",e),[i,o]=N(""),a=T(()=>{const c=n?.events||[];if(!i)return c;const l=i.toLowerCase();return c.filter(f=>(f.event||"").toLowerCase().includes(l)||(f.data||"").toLowerCase().includes(l))},[n,i]),d=K([a]);return s&&!n?t("div",{className:"ss-dbg-empty",children:"Loading events..."}):r?t("div",{className:"ss-dbg-empty",children:["Error: ",r.message]}):t("div",{children:[t("div",{className:"ss-dbg-search-bar",children:[t("input",{type:"text",className:"ss-dbg-search",placeholder:"Filter events...",value:i,onChange:c=>o(c.target.value)}),t("span",{className:"ss-dbg-summary",children:[a.length," events"]})]}),a.length===0?t("div",{className:"ss-dbg-empty",children:"No events captured"}):t("table",{ref:d,className:"ss-dbg-table",children:[t("colgroup",{children:[t("col",{style:{width:"50px"}}),t("col",{style:{width:"20%"}}),t("col",{}),t("col",{style:{width:"80px"}})]}),t("thead",{children:t("tr",{children:[t("th",{children:"#"}),t("th",{children:"Event"}),t("th",{children:"Data"}),t("th",{children:"Time"})]})}),t("tbody",{children:a.map(c=>{const l=c.timestamp||c.created_at||c.createdAt;return t("tr",{children:[t("td",{className:"ss-dbg-c-dim",style:{whiteSpace:"nowrap"},children:c.id}),t("td",{className:"ss-dbg-event-name",children:c.event}),t("td",{className:"ss-dbg-event-data",children:t(Be,{data:c.data,maxPreviewLength:80,classPrefix:"ss-dbg"})}),t("td",{className:"ss-dbg-event-time",title:V(l),children:j(l)})]},c.id)})})]})]})}const Us=Object.freeze(Object.defineProperty({__proto__:null,EventsTab:Bt,default:Bt},Symbol.toStringTag,{value:"Module"}));function Dt({options:e}){const{data:n,isLoading:s,error:r}=z("emails",e),[i,o]=N(""),[a,d]=N(null),c=T(()=>{const h=n?.emails||[];if(!i)return h;const m=i.toLowerCase();return h.filter(g=>(g.subject||"").toLowerCase().includes(m)||(g.to||"").toLowerCase().includes(m)||(g.from||"").toLowerCase().includes(m)||(g.mailer||"").toLowerCase().includes(m))},[n,i]),l=T(()=>c.find(h=>h.id===a),[c,a]),f=L(()=>d(null),[]),u={sent:"ss-dbg-email-status-sent",sending:"ss-dbg-email-status-sending",queued:"ss-dbg-email-status-queued",failed:"ss-dbg-email-status-failed"},p=K([c]);return s&&!n?t("div",{className:"ss-dbg-empty",children:"Loading emails..."}):r?t("div",{className:"ss-dbg-empty",children:["Error: ",r.message]}):l?t("div",{className:"ss-dbg-email-preview",children:[t("div",{className:"ss-dbg-email-preview-header",children:[t("div",{className:"ss-dbg-email-preview-meta",children:[t("div",{children:[t("strong",{children:"Subject:"})," ",l.subject]}),t("div",{children:[t("strong",{children:"From:"})," ",l.from]}),t("div",{children:[t("strong",{children:"To:"})," ",l.to]}),l.cc&&t("div",{children:[t("strong",{children:"CC:"})," ",l.cc]})]}),t("button",{className:"ss-dbg-btn-clear",onClick:f,type:"button",children:"×"})]}),l.html?t("iframe",{className:"ss-dbg-email-iframe",srcDoc:l.html,title:"Email preview",sandbox:""}):t("div",{style:{padding:"12px",whiteSpace:"pre-wrap"},children:l.text||"No content"})]}):t("div",{children:[t("div",{className:"ss-dbg-search-bar",children:[t("input",{type:"text",className:"ss-dbg-search",placeholder:"Filter emails...",value:i,onChange:h=>o(h.target.value)}),t("span",{className:"ss-dbg-summary",children:[c.length," emails"]})]}),c.length===0?t("div",{className:"ss-dbg-empty",children:"No emails captured"}):t("table",{ref:p,className:"ss-dbg-table",children:[t("colgroup",{children:[t("col",{style:{width:"50px"}}),t("col",{style:{width:"140px"}}),t("col",{style:{width:"140px"}}),t("col",{}),t("col",{style:{width:"70px"}}),t("col",{style:{width:"80px"}}),t("col",{style:{width:"40px"}}),t("col",{style:{width:"80px"}})]}),t("thead",{children:t("tr",{children:[t("th",{children:"#"}),t("th",{children:"From"}),t("th",{children:"To"}),t("th",{children:"Subject"}),t("th",{children:"Status"}),t("th",{children:"Mailer"}),t("th",{title:"Attachments",children:"📎"}),t("th",{children:"Time"})]})}),t("tbody",{children:c.map(h=>t("tr",{className:"ss-dbg-email-row",onClick:()=>d(h.id),children:[t("td",{className:"ss-dbg-c-dim",style:{whiteSpace:"nowrap"},children:h.id}),t("td",{className:"ss-dbg-c-secondary",title:h.from,children:h.from}),t("td",{className:"ss-dbg-c-secondary",title:h.to,children:h.to}),t("td",{className:"ss-dbg-c-sql",children:h.subject}),t("td",{children:t("span",{className:`ss-dbg-email-status ${u[h.status]||""}`,children:h.status})}),t("td",{className:"ss-dbg-c-muted",children:h.mailer}),t("td",{className:"ss-dbg-c-dim",style:{textAlign:"center"},children:h.attachmentCount>0?h.attachmentCount:"-"}),t("td",{className:"ss-dbg-event-time",title:V(h.timestamp||h.created_at||h.createdAt),children:j(h.timestamp||h.created_at||h.createdAt)})]},h.id))})]})]})}const Bs=Object.freeze(Object.defineProperty({__proto__:null,EmailsTab:Dt,default:Dt},Symbol.toStringTag,{value:"Module"}));function Ht({options:e,currentPath:n}){const{data:s,isLoading:r,error:i}=z("routes",e),[o,a]=N(""),d=T(()=>{const l=s?.routes||[];if(!o)return l;const f=o.toLowerCase();return l.filter(u=>u.pattern.toLowerCase().includes(f)||u.handler.toLowerCase().includes(f)||u.method.toLowerCase().includes(f)||u.name&&u.name.toLowerCase().includes(f))},[s,o]),c=K([d]);return r&&!s?t("div",{className:"ss-dbg-empty",children:"Loading routes..."}):i?t("div",{className:"ss-dbg-empty",children:["Error: ",i.message]}):t("div",{children:[t("div",{className:"ss-dbg-search-bar",children:[t("input",{type:"text",className:"ss-dbg-search",placeholder:"Filter routes...",value:o,onChange:l=>a(l.target.value)}),t("span",{className:"ss-dbg-summary",children:[d.length," routes"]})]}),d.length===0?t("div",{className:"ss-dbg-empty",children:"No routes found"}):t("table",{ref:c,className:"ss-dbg-table",children:[t("colgroup",{children:[t("col",{style:{width:"70px"}}),t("col",{style:{width:"25%"}}),t("col",{style:{width:"15%"}}),t("col",{}),t("col",{style:{width:"20%"}})]}),t("thead",{children:t("tr",{children:[t("th",{children:"Method"}),t("th",{children:"Pattern"}),t("th",{children:"Name"}),t("th",{children:"Handler"}),t("th",{children:"Middleware"})]})}),t("tbody",{children:d.map((l,f)=>{const u=n&&(l.pattern===n||new RegExp("^"+l.pattern.replace(/:[^/]+/g,"[^/]+")+"$").test(n));return t("tr",{className:u?"ss-dbg-current-route":"",children:[t("td",{children:t("span",{className:`ss-dbg-method ss-dbg-method-${l.method.toLowerCase()}`,children:l.method})}),t("td",{className:"ss-dbg-c-text",children:l.pattern}),t("td",{className:"ss-dbg-c-muted",children:l.name||"-"}),t("td",{className:"ss-dbg-c-sql",children:l.handler}),t("td",{className:"ss-dbg-c-dim",style:{fontSize:"10px"},children:l.middleware.length>0?l.middleware.join(", "):"-"})]},`${l.method}-${l.pattern}-${f}`)})})]})]})}const Ds=Object.freeze(Object.defineProperty({__proto__:null,RoutesTab:Ht,default:Ht},Symbol.toStringTag,{value:"Module"})),Hs=["all","error","warn","info","debug"];function Ft(e){return(e.levelName||e.level_name||(typeof e.level=="string"?e.level:"")||"info").toLowerCase()}function jt(e){return e.msg||e.message||JSON.stringify(e)}function Fs(e){return e.createdAt||e.created_at||e.time||e.timestamp||0}function zt(e){const n=e.data||{};return e.requestId||e.request_id||e["x-request-id"]||n.requestId||n.request_id||n["x-request-id"]||""}function js(e,n="ss-dbg-log-level"){switch(e){case"error":case"fatal":return`${n}-error`;case"warn":return`${n}-warn`;case"info":return`${n}-info`;case"debug":return`${n}-debug`;case"trace":return`${n}-trace`;default:return`${n}-info`}}function zs(e,n){return n==="all"?e:e.filter(s=>{const r=Ft(s);return n==="error"?r==="error"||r==="fatal":r===n})}function qt({options:e}){const{data:n,isLoading:s,error:r}=z("logs",e),[i,o]=N("all"),[a,d]=N(""),[c,l]=N(""),f=T(()=>{let p=Array.isArray(n)?n:n?.logs||n?.entries||[];if(p=zs(p,i),c){const h=c.toLowerCase();p=p.filter(m=>zt(m).toLowerCase().includes(h))}if(a){const h=a.toLowerCase();p=p.filter(m=>jt(m).toLowerCase().includes(h))}return p},[n,i,a,c]),u=L(p=>{l(h=>h===p?"":p)},[]);return s&&!n?t("div",{className:"ss-dbg-empty",children:"Loading logs..."}):r?t("div",{className:"ss-dbg-empty",children:["Error: ",r.message]}):t("div",{children:[t("div",{className:"ss-dbg-log-filters",children:[Hs.map(p=>t("button",{type:"button",className:`ss-dbg-log-filter ${i===p?"ss-dbg-active":""}`,onClick:()=>o(p),children:p},p)),c&&t("button",{type:"button",className:"ss-dbg-log-filter ss-dbg-active",onClick:()=>l(""),children:["req: ",c.slice(0,8)," x"]}),t("span",{className:"ss-dbg-summary",style:{marginLeft:"auto"},children:[f.length," entries"]})]}),t("div",{className:"ss-dbg-search-bar",children:t("input",{type:"text",className:"ss-dbg-search",placeholder:"Filter log messages...",value:a,onChange:p=>d(p.target.value)})}),t("div",{style:{overflow:"auto",flex:1},children:f.length===0?t("div",{className:"ss-dbg-empty",children:"No log entries"}):f.slice(-200).reverse().map((p,h)=>{const m=Ft(p),g=jt(p),y=Fs(p),v=zt(p);return t("div",{className:"ss-dbg-log-entry",children:[t("span",{className:`ss-dbg-log-level ${js(m)}`,children:m.toUpperCase()}),t("span",{className:"ss-dbg-log-time",title:y?V(y):"",children:y?j(y):"-"}),v?t("span",{className:"ss-dbg-log-reqid",onClick:()=>u(v),role:"button",tabIndex:0,title:v,onKeyDown:_=>_.key==="Enter"&&u(v),children:v.slice(0,8)}):t("span",{className:"ss-dbg-log-reqid-empty",children:"-"}),t("span",{className:"ss-dbg-log-msg",children:g})]},h)})})]})}const qs=Object.freeze(Object.defineProperty({__proto__:null,LogsTab:qt,default:qt},Symbol.toStringTag,{value:"Module"}));function Wt(e="",n){const s=U(null);return L(()=>(s.current||(s.current=new ge({baseUrl:e,authToken:n})),s.current),[e,n])}const Vt={request:"#1e3a5f",middleware:"rgba(30, 58, 95, 0.7)",db:"#6d28d9",view:"#0e7490",mail:"#059669",event:"#b45309",custom:"#525252"},Ws=[{label:"Request",color:"#1e3a5f"},{label:"Middleware",color:"rgba(30, 58, 95, 0.7)"},{label:"Database",color:"#6d28d9"},{label:"View",color:"#0e7490"},{label:"Mail",color:"#059669"},{label:"Event",color:"#b45309"}];function Kt({options:e}){const{baseUrl:n="",debugEndpoint:s="/admin/api/debug",authToken:r}=e||{},{data:i,isLoading:o,error:a}=z("timeline",e),[d,c]=N(""),[l,f]=N(null),[u,p]=N(null),[h,m]=N(!1),[g,y]=N(null),v=T(()=>{const b=i?.traces||[];if(!d)return b;const k=d.toLowerCase();return b.filter(C=>C.url.toLowerCase().includes(k)||C.method.toLowerCase().includes(k)||String(C.statusCode).includes(k))},[i,d]),_=Wt(n,r);I(()=>{if(l===null){p(null),y(null);return}let b=!1;return m(!0),y(null),_().get(`${s}/traces/${l}`).then(C=>{b||(p(C),m(!1))}).catch(C=>{b||(y(C instanceof Error?C.message:"Failed to load trace"),m(!1))}),()=>{b=!0}},[l,s,_]);const x=L(b=>{f(k=>k===b?null:b)},[]),S=L(b=>b>=500?"ss-dbg-status-5xx":b>=400?"ss-dbg-status-4xx":b>=300?"ss-dbg-status-3xx":"ss-dbg-status-2xx",[]),w=K([v]);if(o&&!i)return t("div",{className:"ss-dbg-empty",children:"Loading traces..."});if(a)return t("div",{className:"ss-dbg-empty",children:["Error: ",a.message]});if(l!==null){if(h)return t("div",{className:"ss-dbg-empty",children:"Loading trace detail..."});if(g)return t("div",{children:[t("div",{className:"ss-dbg-tl-detail-header",children:t("button",{type:"button",className:"ss-dbg-btn-clear",onClick:()=>f(null),children:"← Back"})}),t("div",{className:"ss-dbg-empty",children:["Error: ",g]})]});if(!u)return t("div",{className:"ss-dbg-empty",children:"Loading trace detail..."});const b=u.spans||[],k=u.warnings||[];return t("div",{children:[t("div",{className:"ss-dbg-tl-detail-header",children:[t("button",{type:"button",className:"ss-dbg-btn-clear",onClick:()=>f(null),children:"← Back"}),t("span",{className:`ss-dbg-method ss-dbg-method-${u.method.toLowerCase()}`,children:u.method}),t("span",{className:"ss-dbg-tl-detail-url",children:u.url}),t("span",{className:`ss-dbg-status ${S(u.statusCode)}`,children:u.statusCode}),t("span",{className:"ss-dbg-tl-meta",children:[F(u.totalDuration)," ·"," ",u.spanCount," spans"]})]}),t("div",{className:"ss-dbg-tl-legend",children:Ws.map(C=>t("div",{className:"ss-dbg-tl-legend-item",children:[t("div",{className:"ss-dbg-tl-legend-dot",style:{background:C.color}}),t("span",{children:C.label})]},C.label))}),t("div",{style:{padding:"8px 12px",overflow:"auto"},children:b.length===0?t("div",{className:"ss-dbg-empty",children:"No spans captured for this request"}):b.map(C=>{const O=u.totalDuration||1,J=C.startOffset/O*100,Nr=Math.max(C.duration/O*100,.5);return t("div",{className:"ss-dbg-tl-row",children:[t("div",{className:"ss-dbg-tl-label",title:C.label,children:C.label}),t("div",{className:"ss-dbg-tl-track",children:t("div",{className:`ss-dbg-tl-bar ss-dbg-tl-bar-${C.category}`,style:{left:`${J}%`,width:`${Nr}%`,background:Vt[C.category]||Vt.custom},title:`${C.label}: ${F(C.duration)}`})}),t("span",{className:"ss-dbg-tl-dur",children:F(C.duration)})]},C.id)})}),k.length>0&&t("div",{className:"ss-dbg-tl-warnings",children:[t("div",{className:"ss-dbg-tl-warnings-title",children:"Warnings"}),k.map((C,O)=>t("div",{className:"ss-dbg-tl-warning",children:C},O))]})]})}return t("div",{children:[t("div",{className:"ss-dbg-search-bar",children:[t("input",{type:"text",className:"ss-dbg-search",placeholder:"Filter traces...",value:d,onChange:b=>c(b.target.value)}),t("span",{className:"ss-dbg-summary",children:[v.length," traces"]})]}),v.length===0?t("div",{className:"ss-dbg-empty",children:"No traces captured. Enable tracing in config."}):t("table",{ref:w,className:"ss-dbg-table",children:[t("colgroup",{children:[t("col",{style:{width:"50px"}}),t("col",{style:{width:"70px"}}),t("col",{}),t("col",{style:{width:"60px"}}),t("col",{style:{width:"80px"}}),t("col",{style:{width:"50px"}}),t("col",{style:{width:"80px"}})]}),t("thead",{children:t("tr",{children:[t("th",{children:"#"}),t("th",{children:"Method"}),t("th",{children:"URL"}),t("th",{children:"Status"}),t("th",{children:"Duration"}),t("th",{children:"Spans"}),t("th",{children:"Time"})]})}),t("tbody",{children:v.map(b=>t("tr",{className:"ss-dbg-email-row",onClick:()=>x(b.id),children:[t("td",{className:"ss-dbg-c-dim",style:{whiteSpace:"nowrap"},children:b.id}),t("td",{children:t("span",{className:`ss-dbg-method ss-dbg-method-${b.method.toLowerCase()}`,children:b.method})}),t("td",{title:b.url,children:b.url}),t("td",{children:t("span",{className:`ss-dbg-status ${S(b.statusCode)}`,children:b.statusCode})}),t("td",{className:`ss-dbg-duration ${ee(b.totalDuration)==="very-slow"?"ss-dbg-very-slow":ee(b.totalDuration)==="slow"?"ss-dbg-slow":""}`,children:F(b.totalDuration)}),t("td",{className:"ss-dbg-c-muted",style:{textAlign:"center"},children:b.spanCount}),t("td",{className:"ss-dbg-event-time",title:V(b.timestamp),children:j(b.timestamp)})]},b.id))})]})]})}const Vs=Object.freeze(Object.defineProperty({__proto__:null,TimelineTab:Kt,default:Kt},Symbol.toStringTag,{value:"Module"}));function De(e,n){const s=T(()=>e?e.replace(/\/+$/,"")+"/api":null,[e]),r=T(()=>s?{...n,debugEndpoint:s}:n,[s,n]);return{dashApiBase:s,resolvedOptions:r}}function Jt({options:e,dashboardPath:n}){const{dashApiBase:s,resolvedOptions:r}=De(n,e),{data:i,isLoading:o,error:a}=z("cache",r),[d,c]=N(""),[l,f]=N(null),[u,p]=N(null),h=T(()=>{const _=i?.keys||[];if(!d)return _;const x=d.toLowerCase();return _.filter(S=>S.key.toLowerCase().includes(x))},[i,d]),m=L(async _=>{if(l===_){f(null),p(null);return}f(_);try{const{baseUrl:x="",authToken:S}=e||{},w=s||e?.debugEndpoint||"/admin/api/debug",b=`${x}${w}/cache/${encodeURIComponent(_)}`,k={Accept:"application/json"};S&&(k.Authorization=`Bearer ${S}`);const O=await(await fetch(b,{headers:k,credentials:S?"omit":"same-origin"})).json();p(O)}catch{p({error:"Failed to fetch key value"})}},[l,e,s]),g=K([h]);if(o&&!i)return t("div",{className:"ss-dbg-empty",children:"Loading cache data..."});if(a)return t("div",{className:"ss-dbg-empty",children:["Error: ",a.message]});if(!i)return t("div",{className:"ss-dbg-empty",children:"Cache inspector not available"});const v=i.stats||i;return t("div",{children:[t("div",{className:"ss-dbg-cache-stats",children:[t("div",{className:"ss-dbg-cache-stat",children:[t("span",{className:"ss-dbg-cache-stat-label",children:"Hit Rate:"}),t("span",{className:"ss-dbg-cache-stat-value",children:[v.hitRate!==null&&v.hitRate!==void 0?v.hitRate.toFixed(1):"0","%"]})]}),t("div",{className:"ss-dbg-cache-stat",children:[t("span",{className:"ss-dbg-cache-stat-label",children:"Hits:"}),t("span",{className:"ss-dbg-cache-stat-value",children:v.totalHits??0})]}),t("div",{className:"ss-dbg-cache-stat",children:[t("span",{className:"ss-dbg-cache-stat-label",children:"Misses:"}),t("span",{className:"ss-dbg-cache-stat-value",children:v.totalMisses??0})]}),t("div",{className:"ss-dbg-cache-stat",children:[t("span",{className:"ss-dbg-cache-stat-label",children:"Keys:"}),t("span",{className:"ss-dbg-cache-stat-value",children:v.keyCount??"-"})]})]}),t("div",{className:"ss-dbg-search-bar",children:[t("input",{type:"text",className:"ss-dbg-search",placeholder:"Filter keys...",value:d,onChange:_=>c(_.target.value)}),t("span",{className:"ss-dbg-summary",children:[h.length," keys"]})]}),l&&u&&t("div",{className:"ss-dbg-cache-detail",children:[t("strong",{children:l}),t("button",{type:"button",className:"ss-dbg-btn-clear",onClick:()=>f(null),children:["←"," Back"]}),t(Be,{data:u,classPrefix:"ss-dbg"})]}),h.length===0?t("div",{className:"ss-dbg-empty",children:"No cache keys found"}):t("table",{ref:g,className:"ss-dbg-table",children:[t("colgroup",{children:[t("col",{}),t("col",{style:{width:"80px"}}),t("col",{style:{width:"80px"}}),t("col",{style:{width:"80px"}})]}),t("thead",{children:t("tr",{children:[t("th",{children:"Key"}),t("th",{children:"Type"}),t("th",{children:"TTL"}),t("th",{children:"Size"})]})}),t("tbody",{children:h.map(_=>t("tr",{className:"ss-dbg-email-row",onClick:()=>m(_.key),children:[t("td",{className:"ss-dbg-c-sql",children:_.key}),t("td",{className:"ss-dbg-c-muted",children:_.type}),t("td",{className:"ss-dbg-c-muted",children:_.ttl>0?qn(_.ttl):"-"}),t("td",{className:"ss-dbg-c-dim",children:_.size>0?Wn(_.size):"-"})]},_.key))})]})]})}const Ks=Object.freeze(Object.defineProperty({__proto__:null,CacheTab:Jt,default:Jt},Symbol.toStringTag,{value:"Module"})),Js=["all","active","waiting","delayed","completed","failed"];function Gs(e,n="ss-dbg-job-status"){switch(e){case"completed":case"failed":case"active":case"waiting":case"delayed":return`${n}-${e}`;default:return"ss-dbg-badge-muted"}}function Qs(e){if(!e)return[];if(Array.isArray(e))return e;const n=e;return n.jobs||n.data||[]}function Xs(e){if(!e||Array.isArray(e))return null;const n=e;return n.stats||n.overview||null}function Gt({options:e,dashboardPath:n}){const{dashApiBase:s,resolvedOptions:r}=De(n,e),{data:i,isLoading:o,error:a}=z("jobs",r),[d,c]=N("all"),[l,f]=N(null),u=T(()=>{const g=Qs(i);return d==="all"?g:g.filter(y=>y.status===d)},[i,d]),p=L(async g=>{f(g);try{const{baseUrl:y="",authToken:v}=e||{},_=s||e?.debugEndpoint||"/admin/api/debug",x=`${y}${_}/jobs/${g}/retry`,S={Accept:"application/json"};v&&(S.Authorization=`Bearer ${v}`),await fetch(x,{method:"POST",headers:S,credentials:v?"omit":"same-origin"})}catch{}f(null)},[e,s]),h=K([u]);if(!s)return t("div",{className:"ss-dbg-empty",children:"Queue inspector not available (no dashboard configured)"});if(o&&!i)return t("div",{className:"ss-dbg-empty",children:"Loading jobs..."});if(a)return t("div",{className:"ss-dbg-empty",children:["Error: ",a.message]});if(!i)return t("div",{className:"ss-dbg-empty",children:"Queue inspector not available"});const m=Xs(i);return t("div",{children:[t("div",{className:"ss-dbg-job-stats-area",children:[t("div",{className:"ss-dbg-job-stats",children:[t("div",{className:"ss-dbg-job-stat",children:[t("span",{className:"ss-dbg-job-stat-label",children:"Active:"}),t("span",{className:"ss-dbg-job-stat-value",children:m?.active??0})]}),t("div",{className:"ss-dbg-job-stat",children:[t("span",{className:"ss-dbg-job-stat-label",children:"Waiting:"}),t("span",{className:"ss-dbg-job-stat-value",children:m?.waiting??0})]}),t("div",{className:"ss-dbg-job-stat",children:[t("span",{className:"ss-dbg-job-stat-label",children:"Delayed:"}),t("span",{className:"ss-dbg-job-stat-value",children:m?.delayed??0})]}),t("div",{className:"ss-dbg-job-stat",children:[t("span",{className:"ss-dbg-job-stat-label",children:"Completed:"}),t("span",{className:"ss-dbg-job-stat-value",children:m?.completed??0})]}),t("div",{className:"ss-dbg-job-stat",children:[t("span",{className:"ss-dbg-job-stat-label",children:"Failed:"}),t("span",{className:"ss-dbg-job-stat-value ss-dbg-c-red",children:m?.failed??0})]})]}),t("div",{className:"ss-dbg-log-filters",children:Js.map(g=>t("button",{type:"button",className:`ss-dbg-job-filter ${d===g?"ss-dbg-active":""}`,onClick:()=>c(g),children:g},g))})]}),u.length===0?t("div",{className:"ss-dbg-empty",children:"No jobs found"}):t("table",{ref:h,className:"ss-dbg-table",children:[t("colgroup",{children:[t("col",{style:{width:"50px"}}),t("col",{style:{width:"15%"}}),t("col",{style:{width:"80px"}}),t("col",{}),t("col",{style:{width:"50px"}}),t("col",{style:{width:"80px"}}),t("col",{style:{width:"80px"}}),t("col",{style:{width:"60px"}})]}),t("thead",{children:t("tr",{children:[t("th",{children:"ID"}),t("th",{children:"Name"}),t("th",{children:"Status"}),t("th",{children:"Payload"}),t("th",{children:"Tries"}),t("th",{children:"Duration"}),t("th",{children:"Time"}),t("th",{})]})}),t("tbody",{children:u.map(g=>{const y=g;return t("tr",{children:[t("td",{className:"ss-dbg-c-dim",children:g.id}),t("td",{className:"ss-dbg-c-sql",title:g.name,children:g.name}),t("td",{children:t("span",{className:`ss-dbg-badge ${Gs(g.status)}`,children:g.status})}),t("td",{children:t(Be,{data:g.payload||g.data,maxPreviewLength:60,classPrefix:"ss-dbg"})}),t("td",{className:"ss-dbg-c-muted",style:{textAlign:"center"},children:g.attempts||y.attemptsMade||0}),t("td",{className:"ss-dbg-duration",children:g.duration!==null?F(g.duration):"-"}),t("td",{className:"ss-dbg-event-time",title:V(g.timestamp||g.createdAt||y.processedAt||y.created_at),children:j(g.timestamp||g.createdAt||y.processedAt||y.created_at)}),t("td",{children:g.status==="failed"&&t("button",{type:"button",className:"ss-dbg-retry-btn",onClick:()=>p(g.id),disabled:l===g.id,children:l===g.id?"...":"Retry"})})]},g.id)})})]})]})}const Ys=Object.freeze(Object.defineProperty({__proto__:null,JobsTab:Gt,default:Gt},Symbol.toStringTag,{value:"Module"}));function B(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)&&e.__redacted===!0}function He(e,n=""){if(typeof e!="object"||e===null||e===void 0)return[{path:n,value:e}];if(Array.isArray(e)||B(e))return[{path:n,value:e}];const s=[];for(const r of Object.keys(e)){const i=n?`${n}.${r}`:r,o=e[r];typeof o=="object"&&o!==null&&!Array.isArray(o)&&!B(o)?s.push(...He(o,i)):s.push({path:i,value:o})}return s}function Fe(e){return e==null?{text:"null",color:"var(--ss-dim)"}:typeof e=="boolean"?{text:String(e),color:e?"var(--ss-green-fg)":"var(--ss-red-fg)"}:typeof e=="number"?{text:String(e),color:"var(--ss-amber-fg)"}:Array.isArray(e)?{text:`[${e.map(s=>s==null?"null":typeof s=="object"?JSON.stringify(s):String(s)).join(", ")}]`,color:"var(--ss-purple-fg)"}:typeof e=="object"?{text:JSON.stringify(e),color:"var(--ss-dim)"}:{text:String(e)}}function Qt(e){if(e==null||typeof e!="object"||Array.isArray(e)||B(e))return 1;let n=0;for(const s of Object.keys(e))n+=Qt(e[s]);return n}function Zs(e){if(e==null||typeof e!="object"||Array.isArray(e)||B(e))return[];const n=[];for(const s of Object.keys(e)){const r=e[s];r!==null&&typeof r=="object"&&!Array.isArray(r)&&!B(r)&&n.push(s)}return n}function ve(e,n,s){n&&navigator.clipboard.writeText(e).then(()=>{const r=n.textContent;n.textContent="✓",n.classList.add(`${s}-copy-row-ok`),setTimeout(()=>{n.textContent=r,n.classList.remove(`${s}-copy-row-ok`)},1200)}).catch(()=>{})}function we({redacted:e,p:n}){const[s,r]=N(!1);return t("span",{className:`${n}-config-redacted`,style:{display:"inline-flex",alignItems:"center",gap:"4px"},children:[t("span",{children:s?e.value:e.display}),t("button",{type:"button",className:`${n}-btn`,title:s?"Hide":"Reveal",style:{padding:"0 4px",fontSize:"0.85em",lineHeight:1,minWidth:"auto"},onClick:i=>{i.stopPropagation(),r(o=>!o)},children:s?t("svg",{width:"14",height:"14",viewBox:P["eye-off"].viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:P["eye-off"].elements.join("")}}):t("svg",{width:"14",height:"14",viewBox:P.eye.viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:P.eye.elements.join("")}})})]})}function er({env:e,search:n,p:s}){const r=U(new Map),i=n.toLowerCase(),o=Object.entries(e).filter(([a,d])=>{if(!i)return!0;const c=B(d)?d.display:d==null?"":String(d);return a.toLowerCase().includes(i)||c.toLowerCase().includes(i)});return t("div",{className:`${s}-config-table-wrap`,children:t("table",{className:`${s}-table ${s}-config-env-table`,children:[t("thead",{children:t("tr",{children:[t("th",{children:"Variable"}),t("th",{children:"Value"}),t("th",{style:{width:36}})]})}),t("tbody",{children:[o.map(([a,d])=>{const c=B(d),l=c?d.display:d==null?"null":String(d),f=`${a}=${l}`;return t("tr",{children:[t("td",{className:`${s}-env-key`,children:t("span",{className:`${s}-config-key`,children:a})}),t("td",{className:`${s}-env-val`,children:c?t(we,{redacted:d,p:s}):t("span",{className:`${s}-config-val`,children:l})}),t("td",{children:!c&&t("button",{type:"button",className:`${s}-copy-row-btn`,title:"Copy",ref:u=>{r.current.set(a,u)},onClick:u=>{u.stopPropagation(),ve(f,r.current.get(a)??null,s)},children:"⎘"})})]},a)}),o.length===0&&t("tr",{children:t("td",{colSpan:3,style:{textAlign:"center",color:"var(--ss-dim)"},children:"No matching variables"})})]})]})})}function tr({source:e,search:n,p:s}){const r=U(new Map),i=n.toLowerCase(),o=He(e,""),a=o.filter(d=>{const c=B(d.value)?d.value.display:d.value===null||d.value===void 0?"":String(d.value);return d.path.toLowerCase().includes(i)||c.toLowerCase().includes(i)});return t("div",{className:`${s}-config-table-wrap`,children:[t("table",{className:`${s}-table`,children:[t("thead",{children:t("tr",{children:[t("th",{children:"Path"}),t("th",{children:"Value"}),t("th",{style:{width:36}})]})}),t("tbody",{children:[a.map(d=>{const c=B(d.value),l=c?null:Fe(d.value),f=c?d.value.display:l.text,u=`${d.path}: ${f}`;return t("tr",{children:[t("td",{children:t("span",{className:`${s}-config-key`,style:{whiteSpace:"nowrap"},children:d.path})}),t("td",{children:c?t(we,{redacted:d.value,p:s}):t("span",{className:`${s}-config-val`,style:{wordBreak:"break-all",color:l.color},children:l.text})}),t("td",{children:!c&&t("button",{type:"button",className:`${s}-copy-row-btn`,title:"Copy",ref:p=>{r.current.set(d.path,p)},onClick:p=>{p.stopPropagation(),ve(u,r.current.get(d.path)??null,s)},children:"⎘"})})]},d.path)}),a.length===0&&t("tr",{children:t("td",{colSpan:3,style:{textAlign:"center",color:"var(--ss-dim)"},children:"No matching entries"})})]})]}),t("div",{style:{padding:"4px 16px",fontSize:"10px",color:"var(--ss-muted)"},children:[a.length," of ",o.length," entries"]})]})}function nr({obj:e,prefix:n,p:s}){const r=U(new Map),i=He(e,n);return t("table",{className:`${s}-table ${s}-config-inner-table`,children:[t("thead",{children:t("tr",{children:[t("th",{style:{width:"35%"},children:"Key"}),t("th",{children:"Value"}),t("th",{style:{width:36}})]})}),t("tbody",{children:i.map(o=>{const a=o.path.indexOf(n+".")===0?o.path.slice(n.length+1):o.path,d=B(o.value),c=d?null:Fe(o.value),l=d?o.value.display:c.text,f=`${o.path}: ${l}`;return t("tr",{children:[t("td",{title:a,children:t("span",{className:`${s}-config-key`,children:a})}),t("td",{title:l,children:d?t(we,{redacted:o.value,p:s}):t("span",{className:`${s}-config-val`,style:{color:c.color},children:c.text})}),t("td",{children:!d&&t("button",{type:"button",className:`${s}-copy-row-btn`,title:"Copy",ref:u=>{r.current.set(o.path,u)},onClick:u=>{u.stopPropagation(),ve(f,r.current.get(o.path)??null,s)},children:"⎘"})})]},o.path)})})]})}function sr({value:e,p:n}){if(e==null)return t("span",{className:`${n}-config-val`,style:{color:"var(--ss-dim)"},children:"null"});if(B(e))return t(we,{redacted:e,p:n});if(typeof e=="boolean")return t("span",{className:`${n}-config-val`,style:{color:e?"var(--ss-green-fg)":"var(--ss-red-fg)"},children:String(e)});if(typeof e=="number")return t("span",{className:`${n}-config-val`,style:{color:"var(--ss-amber-fg)"},children:String(e)});if(Array.isArray(e)){const s=e.map(r=>r==null?"null":typeof r=="object"?JSON.stringify(r):String(r));return t("span",{className:`${n}-config-val`,style:{color:"var(--ss-purple-fg)"},children:["[",s.join(", "),"]"]})}return typeof e=="object"?t("span",{className:`${n}-config-val`,style:{color:"var(--ss-dim)"},children:JSON.stringify(e)}):t("span",{className:`${n}-config-val`,children:String(e)})}function rr({obj:e,expandedPaths:n,onToggle:s,p:r}){if(e==null||typeof e!="object"||Array.isArray(e)||B(e))return null;const i=Object.keys(e),o=U(new Map);return t("div",{className:`${r}-config-sections`,children:i.map(a=>{const d=e[a],c=d!==null&&typeof d=="object"&&!Array.isArray(d)&&!B(d),l=n.has(a),f=B(d);return t("div",{className:`${r}-config-section`,children:[t("div",{className:`${r}-config-section-header${c?"":` ${r}-config-leaf`}`,onClick:c?()=>s(a):void 0,style:{cursor:c?"pointer":"default"},children:[c?t("span",{className:`${r}-config-toggle`,children:l?"▼":"▶"}):t("span",{className:`${r}-config-toggle`,style:{visibility:"hidden"},children:"•"}),t("span",{className:`${r}-config-key`,children:a}),c?t("span",{className:`${r}-config-count`,children:[Qt(d)," entries"]}):t(R,{children:[t("span",{className:`${r}-config-val`,style:{marginLeft:"8px"},children:t(sr,{value:d,p:r})}),!f&&t("button",{type:"button",className:`${r}-copy-row-btn`,style:{marginLeft:"4px"},title:"Copy",ref:u=>{o.current.set(a,u)},onClick:u=>{u.stopPropagation();const p=Fe(d);ve(`${a}: ${p.text}`,o.current.get(a)??null,r)},children:"⎘"})]})]}),c&&l&&t("div",{className:`${r}-config-section-body`,children:t(nr,{obj:d,prefix:a,p:r})})]},a)})})}function ir({data:e,isLoading:n,classPrefix:s}){const r=s,[i,o]=N(""),[a,d]=N(""),[c,l]=N("app"),[f,u]=N(new Set),[p,h]=N("Copy JSON");I(()=>{const x=setTimeout(()=>d(i),200);return()=>clearTimeout(x)},[i]);const m=e,g=L(x=>{u(S=>{const w=new Set(S);return w.has(x)?w.delete(x):w.add(x),w})},[]),y=L(()=>{if(!m)return;const x=c==="app"?m.app:m.env;if(!x)return;const S=Zs(x);u(new Set(S))},[m,c]),v=L(()=>{u(new Set)},[]),_=L(async()=>{if(m)try{const x=c==="app"?m.app:m.env;await navigator.clipboard.writeText(JSON.stringify(x,null,2)),h("Copied!"),setTimeout(()=>h("Copy JSON"),1500)}catch{}},[m,c]);return t("div",{children:[t("div",{className:`${r}-config-toolbar`,style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px"},children:[t("button",{type:"button",className:`${r}-config-tab${c==="app"?` ${r}-active`:""}`,onClick:()=>l("app"),children:"App Config"}),t("button",{type:"button",className:`${r}-config-tab${c==="env"?` ${r}-active`:""}`,onClick:()=>l("env"),children:"Env"}),t("div",{style:{position:"relative",flex:1},children:[t("input",{type:"text",className:`${r}-search`,placeholder:"Search keys and values...",value:i,onChange:x=>o(x.target.value),style:{width:"100%"}}),i&&t("button",{type:"button",onClick:()=>o(""),style:{position:"absolute",right:"6px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"14px",color:"var(--ss-dim)",padding:"0 2px",lineHeight:1},children:"×"})]}),c==="app"&&!a&&t(R,{children:[t("button",{type:"button",className:`${r}-btn`,onClick:y,children:"Expand All"}),t("button",{type:"button",className:`${r}-btn`,onClick:v,children:"Collapse All"})]}),t("button",{type:"button",className:`${r}-btn`,onClick:_,children:p})]}),n&&!e?t("div",{className:`${r}-empty`,children:"Loading config..."}):m?c==="env"?t(er,{env:m.env??{},search:a,p:r}):a?t(tr,{source:m.app??{},search:a,p:r}):t("div",{className:`${r}-config-table-wrap`,children:t(rr,{obj:m.app,expandedPaths:f,onToggle:g,p:r})}):t("div",{className:`${r}-empty`,children:"Config not available"})]})}function Xt({options:e,dashboardPath:n}){const{resolvedOptions:s}=De(n,e),{data:r,isLoading:i,error:o}=z("config",s);return o?t("div",{className:"ss-dbg-empty",children:["Error: ",o.message]}):t(ir,{data:r,isLoading:i,classPrefix:"ss-dbg"})}const or=Object.freeze(Object.defineProperty({__proto__:null,ConfigTab:Xt,default:Xt},Symbol.toStringTag,{value:"Module"})),lr=["password","secret","token","key","credential","auth"];function Yt(e){const n=e.toLowerCase();return lr.some(s=>n.includes(s))}function Zt(e){if(e==null)return"-";if(typeof e=="string"||typeof e=="number"||typeof e=="boolean")return String(e);if(Array.isArray(e))return e.join(", ")||"-";try{return JSON.stringify(e)}catch{return String(e)}}const ar={collectionInterval:"Stats Collection",dashboardBroadcast:"Dashboard Broadcast",debugBroadcast:"Debug Broadcast",persistFlush:"Persist Flush",retentionCleanup:"Retention Cleanup"};function cr(e){return ar[e]||e}const dr={prometheus:"Prometheus",pinoHook:"Pino Log Hook",edgePlugin:"Edge Plugin",cacheInspector:"Cache Inspector",queueInspector:"Queue Inspector"};function ur(e){return dr[e]||e}const hr=["healthy","active","connected","available","ready"],pr=["errored","unavailable"];function fr(e){return hr.includes(e)?"ok":pr.includes(e)?"err":""}function oe({status:e,prefix:n}){const s=fr(e);let r=`${n}-dot`;return s==="ok"?r+=` ${n}-dot-ok`:s==="err"&&(r+=` ${n}-dot-err`),t("span",{className:r})}const en=()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:P.eye.viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:P.eye.elements.join("")}}),tn=()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:P["eye-off"].viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:P["eye-off"].elements.join("")}});function mr({value:e}){const[n,s]=N(!1);return t("span",{children:[n?e:"••••••••"," ",t("button",{type:"button",onClick:()=>s(r=>!r),style:{background:"none",border:"1px solid var(--ss-border)",borderRadius:3,padding:"0 4px",fontSize:"10px",color:"var(--ss-dim)",cursor:"pointer",verticalAlign:"middle"},children:n?t(tn,{}):t(en,{})})]})}function gr({current:e,max:n,prefix:s}){const r=n>0?Math.min(100,Math.round(e/n*100)):0,i=r>=100;return t("div",{className:`${s}-bar`,children:[t("div",{className:`${s}-bar-track`,children:t("div",{className:`${s}-bar-fill${i?` ${s}-bar-fill-warn`:""}`,style:{width:`${r}%`}})}),t("span",{className:`${s}-bar-pct${i?` ${s}-bar-pct-warn`:""}`,children:[r,"%"]})]})}function br({config:e,prefix:n}){const s=Object.entries(e);return s.length===0?t("span",{className:`${n}-c-dim`,children:"-"}):t("span",{className:`${n}-c-muted`,children:s.map(([r,i],o)=>t("span",{children:[o>0&&", ",t("span",{className:`${n}-c-dim`,children:r}),"=",Yt(r)&&typeof i=="string"?t(mr,{value:i}):t("span",{children:Zt(i)})]},r))})}function Ne({label:e,value:n,prefix:s}){return t("div",{className:`${s}-info-card`,children:[t("span",{className:`${s}-info-card-label`,children:e}),t("span",{className:`${s}-info-card-value`,children:n})]})}function _r({data:e,tableClassName:n,classPrefix:s}){const r=s||"ss-dash",[i,o]=N(new Set),a=L(c=>{o(l=>{const f=new Set(l);return f.has(c)?f.delete(c):f.add(c),f})},[]),d=L((c,l)=>{if(l==null)return t("span",{className:`${r}-c-dim`,children:"null"});if(typeof l=="boolean")return t("span",{className:l?`${r}-c-green`:`${r}-c-red`,children:String(l)});if(Array.isArray(l))return t("span",{children:l.join(", ")||"-"});const f=Zt(l);if(Yt(c)){const u=i.has(c);return t("span",{children:[u?f:"••••••••"," ",t("button",{type:"button",onClick:()=>a(c),style:{background:"none",border:"1px solid var(--ss-border)",borderRadius:3,padding:"0 4px",fontSize:"10px",color:"var(--ss-dim)",cursor:"pointer",verticalAlign:"middle"},children:u?t(tn,{}):t(en,{})})]})}return t("span",{children:f})},[i,a,r]);return t("div",{children:[t("h3",{className:`${r}-internals-title`,children:"Package Info"}),t("div",{className:`${r}-info-cards`,children:[t(Ne,{label:"Version",value:e.package.version||"-",prefix:r}),t(Ne,{label:"Node.js",value:e.package.nodeVersion||"-",prefix:r}),t(Ne,{label:"AdonisJS",value:e.package.adonisVersion||"-",prefix:r}),t(Ne,{label:"Uptime",value:kt(e.package.uptime),prefix:r})]}),e.collectors.length>0&&t(R,{children:[t("h3",{className:`${r}-internals-title`,children:"Collectors"}),t("table",{className:n,children:[t("thead",{children:t("tr",{children:[t("th",{children:"Collector"}),t("th",{children:"Status"}),t("th",{children:"Last Error"}),t("th",{children:"Config"})]})}),t("tbody",{children:e.collectors.map(c=>t("tr",{children:[t("td",{children:[t("code",{children:c.name}),c.label&&c.label!==c.name&&t("span",{className:`${r}-c-dim`,children:[" ",c.label]})]}),t("td",{children:[t(oe,{status:c.status,prefix:r}),c.status]}),t("td",{className:c.lastError?`${r}-c-red`:`${r}-c-dim`,children:c.lastError?t(R,{children:[c.lastError,c.lastErrorAt&&t("span",{className:`${r}-c-dim`,style:{fontSize:"10px"},children:j(c.lastErrorAt)})]}):"-"}),t("td",{children:t(br,{config:c.config,prefix:r})})]},c.name))})]})]}),t("h3",{className:`${r}-internals-title`,children:"Buffers"}),t("table",{className:n,children:[t("thead",{children:t("tr",{children:[t("th",{children:"Buffer"}),t("th",{children:"Usage"}),t("th",{children:"Fill %"})]})}),t("tbody",{children:Object.entries(e.buffers).map(([c,l])=>t("tr",{children:[t("td",{style:{textTransform:"capitalize"},children:c}),t("td",{children:[l.current.toLocaleString()," / ",l.max.toLocaleString()]}),t("td",{children:t(gr,{current:l.current,max:l.max,prefix:r})})]},c))})]}),t("h3",{className:`${r}-internals-title`,children:"Timers"}),t("table",{className:n,children:[t("thead",{children:t("tr",{children:[t("th",{children:"Timer"}),t("th",{children:"Status"}),t("th",{children:"Interval"})]})}),t("tbody",{children:Object.entries(e.timers).map(([c,l])=>t("tr",{children:[t("td",{children:cr(c)}),t("td",{children:[t(oe,{status:l.active?"active":"inactive",prefix:r}),t("span",{className:l.active?`${r}-c-green`:`${r}-c-dim`,children:l.active?"active":"inactive"})]}),t("td",{children:l.active?l.intervalMs?F(l.intervalMs):l.debounceMs?`${F(l.debounceMs)} (debounce)`:"-":t("span",{className:`${r}-c-dim`,children:"—"})})]},c))})]}),t("h3",{className:`${r}-internals-title`,children:"Integrations"}),t("table",{className:n,children:[t("thead",{children:t("tr",{children:[t("th",{children:"Integration"}),t("th",{children:"Status"}),t("th",{children:"Details"})]})}),t("tbody",{children:[t("tr",{children:[t("td",{children:"Transmit (SSE)"}),t("td",{children:[t(oe,{status:e.transmit.available?"connected":"inactive",prefix:r}),e.transmit.available?"connected":"unavailable"]}),t("td",{style:{fontSize:"11px"},children:e.transmit.channels.length>0?`Channels: ${e.transmit.channels.join(", ")}`:"-"})]}),Object.entries(e.integrations).map(([c,l])=>{const f=l.active??l.available??!1,u=l.active?"active":l.available?"available":"unavailable";let p=l.mode?`Mode: ${l.mode}`:"-";return c==="edgePlugin"&&l.active?p="@serverStats() tag registered":c==="cacheInspector"&&l.available?p="Redis dependency detected":c==="queueInspector"&&l.available&&(p="Queue dependency detected"),t("tr",{children:[t("td",{children:ur(c)}),t("td",{children:[t(oe,{status:f?"active":"inactive",prefix:r}),u]}),t("td",{className:`${r}-c-dim`,style:{fontSize:"11px"},children:p})]},c)})]})]}),e.storage&&t(R,{children:[t("h3",{className:`${r}-internals-title`,children:"Storage (SQLite)"}),t("table",{className:n,children:[t("thead",{children:t("tr",{children:[t("th",{style:{width:"200px"},children:"Metric"}),t("th",{children:"Value"})]})}),t("tbody",{children:[t("tr",{children:[t("td",{children:"Status"}),t("td",{children:[t(oe,{status:e.storage.ready?"ready":"inactive",prefix:r}),e.storage.ready?"ready":"not ready"]})]}),t("tr",{children:[t("td",{children:"DB Path"}),t("td",{children:t("code",{children:e.storage.dbPath})})]}),t("tr",{children:[t("td",{children:"File Size"}),t("td",{children:[e.storage.fileSizeMb.toFixed(1)," MB"]})]}),t("tr",{children:[t("td",{children:"WAL Size"}),t("td",{children:[e.storage.walSizeMb.toFixed(1)," MB"]})]}),t("tr",{children:[t("td",{children:"Retention"}),t("td",{children:[e.storage.retentionDays," days"]})]}),t("tr",{children:[t("td",{children:"Last Cleanup"}),t("td",{children:e.storage.lastCleanupAt?j(e.storage.lastCleanupAt):"-"})]})]})]}),e.storage.tables.length>0&&t("table",{className:n,style:{marginTop:8},children:[t("thead",{children:t("tr",{children:[t("th",{children:"Table"}),t("th",{children:"Rows"})]})}),t("tbody",{children:e.storage.tables.map(c=>t("tr",{children:[t("td",{children:t("code",{children:c.name})}),t("td",{children:c.rowCount.toLocaleString()})]},c.name))})]})]}),t("h3",{className:`${r}-internals-title`,children:"Resolved Config"}),t("table",{className:n,children:[t("thead",{children:t("tr",{children:[t("th",{style:{width:"200px"},children:"Setting"}),t("th",{children:"Value"})]})}),t("tbody",{children:[t("tr",{children:[t("td",{children:"intervalMs"}),t("td",{children:e.config.intervalMs})]}),t("tr",{children:[t("td",{children:"transport"}),t("td",{children:e.config.transport})]}),t("tr",{children:[t("td",{children:"channelName"}),t("td",{children:e.config.channelName})]}),t("tr",{children:[t("td",{children:"endpoint"}),t("td",{children:e.config.endpoint===!1?"false":e.config.endpoint})]}),t("tr",{children:[t("td",{children:"skipInTest"}),t("td",{children:d("skipInTest",e.config.skipInTest)})]}),t("tr",{children:[t("td",{children:"onStats callback"}),t("td",{children:e.config.hasOnStatsCallback?"defined":"not defined"})]}),t("tr",{children:[t("td",{children:"shouldShow callback"}),t("td",{children:e.config.hasShouldShowCallback?"defined":"not defined"})]})]})]}),t("h4",{className:`${r}-internals-title`,children:"DevToolbar"}),t("table",{className:n,children:[t("thead",{children:t("tr",{children:[t("th",{style:{width:"200px"},children:"Setting"}),t("th",{children:"Value"})]})}),t("tbody",{children:Object.entries(e.devToolbar).map(([c,l])=>t("tr",{children:[t("td",{children:c==="customPaneCount"?"customPanes":c}),t("td",{children:c==="customPaneCount"?`${l} registered`:d(c,l)})]},c))})]})]})}const yr=3e3;function nn({options:e}){const{baseUrl:n="",debugEndpoint:s="/admin/api/debug",authToken:r}=e||{},[i,o]=N(null),[a,d]=N(!0),[c,l]=N(null),f=U(null),u=Wt(n,r),p=L(async()=>{try{const m=await u().get(`${s}/diagnostics`);o(m),l(null),d(!1)}catch(h){if(h instanceof ie){l(h),d(!1),f.current&&(clearInterval(f.current),f.current=null);return}l(h instanceof Error?h:new Error(String(h))),d(!1)}},[s,u]);return I(()=>(d(!0),l(null),p(),f.current=setInterval(p,yr),()=>{f.current&&(clearInterval(f.current),f.current=null)}),[p]),a&&!i?t("div",{className:"ss-dbg-empty",children:"Loading diagnostics..."}):c?t("div",{className:"ss-dbg-empty",children:["Error: ",c.message]}):i?t(_r,{data:i,tableClassName:"ss-dbg-table",classPrefix:"ss-dbg"}):t("div",{className:"ss-dbg-empty",children:"Diagnostics not available"})}const vr=Object.freeze(Object.defineProperty({__proto__:null,InternalsTab:nn,default:nn},Symbol.toStringTag,{value:"Module"}));function sn({pane:e,options:n}){({...n});const{data:s,isLoading:r,error:i,clearData:o}=z(e.endpoint.replace(/^\//,""),{...n,debugEndpoint:""}),[a,d]=N(""),c=T(()=>{if(!s)return[];const p=e.dataKey||e.id;let h=s;for(const m of p.split("."))h=h?.[m];return Array.isArray(h)?h:[]},[s,e.dataKey,e.id]),l=T(()=>{if(!a)return c;const p=a.toLowerCase(),h=e.columns.filter(m=>m.searchable).map(m=>m.key);return h.length===0?c:c.filter(m=>h.some(g=>{const y=m[g];return y!==null&&String(y).toLowerCase().includes(p)}))},[c,a,e.columns]),f=(p,h)=>{if(p==null)return t("span",{className:"ss-dbg-c-dim",children:"-"});switch(h.format||"text"){case"time":return t("span",{className:"ss-dbg-event-time",title:V(p),children:typeof p=="number"?j(p):String(p)});case"timeAgo":return t("span",{className:"ss-dbg-event-time",title:V(p),children:j(p)});case"duration":{const g=typeof p=="number"?p:parseFloat(String(p));return isNaN(g)?String(p):t("span",{className:`ss-dbg-duration ${ee(g)==="very-slow"?"ss-dbg-very-slow":ee(g)==="slow"?"ss-dbg-slow":""}`,children:F(g)})}case"method":return t("span",{className:`ss-dbg-method ss-dbg-method-${String(p).toLowerCase()}`,children:String(p)});case"json":{let g=p;if(typeof p=="string")try{g=JSON.parse(p)}catch{}return _e(g,80)}case"badge":{const g=String(p).toLowerCase(),v=(h.badgeColorMap||{})[g]||"muted";return t("span",{className:`ss-dbg-badge ss-dbg-badge-${v}`,children:String(p)})}default:return String(p)}},u=K([l]);return r&&!s?t("div",{className:"ss-dbg-empty",children:["Loading ",e.label,"..."]}):i?t("div",{className:"ss-dbg-empty",children:["Error: ",i.message]}):t("div",{children:[e.search&&t("div",{className:"ss-dbg-search-bar",children:[t("input",{type:"text",className:"ss-dbg-search",placeholder:e.search.placeholder,value:a,onChange:p=>d(p.target.value)}),t("span",{className:"ss-dbg-summary",children:[l.length," items"]}),e.clearable&&t("button",{type:"button",className:"ss-dbg-btn-clear",onClick:o,children:"Clear"})]}),l.length===0?t("div",{className:"ss-dbg-empty",children:"No data"}):t("table",{ref:u,className:"ss-dbg-table",children:[t("thead",{children:t("tr",{children:e.columns.map(p=>t("th",{children:p.label},p.key))})}),t("tbody",{children:l.map((p,h)=>t("tr",{children:e.columns.map(m=>t("td",{children:f(p[m.key],m)},m.key))},p.id??h))})]})]})}const wr=Object.freeze(Object.defineProperty({__proto__:null,CustomPaneTab:sn,default:sn},Symbol.toStringTag,{value:"Module"}))})();
