(function(){"use strict";var _e,q,Xe,re,Ye,Ze,et,tt,Me,Re,De,ve={},ye=[],vs=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,de=Array.isArray;function X(t,s){for(var n in s)t[n]=s[n];return t}function Oe(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function ge(t,s,n){var r,o,l,a={};for(l in s)l=="key"?r=s[l]:l=="ref"?o=s[l]:a[l]=s[l];if(arguments.length>2&&(a.children=arguments.length>3?_e.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(l in t.defaultProps)a[l]===void 0&&(a[l]=t.defaultProps[l]);return be(t,a,r,o,null)}function be(t,s,n,r,o){var l={type:t,props:s,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++Xe,__i:-1,__u:0};return o==null&&q.vnode!=null&&q.vnode(l),l}function j(t){return t.children}function Y(t,s){this.props=t,this.context=s}function ie(t,s){if(s==null)return t.__?ie(t.__,t.__i+1):null;for(var n;s<t.__k.length;s++)if((n=t.__k[s])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?ie(t):null}function ys(t){if(t.__P&&t.__d){var s=t.__v,n=s.__e,r=[],o=[],l=X({},s);l.__v=s.__v+1,q.vnode&&q.vnode(l),je(t.__P,l,s,t.__n,t.__P.namespaceURI,32&s.__u?[n]:null,r,n??ie(s),!!(32&s.__u),o),l.__v=s.__v,l.__.__k[l.__i]=l,ot(r,l,o),s.__e=s.__=null,l.__e!=n&&st(l)}}function st(t){if((t=t.__)!=null&&t.__c!=null)return t.__e=t.__c.base=null,t.__k.some(function(s){if(s!=null&&s.__e!=null)return t.__e=t.__c.base=s.__e}),st(t)}function nt(t){(!t.__d&&(t.__d=!0)&&re.push(t)&&!we.__r++||Ye!=q.debounceRendering)&&((Ye=q.debounceRendering)||Ze)(we)}function we(){for(var t,s=1;re.length;)re.length>s&&re.sort(et),t=re.shift(),s=re.length,ys(t);we.__r=0}function rt(t,s,n,r,o,l,a,i,h,d,u){var c,v,p,f,g,x,S,w=r&&r.__k||ye,y=s.length;for(h=gs(n,s,w,h,y),c=0;c<y;c++)(p=n.__k[c])!=null&&(v=p.__i!=-1&&w[p.__i]||ve,p.__i=c,x=je(t,p,v,o,l,a,i,h,d,u),f=p.__e,p.ref&&v.ref!=p.ref&&(v.ref&&Ie(v.ref,null,p),u.push(p.ref,p.__c||f,p)),g==null&&f!=null&&(g=f),(S=!!(4&p.__u))||v.__k===p.__k?h=at(p,h,t,S):typeof p.type=="function"&&x!==void 0?h=x:f&&(h=f.nextSibling),p.__u&=-7);return n.__e=g,h}function gs(t,s,n,r,o){var l,a,i,h,d,u=n.length,c=u,v=0;for(t.__k=new Array(o),l=0;l<o;l++)(a=s[l])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=t.__k[l]=be(null,a,null,null,null):de(a)?a=t.__k[l]=be(j,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=t.__k[l]=be(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):t.__k[l]=a,h=l+v,a.__=t,a.__b=t.__b+1,i=null,(d=a.__i=bs(a,n,h,c))!=-1&&(c--,(i=n[d])&&(i.__u|=2)),i==null||i.__v==null?(d==-1&&(o>u?v--:o<u&&v++),typeof a.type!="function"&&(a.__u|=4)):d!=h&&(d==h-1?v--:d==h+1?v++:(d>h?v--:v++,a.__u|=4))):t.__k[l]=null;if(c)for(l=0;l<u;l++)(i=n[l])!=null&&(2&i.__u)==0&&(i.__e==r&&(r=ie(i)),dt(i,i));return r}function at(t,s,n,r){var o,l;if(typeof t.type=="function"){for(o=t.__k,l=0;o&&l<o.length;l++)o[l]&&(o[l].__=t,s=at(o[l],s,n,r));return s}t.__e!=s&&(r&&(s&&t.type&&!s.parentNode&&(s=ie(t)),n.insertBefore(t.__e,s||null)),s=t.__e);do s=s&&s.nextSibling;while(s!=null&&s.nodeType==8);return s}function Ne(t,s){return s=s||[],t==null||typeof t=="boolean"||(de(t)?t.some(function(n){Ne(n,s)}):s.push(t)),s}function bs(t,s,n,r){var o,l,a,i=t.key,h=t.type,d=s[n],u=d!=null&&(2&d.__u)==0;if(d===null&&i==null||u&&i==d.key&&h==d.type)return n;if(r>(u?1:0)){for(o=n-1,l=n+1;o>=0||l<s.length;)if((d=s[a=o>=0?o--:l++])!=null&&(2&d.__u)==0&&i==d.key&&h==d.type)return a}return-1}function lt(t,s,n){s[0]=="-"?t.setProperty(s,n??""):t[s]=n==null?"":typeof n!="number"||vs.test(s)?n:n+"px"}function xe(t,s,n,r,o){var l,a;e:if(s=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(s in r)n&&s in n||lt(t.style,s,"");if(n)for(s in n)r&&n[s]==r[s]||lt(t.style,s,n[s])}else if(s[0]=="o"&&s[1]=="n")l=s!=(s=s.replace(tt,"$1")),a=s.toLowerCase(),s=a in t||s=="onFocusOut"||s=="onFocusIn"?a.slice(2):s.slice(2),t.l||(t.l={}),t.l[s+l]=n,n?r?n.u=r.u:(n.u=Me,t.addEventListener(s,l?De:Re,l)):t.removeEventListener(s,l?De:Re,l);else{if(o=="http://www.w3.org/2000/svg")s=s.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(s!="width"&&s!="height"&&s!="href"&&s!="list"&&s!="form"&&s!="tabIndex"&&s!="download"&&s!="rowSpan"&&s!="colSpan"&&s!="role"&&s!="popover"&&s in t)try{t[s]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&s[4]!="-"?t.removeAttribute(s):t.setAttribute(s,s=="popover"&&n==1?"":n))}}function it(t){return function(s){if(this.l){var n=this.l[s.type+t];if(s.t==null)s.t=Me++;else if(s.t<n.u)return;return n(q.event?q.event(s):s)}}}function je(t,s,n,r,o,l,a,i,h,d){var u,c,v,p,f,g,x,S,w,y,b,N,$,C,T,M=s.type;if(s.constructor!==void 0)return null;128&n.__u&&(h=!!(32&n.__u),l=[i=s.__e=n.__e]),(u=q.__b)&&u(s);e:if(typeof M=="function")try{if(S=s.props,w="prototype"in M&&M.prototype.render,y=(u=M.contextType)&&r[u.__c],b=u?y?y.props.value:u.__:r,n.__c?x=(c=s.__c=n.__c).__=c.__E:(w?s.__c=c=new M(S,b):(s.__c=c=new Y(S,b),c.constructor=M,c.render=Ns),y&&y.sub(c),c.state||(c.state={}),c.__n=r,v=c.__d=!0,c.__h=[],c._sb=[]),w&&c.__s==null&&(c.__s=c.state),w&&M.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=X({},c.__s)),X(c.__s,M.getDerivedStateFromProps(S,c.__s))),p=c.props,f=c.state,c.__v=s,v)w&&M.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),w&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(w&&M.getDerivedStateFromProps==null&&S!==p&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(S,b),s.__v==n.__v||!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(S,c.__s,b)===!1){s.__v!=n.__v&&(c.props=S,c.state=c.__s,c.__d=!1),s.__e=n.__e,s.__k=n.__k,s.__k.some(function(F){F&&(F.__=s)}),ye.push.apply(c.__h,c._sb),c._sb=[],c.__h.length&&a.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(S,c.__s,b),w&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(p,f,g)})}if(c.context=b,c.props=S,c.__P=t,c.__e=!1,N=q.__r,$=0,w)c.state=c.__s,c.__d=!1,N&&N(s),u=c.render(c.props,c.state,c.context),ye.push.apply(c.__h,c._sb),c._sb=[];else do c.__d=!1,N&&N(s),u=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++$<25);c.state=c.__s,c.getChildContext!=null&&(r=X(X({},r),c.getChildContext())),w&&!v&&c.getSnapshotBeforeUpdate!=null&&(g=c.getSnapshotBeforeUpdate(p,f)),C=u!=null&&u.type===j&&u.key==null?ct(u.props.children):u,i=rt(t,de(C)?C:[C],s,n,r,o,l,a,i,h,d),c.base=s.__e,s.__u&=-161,c.__h.length&&a.push(c),x&&(c.__E=c.__=null)}catch(F){if(s.__v=null,h||l!=null)if(F.then){for(s.__u|=h?160:128;i&&i.nodeType==8&&i.nextSibling;)i=i.nextSibling;l[l.indexOf(i)]=null,s.__e=i}else{for(T=l.length;T--;)Oe(l[T]);Fe(s)}else s.__e=n.__e,s.__k=n.__k,F.then||Fe(s);q.__e(F,s,n)}else l==null&&s.__v==n.__v?(s.__k=n.__k,s.__e=n.__e):i=s.__e=ws(n.__e,s,n,r,o,l,a,h,d);return(u=q.diffed)&&u(s),128&s.__u?void 0:i}function Fe(t){t&&(t.__c&&(t.__c.__e=!0),t.__k&&t.__k.some(Fe))}function ot(t,s,n){for(var r=0;r<n.length;r++)Ie(n[r],n[++r],n[++r]);q.__c&&q.__c(s,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(l){l.call(o)})}catch(l){q.__e(l,o.__v)}})}function ct(t){return typeof t!="object"||t==null||t.__b>0?t:de(t)?t.map(ct):X({},t)}function ws(t,s,n,r,o,l,a,i,h){var d,u,c,v,p,f,g,x=n.props||ve,S=s.props,w=s.type;if(w=="svg"?o="http://www.w3.org/2000/svg":w=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),l!=null){for(d=0;d<l.length;d++)if((p=l[d])&&"setAttribute"in p==!!w&&(w?p.localName==w:p.nodeType==3)){t=p,l[d]=null;break}}if(t==null){if(w==null)return document.createTextNode(S);t=document.createElementNS(o,w,S.is&&S),i&&(q.__m&&q.__m(s,l),i=!1),l=null}if(w==null)x===S||i&&t.data==S||(t.data=S);else{if(l=l&&_e.call(t.childNodes),!i&&l!=null)for(x={},d=0;d<t.attributes.length;d++)x[(p=t.attributes[d]).name]=p.value;for(d in x)p=x[d],d=="dangerouslySetInnerHTML"?c=p:d=="children"||d in S||d=="value"&&"defaultValue"in S||d=="checked"&&"defaultChecked"in S||xe(t,d,null,p,o);for(d in S)p=S[d],d=="children"?v=p:d=="dangerouslySetInnerHTML"?u=p:d=="value"?f=p:d=="checked"?g=p:i&&typeof p!="function"||x[d]===p||xe(t,d,p,x[d],o);if(u)i||c&&(u.__html==c.__html||u.__html==t.innerHTML)||(t.innerHTML=u.__html),s.__k=[];else if(c&&(t.innerHTML=""),rt(s.type=="template"?t.content:t,de(v)?v:[v],s,n,r,w=="foreignObject"?"http://www.w3.org/1999/xhtml":o,l,a,l?l[0]:n.__k&&ie(n,0),i,h),l!=null)for(d=l.length;d--;)Oe(l[d]);i||(d="value",w=="progress"&&f==null?t.removeAttribute("value"):f!=null&&(f!==t[d]||w=="progress"&&!f||w=="option"&&f!=x[d])&&xe(t,d,f,x[d],o),d="checked",g!=null&&g!=t[d]&&xe(t,d,g,x[d],o))}return t}function Ie(t,s,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&s==null||(t.__u=t(s))}else t.current=s}catch(o){q.__e(o,n)}}function dt(t,s,n){var r,o;if(q.unmount&&q.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||Ie(r,null,s)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(l){q.__e(l,s)}r.base=r.__P=null}if(r=t.__k)for(o=0;o<r.length;o++)r[o]&&dt(r[o],s,n||typeof t.type!="function");n||Oe(t.__e),t.__c=t.__=t.__e=void 0}function Ns(t,s,n){return this.constructor(t,n)}function xs(t,s,n){var r,o,l,a;s==document&&(s=document.documentElement),q.__&&q.__(t,s),o=(r=!1)?null:s.__k,l=[],a=[],je(s,t=s.__k=ge(j,null,[t]),o||ve,ve,s.namespaceURI,o?null:s.firstChild?_e.call(s.childNodes):null,l,o?o.__e:s.firstChild,r,a),ot(l,t,a)}_e=ye.slice,q={__e:function(t,s,n,r){for(var o,l,a;s=s.__;)if((o=s.__c)&&!o.__)try{if((l=o.constructor)&&l.getDerivedStateFromError!=null&&(o.setState(l.getDerivedStateFromError(t)),a=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,r||{}),a=o.__d),a)return o.__E=o}catch(i){t=i}throw t}},Xe=0,Y.prototype.setState=function(t,s){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=X({},this.state),typeof t=="function"&&(t=t(X({},n),this.props)),t&&X(n,t),t!=null&&this.__v&&(s&&this._sb.push(s),nt(this))},Y.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),nt(this))},Y.prototype.render=j,re=[],Ze=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,et=function(t,s){return t.__v.__b-s.__v.__b},we.__r=0,tt=/(PointerCapture)$|Capture$/i,Me=0,Re=it(!1),De=it(!0);var ks=0;function e(t,s,n,r,o,l){s||(s={});var a,i,h=s;if("ref"in h)for(i in h={},s)i=="ref"?a=s[i]:h[i]=s[i];var d={type:t,props:h,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--ks,__i:-1,__u:0,__source:o,__self:l};if(typeof t=="function"&&(a=t.defaultProps))for(i in a)h[i]===void 0&&(h[i]=a[i]);return q.vnode&&q.vnode(d),d}var he,I,Ue,ht,ue=0,ut=[],B=q,pt=B.__b,mt=B.__r,ft=B.diffed,_t=B.__c,vt=B.unmount,yt=B.__;function Be(t,s){B.__h&&B.__h(I,t,ue||s),ue=0;var n=I.__H||(I.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function k(t){return ue=1,$s(wt,t)}function $s(t,s,n){var r=Be(he++,2);if(r.t=t,!r.__c&&(r.__=[n?n(s):wt(void 0,s),function(i){var h=r.__N?r.__N[0]:r.__[0],d=r.t(h,i);h!==d&&(r.__N=[d,r.__[1]],r.__c.setState({}))}],r.__c=I,!I.__f)){var o=function(i,h,d){if(!r.__c.__H)return!0;var u=r.__c.__H.__.filter(function(v){return v.__c});if(u.every(function(v){return!v.__N}))return!l||l.call(this,i,h,d);var c=r.__c.props!==i;return u.some(function(v){if(v.__N){var p=v.__[0];v.__=v.__N,v.__N=void 0,p!==v.__[0]&&(c=!0)}}),l&&l.call(this,i,h,d)||c};I.__f=!0;var l=I.shouldComponentUpdate,a=I.componentWillUpdate;I.componentWillUpdate=function(i,h,d){if(this.__e){var u=l;l=void 0,o(i,h,d),l=u}a&&a.call(this,i,h,d)},I.shouldComponentUpdate=o}return r.__N||r.__}function V(t,s){var n=Be(he++,3);!B.__s&&bt(n.__H,s)&&(n.__=t,n.u=s,I.__H.__h.push(n))}function W(t){return ue=5,z(function(){return{current:t}},[])}function z(t,s){var n=Be(he++,7);return bt(n.__H,s)&&(n.__=t(),n.__H=s,n.__h=t),n.__}function P(t,s){return ue=8,z(function(){return t},s)}function Ss(){for(var t;t=ut.shift();){var s=t.__H;if(t.__P&&s)try{s.__h.some(ke),s.__h.some(ze),s.__h=[]}catch(n){s.__h=[],B.__e(n,t.__v)}}}B.__b=function(t){I=null,pt&&pt(t)},B.__=function(t,s){t&&s.__k&&s.__k.__m&&(t.__m=s.__k.__m),yt&&yt(t,s)},B.__r=function(t){mt&&mt(t),he=0;var s=(I=t.__c).__H;s&&(Ue===I?(s.__h=[],I.__h=[],s.__.some(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(s.__h.some(ke),s.__h.some(ze),s.__h=[],he=0)),Ue=I},B.diffed=function(t){ft&&ft(t);var s=t.__c;s&&s.__H&&(s.__H.__h.length&&(ut.push(s)!==1&&ht===B.requestAnimationFrame||((ht=B.requestAnimationFrame)||Cs)(Ss)),s.__H.__.some(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Ue=I=null},B.__c=function(t,s){s.some(function(n){try{n.__h.some(ke),n.__h=n.__h.filter(function(r){return!r.__||ze(r)})}catch(r){s.some(function(o){o.__h&&(o.__h=[])}),s=[],B.__e(r,n.__v)}}),_t&&_t(t,s)},B.unmount=function(t){vt&&vt(t);var s,n=t.__c;n&&n.__H&&(n.__H.__.some(function(r){try{ke(r)}catch(o){s=o}}),n.__H=void 0,s&&B.__e(s,n.__v))};var gt=typeof requestAnimationFrame=="function";function Cs(t){var s,n=function(){clearTimeout(r),gt&&cancelAnimationFrame(s),setTimeout(t)},r=setTimeout(n,35);gt&&(s=requestAnimationFrame(n))}function ke(t){var s=I,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),I=s}function ze(t){var s=I;t.__c=t.__(),I=s}function bt(t,s){return!t||t.length!==s.length||s.some(function(n,r){return n!==t[r]})}function wt(t,s){return typeof s=="function"?s(t):s}function Ls(t,s){for(var n in s)t[n]=s[n];return t}function Nt(t,s){for(var n in t)if(n!=="__source"&&!(n in s))return!0;for(var r in s)if(r!=="__source"&&t[r]!==s[r])return!0;return!1}function xt(t,s){this.props=t,this.context=s}(xt.prototype=new Y).isPureReactComponent=!0,xt.prototype.shouldComponentUpdate=function(t,s){return Nt(this.props,t)||Nt(this.state,s)};var kt=q.__b;q.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),kt&&kt(t)};var Ts=q.__e;q.__e=function(t,s,n,r){if(t.then){for(var o,l=s;l=l.__;)if((o=l.__c)&&o.__c)return s.__e==null&&(s.__e=n.__e,s.__k=n.__k),o.__c(t,s)}Ts(t,s,n,r)};var $t=q.unmount;function St(t,s,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),t.__c.__H=null),(t=Ls({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=s),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(r){return St(r,s,n)})),t}function Ct(t,s,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(r){return Ct(r,s,n)}),t.__c&&t.__c.__P===s&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function $e(){this.__u=0,this.o=null,this.__b=null}function Lt(t){if(!t.__)return null;var s=t.__.__c;return s&&s.__a&&s.__a(t)}function J(t){var s,n,r,o=null;function l(a){if(s||(s=t()).then(function(i){i&&(o=i.default||i),r=!0},function(i){n=i,r=!0}),n)throw n;if(!r)throw s;return o?ge(o,a):null}return l.displayName="Lazy",l.__f=!0,l}function Se(){this.i=null,this.l=null}q.unmount=function(t){var s=t.__c;s&&(s.__z=!0),s&&s.__R&&s.__R(),s&&32&t.__u&&(t.type=null),$t&&$t(t)},($e.prototype=new Y).__c=function(t,s){var n=s.__c,r=this;r.o==null&&(r.o=[]),r.o.push(n);var o=Lt(r.__v),l=!1,a=function(){l||r.__z||(l=!0,n.__R=null,o?o(h):h())};n.__R=a;var i=n.__P;n.__P=null;var h=function(){if(!--r.__u){if(r.state.__a){var d=r.state.__a;r.__v.__k[0]=Ct(d,d.__c.__P,d.__c.__O)}var u;for(r.setState({__a:r.__b=null});u=r.o.pop();)u.__P=i,u.forceUpdate()}};r.__u++||32&s.__u||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(a,a)},$e.prototype.componentWillUnmount=function(){this.o=[]},$e.prototype.render=function(t,s){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=St(this.__b,n,r.__O=r.__P)}this.__b=null}var o=s.__a&&ge(j,null,t.fallback);return o&&(o.__u&=-33),[ge(j,null,s.__a?null:t.children),o]};var Tt=function(t,s,n){if(++n[1]===n[0]&&t.l.delete(s),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};(Se.prototype=new Y).__a=function(t){var s=this,n=Lt(s.__v),r=s.l.get(t);return r[0]++,function(o){var l=function(){s.props.revealOrder?(r.push(o),Tt(s,t,r)):o()};n?n(l):l()}},Se.prototype.render=function(t){this.i=null,this.l=new Map;var s=Ne(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&s.reverse();for(var n=s.length;n--;)this.l.set(s[n],this.i=[1,0,this.i]);return t.children},Se.prototype.componentDidUpdate=Se.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(s,n){Tt(t,n,s)})};var Es=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,As=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ps=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,qs=/[A-Z0-9]/g,Ms=typeof document<"u",Rs=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};Y.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(Y.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(s){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:s})}})});var Et=q.event;function Ds(){}function Os(){return this.cancelBubble}function js(){return this.defaultPrevented}q.event=function(t){return Et&&(t=Et(t)),t.persist=Ds,t.isPropagationStopped=Os,t.isDefaultPrevented=js,t.nativeEvent=t};var Fs={enumerable:!1,configurable:!0,get:function(){return this.class}},At=q.vnode;q.vnode=function(t){typeof t.type=="string"&&(function(s){var n=s.props,r=s.type,o={},l=r.indexOf("-")===-1;for(var a in n){var i=n[a];if(!(a==="value"&&"defaultValue"in n&&i==null||Ms&&a==="children"&&r==="noscript"||a==="class"||a==="className")){var h=a.toLowerCase();a==="defaultValue"&&"value"in n&&n.value==null?a="value":a==="download"&&i===!0?i="":h==="translate"&&i==="no"?i=!1:h[0]==="o"&&h[1]==="n"?h==="ondoubleclick"?a="ondblclick":h!=="onchange"||r!=="input"&&r!=="textarea"||Rs(n.type)?h==="onfocus"?a="onfocusin":h==="onblur"?a="onfocusout":Ps.test(a)&&(a=h):h=a="oninput":l&&As.test(a)?a=a.replace(qs,"-$&").toLowerCase():i===null&&(i=void 0),h==="oninput"&&o[a=h]&&(a="oninputCapture"),o[a]=i}}r=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=Ne(n.children).forEach(function(d){d.props.selected=o.value.indexOf(d.props.value)!=-1})),r=="select"&&o.defaultValue!=null&&(o.value=Ne(n.children).forEach(function(d){d.props.selected=o.multiple?o.defaultValue.indexOf(d.props.value)!=-1:o.defaultValue==d.props.value})),n.class&&!n.className?(o.class=n.class,Object.defineProperty(o,"className",Fs)):n.className&&(o.class=o.className=n.className),s.props=o})(t),t.$$typeof=Es,At&&At(t)};var Pt=q.__r;q.__r=function(t){Pt&&Pt(t),t.__c};var qt=q.diffed;q.diffed=function(t){qt&&qt(t);var s=t.props,n=t.__e;n!=null&&t.type==="textarea"&&"value"in s&&s.value!==n.value&&(n.value=s.value==null?"":s.value)};var Is={Fragment:j};async function Us(){if(typeof window<"u"&&window.Transmit&&typeof window.Transmit=="function")return window.Transmit;try{const t=await import("@adonisjs/transmit-client");return t.Transmit??t.default??null}catch{return null}}function Bs(t){let s=null,n=null,r=!1;return{subscribe:async()=>{try{const a=await Us();if(!a)throw new Error("Transmit client not available (neither window.Transmit nor @adonisjs/transmit-client)");if(r)return;s=new a({baseUrl:t.baseUrl||window.location.origin,...t.authToken?{beforeSubscribe(i){return{headers:{Authorization:`Bearer ${t.authToken}`}}},beforeUnsubscribe(i){return{headers:{Authorization:`Bearer ${t.authToken}`}}}}:{}}),n=s.subscription(t.channelName),n.onMessage(i=>{r||t.onMessage(i)}),await n.create()}catch(a){t.onError&&t.onError(a)}},unsubscribe:async()=>{r=!0;try{n&&(await n.delete(),n=null),s&&(s=null)}catch{}}}}function zs(t){let s=!1;const n=Bs({baseUrl:t.baseUrl,channelName:t.channelName,authToken:t.authToken,onMessage:t.onMessage,onError:r=>{s=!0,t.onError?.(r),t.onDisconnect?.()}});return n.subscribe().then(()=>{s||t.onConnect?.()}).catch(r=>{t.onError?.(r),t.onDisconnect?.()}),{unsubscribe:()=>{n.unsubscribe().catch(()=>{})}}}class We extends Error{status;constructor(s=403){super(`Unauthorized (HTTP ${s})`),this.name="UnauthorizedError",this.status=s}}class Ws extends Error{status;body;constructor(s,n){super(`API error (HTTP ${s})`),this.name="ApiError",this.status=s,this.body=n}}class pe{baseUrl;authToken;constructor(s){this.baseUrl=s.baseUrl.replace(/\/+$/,""),this.authToken=s.authToken}async fetch(s,n){const o={...{Accept:"application/json",...this.authToken?{Authorization:`Bearer ${this.authToken}`}:{}},...n?.headers},l=await globalThis.fetch(`${this.baseUrl}${s}`,{...n,headers:o,credentials:this.authToken?"omit":"include"});if(l.status===401||l.status===403)throw new We(l.status);if(!l.ok){const a=await l.text().catch(()=>"");throw new Ws(l.status,a)}return l.json()}async get(s,n){const r=n?`${s}?${n}`:s;return this.fetch(r)}async post(s,n){const r={method:"POST",...n!==void 0?{body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}:{}};return this.fetch(s,r)}async delete(s){return this.fetch(s,{method:"DELETE"})}}const Hs=5e3,Mt=1e4,Vs={overview:"/overview",requests:"/requests",queries:"/queries",events:"/events",routes:"/routes",logs:"/logs",emails:"/emails",timeline:"/traces",cache:"/cache",jobs:"/jobs",config:"/config"};function Ks(t){return Vs[t]||`/${t}`}class Qs{constructor(s,n){this.client=s,this.basePath=n}async fetchSection(s,n){const r=Ks(s),o=n?`${this.basePath}${r}?${n}`:`${this.basePath}${r}`;return this.client.fetch(o)}async fetchChart(s){return this.client.fetch(`${this.basePath}/overview/chart?range=${s}`)}async fetchGroupedQueries(){return this.client.fetch(`${this.basePath}/queries/grouped`)}async explainQuery(s){return this.client.fetch(`${this.basePath}/queries/${s}/explain`)}async retryJob(s){return this.client.fetch(`${this.basePath}/jobs/${s}/retry`,{method:"POST"})}async fetchCacheKey(s){return this.client.fetch(`${this.basePath}/cache/${encodeURIComponent(s)}`)}async deleteCacheKey(s){return this.client.fetch(`${this.basePath}/cache/${encodeURIComponent(s)}`,{method:"DELETE"})}async fetchEmailPreview(s){return this.client.fetch(`${this.basePath}/emails/${s}/preview`)}}function Js(t){const s=new URLSearchParams;if(t.page!==null&&t.page!==void 0&&s.set("page",String(t.page)),t.perPage!==null&&t.perPage!==void 0&&s.set("perPage",String(t.perPage)),t.search&&s.set("search",t.search),t.sort&&s.set("sort",t.sort),t.sortDir&&s.set("direction",t.sortDir),t.timeRange&&s.set("range",t.timeRange),t.filters)for(const[n,r]of Object.entries(t.filters))r&&s.set(n,r);return s.toString()}function Gs(t,s,n=2){if(s<=1)return[1];const r=[],o=Math.max(2,t-n),l=Math.min(s-1,t+n);r.push(1),o>2&&r.push("...");for(let a=o;a<=l;a++)r.push(a);return l<s-1&&r.push("..."),s>1&&r.push(s),r}function Q(t,s={}){const{baseUrl:n="",dashboardEndpoint:r="/__stats/api",authToken:o,page:l=1,perPage:a=50,search:i,sort:h,sortDir:d,filters:u,timeRange:c,refreshKey:v}=s,[p,f]=k(null),[g,x]=k(null),[S,w]=k(!0),[y,b]=k(null),N=W(null),$=W(null),C=W(null),T=W(t),M=W(!1),F=P(()=>(N.current||(N.current=new pe({baseUrl:n,authToken:o})),N.current),[n,o]),R=P(()=>($.current||($.current=new Qs(F(),r)),$.current),[F,r]),L=P(async m=>{try{const _=R(),E=h&&h.replace(/[A-Z]/g,U=>"_"+U.toLowerCase()),A=Js({page:l,perPage:a,search:i,sort:E,sortDir:d,filters:u,timeRange:c}),D=await _.fetchSection(t,A||void 0);D&&D.data!==void 0&&D.meta!==void 0?(f(D.data),x(D.meta)):(f(D),x(null)),b(null),w(!1),M.current=!0}catch(_){if(_ instanceof We){b(_),w(!1),C.current&&(clearInterval(C.current),C.current=null);return}m||(b(_ instanceof Error?_:new Error(String(_))),w(!1))}},[t,R,l,a,i,h,d,u,c]);V(()=>{const m=T.current!==t;T.current=t,m||!M.current?(w(!0),b(null),f(null),x(null),M.current=!1,L(!1)):L(!0);const E=t==="overview"?Hs:Mt;return C.current=setInterval(()=>L(!0),E),()=>{C.current&&(clearInterval(C.current),C.current=null)}},[t,L,v]);const O=P(()=>{L(!0)},[L]),G=P(async(m,_="post",E)=>{const A=F(),D=`${r}/${m}`;try{const U=_==="post"?await A.post(D,E):await A.delete(D);return await L(!0),U}catch(U){throw U instanceof Error?U:new Error(String(U))}},[r,F,L]);return{data:p,meta:g,isLoading:S,error:y,refresh:O,mutate:G,getApi:R}}const Rt="/admin/api/debug",Dt={tracing:!1,process:!1,system:!1,http:!1,db:!1,redis:!1,queues:!1,cache:!1,app:!1,log:!1,emails:!1,dashboard:!1,customPanes:[]};function Xs(t){return{tracing:t.features?.tracing??!1,process:t.features?.process??!1,system:t.features?.system??!1,http:t.features?.http??!1,db:t.features?.db??!1,redis:t.features?.redis??!1,queues:t.features?.queues??!1,cache:t.features?.cache??!1,app:t.features?.app??!1,log:t.features?.log??!1,emails:t.features?.emails??!1,dashboard:t.features?.dashboard??!1,customPanes:t.customPanes??[]}}async function Ys(t,s=Rt){const n=`${s.replace(/\/+$/,"")}/config`;return t.fetch(n)}async function Zs(t){const{baseUrl:s="",debugEndpoint:n=Rt,authToken:r}=t,o=new pe({baseUrl:s,authToken:r});try{const l=await Ys(o,n);return Xs(l)}catch{return Dt}}function en(t={}){const{baseUrl:s="",debugEndpoint:n="/admin/api/debug",authToken:r}=t,[o,l]=k(Dt),[a,i]=k(!0),[h,d]=k(null),u=W(!1);return V(()=>{if(u.current)return;u.current=!0;let c=!1;return(async()=>{try{const p=await Zs({baseUrl:s,debugEndpoint:n,authToken:r});c||(l(p),i(!1))}catch(p){c||(d(p instanceof Error?p:new Error(String(p))),i(!1))}})(),()=>{c=!0}},[s,n,r]),{features:o,isLoading:a,error:h}}const Ce="ss-dash-theme",He="ss-theme-change";function Le(){if(typeof window>"u")return"light";const t=localStorage.getItem(Ce);return t==="dark"||t==="light"?t:window.matchMedia?.("(prefers-color-scheme: dark)").matches?"dark":"light"}function tn(t){typeof window>"u"||(localStorage.setItem(Ce,t),window.dispatchEvent(new CustomEvent(He,{detail:t})))}function sn(){const s=Le()==="dark"?"light":"dark";return tn(s),s}function Ot(t){if(typeof window>"u")return()=>{};const s=l=>{const a=l.detail;(a==="dark"||a==="light")&&t(a)},n=l=>{if(l.key===Ce){const a=l.newValue;t(a==="dark"||a==="light"?a:Le())}},r=window.matchMedia("(prefers-color-scheme: dark)"),o=l=>{localStorage.getItem(Ce)||t(l.matches?"dark":"light")};return window.addEventListener(He,s),window.addEventListener("storage",n),r.addEventListener("change",o),()=>{window.removeEventListener(He,s),window.removeEventListener("storage",n),r.removeEventListener("change",o)}}function nn(){const[t,s]=k(()=>Le());V(()=>Ot(o=>{s(o)}),[]);const n=P(()=>{const r=sn();return s(r),r},[]);return{theme:t,toggleTheme:n}}function rn({theme:t,onToggle:s,className:n="",classPrefix:r="ss-dash"}){const o=t==="dark";return e("button",{type:"button",className:`${r==="ss-dbg"?"ss-dbg-theme-toggle":"ss-dash-theme-btn"} ${n}`,onClick:s,title:o?"Switch to light theme":"Switch to dark theme","aria-label":o?"Switch to light theme":"Switch to dark theme",children:o?e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e("circle",{cx:"12",cy:"12",r:"5"}),e("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),e("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),e("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),e("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),e("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),e("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),e("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),e("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}):e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})}const an=["overview","requests","queries","events","routes","logs","emails","timeline","cache","jobs","config","internals"],ln=J(()=>Promise.resolve().then(()=>Pn)),on=J(()=>Promise.resolve().then(()=>On)),cn=J(()=>Promise.resolve().then(()=>In)),dn=J(()=>Promise.resolve().then(()=>Un)),hn=J(()=>Promise.resolve().then(()=>Bn)),un=J(()=>Promise.resolve().then(()=>Wn)),pn=J(()=>Promise.resolve().then(()=>Hn)),mn=J(()=>Promise.resolve().then(()=>Vn)),fn=J(()=>Promise.resolve().then(()=>Kn)),_n=J(()=>Promise.resolve().then(()=>Jn)),vn=J(()=>Promise.resolve().then(()=>nr)),yn=J(()=>Promise.resolve().then(()=>dr)),jt={overview:e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e("rect",{x:"3",y:"3",width:"7",height:"7"}),e("rect",{x:"14",y:"3",width:"7",height:"7"}),e("rect",{x:"14",y:"14",width:"7",height:"7"}),e("rect",{x:"3",y:"14",width:"7",height:"7"})]}),requests:e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),queries:e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}),e("path",{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"}),e("path",{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"})]}),events:e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),routes:e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),e("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),logs:e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),e("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),e("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),e("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),e("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),e("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),emails:e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),e("polyline",{points:"22,6 12,13 2,6"})]}),timeline:e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e("circle",{cx:"12",cy:"12",r:"10"}),e("polyline",{points:"12 6 12 12 16 14"})]}),cache:e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e("rect",{x:"2",y:"2",width:"20",height:"8",rx:"2",ry:"2"}),e("rect",{x:"2",y:"14",width:"20",height:"8",rx:"2",ry:"2"}),e("line",{x1:"6",y1:"6",x2:"6.01",y2:"6"}),e("line",{x1:"6",y1:"18",x2:"6.01",y2:"18"})]}),jobs:e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),e("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),config:e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),internals:e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),e("rect",{x:"9",y:"9",width:"6",height:"6"}),e("line",{x1:"9",y1:"1",x2:"9",y2:"4"}),e("line",{x1:"15",y1:"1",x2:"15",y2:"4"}),e("line",{x1:"9",y1:"20",x2:"9",y2:"23"}),e("line",{x1:"15",y1:"20",x2:"15",y2:"23"}),e("line",{x1:"20",y1:"9",x2:"23",y2:"9"}),e("line",{x1:"20",y1:"14",x2:"23",y2:"14"}),e("line",{x1:"1",y1:"9",x2:"4",y2:"9"}),e("line",{x1:"1",y1:"14",x2:"4",y2:"14"})]})};function gn(t){const{baseUrl:s="",dashboardEndpoint:n="/__stats/api",debugEndpoint:r,authToken:o,backUrl:l="/",channelName:a="server-stats/dashboard"}=t,{features:i}=en({baseUrl:s,debugEndpoint:r,authToken:o}),{theme:h,toggleTheme:d}=nn(),[u,c]=k("overview"),[v,p]=k(()=>typeof window>"u"?!1:localStorage.getItem("ss-dash-sidebar")==="collapsed"),[f,g]=k(!1),[x,S]=k(0),w=W(0);V(()=>{if(!a)return;const L=zs({baseUrl:s,channelName:a,authToken:o,onMessage:()=>{w.current+=1,S(w.current)},onConnect:()=>g(!0),onDisconnect:()=>g(!1),onError:()=>g(!1)});return()=>L.unsubscribe()},[s,a,o]);const y=i.customPanes||[],b=P(L=>{const O=L.replace("#","").split("?")[0];return O&&[...an,...y.map(m=>m.id)].includes(O)?O:"overview"},[y]);V(()=>{if(typeof window>"u")return;const L=b(window.location.hash);(L!=="overview"||window.location.hash)&&c(L)},[b]),V(()=>{const L=()=>{const O=b(window.location.hash);O!==u&&c(O)};return window.addEventListener("hashchange",L),()=>window.removeEventListener("hashchange",L)},[u,b]),V(()=>{typeof window>"u"||(window.location.hash=u)},[u]);const N=P(()=>{p(L=>{const O=!L;return localStorage.setItem("ss-dash-sidebar",O?"collapsed":"expanded"),O})},[]),$=z(()=>[{id:"overview",label:"Overview",visible:!0},{id:"requests",label:"Requests",visible:!0},{id:"queries",label:"Queries",visible:!0},{id:"events",label:"Events",visible:!0},{id:"routes",label:"Routes",visible:!0},{id:"logs",label:"Logs",visible:!0},{id:"emails",label:"Emails",visible:!0},{id:"timeline",label:"Timeline",visible:i.tracing},{id:"cache",label:"Cache",visible:i.cache},{id:"jobs",label:"Jobs",visible:i.queues},{id:"config",label:"Config",visible:!0},{id:"internals",label:"Internals",visible:!0}],[i]),C=z(()=>$.filter(L=>L.visible),[$]),T=z(()=>({baseUrl:s,dashboardEndpoint:n,authToken:o,refreshKey:x}),[s,n,o,x]),{data:M}=Q("overview",T),F=z(()=>{if(!M)return{};const L={};if(M.totalRequests>0&&(L.requests={count:M.totalRequests}),M.queryStats?.total>0&&(L.queries={count:M.queryStats.total}),M.logLevelBreakdown){const O=M.logLevelBreakdown,G=O.error+O.warn+O.info+O.debug;G>0&&(L.logs={count:G})}return L},[M]),R=P(()=>{const L={overview:e(ln,{options:T}),requests:e(on,{options:T}),queries:e(cn,{options:T}),events:e(dn,{options:T}),routes:e(hn,{options:T}),logs:e(un,{options:T}),emails:e(pn,{options:T}),timeline:e(mn,{options:T}),cache:e(fn,{options:T}),jobs:e(_n,{options:T}),config:e(vn,{options:T}),internals:e(yn,{options:T,debugEndpoint:r})};return e("div",{className:"ss-dash-pane ss-dash-active",id:`ss-dash-pane-${u}`,children:e("div",{className:"ss-dash-pane-inner",children:e($e,{fallback:e("div",{className:"ss-dash-empty",children:"Loading..."}),children:L[u]||e("div",{className:"ss-dash-empty",children:"Unknown section"})})})})},[u,T]);return e("div",{className:"ss-dash","data-theme":h,id:"ss-dash",children:[e("div",{className:"ss-dash-header",children:[e("div",{className:"ss-dash-header-left",children:[e("span",{className:"ss-dash-logo",children:"Server Stats"}),e("span",{className:"ss-dash-logo-sub",children:"Dashboard"})]}),e("div",{className:"ss-dash-header-center",children:[e("span",{className:`ss-dash-live-dot ${f?"ss-dash-connected":""}`,id:"ss-dash-live-dot"}),e("span",{className:`ss-dash-live-label ${f?"ss-dash-connected":""}`,id:"ss-dash-live-label",children:f?"Live":"Polling"})]}),e("div",{className:"ss-dash-header-right",children:[e(rn,{theme:h,onToggle:d}),l&&e("a",{href:l,className:"ss-dash-back-link",title:"Back to app",children:"← App"})]})]}),e("div",{className:"ss-dash-body",children:[e("div",{className:`ss-dash-sidebar ${v?"ss-dash-collapsed":""}`,id:"ss-dash-sidebar",children:[e("nav",{className:"ss-dash-nav",children:[C.map(L=>{const O=F[L.id];return e("button",{type:"button",className:`ss-dash-nav-item ${u===L.id?"ss-dash-active":""}`,"data-ss-section":L.id,onClick:()=>{L.id!==u&&c(L.id)},title:v?L.label:void 0,children:[e("span",{className:"ss-dash-nav-icon",children:jt[L.id]||jt.config}),e("span",{className:"ss-dash-nav-label",children:L.label}),O&&O.count>0&&e("span",{className:`ss-dash-nav-badge${O.variant?" "+O.variant:""}`,children:O.count})]},L.id)}),y.length>0&&e("div",{className:"ss-dash-nav-sep"}),y.map(L=>e("button",{type:"button",className:`ss-dash-nav-item ${u===L.id?"ss-dash-active":""}`,onClick:()=>c(L.id),title:v?L.label:void 0,children:[e("span",{className:"ss-dash-nav-icon",children:e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),e("path",{d:"M9 3v18"})]})}),e("span",{className:"ss-dash-nav-label",children:L.label})]},L.id))]}),e("button",{type:"button",className:"ss-dash-sidebar-toggle",id:"ss-dash-sidebar-toggle",onClick:N,title:v?"Expand sidebar":"Collapse sidebar",children:v?e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:e("path",{d:"M9 18l6-6-6-6"})}):e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:e("path",{d:"M15 18l-6-6 6-6"})})})]}),e("div",{className:"ss-dash-main",children:R()})]})]})}const Ft=document.getElementById("ss-dash-config"),oe=Ft?JSON.parse(Ft.textContent||"{}"):{};function It(t){document.documentElement.setAttribute("data-theme",t)}It(Le()),Ot(It);const Ut=document.getElementById("ss-dash");Ut&&xs(e(gn,{baseUrl:oe.baseUrl,dashboardEndpoint:oe.dashboardEndpoint,debugEndpoint:oe.debugEndpoint,authToken:oe.authToken,backUrl:oe.backUrl,channelName:oe.channelName}),Ut);function ce(t){return t>=1e3?`${(t/1e3).toFixed(2)}s`:t>=1?`${t.toFixed(0)}ms`:`${t.toFixed(2)}ms`}function se(t){if(!t)return"-";const s=typeof t=="string"?new Date(t):new Date(t);return Number.isNaN(s.getTime())?"-":s.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})+"."+String(s.getMilliseconds()).padStart(3,"0")}function ne(t){if(!t)return"-";const s=typeof t=="string"?new Date(t).getTime():t,n=Math.floor((Date.now()-s)/1e3);return n<0?"just now":n<60?`${n}s ago`:n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:`${Math.floor(n/86400)}d ago`}function bn(t){return t>500?"very-slow":t>100?"slow":"normal"}function Ve(t,s=100){if(t===null)return"null";if(t===void 0)return"-";if(typeof t=="string")return'"'+(t.length>40?t.slice(0,40)+"...":t)+'"';if(typeof t=="number"||typeof t=="boolean")return String(t);if(Array.isArray(t)){if(t.length===0)return"[]";const r="["+t.slice(0,3).map(o=>Ve(o,30)).join(", ")+(t.length>3?", ..."+t.length+" items":"")+"]";return r.length>s?"["+t.length+" items]":r}if(typeof t=="object"){const n=Object.keys(t);if(n.length===0)return"{}";const r=[];for(let l=0;l<Math.min(n.length,4);l++)r.push(n[l]+": "+Ve(t[n[l]],30));const o="{ "+r.join(", ")+(n.length>4?", ...+"+(n.length-4):"")+" }";return o.length>s?"{ "+n.slice(0,6).join(", ")+(n.length>6?", ...":"")+" }":o}return String(t)}const ae={color:"#34d399",fillOpacityTop:.25,fillOpacityBottom:.02,strokeWidth:1.5,width:120,height:32,padding:2};function wn(t){return{...ae,...t}}function Nn(t,s=ae.width,n=ae.height,r=ae.padding){if(t.length<2)return null;const o=s-r*2,l=n-r*2,a=Math.min(...t),h=Math.max(...t)-a||1;return t.map((u,c)=>{const v=r+c/(t.length-1)*o,p=r+l-(u-a)/h*l;return`${v.toFixed(1)},${p.toFixed(1)}`}).join(" ")}function xn(t,s=ae.width,n=ae.height,r=ae.padding){if(t.length<2)return null;const o=s-r*2,l=n-r*2,a=Math.min(...t),h=Math.max(...t)-a||1,d=t.map((p,f)=>{const g=r+f/(t.length-1)*o,x=r+l-(p-a)/h*l;return`${g.toFixed(1)},${x.toFixed(1)}`}),u=(r+o).toFixed(1),c=(r+l).toFixed(1),v=r.toFixed(1);return`M${d[0]} `+d.slice(1).map(p=>`L${p}`).join(" ")+` L${u},${c} L${v},${c} Z`}let kn=0;function $n(){return`ss-grad-${kn++}`}function Sn(t){if(t.length===0)return null;const s=Math.min(...t),n=Math.max(...t),r=t.reduce((o,l)=>o+l,0)/t.length;return{min:s,max:n,avg:r}}function Cn(t,s){const n=wn(s),r=Nn(t,n.width,n.height,n.padding),o=xn(t,n.width,n.height,n.padding);return!r||!o?null:{points:r,areaPath:o,gradientId:$n(),options:n,stats:Sn(t)}}function Te({data:t,color:s="#34d399",width:n=120,height:r=32,className:o=""}){const l=z(()=>Cn(t,{width:n,height:r}),[t,n,r]),a=z(()=>"ss-grad-"+Math.random().toString(36).slice(2,8),[]),i={"--ss-accent":s};if(!l)return e("div",{className:`ss-dash-sparkline ${o}`,style:i,children:e("svg",{width:n,height:r,viewBox:`0 0 ${n} ${r}`,style:{display:"block"},children:e("text",{x:n/2,y:r/2+3,textAnchor:"middle",fill:"#737373",fontSize:"9",children:["collecting","…"]})})});const h=s||"var(--ss-accent)";return e("div",{className:`ss-dash-sparkline ${o}`,style:i,children:e("svg",{width:n,height:r,viewBox:`0 0 ${n} ${r}`,style:{display:"block"},children:[e("defs",{children:e("linearGradient",{id:a,x1:"0",y1:"0",x2:"0",y2:"1",children:[e("stop",{offset:"0%",stopColor:h,stopOpacity:"0.25"}),e("stop",{offset:"100%",stopColor:h,stopOpacity:"0.02"})]})}),e("path",{d:l.areaPath,fill:`url(#${a})`}),e("path",{className:"ss-dash-sparkline-line",d:"M"+l.points.replace(/ /g," L"),fill:"none",stroke:h,strokeWidth:"1.5",strokeLinejoin:"round",strokeLinecap:"round"})]})})}const Ln=[{value:"5m",label:"5m"},{value:"15m",label:"15m"},{value:"30m",label:"30m"},{value:"1h",label:"1h"},{value:"6h",label:"6h"},{value:"24h",label:"24h"},{value:"7d",label:"7d"}];function Tn({value:t,onChange:s,className:n=""}){return e("div",{className:`ss-dash-btn-group ${n}`,children:Ln.map(r=>e("button",{type:"button",className:`ss-dash-btn ${t===r.value?"ss-dash-active":""}`,onClick:()=>s(r.value),children:r.label},r.value))})}function En(t,s){if(t<=0)return[0];const n=t/s,r=Math.pow(10,Math.floor(Math.log10(n))),o=n/r;let l;o<=1?l=r:o<=2?l=2*r:o<=5?l=5*r:l=10*r;const a=[];for(let i=l;i<=t+l*.5;i+=l)a.push(Math.round(i));return a.length===0&&a.push(Math.ceil(t)),a}function Bt(t){try{return new Date(t).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"})}catch{return""}}function zt(t){if(t.length===0)return"";if(t.length===1)return`M${t[0].x},${t[0].y}`;let s=`M${t[0].x.toFixed(1)},${t[0].y.toFixed(1)}`;for(let n=0;n<t.length-1;n++){const r=t[n],o=t[n+1],l=(r.x+o.x)/2;s+=` C${l.toFixed(1)},${r.y.toFixed(1)} ${l.toFixed(1)},${o.y.toFixed(1)} ${o.x.toFixed(1)},${o.y.toFixed(1)}`}return s}function Wt(t){const s=bn(t);return s==="very-slow"?"ss-dash-very-slow":s==="slow"?"ss-dash-slow":""}function An({chartPoints:t}){const s={top:12,right:12,bottom:28,left:38},n=220,r=W(null),[o,l]=k(0);V(()=>{const E=r.current;if(!E)return;l(E.clientWidth);const A=new ResizeObserver(D=>{for(const U of D)l(U.contentRect.width)});return A.observe(E),()=>A.disconnect()},[]);const a=o||600,i=a-s.left-s.right,h=n-s.top-s.bottom,d=s.top+h,u=t.map(E=>{const A=E;return(E.requestCount??0)+(Number(A.request_count)||0)||E.total||0}),c=t.map(E=>{const A=E;return(E.errorCount??0)+(Number(A.error_count)||0)}),v=Math.max(...u,1),p=Math.ceil(v*1.1),f=c.some(E=>E>0),g=En(p,4),x=g.length>0?g[g.length-1]:p,S=E=>s.left+E/Math.max(t.length-1,1)*i,w=E=>s.top+h-E/(x||1)*h,y=t.map((E,A)=>({x:S(A),y:w(u[A])})),b=t.map((E,A)=>({x:S(A),y:w(c[A])})),N=zt(y),$=f?zt(b):"",C=y.length>1?`${N} L${y[y.length-1].x.toFixed(1)},${d} L${y[0].x.toFixed(1)},${d} Z`:"",T=f&&b.length>1?`${$} L${b[b.length-1].x.toFixed(1)},${d} L${b[0].x.toFixed(1)},${d} Z`:"",M=Math.min(10,t.length),F=Math.max(1,Math.ceil(t.length/M)),[R,L]=k({visible:!1,x:0,idx:-1}),O=P(E=>{const A=y[E].x;L({visible:!0,x:A,idx:E})},[y]),G=P(()=>{L({visible:!1,x:0,idx:-1})},[]),m=120,_=R.visible?Math.max(m/2,Math.min(R.x,a-m/2)):0;return e("div",{ref:r,style:{position:"relative"},children:[e("svg",{viewBox:`0 0 ${a} ${n}`,className:"ss-dash-chart-svg",children:[e("defs",{children:[e("linearGradient",{id:"ss-cg-total",x1:"0",y1:"0",x2:"0",y2:"1",children:[e("stop",{offset:"0%",stopColor:"var(--ss-accent)",stopOpacity:.3}),e("stop",{offset:"100%",stopColor:"var(--ss-accent)",stopOpacity:.02})]}),e("linearGradient",{id:"ss-cg-error",x1:"0",y1:"0",x2:"0",y2:"1",children:[e("stop",{offset:"0%",stopColor:"var(--ss-red-fg)",stopOpacity:.35}),e("stop",{offset:"100%",stopColor:"var(--ss-red-fg)",stopOpacity:.02})]})]}),g.map(E=>{const A=w(E);return e("g",{children:[e("line",{x1:s.left,y1:A,x2:a-s.right,y2:A,stroke:"var(--ss-border-faint)",strokeWidth:.5,strokeDasharray:"3,3"}),e("text",{x:s.left-6,y:A,textAnchor:"end",fill:"var(--ss-dim)",fontSize:9,dominantBaseline:"middle",children:E})]},`ytick-${E}`)}),C&&e("path",{d:C,fill:"url(#ss-cg-total)"}),N&&e("path",{d:N,fill:"none",stroke:"var(--ss-accent)",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"}),T&&e("path",{d:T,fill:"url(#ss-cg-error)"}),$&&e("path",{d:$,fill:"none",stroke:"var(--ss-red-fg)",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round",strokeDasharray:"4,2"}),t.map((E,A)=>{const D=u[A],U=c[A],H=y[A].x,te=y[A].y,ms=i/(t.length||1),fs=R.visible&&R.idx===A,_s=R.visible&&R.idx!==A;return e("g",{children:[e("rect",{x:H-ms/2,y:s.top,width:ms,height:h,fill:"transparent",className:"ss-dash-chart-hover-zone","data-idx":A,onMouseEnter:()=>O(A),onMouseLeave:G}),D>0&&e("circle",{cx:H,cy:te,r:fs?4:2.5,fill:"var(--ss-accent)",stroke:"var(--ss-surface)",strokeWidth:1,className:"ss-dash-chart-dot","data-idx":A,opacity:_s?.3:1}),U>0&&e("circle",{cx:H,cy:b[A].y,r:fs?3.5:2,fill:"var(--ss-red-fg)",stroke:"var(--ss-surface)",strokeWidth:1,className:"ss-dash-chart-dot ss-dash-chart-dot-err","data-idx":A,opacity:_s?.3:1})]},A)}),t.map((E,A)=>{if(A%F!==0&&A!==t.length-1)return null;const D=Bt(E.bucket);return D?e("text",{x:S(A),y:n-6,textAnchor:"middle",fill:"var(--ss-dim)",fontSize:9,children:D},`xlabel-${A}`):null})]}),R.visible&&R.idx>=0&&e("div",{className:"ss-dash-chart-tooltip",style:{left:_,top:s.top-4,transform:"translate(-50%, -100%)"},children:[e("div",{children:Bt(t[R.idx].bucket)}),e("div",{children:["Requests: ",u[R.idx]]}),c[R.idx]>0&&e("div",{style:{color:"var(--ss-red-fg)"},children:["Errors: ",c[R.idx]]})]})]})}function Ht({options:t={}}){const[s,n]=k("1h"),{data:r,isLoading:o}=Q("overview",t),{data:l}=Q("overview/chart",{...t,timeRange:s});if(o&&!r)return e("div",{className:"ss-dash-empty",children:"Loading overview..."});const a=r||{avgResponseTime:0,p95ResponseTime:0,requestsPerMinute:0,errorRate:0,totalRequests:0,slowestEndpoints:[],queryStats:{total:0,avgDuration:0,perRequest:0},recentErrors:[],topEvents:[],emailActivity:{sent:0,queued:0,failed:0},logLevelBreakdown:{error:0,warn:0,info:0,debug:0},cacheStats:null,jobQueueStatus:null,statusDistribution:{"2xx":0,"3xx":0,"4xx":0,"5xx":0},slowestQueries:[]},i=a,h=a.avgResponseTime||Number(i.avg_response_time)||0,d=a.p95ResponseTime||Number(i.p95_response_time)||0,u=a.requestsPerMinute||Number(i.requests_per_minute)||0,c=a.errorRate||Number(i.error_rate)||0,p=(a.totalRequests||Number(i.total_requests)||0)>0,f=l?.buckets||[],g=a.sparklines?.avgResponseTime??f.map(y=>y.avgDuration??0),x=a.sparklines?.p95ResponseTime??f.map(y=>y.p95Duration??0),S=a.sparklines?.requestsPerMinute??f.map(y=>y.requestCount??0),w=a.sparklines?.errorRate??f.map(y=>y.errorCount??0);return e("div",{className:"ss-dash-overview",children:[e("div",{className:"ss-dash-cards",children:[e("div",{className:"ss-dash-card",children:[e("div",{className:"ss-dash-card-title",children:"Avg Response Time"}),e("div",{className:`ss-dash-card-value ${p?h>500?"ss-dash-red":h>200?"ss-dash-amber":"ss-dash-accent":"ss-dash-dim"}`,children:p?ce(h):"-"}),e("div",{className:"ss-dash-sparkline",children:e(Te,{data:g,color:"#34d399",width:160,height:40})})]}),e("div",{className:"ss-dash-card",children:[e("div",{className:"ss-dash-card-title",children:"P95 Response Time"}),e("div",{className:`ss-dash-card-value ${p?d>500?"ss-dash-red":d>200?"ss-dash-amber":"ss-dash-accent":"ss-dash-dim"}`,children:p?ce(d):"-"}),e("div",{className:"ss-dash-sparkline",children:e(Te,{data:x,color:"#60a5fa",width:160,height:40})})]}),e("div",{className:"ss-dash-card",children:[e("div",{className:"ss-dash-card-title",children:"Requests / min"}),e("div",{className:`ss-dash-card-value ${p?"ss-dash-accent":"ss-dash-dim"}`,children:p?u.toFixed(1):"-"}),e("div",{className:"ss-dash-sparkline",children:e(Te,{data:S,color:"#34d399",width:160,height:40})})]}),e("div",{className:"ss-dash-card",children:[e("div",{className:"ss-dash-card-title",children:"Error Rate"}),e("div",{className:`ss-dash-card-value ${p?c>5?"ss-dash-red":c>1?"ss-dash-amber":"ss-dash-accent":"ss-dash-dim"}`,children:p?`${c.toFixed(1)}%`:"-"}),e("div",{className:"ss-dash-sparkline",children:e(Te,{data:w,color:"#f87171",width:160,height:40})})]})]}),e("div",{className:"ss-dash-chart-container",children:[e("div",{className:"ss-dash-chart-header",children:[e("span",{className:"ss-dash-chart-title",children:"Request Volume"}),e(Tn,{value:s,onChange:n})]}),e("div",{className:"ss-dash-chart",id:"ss-dash-chart-area",children:f.length===0?e("div",{className:"ss-dash-empty",style:{minHeight:"120px"},children:"No data for this range"}):e(An,{chartPoints:f})}),e("div",{className:"ss-dash-chart-legend",id:"ss-dash-chart-legend",children:[e("span",{className:"ss-dash-chart-legend-item",children:[e("span",{className:"ss-dash-legend-dot",style:{background:"var(--ss-accent)"}}),"Requests"]}),f.some(y=>(y.errorCount??0)>0)&&e("span",{className:"ss-dash-chart-legend-item",children:[e("span",{className:"ss-dash-legend-dot",style:{background:"var(--ss-red-fg)"}}),"Errors"]})]})]}),e("div",{className:"ss-dash-secondary-cards",children:[e("div",{className:"ss-dash-secondary-card",children:[e("div",{className:"ss-dash-secondary-card-title",children:e("a",{href:"#requests",className:"ss-dash-widget-link",children:"Slowest Endpoints"})}),a.slowestEndpoints.length===0?e("div",{className:"ss-dash-empty",style:{minHeight:"60px"},children:"No data yet"}):e("ul",{className:"ss-dash-secondary-list",children:a.slowestEndpoints.slice(0,5).map((y,b)=>{const N=y.url||y.pattern||"-";return e("li",{children:e("a",{href:`#requests?url=${encodeURIComponent(N)}`,className:"ss-dash-widget-row-link",children:[e("span",{title:N,children:N}),e("span",{className:`ss-dash-secondary-list-value ss-dash-duration ${Wt(y.avgDuration)}`,children:ce(y.avgDuration)})]})},b)})})]}),e("div",{className:"ss-dash-secondary-card",children:[e("div",{className:"ss-dash-secondary-card-title",children:e("a",{href:"#queries",className:"ss-dash-widget-link",children:"Query Stats"})}),e("ul",{className:"ss-dash-secondary-list",children:[e("li",{children:[e("span",{children:"Total Queries"}),e("span",{className:"ss-dash-secondary-list-value",children:a.queryStats.total})]}),e("li",{children:[e("span",{children:"Avg Duration"}),e("span",{className:"ss-dash-secondary-list-value",children:ce(a.queryStats.avgDuration)})]}),e("li",{children:[e("span",{children:"Queries / Request"}),e("span",{className:"ss-dash-secondary-list-value",children:a.queryStats.perRequest.toFixed(1)})]})]})]}),e("div",{className:"ss-dash-secondary-card",children:[e("div",{className:"ss-dash-secondary-card-title",children:e("a",{href:"#logs?level=error",className:"ss-dash-widget-link",children:"Recent Errors"})}),a.recentErrors.length===0?e("div",{className:"ss-dash-empty",style:{minHeight:"60px"},children:"No recent errors"}):e("ul",{className:"ss-dash-secondary-list",children:a.recentErrors.map((y,b)=>e("li",{children:e("a",{href:`#logs?id=${y.id??""}`,className:"ss-dash-widget-row-link",children:[e("span",{style:{color:"var(--ss-red-fg)"},title:y.message,children:y.message}),y.timestamp&&e("span",{className:"ss-dash-secondary-list-value",style:{color:"var(--ss-dim)"},title:se(y.timestamp),children:ne(y.timestamp)})]})},b))})]}),e("div",{className:"ss-dash-secondary-card",children:[e("div",{className:"ss-dash-secondary-card-title",children:e("a",{href:"#events",className:"ss-dash-widget-link",children:"Top Events"})}),a.topEvents.length===0?e("div",{className:"ss-dash-empty",style:{minHeight:"60px"},children:"No events yet"}):e("ul",{className:"ss-dash-secondary-list",children:a.topEvents.slice(0,5).map((y,b)=>{const N=y.name||y.eventName||y.event_name||y.event||"";return e("li",{children:e("a",{href:`#events?event_name=${encodeURIComponent(N)}`,className:"ss-dash-widget-row-link",children:[e("span",{children:N}),e("span",{className:"ss-dash-secondary-list-value",children:y.count})]})},b)})})]}),e("div",{className:"ss-dash-secondary-card",children:[e("div",{className:"ss-dash-secondary-card-title",children:e("a",{href:"#emails",className:"ss-dash-widget-link",children:"Email Activity"})}),e("ul",{className:"ss-dash-secondary-list",children:[e("li",{children:e("a",{href:"#emails?status=sent",className:"ss-dash-widget-row-link",children:[e("span",{children:"Sent"}),e("span",{className:"ss-dash-secondary-list-value",children:a.emailActivity.sent})]})}),e("li",{children:e("a",{href:"#emails?status=queued",className:"ss-dash-widget-row-link",children:[e("span",{children:"Queued"}),e("span",{className:"ss-dash-secondary-list-value",children:a.emailActivity.queued})]})}),e("li",{children:e("a",{href:"#emails?status=failed",className:"ss-dash-widget-row-link",children:[e("span",{children:"Failed"}),e("span",{className:"ss-dash-secondary-list-value",style:a.emailActivity.failed>0?{color:"var(--ss-red-fg)"}:void 0,children:a.emailActivity.failed})]})})]})]}),e("div",{className:"ss-dash-secondary-card",children:[e("div",{className:"ss-dash-secondary-card-title",children:e("a",{href:"#logs",className:"ss-dash-widget-link",children:"Log Levels"})}),e("ul",{className:"ss-dash-secondary-list",children:[e("li",{children:e("a",{href:"#logs?level=error",className:"ss-dash-widget-row-link",children:[e("span",{style:{color:"var(--ss-red-fg)"},children:"Error"}),e("span",{className:"ss-dash-secondary-list-value",children:a.logLevelBreakdown.error})]})}),e("li",{children:e("a",{href:"#logs?level=warn",className:"ss-dash-widget-row-link",children:[e("span",{style:{color:"var(--ss-amber-fg)"},children:"Warn"}),e("span",{className:"ss-dash-secondary-list-value",children:a.logLevelBreakdown.warn})]})}),e("li",{children:e("a",{href:"#logs?level=info",className:"ss-dash-widget-row-link",children:[e("span",{style:{color:"var(--ss-green-fg)"},children:"Info"}),e("span",{className:"ss-dash-secondary-list-value",children:a.logLevelBreakdown.info})]})}),e("li",{children:e("a",{href:"#logs?level=debug",className:"ss-dash-widget-row-link",children:[e("span",{style:{color:"var(--ss-dim)"},children:"Debug"}),e("span",{className:"ss-dash-secondary-list-value",children:a.logLevelBreakdown.debug})]})})]})]}),a.cacheStats&&a.cacheStats.available&&e("div",{className:"ss-dash-secondary-card",children:[e("div",{className:"ss-dash-secondary-card-title",children:e("a",{href:"#cache",className:"ss-dash-widget-link",children:"Cache"})}),e("ul",{className:"ss-dash-secondary-list",children:[e("li",{children:e("a",{href:"#cache",className:"ss-dash-widget-row-link",children:[e("span",{children:"Keys"}),e("span",{className:"ss-dash-secondary-list-value",children:a.cacheStats.totalKeys})]})}),e("li",{children:e("a",{href:"#cache",className:"ss-dash-widget-row-link",children:[e("span",{children:"Hit Rate"}),e("span",{className:"ss-dash-secondary-list-value",children:[a.cacheStats.hitRate.toFixed(1),"%"]})]})}),e("li",{children:e("a",{href:"#cache",className:"ss-dash-widget-row-link",children:[e("span",{children:"Memory"}),e("span",{className:"ss-dash-secondary-list-value",children:a.cacheStats.memoryUsedHuman})]})})]})]}),a.jobQueueStatus&&a.jobQueueStatus.available&&e("div",{className:"ss-dash-secondary-card",children:[e("div",{className:"ss-dash-secondary-card-title",children:e("a",{href:"#jobs",className:"ss-dash-widget-link",children:"Job Queue"})}),e("ul",{className:"ss-dash-secondary-list",children:[e("li",{children:e("a",{href:"#jobs?status=active",className:"ss-dash-widget-row-link",children:[e("span",{children:"Active"}),e("span",{className:"ss-dash-secondary-list-value",children:a.jobQueueStatus.active})]})}),e("li",{children:e("a",{href:"#jobs?status=waiting",className:"ss-dash-widget-row-link",children:[e("span",{children:"Waiting"}),e("span",{className:"ss-dash-secondary-list-value",children:a.jobQueueStatus.waiting})]})}),e("li",{children:e("a",{href:"#jobs?status=failed",className:"ss-dash-widget-row-link",children:[e("span",{children:"Failed"}),e("span",{className:"ss-dash-secondary-list-value",style:a.jobQueueStatus.failed>0?{color:"var(--ss-red-fg)"}:void 0,children:a.jobQueueStatus.failed})]})}),e("li",{children:e("a",{href:"#jobs?status=completed",className:"ss-dash-widget-row-link",children:[e("span",{children:"Completed"}),e("span",{className:"ss-dash-secondary-list-value",children:a.jobQueueStatus.completed})]})})]})]}),e("div",{className:"ss-dash-secondary-card",children:[e("div",{className:"ss-dash-secondary-card-title",children:e("a",{href:"#requests",className:"ss-dash-widget-link",children:"Response Status"})}),e("ul",{className:"ss-dash-secondary-list",children:[e("li",{children:e("a",{href:"#requests?status=2xx",className:"ss-dash-widget-row-link",children:[e("span",{style:{color:"var(--ss-green-fg)"},children:"2xx"}),e("span",{className:"ss-dash-secondary-list-value",children:a.statusDistribution["2xx"]})]})}),e("li",{children:e("a",{href:"#requests?status=3xx",className:"ss-dash-widget-row-link",children:[e("span",{style:{color:"var(--ss-blue-fg)"},children:"3xx"}),e("span",{className:"ss-dash-secondary-list-value",children:a.statusDistribution["3xx"]})]})}),e("li",{children:e("a",{href:"#requests?status=4xx",className:"ss-dash-widget-row-link",children:[e("span",{style:{color:"var(--ss-amber-fg)"},children:"4xx"}),e("span",{className:"ss-dash-secondary-list-value",children:a.statusDistribution["4xx"]})]})}),e("li",{children:e("a",{href:"#requests?status=5xx",className:"ss-dash-widget-row-link",children:[e("span",{style:{color:"var(--ss-red-fg)"},children:"5xx"}),e("span",{className:"ss-dash-secondary-list-value",children:a.statusDistribution["5xx"]})]})})]})]}),e("div",{className:"ss-dash-secondary-card",children:[e("div",{className:"ss-dash-secondary-card-title",children:e("a",{href:"#queries",className:"ss-dash-widget-link",children:"Slowest Queries"})}),a.slowestQueries.length===0?e("div",{className:"ss-dash-empty",style:{minHeight:"60px"},children:"No query data yet"}):e("ul",{className:"ss-dash-secondary-list",children:a.slowestQueries.slice(0,5).map((y,b)=>{const N=y.sqlNormalized||y.normalizedSql||y.sql_normalized||y.sql||"-";return e("li",{children:e("a",{href:`#queries?pattern=${encodeURIComponent(N)}`,className:"ss-dash-widget-row-link",children:[e("span",{title:N,children:N}),e("span",{className:`ss-dash-secondary-list-value ss-dash-duration ${Wt(y.avgDuration)}`,children:ce(y.avgDuration)})]})},b)})})]})]})]})}const Pn=Object.freeze(Object.defineProperty({__proto__:null,OverviewSection:Ht,default:Ht},Symbol.toStringTag,{value:"Module"}));function qn({color:t="muted",children:s,className:n="",classPrefix:r="ss-dash"}){return e("span",{className:`${r}-badge ${r}-badge-${t} ${n}`,children:s})}function me({method:t,className:s="",classPrefix:n="ss-dash"}){return e("span",{className:`${n}-method ${n}-method-${t.toLowerCase()} ${s}`,children:t})}function Ee({code:t,className:s="",classPrefix:n="ss-dash"}){let r=`${n}-status-2xx`;return t>=500?r=`${n}-status-5xx`:t>=400?r=`${n}-status-4xx`:t>=300&&(r=`${n}-status-3xx`),e("span",{className:`${n}-status ${r} ${s}`,children:t})}const Mn="ss-col-resize",Vt="ss-resizing";function Rn(t){const s=Array.from(t.querySelectorAll("thead th"));if(s.length===0)return()=>{};const n=[];let r=!1;function o(){if(!r){r=!0;for(const l of s)l.style.width=l.offsetWidth+"px";t.style.tableLayout="fixed"}}for(const l of s){let a=function(h){h.preventDefault(),h.stopPropagation(),o();const d=h.clientX,u=l.offsetWidth;i.classList.add(Vt),i.setPointerCapture(h.pointerId);function c(p){const f=p.clientX-d,g=Math.max(30,u+f);l.style.width=g+"px"}function v(){i.classList.remove(Vt),i.removeEventListener("pointermove",c),i.removeEventListener("pointerup",v)}i.addEventListener("pointermove",c),i.addEventListener("pointerup",v)};if(!l.textContent?.trim())continue;const i=document.createElement("div");i.className=Mn,l.appendChild(i),i.addEventListener("pointerdown",a),n.push(()=>{i.removeEventListener("pointerdown",a),i.remove()})}return()=>{for(const l of n)l()}}function Z({columns:t,data:s,keyField:n="id",sort:r,sortDir:o,onSort:l,onRowClick:a,rowClassName:i,emptyMessage:h="No data",className:d="",renderAfterRow:u}){const c=P(p=>{l&&l(p)},[l]),v=W(null);return V(()=>{if(v.current)return Rn(v.current)},[s,t]),s.length===0?e("div",{className:"ss-dash-empty",children:h}):e("table",{ref:v,className:`ss-dash-table ${d}`,children:[e("colgroup",{children:t.map(p=>e("col",{style:p.width?{width:p.width}:void 0},p.key))}),e("thead",{children:e("tr",{children:t.map(p=>e("th",{onClick:p.sortable?()=>c(p.key):void 0,className:p.sortable?"ss-dash-sortable":"",children:[p.label,r===p.key&&e("span",{className:"ss-dash-sort-arrow",children:o==="asc"?" ▲":" ▼"})]},p.key))})}),e("tbody",{children:s.map((p,f)=>{const g=i?typeof i=="function"?i(p):i:"",x=a?"ss-dash-clickable":"";return e(Is.Fragment,{children:[e("tr",{onClick:a?()=>a(p):void 0,className:`${x} ${g}`.trim(),children:t.map(S=>e("td",{children:S.render?S.render(p[S.key],p):p[S.key]??"-"},S.key))}),u?u(p,f):null]},p[n]??f)})})]})}function ee({search:t,onSearchChange:s,placeholder:n="Search...",summary:r,children:o,className:l=""}){const a=P(()=>{s("")},[s]);return e("div",{className:`ss-dash-filter-bar ${l}`,children:[r!=null&&e("span",{className:"ss-dash-summary",children:r}),e("div",{className:"ss-dash-search-wrapper",children:[e("svg",{className:"ss-dash-search-icon",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e("circle",{cx:"11",cy:"11",r:"8"}),e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),e("input",{type:"text",className:"ss-dash-search",placeholder:n,value:t,onChange:i=>s(i.target.value)}),t&&e("button",{type:"button",className:"ss-dash-search-clear",onClick:a,children:"×"})]}),o&&e("div",{className:"ss-dash-filter-controls",children:o})]})}function le({page:t,lastPage:s,total:n,onPageChange:r,className:o=""}){const l=z(()=>Gs(t,s),[t,s]),a=P(()=>{t>1&&r(t-1)},[t,r]),i=P(()=>{t<s&&r(t+1)},[t,s,r]);return s<=1?null:e("div",{className:`ss-dash-pagination ${o}`,children:[e("span",{className:"ss-dash-page-info",children:["Page ",t," of ",s," (",n," total)"]}),e("div",{className:"ss-dash-pagination-controls",children:[e("button",{type:"button",className:"ss-dash-page-btn",onClick:a,disabled:t<=1,children:"« Prev"}),l.map((h,d)=>h==="..."?e("span",{className:"ss-dash-page-ellipsis",children:"..."},`ellipsis-${d}`):e("button",{type:"button",className:`ss-dash-page-btn ${h===t?"ss-dash-active":""}`,onClick:()=>r(h),children:h},h)),e("button",{type:"button",className:"ss-dash-page-btn",onClick:i,disabled:t>=s,children:"Next »"})]})]})}const Kt={request:"#1e3a5f",middleware:"rgba(30, 58, 95, 0.7)",db:"#6d28d9",view:"#0e7490",mail:"#059669",event:"#b45309",custom:"var(--ss-dim)"},Dn={request:"Request",middleware:"Middleware",db:"DB",mail:"Mail",event:"Event",view:"View",custom:"Custom"};function Qt({spans:t,totalDuration:s,className:n="",warnings:r}){const o=t||[],l=z(()=>[...o].sort((i,h)=>i.startOffset-h.startOffset),[o]),a=z(()=>{const i={};for(const h of l)i[h.id]=h.parentId?(i[h.parentId]||0)+1:0;return i},[l]);return o.length===0?e("div",{className:"ss-dash-empty",children:"No spans recorded"}):e("div",{className:`ss-dash-tl-waterfall ${n}`,children:[e("div",{className:"ss-dash-tl-legend",children:Object.entries(Dn).map(([i,h])=>e("div",{className:"ss-dash-tl-legend-item",children:[e("span",{className:"ss-dash-tl-legend-dot",style:{background:Kt[i]||Kt.custom}}),e("span",{children:h})]},i))}),l.map(i=>{const h=s>0?i.startOffset/s*100:0,d=s>0?Math.max(i.duration/s*100,.5):1,u=a[i.id]||0,c=i.label.length>50?i.label.slice(0,50)+"...":i.label,v=i.category==="db"?"DB":i.category,p=i.category==="db"?"purple":i.category==="mail"?"green":i.category==="event"?"amber":i.category==="view"?"blue":"muted",f=i.metadata?Object.entries(i.metadata).filter(([,x])=>x!=null).map(([x,S])=>`${x}=${S}`).join(", "):"",g=f?`${i.label} (${i.duration.toFixed(2)}ms)
${f}`:`${i.label} (${i.duration.toFixed(2)}ms)`;return e("div",{className:"ss-dash-tl-row",children:[e("div",{className:"ss-dash-tl-label",title:g,style:{paddingLeft:8+u*16+"px"},children:[e("span",{className:`ss-dash-badge ss-dash-badge-${p}`,style:{fontSize:"9px",marginRight:"4px"},children:v}),c]}),e("div",{className:"ss-dash-tl-track",children:e("div",{className:`ss-dash-tl-bar ss-dash-tl-bar-${i.category||"custom"}`,style:{left:`${h}%`,width:`${d}%`},title:g})}),e("span",{className:"ss-dash-tl-dur",children:[i.duration.toFixed(2),"ms"]})]},i.id)}),r&&r.length>0&&e("div",{className:"ss-dash-tl-warnings",children:[e("div",{className:"ss-dash-tl-warnings-title",children:["Warnings (",r.length,")"]}),r.map((i,h)=>e("div",{className:"ss-dash-tl-warning",children:i},h))]})]})}function Jt({options:t={}}){const[s,n]=k(1),[r,o]=k(""),[l,a]=k("createdAt"),[i,h]=k("desc"),[d,u]=k(null),[c,v]=k(!1);V(()=>n(1),[r]);const{data:p,meta:f,isLoading:g,error:x}=Q("requests",{...t,page:s,search:r,sort:l,sortDir:i}),S=W(null),w=P(()=>(S.current||(S.current=new pe({baseUrl:t.baseUrl||"",authToken:t.authToken})),S.current),[t.baseUrl,t.authToken]),y=P($=>{const C=$.id;v(!0);const T=t.dashboardEndpoint||"/__stats/api";w().fetch(`${T}/requests/${C}`).then(M=>{u(M),v(!1)}).catch(()=>{v(!1)})},[w,t.dashboardEndpoint]),b=P($=>{l===$?h(C=>C==="asc"?"desc":"asc"):(a($),h("desc"))},[l]),N=p||[];if(d){let $=d.spans;if(typeof $=="string")try{$=JSON.parse($)}catch{$=[]}const C=Array.isArray($)?$:[];let T=d.warnings;if(typeof T=="string")try{T=JSON.parse(T)}catch{T=[]}const M=Array.isArray(T)?T:[],F=d.status_code||d.statusCode||0,R=d.total_duration||d.totalDuration||d.duration||0,L=d.span_count||d.spanCount||0;return e("div",{children:[e("div",{className:"ss-dash-tl-detail-header",children:[e("button",{type:"button",className:"ss-dash-btn",onClick:()=>u(null),children:"← Back to Requests"}),e(me,{method:d.method||""}),e("span",{style:{color:"var(--ss-text)"},children:d.url}),e(Ee,{code:F}),e("span",{className:"ss-dash-tl-meta",children:[R.toFixed(1),"ms · ",L," spans"]})]}),e(Qt,{spans:C,totalDuration:R,warnings:M})]})}return c?e("div",{children:[e("div",{className:"ss-dash-tl-detail-header",children:e("button",{type:"button",className:"ss-dash-btn",onClick:()=>v(!1),children:"← Back to Requests"})}),e("div",{className:"ss-dash-empty",children:"Loading request detail..."})]}):e("div",{children:[e(ee,{search:r,onSearchChange:o,placeholder:"Filter requests...",summary:`${f?.total??0} requests`}),x&&e("div",{className:"ss-dash-empty",children:"Failed to load requests"}),g&&!p?e("div",{className:"ss-dash-empty",children:"Loading requests..."}):e(j,{children:[e("div",{className:"ss-dash-table-wrap",children:e(Z,{columns:[{key:"id",label:"#",width:"40px",render:$=>e("span",{style:{color:"var(--ss-dim)"},children:$})},{key:"method",label:"Method",width:"70px",sortable:!0,render:$=>e(me,{method:$})},{key:"url",label:"URL",sortable:!0,render:$=>e("span",{style:{color:"var(--ss-text)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:$,children:$})},{key:"statusCode",label:"Status",width:"60px",sortable:!0,render:($,C)=>{const T=C.status_code||C.statusCode||C.statusCode;return e(Ee,{code:T})}},{key:"duration",label:"Duration",width:"80px",sortable:!0,render:($,C)=>{const T=C.total_duration||C.totalDuration||C.duration||0;return e("span",{className:`ss-dash-duration ${T>500?"ss-dash-very-slow":T>100?"ss-dash-slow":""}`,children:[T.toFixed(1),"ms"]})}},{key:"spanCount",label:"Spans",width:"50px",render:($,C)=>{const T=C.span_count||C.spanCount||0;return e("span",{style:{color:"var(--ss-muted)",textAlign:"center"},children:T})}},{key:"warningCount",label:"⚠",width:"40px",render:($,C)=>{const T=C.warning_count||C.warningCount||0;return T>0?e("span",{style:{color:"var(--ss-amber-fg)",textAlign:"center",display:"block"},children:T}):e("span",{style:{color:"var(--ss-dim)",textAlign:"center",display:"block"},children:"-"})}},{key:"createdAt",label:"Time",width:"80px",sortable:!0,render:($,C)=>{const T=C.createdAt||C.created_at||C.timestamp||"";return e("span",{className:"ss-dash-event-time",title:se(T),children:ne(T)})}}],data:N,sort:l,sortDir:i,onSort:b,onRowClick:y,emptyMessage:"No requests recorded yet"})}),f&&e(le,{page:f.page,lastPage:f.lastPage,total:f.total,onPageChange:n})]})]})}const On=Object.freeze(Object.defineProperty({__proto__:null,RequestsSection:Jt,default:Jt},Symbol.toStringTag,{value:"Module"}));function Gt({node:t,depth:s=0}){if(!t)return null;const n=s*20,r=t["Node Type"]||"Unknown",o=t["Relation Name"]?e(j,{children:[" on ",e("strong",{children:t["Relation Name"]})]}):null,l=t.Alias&&t.Alias!==t["Relation Name"]?` (${t.Alias})`:"",a=t["Index Name"]?e(j,{children:[" using ",e("em",{children:t["Index Name"]})]}):null,i=[];if(t["Startup Cost"]!==null&&t["Startup Cost"]!==void 0&&i.push(`cost=${t["Startup Cost"]}..${t["Total Cost"]}`),t["Plan Rows"]!==null&&t["Plan Rows"]!==void 0&&i.push(`rows=${t["Plan Rows"]}`),t["Plan Width"]!==null&&t["Plan Width"]!==void 0&&i.push(`width=${t["Plan Width"]}`),t.Filter&&i.push(`filter: ${t.Filter}`),t["Index Cond"]&&i.push(`cond: ${t["Index Cond"]}`),t["Hash Cond"]&&i.push(`hash: ${t["Hash Cond"]}`),t["Join Type"]&&i.push(`join: ${t["Join Type"]}`),t["Sort Key"]){const d=Array.isArray(t["Sort Key"])?t["Sort Key"].join(", "):t["Sort Key"];i.push(`sort: ${d}`)}const h=t.Plans||[];return e("div",{className:"ss-dash-explain-node",style:{marginLeft:`${n}px`},children:[e("div",{className:"ss-dash-explain-node-header",children:[e("span",{className:"ss-dash-explain-node-type",children:r}),o,l,a]}),i.length>0&&e("div",{className:"ss-dash-explain-metrics",children:i.join(" · ")}),h.map((d,u)=>e(Gt,{node:d,depth:s+1},u))]})}function jn({plan:t}){if(!t||!Array.isArray(t)||t.length===0)return e("div",{className:"ss-dash-explain-result",children:"No plan data returned"});const s=t[0];if(s&&s.Plan)return e("div",{className:"ss-dash-explain-result",children:e(Gt,{node:s.Plan,depth:0})});if(typeof s=="object"&&s!==null){const n=Object.keys(s);return e("div",{className:"ss-dash-explain-result",children:e("table",{children:[e("thead",{children:e("tr",{children:n.map(r=>e("th",{children:r},r))})}),e("tbody",{children:t.map((r,o)=>{const l=r;return e("tr",{children:n.map(a=>e("td",{children:l[a]!==null&&l[a]!==void 0?String(l[a]):"-"},a))},o)})})]})})}return e("div",{className:"ss-dash-explain-result",children:"No plan data returned"})}const Fn=8;function Xt({options:t={}}){const[s,n]=k(1),[r,o]=k(""),[l,a]=k("createdAt"),[i,h]=k("desc"),[d,u]=k("list"),[c,v]=k(null),[p,f]=k(null),[g,x]=k(null),S=P(m=>{m!==d&&(u(m),n(1),a(m==="list"?"createdAt":"count"),h("desc"),v(null),f(null),x(null))},[d]);V(()=>n(1),[r]);const w=d==="grouped"?"queries/grouped":"queries",{data:y,meta:b,isLoading:N,mutate:$}=Q(w,{...t,page:s,search:r,sort:l,sortDir:i}),C=P(m=>{l===m?h(_=>_==="asc"?"desc":"asc"):(a(m),h("desc"))},[l]),T=P(async m=>{if(p&&p.queryId===m){f(null);return}x(m);try{const _=await $(`queries/${m}/explain`);_&&_.error?f({queryId:m,plan:[],error:_.error,message:_.message}):f({queryId:m,plan:_?.plan||_?.rows||[]})}catch(_){console.warn("[ss] Query explain failed:",_),f({queryId:m,plan:[],error:_ instanceof Error?_.message:String(_)})}finally{x(null)}},[$,p]),M=P(m=>{const _=m.id;return!p||p.queryId!==_?null:e("tr",{className:"ss-dash-explain-row",children:e("td",{colSpan:Fn,className:"ss-dash-explain",children:e("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[e("div",{style:{flex:1},children:p.error?e("div",{className:"ss-dash-explain-result ss-dash-explain-error",children:[e("strong",{children:"Error:"})," ",p.error,p.message&&e(j,{children:[e("br",{}),p.message]})]}):e(jn,{plan:p.plan})}),e("button",{type:"button",className:"ss-dash-explain-btn",onClick:()=>f(null),style:{marginLeft:"8px",flexShrink:0},children:"Close"})]})})})},[p]),F=d==="grouped"?y?.groups||[]:y||[],R=z(()=>d!=="grouped"?F:F.map(m=>{const _={...m};return(_.sqlNormalized===null||_.sqlNormalized===void 0)&&(m.sql_normalized||m.pattern)&&(_.sqlNormalized=m.sql_normalized||m.pattern||""),(_.count===null||_.count===void 0)&&m.total_count!==null&&m.total_count!==void 0&&(_.count=m.total_count),(_.avgDuration===null||_.avgDuration===void 0)&&m.avg_duration!==null&&m.avg_duration!==void 0&&(_.avgDuration=m.avg_duration),(_.maxDuration===null||_.maxDuration===void 0)&&m.max_duration!==null&&m.max_duration!==void 0&&(_.maxDuration=m.max_duration),(_.minDuration===null||_.minDuration===void 0)&&m.min_duration!==null&&m.min_duration!==void 0&&(_.minDuration=m.min_duration),(_.totalDuration===null||_.totalDuration===void 0)&&m.total_duration!==null&&m.total_duration!==void 0&&(_.totalDuration=m.total_duration),(_.percentOfTotal===null||_.percentOfTotal===void 0)&&m.pct_time!==null&&m.pct_time!==void 0&&(_.percentOfTotal=m.pct_time),_}),[F,d]),L=z(()=>{const m=b?.total??R.length;let _=0,E=0,A=0,D=0;for(const H of R){const te=H.duration||0;A+=te,D++,te>100&&_++}const U=new Map;for(const H of R){const te=H.sqlNormalized||H.sql||H.sql_text||"";U.set(te,(U.get(te)||0)+1)}for(const H of U.values())H>1&&(E+=H);return{total:m,slow:_,duplicates:E,avgDuration:D>0?A/D:0}},[R,b]),O=z(()=>{const m=new Map;for(const _ of R){const E=_.sqlNormalized||_.sql||_.sql_text||"";m.set(E,(m.get(E)||0)+1)}return m},[R]),G=z(()=>{if(d==="grouped")return`${R.length} query patterns`;const m=[`${L.total} queries`];return L.slow>0&&m.push(`${L.slow} slow`),L.duplicates>0&&m.push(`${L.duplicates} dup`),m.push(`avg ${(L.avgDuration||0).toFixed(1)}ms`),m.join(", ")},[d,R.length,L]);return e("div",{children:[e(ee,{search:r,onSearchChange:o,placeholder:"Filter queries...",summary:G,children:e("div",{className:"ss-dash-btn-group",children:[e("button",{type:"button",className:`ss-dash-btn ${d==="list"?"ss-dash-active":""}`,onClick:()=>S("list"),children:"List"}),e("button",{type:"button",className:`ss-dash-btn ${d==="grouped"?"ss-dash-active":""}`,onClick:()=>S("grouped"),children:"Grouped"})]})}),N&&!y?e("div",{className:"ss-dash-empty",children:"Loading queries..."}):d==="grouped"?e(j,{children:e("div",{className:"ss-dash-table-wrap",children:e(Z,{columns:[{key:"sqlNormalized",label:"Pattern",render:(m,_)=>{const E=m||"",A=(_.count||0)>=3;return e(j,{children:[e("span",{className:`ss-dash-sql ${c===E?"ss-dash-expanded":""}`,title:"Click to expand",onClick:D=>{D.stopPropagation(),v(c===E?null:E)},role:"button",tabIndex:0,onKeyDown:D=>D.key==="Enter"&&v(c===E?null:E),children:E}),A&&e(j,{children:[" ",e("span",{className:"ss-dash-dup",children:"DUP"})]})]})}},{key:"count",label:"Count",width:"60px",sortable:!0,render:m=>e("span",{style:{color:"var(--ss-muted)",textAlign:"center",display:"block"},children:m||0})},{key:"avgDuration",label:"Avg",width:"70px",sortable:!0,render:m=>{const _=m||0;return e("span",{className:`ss-dash-duration ${_>500?"ss-dash-very-slow":_>100?"ss-dash-slow":""}`,children:_.toFixed(2)+"ms"})}},{key:"minDuration",label:"Min",width:"70px",render:m=>e("span",{className:"ss-dash-duration",children:(m||0).toFixed(2)+"ms"})},{key:"maxDuration",label:"Max",width:"70px",render:m=>{const _=m||0;return e("span",{className:`ss-dash-duration ${_>500?"ss-dash-very-slow":_>100?"ss-dash-slow":""}`,children:_.toFixed(2)+"ms"})}},{key:"totalDuration",label:"Total",width:"70px",sortable:!0,render:m=>e("span",{className:"ss-dash-duration",children:(m||0).toFixed(1)+"ms"})},{key:"percentOfTotal",label:"% Time",width:"60px",render:m=>e("span",{style:{color:"var(--ss-muted)",textAlign:"center",display:"block"},children:(m||0).toFixed(1)+"%"})}],data:R,keyField:"sqlNormalized",sort:l,sortDir:i,onSort:C,emptyMessage:"No queries recorded"})})}):e(j,{children:[e("div",{className:"ss-dash-table-wrap",children:e(Z,{columns:[{key:"id",label:"#",width:"40px",render:m=>e("span",{style:{color:"var(--ss-dim)"},children:m})},{key:"sql",label:"SQL",render:(m,_)=>{const E=_.sql||_.sql_text||"";return e("div",{children:[e("span",{className:`ss-dash-sql ${c===_.id?"ss-dash-expanded":""}`,title:"Click to expand",onClick:A=>{A.stopPropagation(),v(c===_.id?null:_.id)},role:"button",tabIndex:0,onKeyDown:A=>A.key==="Enter"&&v(c===_.id?null:_.id),children:E}),(O.get((_.sqlNormalized||_.sql||_.sql_text)??"")??0)>1&&e("span",{className:"ss-dash-dup",children:["×",O.get((_.sqlNormalized||_.sql||_.sql_text)??"")]})]})}},{key:"duration",label:"Duration",width:"70px",sortable:!0,render:m=>{const _=m||0;return e("span",{className:`ss-dash-duration ${_>500?"ss-dash-very-slow":_>100?"ss-dash-slow":""}`,children:_.toFixed(2)+"ms"})}},{key:"method",label:"Method",width:"60px",render:(m,_)=>{const E=_.method||_.sql_method||"";return e("span",{className:`ss-dash-method ss-dash-method-${E.toLowerCase()}`,children:E})}},{key:"model",label:"Model",width:"90px",render:m=>e("span",{style:{color:"var(--ss-muted)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:m,children:m||"-"})},{key:"connection",label:"Connection",width:"80px",render:m=>e("span",{style:{color:"var(--ss-dim)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:m||"-"})},{key:"createdAt",label:"Time",width:"90px",sortable:!0,render:(m,_)=>{const E=m||_.created_at||_.timestamp||"";return e("span",{className:"ss-dash-event-time",title:se(E),children:ne(E)})}},{key:"id",label:"",width:"70px",render:(m,_)=>{if((_.method||_.sql_method||"")!=="select")return null;const A=p?.queryId===_.id&&!p?.error;return e("button",{type:"button",className:`ss-dash-explain-btn${A?" ss-dash-explain-btn-active":""}`,onClick:D=>{D.stopPropagation(),T(_.id)},disabled:g===_.id,children:g===_.id?"...":"EXPLAIN"})}}],data:R,sort:l,sortDir:i,onSort:C,emptyMessage:"No queries recorded",renderAfterRow:M})}),b&&e(le,{page:b.page,lastPage:b.lastPage,total:b.total,onPageChange:n})]})]})}const In=Object.freeze(Object.defineProperty({__proto__:null,QueriesSection:Xt,default:Xt},Symbol.toStringTag,{value:"Module"}));function Ke({data:t,maxPreviewLength:s=100,className:n="",classPrefix:r="ss-dash"}){const[o,l]=k(!1),a=z(()=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},[t]),i=z(()=>typeof a=="object"&&a!==null?Ve(a,s):String(a??"-"),[a,s]),h=z(()=>typeof a=="object"&&a!==null?JSON.stringify(a,null,2):String(a),[a]),d=P(()=>{l(c=>!c)},[]),u=P(async()=>{try{await navigator.clipboard.writeText(h)}catch{}},[h]);return!t&&t!==0&&t!==!1?e("span",{className:`ss-dim ${r}-c-dim`,children:"-"}):e("div",{className:`${r}-data-cell ${n}`,children:[e("span",{className:`${r}-data-preview`,onClick:d,role:"button",tabIndex:0,onKeyDown:c=>c.key==="Enter"&&d(),children:i}),o&&e("div",{className:`${r}-data-full`,onClick:d,children:[e("button",{className:`${r}-copy-btn`,onClick:c=>{c.stopPropagation(),u()},title:"Copy to clipboard",type:"button",children:"Copy"}),e("pre",{children:h})]})]})}function Yt({options:t={}}){const[s,n]=k(1),[r,o]=k(""),{data:l,meta:a,isLoading:i}=Q("events",{...t,page:s,search:r}),h=l||[];return V(()=>n(1),[r]),e("div",{children:[e(ee,{search:r,onSearchChange:o,placeholder:"Filter events...",summary:`${a?.total??0} events`}),i&&!l?e("div",{className:"ss-dash-empty",children:"Loading events..."}):e(j,{children:[e("div",{className:"ss-dash-table-wrap",children:e(Z,{columns:[{key:"id",label:"#",width:"40px",render:d=>e("span",{style:{color:"var(--ss-dim)"},children:d})},{key:"eventName",label:"Event",render:(d,u)=>{const c=u.event_name||u.eventName||u.event||"";return e("span",{className:"ss-dash-event-name",title:c,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:c})}},{key:"data",label:"Data",render:d=>e(Ke,{data:d,maxPreviewLength:80,className:"ss-dash-event-data"})},{key:"createdAt",label:"Time",width:"80px",render:(d,u)=>{const c=u.createdAt||u.created_at||u.timestamp;return e("span",{className:"ss-dash-event-time",title:se(c),children:ne(c)})}}],data:h,emptyMessage:"No events recorded yet"})}),a&&e(le,{page:a.page,lastPage:a.lastPage,total:a.total,onPageChange:n})]})]})}const Un=Object.freeze(Object.defineProperty({__proto__:null,EventsSection:Yt,default:Yt},Symbol.toStringTag,{value:"Module"}));function Zt({options:t={}}){const[s,n]=k(""),{data:r,isLoading:o,error:l}=Q("routes",{...t,search:s}),a=r,i=Array.isArray(a)?a:a&&Array.isArray(a.routes)?a.routes:a&&Array.isArray(a.data)?a.data:[],h={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"};return e("div",{children:[e(ee,{search:s,onSearchChange:n,placeholder:"Filter routes...",summary:`${i.length} routes`}),l?e("div",{className:"ss-dash-empty",children:"Failed to load routes"}):o&&!r?e("div",{className:"ss-dash-empty",children:"Loading routes..."}):e(j,{children:e("div",{className:"ss-dash-table-wrap",children:e(Z,{columns:[{key:"method",label:"Method",width:"70px",render:d=>e(me,{method:d})},{key:"pattern",label:"Pattern",render:d=>e("span",{style:{color:"var(--ss-text)",...h},title:d,children:d})},{key:"name",label:"Name",width:"120px",render:d=>e("span",{style:{color:"var(--ss-muted)",...h},title:d||"-",children:d||"-"})},{key:"handler",label:"Handler",render:d=>e("span",{style:{color:"var(--ss-sql-color)",...h},title:d,children:d})},{key:"middleware",label:"Middleware",render:d=>{const u=d?.length?d.join(", "):"-";return e("span",{style:{color:"var(--ss-dim)",fontSize:"10px",...h},title:u,children:u})}}],data:i,keyField:"pattern",emptyMessage:"No routes available"})})})]})}const Bn=Object.freeze(Object.defineProperty({__proto__:null,RoutesSection:Zt,default:Zt},Symbol.toStringTag,{value:"Module"})),zn=["all","error","warn","info","debug"];function es({options:t={}}){const[s,n]=k(1),[r,o]=k(""),[l,a]=k("all"),[i,h]=k(""),[d,u]=k(""),[c,v]=k([]),[p,f]=k("level"),[g,x]=k("equals"),[S,w]=k(""),y={};l!=="all"&&(y.level=l),i&&(y.request_id=i),c.forEach((m,_)=>{y[`filter_field_${_}`]=m.field,y[`filter_op_${_}`]=m.operator,y[`filter_value_${_}`]=m.value});const{data:b,meta:N,isLoading:$}=Q("logs",{...t,page:s,search:r,filters:y}),C=b||[],T=P(m=>{h(m),u(m),n(1)},[]),M=P(()=>{const m=d.trim();h(m),n(1)},[d]),F=P(()=>{h(""),u(""),n(1)},[]),R=P(()=>{a("all"),n(1)},[]),L=P(()=>{const m=S.trim();m&&(v(_=>[..._,{field:p,operator:g,value:m}]),w(""))},[p,g,S]),O=P(m=>{v(_=>_.filter((E,A)=>A!==m))},[]),G=l!=="all"||i!==""||c.length>0;return e("div",{children:[e(ee,{search:r,onSearchChange:o,placeholder:"Search logs...",summary:`${N?.total??0} logs`,children:e("div",{className:"ss-dash-log-filters",children:[zn.map(m=>e("button",{type:"button",className:`ss-dash-log-filter ${l===m?"ss-dash-active":""}`,onClick:()=>{a(m),n(1)},children:m},m)),e("input",{type:"text",className:"ss-dash-filter-input ss-dash-reqid-input",placeholder:"Filter by request ID...",value:d,onChange:m=>u(m.target.value),onKeyDown:m=>m.key==="Enter"&&M()}),(d||i)&&e("button",{type:"button",className:"ss-dash-btn ss-dash-reqid-clear",onClick:()=>{F()},children:"Clear"})]})}),e("div",{className:"ss-dash-structured-search",children:[e("select",{className:"ss-dash-filter-select",value:p,onChange:m=>f(m.target.value),children:[e("option",{value:"level",children:"level"}),e("option",{value:"message",children:"message"}),e("option",{value:"request_id",children:"request_id"}),e("option",{value:"userId",children:"userId"}),e("option",{value:"email",children:"email"}),e("option",{value:"path",children:"path"})]}),e("select",{className:"ss-dash-filter-select",value:g,onChange:m=>x(m.target.value),children:[e("option",{value:"equals",children:"equals"}),e("option",{value:"contains",children:"contains"}),e("option",{value:"starts_with",children:"starts with"})]}),e("input",{className:"ss-dash-filter-input",placeholder:"Value...",value:S,onChange:m=>w(m.target.value),onKeyDown:m=>m.key==="Enter"&&L()}),e("button",{type:"button",className:"ss-dash-btn",onClick:L,children:"Add"})]}),G&&e("div",{className:"ss-dash-filter-chips",children:[l!=="all"&&e("span",{className:"ss-dash-filter-chip",children:["level: ",l,e("button",{type:"button",className:"ss-dash-filter-chip-remove",onClick:R,children:"×"})]}),i&&e("span",{className:"ss-dash-filter-chip",children:["requestId: ",i.slice(0,8),"...",e("button",{type:"button",className:"ss-dash-filter-chip-remove",onClick:F,children:"×"})]}),c.map((m,_)=>e("span",{className:"ss-dash-filter-chip",children:[m.field," ",m.operator,' "',m.value,'"',e("button",{type:"button",className:"ss-dash-filter-chip-remove",onClick:()=>O(_),children:"×"})]},_))]}),$&&!b?e("div",{className:"ss-dash-empty",children:"Loading logs..."}):C.length===0?e("div",{className:"ss-dash-empty",children:["No log entries",i?` matching request ${i}`:l!=="all"?` for ${l}`:""]}):e("div",{className:"ss-dash-log-entries",children:C.map((m,_)=>{const E=(m.level||m.levelName||m.level_name||"info").toLowerCase(),A=m.message||m.msg||"",D=m.data||{},U=m.requestId||m.request_id||m["x-request-id"]||D.requestId||D.request_id||D["x-request-id"]||"",H=m.createdAt||m.created_at||m.time||m.timestamp||0;return e("div",{className:"ss-dash-log-entry",children:[e("span",{className:`ss-dash-log-level ss-dash-log-level-${E}`,children:E.toUpperCase()}),e("span",{className:"ss-dash-log-time",title:H?se(H):"",children:H?ne(H):"-"}),U?e("span",{className:"ss-dash-log-reqid",title:U,onClick:()=>T(U),role:"button",tabIndex:0,onKeyDown:te=>te.key==="Enter"&&T(U),children:U.slice(0,8)}):e("span",{className:"ss-dash-log-reqid-empty",children:"--"}),e("span",{className:"ss-dash-log-msg",children:A})]},m.id||_)})}),N&&e(le,{page:N.page,lastPage:N.lastPage,total:N.total,onPageChange:n})]})}const Wn=Object.freeze(Object.defineProperty({__proto__:null,LogsSection:es,default:es},Symbol.toStringTag,{value:"Module"}));function ts({options:t={}}){const[s,n]=k(1),[r,o]=k(""),[l,a]=k(null),[i,h]=k(null),{data:d,meta:u,isLoading:c}=Q("emails",{...t,page:s,search:r}),v=d||[];V(()=>n(1),[r]);const p=P(async f=>{if(f.html){a(f.id),h(f.html);return}try{const{baseUrl:g="",dashboardEndpoint:x="/__stats/api",authToken:S}=t,w=`${g}${x}/emails/${f.id}/preview`,y={Accept:"text/html"};S&&(y.Authorization=`Bearer ${S}`);const N=await(await fetch(w,{headers:y,credentials:"same-origin"})).text();a(f.id),h(N)}catch{}},[t]);if(l&&i){const f=v.find(g=>g.id===l);return e("div",{className:"ss-dash-email-preview",id:"ss-dash-email-preview",children:[e("div",{className:"ss-dash-email-preview-header",children:[e("div",{className:"ss-dash-email-preview-meta",id:"ss-dash-email-preview-meta",children:f&&e(j,{children:[e("strong",{children:"Subject:"})," ",f.subject,"  |  ",e("strong",{children:"From:"})," ",f.from_addr||f.from,"  |  ",e("strong",{children:"To:"})," ",f.to_addr||f.to,(f.cc||f.cc_addr)&&e(j,{children:["  |  ",e("strong",{children:"CC:"})," ",f.cc||f.cc_addr]}),"  |  ",e("strong",{children:"Status:"})," ",e("span",{className:`ss-dash-badge ss-dash-email-status-${f.status}`,children:f.status}),f.mailer&&e(j,{children:["  |  ",e("strong",{children:"Mailer:"})," ",f.mailer]})]})}),e("button",{type:"button",className:"ss-dash-btn",id:"ss-dash-email-preview-close",onClick:()=>{a(null),h(null)},children:"Close"})]}),e("iframe",{className:"ss-dash-email-iframe",id:"ss-dash-email-iframe",srcDoc:i,title:"Email preview",sandbox:""})]})}return e("div",{children:[e(ee,{search:r,onSearchChange:o,placeholder:"Filter emails...",summary:`${u?.total??0} emails`}),c&&!d?e("div",{className:"ss-dash-empty",children:"Loading emails..."}):e(j,{children:[e("div",{className:"ss-dash-table-wrap",children:e(Z,{columns:[{key:"id",label:"#",width:"40px",render:f=>e("span",{style:{color:"var(--ss-dim)"},children:f})},{key:"from",label:"From",width:"150px",render:(f,g)=>{const x=g.from_addr||g.from||"";return e("span",{title:x,style:{color:"var(--ss-text-secondary)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:x})}},{key:"to",label:"To",width:"150px",render:(f,g)=>{const x=g.to_addr||g.to||"";return e("span",{title:x,style:{color:"var(--ss-text-secondary)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:x})}},{key:"subject",label:"Subject",render:f=>{const g=f||"";return e("span",{title:g,style:{color:"var(--ss-sql-color)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:g})}},{key:"status",label:"Status",width:"80px",render:f=>{const g=f||"";return e("span",{className:`ss-dash-badge ss-dash-email-status-${g}`,children:g})}},{key:"attachmentCount",label:"ATT",width:"40px",render:(f,g)=>{const x=g.attachment_count||g.attachmentCount||0;return x>0?e("span",{style:{color:"var(--ss-dim)",textAlign:"center",display:"block"},children:x}):e("span",{style:{color:"var(--ss-dim)",textAlign:"center",display:"block"},children:"-"})}},{key:"mailer",label:"Mailer",width:"70px",render:f=>{const g=f||"";return e("span",{title:g,style:{color:"var(--ss-muted)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:g})}},{key:"createdAt",label:"Time",width:"80px",render:(f,g)=>{const x=g.createdAt||g.created_at||g.timestamp;return e("span",{className:"ss-dash-event-time",style:{whiteSpace:"nowrap"},title:se(x),children:ne(x)})}}],data:v,onRowClick:p,rowClassName:"ss-dash-email-row",emptyMessage:"No emails captured yet"})}),u&&e(le,{page:u.page,lastPage:u.lastPage,total:u.total,onPageChange:n})]})]})}const Hn=Object.freeze(Object.defineProperty({__proto__:null,EmailsSection:ts,default:ts},Symbol.toStringTag,{value:"Module"}));function ss({options:t={},tracingEnabled:s=!0}){const[n,r]=k(1),[o,l]=k(""),[a,i]=k(null),[h,d]=k(null),[u,c]=k(!1),{data:v,meta:p,isLoading:f,error:g}=Q("traces",{...t,page:n,search:o}),x=v||[],S=W(null),w=P(()=>(S.current||(S.current=new pe({baseUrl:t.baseUrl||"",authToken:t.authToken})),S.current),[t.baseUrl,t.authToken]);V(()=>{if(!a){d(null);return}let b=!1;c(!0);const N=t.dashboardEndpoint||"/__stats/api";return w().fetch(`${N}/traces/${a}`).then($=>{b||(d($),c(!1))}).catch(()=>{b||c(!1)}),()=>{b=!0}},[a,w,t.dashboardEndpoint]);const y=P(()=>i(null),[]);if(!s)return e("div",{className:"ss-dash-empty",children:"Tracing is not enabled. Enable tracing in your server-stats config to use the timeline."});if(a&&h){let b=h.spans;if(typeof b=="string")try{b=JSON.parse(b)}catch{b=[]}const N=Array.isArray(b)?b:[];let $=h.warnings;if(typeof $=="string")try{$=JSON.parse($)}catch{$=[]}const C=Array.isArray($)?$:[],T=h.total_duration||h.totalDuration||0,M=h.spanCount??N.length;return e("div",{children:[e("div",{className:"ss-dash-tl-detail-header",children:[e("button",{type:"button",className:"ss-dash-btn",onClick:y,children:"← Back"}),e(me,{method:h.method||""}),e("span",{style:{color:"var(--ss-text)"},children:h.url}),e(Ee,{code:h.status_code||h.statusCode||0}),e("span",{className:"ss-dash-tl-meta",children:[T.toFixed(1),"ms · ",M," spans"]})]}),e(Qt,{spans:N,totalDuration:T,warnings:C})]})}return a&&u?e("div",{children:[e("div",{className:"ss-dash-tl-detail-header",children:e("button",{type:"button",className:"ss-dash-btn",onClick:y,children:"← Back"})}),e("div",{className:"ss-dash-empty",children:"Loading trace detail..."})]}):e("div",{children:[e(ee,{search:o,onSearchChange:l,placeholder:"Filter traces...",summary:`${p?.total??0} traces`}),g&&e("div",{className:"ss-dash-empty",children:"Failed to load traces"}),f&&!v?e("div",{className:"ss-dash-empty",children:"Loading traces..."}):e(j,{children:[e("div",{className:"ss-dash-table-wrap",children:e(Z,{columns:[{key:"id",label:"#",width:"40px",render:b=>e("span",{style:{color:"var(--ss-dim)"},children:b})},{key:"method",label:"Method",width:"70px",render:b=>e(me,{method:b})},{key:"url",label:"URL",render:b=>e("span",{style:{color:"var(--ss-text)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:b,children:b})},{key:"statusCode",label:"Status",width:"60px",render:b=>e(Ee,{code:b})},{key:"totalDuration",label:"Duration",width:"80px",render:b=>e("span",{className:`ss-dash-duration ${b>500?"ss-dash-very-slow":b>100?"ss-dash-slow":""}`,children:[b.toFixed(1),"ms"]})},{key:"spanCount",label:"Spans",width:"50px",render:b=>e("span",{style:{color:"var(--ss-muted)",textAlign:"center"},children:b})},{key:"createdAt",label:"Time",width:"80px",render:b=>e("span",{className:"ss-dash-event-time",title:se(b),children:ne(b)})}],data:x,onRowClick:b=>i(b.id),emptyMessage:"No traces recorded"})}),p&&e(le,{page:p.page,lastPage:p.lastPage,total:p.total,onPageChange:r})]})]})}const Vn=Object.freeze(Object.defineProperty({__proto__:null,TimelineSection:ss,default:ss},Symbol.toStringTag,{value:"Module"}));function ns({options:t={}}){const[s,n]=k(""),[r,o]=k(null),[l,a]=k(null),[i,h]=k(!1),[d,u]=k(null),{data:c,isLoading:v,mutate:p,getApi:f}=Q("cache",{...t,search:s}),g=c,x=P(async w=>{if(confirm(`Delete cache key "${w}"?`))try{await p(`cache/${encodeURIComponent(w)}`,"delete"),r===w&&(o(null),a(null),u(null))}catch{}},[p,r]),S=P(async w=>{if(r===w){o(null),a(null),u(null);return}o(w),a(null),u(null),h(!0);try{const b=await f().fetchCacheKey(w);a(b.value!==void 0?b.value:b.data!==void 0?b.data:b),u(null)}catch{a(null),u("Failed to fetch key value")}finally{h(!1)}},[r,f]);return e("div",{children:[g?.available&&g?.stats&&e("div",{className:"ss-dash-cache-stats",children:[e("div",{className:"ss-dash-cache-stat",children:[e("span",{className:"ss-dash-cache-stat-label",children:"Hit Rate:"}),e("span",{className:"ss-dash-cache-stat-value",children:[(g.stats.hitRate??0).toFixed(1),"%"]})]}),e("div",{className:"ss-dash-cache-stat",children:[e("span",{className:"ss-dash-cache-stat-label",children:"Hits:"}),e("span",{className:"ss-dash-cache-stat-value",children:g.stats.hits??0})]}),e("div",{className:"ss-dash-cache-stat",children:[e("span",{className:"ss-dash-cache-stat-label",children:"Misses:"}),e("span",{className:"ss-dash-cache-stat-value",children:g.stats.misses??0})]}),e("div",{className:"ss-dash-cache-stat",children:[e("span",{className:"ss-dash-cache-stat-label",children:"Keys:"}),e("span",{className:"ss-dash-cache-stat-value",children:g.stats.totalKeys||g.stats.keyCount||g.keys?.length||0})]})]}),e(ee,{search:s,onSearchChange:n,placeholder:"Filter cache keys...",summary:`${(g?.keys||g?.data||[]).length} keys`}),v&&!c?e("div",{className:"ss-dash-empty",children:"Loading cache..."}):!g||!g.available?e("div",{className:"ss-dash-empty",children:"Cache inspector not available"}):e("div",{className:"ss-dash-table-wrap",children:e(Z,{columns:[{key:"key",label:"Key",render:w=>e("span",{title:w,style:{color:"var(--ss-sql-color)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:w})},{key:"type",label:"Type",width:"70px",render:w=>e("span",{style:{color:"var(--ss-muted)"},children:w})},{key:"size",label:"Size",width:"60px",render:w=>w!=null?w+"B":"-"},{key:"ttl",label:"TTL",width:"70px",render:w=>w>0?`${w}s`:"-"},{key:"_actions",label:"",width:"60px",render:(w,y)=>e("button",{type:"button",className:"ss-dash-retry-btn",onClick:b=>{b.stopPropagation(),x(y.key)},children:"Delete"})}],data:g.keys||g.data||[],keyField:"key",onRowClick:w=>S(w.key),emptyMessage:"No cache keys found"})}),r&&e("div",{className:"ss-dash-cache-detail",children:[e("h4",{children:["Key: ",r]}),i?e("div",{className:"ss-dash-empty",children:"Loading value..."}):d?e("div",{className:"ss-dash-empty",style:{color:"var(--ss-red-fg)"},children:d}):e(Ke,{data:l})]})]})}const Kn=Object.freeze(Object.defineProperty({__proto__:null,CacheSection:ns,default:ns},Symbol.toStringTag,{value:"Module"})),Qn=["all","active","waiting","delayed","completed","failed"];function rs({options:t={}}){const[s,n]=k(1),[r,o]=k(""),[l,a]=k("all"),[i,h]=k({}),d={};l!=="all"&&(d.status=l);const{data:u,meta:c,isLoading:v,error:p,refresh:f,mutate:g}=Q("jobs",{...t,page:s,search:r,filters:d}),x=u,S=(x&&!Array.isArray(x)?x.jobs:Array.isArray(x)?x:null)||[],w=x&&!Array.isArray(x)?x.stats||x.overview:void 0,y=P(async N=>{h($=>({...$,[N]:"pending"}));try{await g(`jobs/${N}/retry`),h($=>({...$,[N]:"success"})),setTimeout(()=>{h($=>{const C={...$};return delete C[N],C}),f()},1e3)}catch{h($=>{const C={...$};return delete C[N],C})}},[g,f]),b={active:"blue",waiting:"amber",delayed:"purple",completed:"green",failed:"red"};return e("div",{children:[w&&e("div",{className:"ss-dash-job-stats",children:[e("div",{className:"ss-dash-job-stat",children:[e("span",{className:"ss-dash-job-stat-label",children:"Active:"}),e("span",{className:"ss-dash-job-stat-value",children:w.active??0})]}),e("div",{className:"ss-dash-job-stat",children:[e("span",{className:"ss-dash-job-stat-label",children:"Waiting:"}),e("span",{className:"ss-dash-job-stat-value",children:w.waiting??0})]}),e("div",{className:"ss-dash-job-stat",children:[e("span",{className:"ss-dash-job-stat-label",children:"Delayed:"}),e("span",{className:"ss-dash-job-stat-value",children:w.delayed??0})]}),e("div",{className:"ss-dash-job-stat",children:[e("span",{className:"ss-dash-job-stat-label",children:"Completed:"}),e("span",{className:"ss-dash-job-stat-value",children:w.completed??0})]}),e("div",{className:"ss-dash-job-stat",children:[e("span",{className:"ss-dash-job-stat-label",children:"Failed:"}),e("span",{className:"ss-dash-job-stat-value",style:{color:"var(--ss-red-fg)"},children:w.failed??0})]})]}),e(ee,{search:r,onSearchChange:o,placeholder:"Filter jobs...",summary:`${c?.total??S.length} jobs`,children:e("div",{className:"ss-dash-btn-group",children:Qn.map(N=>e("button",{type:"button",className:`ss-dash-btn ${l===N?"ss-dash-active":""}`,onClick:()=>{a(N),n(1)},children:N.charAt(0).toUpperCase()+N.slice(1)},N))})}),v&&!u?e("div",{className:"ss-dash-empty",children:"Loading jobs..."}):p?e("div",{className:"ss-dash-empty",children:"Jobs/Queue not available"}):e(j,{children:[e("div",{className:"ss-dash-table-wrap",children:e(Z,{columns:[{key:"id",label:"ID",width:"40px",render:N=>e("span",{style:{color:"var(--ss-dim)"},children:N})},{key:"name",label:"Name",render:N=>e("span",{style:{color:"var(--ss-text)"},title:N,children:N})},{key:"status",label:"Status",width:"90px",render:N=>e(qn,{color:b[N]||"muted",children:N})},{key:"payload",label:"Payload",render:(N,$)=>e(Ke,{data:N||$?.data,maxPreviewLength:60})},{key:"attempts",label:"Tries",width:"50px",render:(N,$)=>e("span",{style:{color:"var(--ss-muted)",textAlign:"center",display:"block"},children:N||$.attemptsMade||0})},{key:"duration",label:"Duration",width:"75px",render:N=>e("span",{className:"ss-dash-duration",children:N!==null?ce(N):"-"})},{key:"timestamp",label:"Time",width:"70px",render:(N,$)=>{const C=N||$?.createdAt||$?.processedAt||$?.created_at;return e("span",{className:"ss-dash-event-time",style:{whiteSpace:"nowrap"},title:se(C),children:ne(C)})}},{key:"_actions",label:"",width:"50px",render:(N,$)=>{const C=$.id,T=i[C];return $.status!=="failed"?null:e("button",{type:"button",className:"ss-dash-retry-btn",disabled:T==="pending"||T==="success",onClick:M=>{M.stopPropagation(),y(C)},children:T==="pending"?"...":T==="success"?"OK":"Retry"})}}],data:S,emptyMessage:"No jobs found"})}),c&&e(le,{page:c.page,lastPage:c.lastPage,total:c.total,onPageChange:n})]})]})}const Jn=Object.freeze(Object.defineProperty({__proto__:null,JobsSection:rs,default:rs},Symbol.toStringTag,{value:"Module"}));function K(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)&&t.__redacted===!0}function Qe(t,s){if(typeof t!="object"||t===null||t===void 0)return[{path:s,value:t}];if(Array.isArray(t)||K(t))return[{path:s,value:t}];const n=[];for(const r of Object.keys(t)){const o=s?`${s}.${r}`:r,l=t[r];typeof l=="object"&&l!==null&&!Array.isArray(l)&&!K(l)?n.push(...Qe(l,o)):n.push({path:o,value:l})}return n}function Je(t){return t==null?{text:"null",color:"var(--ss-dim)"}:typeof t=="boolean"?{text:String(t),color:t?"var(--ss-green-fg)":"var(--ss-red-fg)"}:typeof t=="number"?{text:String(t),color:"var(--ss-amber-fg)"}:Array.isArray(t)?{text:`[${t.map(n=>n==null?"null":typeof n=="object"?JSON.stringify(n):String(n)).join(", ")}]`,color:"var(--ss-purple-fg)"}:typeof t=="object"?{text:JSON.stringify(t),color:"var(--ss-dim)"}:{text:String(t)}}function as(t){if(t==null||typeof t!="object"||Array.isArray(t)||K(t))return 1;let s=0;for(const n of Object.keys(t))s+=as(t[n]);return s}function Gn(t){if(t==null||typeof t!="object"||Array.isArray(t)||K(t))return[];const s=[];for(const n of Object.keys(t)){const r=t[n];r!==null&&typeof r=="object"&&!Array.isArray(r)&&!K(r)&&s.push(n)}return s}function Ae(t,s,n){s&&navigator.clipboard.writeText(t).then(()=>{const r=s.textContent;s.textContent="✓",s.classList.add(`${n}-copy-row-ok`),setTimeout(()=>{s.textContent=r,s.classList.remove(`${n}-copy-row-ok`)},1200)}).catch(()=>{})}function Pe({redacted:t,p:s}){const[n,r]=k(!1);return e("span",{className:`${s}-config-redacted`,style:{display:"inline-flex",alignItems:"center",gap:"4px"},children:[e("span",{children:n?t.value:t.display}),e("button",{type:"button",className:`${s}-btn`,title:n?"Hide":"Reveal",style:{padding:"0 4px",fontSize:"0.85em",lineHeight:1,minWidth:"auto"},onClick:o=>{o.stopPropagation(),r(l=>!l)},children:n?e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94"}),e("path",{d:"M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19"}),e("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})]})})]})}function Xn({env:t,search:s,p:n}){const r=W(new Map),o=s.toLowerCase(),l=Object.entries(t).filter(([a,i])=>{if(!o)return!0;const h=K(i)?i.display:i==null?"":String(i);return a.toLowerCase().includes(o)||h.toLowerCase().includes(o)});return e("div",{className:`${n}-config-table-wrap`,children:e("table",{className:`${n}-table ${n}-config-env-table`,children:[e("thead",{children:e("tr",{children:[e("th",{children:"Variable"}),e("th",{children:"Value"}),e("th",{style:{width:36}})]})}),e("tbody",{children:[l.map(([a,i])=>{const h=K(i),d=h?i.display:i==null?"null":String(i),u=`${a}=${d}`;return e("tr",{children:[e("td",{className:`${n}-env-key`,children:e("span",{className:`${n}-config-key`,children:a})}),e("td",{className:`${n}-env-val`,children:h?e(Pe,{redacted:i,p:n}):e("span",{className:`${n}-config-val`,children:d})}),e("td",{children:!h&&e("button",{type:"button",className:`${n}-copy-row-btn`,title:"Copy",ref:c=>{r.current.set(a,c)},onClick:c=>{c.stopPropagation(),Ae(u,r.current.get(a)??null,n)},children:"⎘"})})]},a)}),l.length===0&&e("tr",{children:e("td",{colSpan:3,style:{textAlign:"center",color:"var(--ss-dim)"},children:"No matching variables"})})]})]})})}function Yn({source:t,search:s,p:n}){const r=W(new Map),o=s.toLowerCase(),l=Qe(t,""),a=l.filter(i=>{const h=K(i.value)?i.value.display:i.value===null||i.value===void 0?"":String(i.value);return i.path.toLowerCase().includes(o)||h.toLowerCase().includes(o)});return e("div",{className:`${n}-config-table-wrap`,children:[e("table",{className:`${n}-table`,children:[e("thead",{children:e("tr",{children:[e("th",{children:"Path"}),e("th",{children:"Value"}),e("th",{style:{width:36}})]})}),e("tbody",{children:[a.map(i=>{const h=K(i.value),d=h?null:Je(i.value),u=h?i.value.display:d.text,c=`${i.path}: ${u}`;return e("tr",{children:[e("td",{children:e("span",{className:`${n}-config-key`,style:{whiteSpace:"nowrap"},children:i.path})}),e("td",{children:h?e(Pe,{redacted:i.value,p:n}):e("span",{className:`${n}-config-val`,style:{wordBreak:"break-all",color:d.color},children:d.text})}),e("td",{children:!h&&e("button",{type:"button",className:`${n}-copy-row-btn`,title:"Copy",ref:v=>{r.current.set(i.path,v)},onClick:v=>{v.stopPropagation(),Ae(c,r.current.get(i.path)??null,n)},children:"⎘"})})]},i.path)}),a.length===0&&e("tr",{children:e("td",{colSpan:3,style:{textAlign:"center",color:"var(--ss-dim)"},children:"No matching entries"})})]})]}),e("div",{style:{padding:"4px 16px",fontSize:"10px",color:"var(--ss-muted)"},children:[a.length," of ",l.length," entries"]})]})}function Zn({obj:t,prefix:s,p:n}){const r=W(new Map),o=Qe(t,s);return e("table",{className:`${n}-table ${n}-config-inner-table`,children:[e("thead",{children:e("tr",{children:[e("th",{style:{width:"35%"},children:"Key"}),e("th",{children:"Value"}),e("th",{style:{width:36}})]})}),e("tbody",{children:o.map(l=>{const a=l.path.indexOf(s+".")===0?l.path.slice(s.length+1):l.path,i=K(l.value),h=i?null:Je(l.value),d=i?l.value.display:h.text,u=`${l.path}: ${d}`;return e("tr",{children:[e("td",{title:a,children:e("span",{className:`${n}-config-key`,children:a})}),e("td",{title:d,children:i?e(Pe,{redacted:l.value,p:n}):e("span",{className:`${n}-config-val`,style:{color:h.color},children:h.text})}),e("td",{children:!i&&e("button",{type:"button",className:`${n}-copy-row-btn`,title:"Copy",ref:c=>{r.current.set(l.path,c)},onClick:c=>{c.stopPropagation(),Ae(u,r.current.get(l.path)??null,n)},children:"⎘"})})]},l.path)})})]})}function er({value:t,p:s}){if(t==null)return e("span",{className:`${s}-config-val`,style:{color:"var(--ss-dim)"},children:"null"});if(K(t))return e(Pe,{redacted:t,p:s});if(typeof t=="boolean")return e("span",{className:`${s}-config-val`,style:{color:t?"var(--ss-green-fg)":"var(--ss-red-fg)"},children:String(t)});if(typeof t=="number")return e("span",{className:`${s}-config-val`,style:{color:"var(--ss-amber-fg)"},children:String(t)});if(Array.isArray(t)){const n=t.map(r=>r==null?"null":typeof r=="object"?JSON.stringify(r):String(r));return e("span",{className:`${s}-config-val`,style:{color:"var(--ss-purple-fg)"},children:["[",n.join(", "),"]"]})}return typeof t=="object"?e("span",{className:`${s}-config-val`,style:{color:"var(--ss-dim)"},children:JSON.stringify(t)}):e("span",{className:`${s}-config-val`,children:String(t)})}function tr({obj:t,expandedPaths:s,onToggle:n,p:r}){if(t==null||typeof t!="object"||Array.isArray(t)||K(t))return null;const o=Object.keys(t),l=W(new Map);return e("div",{className:`${r}-config-sections`,children:o.map(a=>{const i=t[a],h=i!==null&&typeof i=="object"&&!Array.isArray(i)&&!K(i),d=s.has(a),u=K(i);return e("div",{className:`${r}-config-section`,children:[e("div",{className:`${r}-config-section-header${h?"":` ${r}-config-leaf`}`,onClick:h?()=>n(a):void 0,style:{cursor:h?"pointer":"default"},children:[h?e("span",{className:`${r}-config-toggle`,children:d?"▼":"▶"}):e("span",{className:`${r}-config-toggle`,style:{visibility:"hidden"},children:"•"}),e("span",{className:`${r}-config-key`,children:a}),h?e("span",{className:`${r}-config-count`,children:[as(i)," entries"]}):e(j,{children:[e("span",{className:`${r}-config-val`,style:{marginLeft:"8px"},children:e(er,{value:i,p:r})}),!u&&e("button",{type:"button",className:`${r}-copy-row-btn`,style:{marginLeft:"4px"},title:"Copy",ref:c=>{l.current.set(a,c)},onClick:c=>{c.stopPropagation();const v=Je(i);Ae(`${a}: ${v.text}`,l.current.get(a)??null,r)},children:"⎘"})]})]}),h&&d&&e("div",{className:`${r}-config-section-body`,children:e(Zn,{obj:i,prefix:a,p:r})})]},a)})})}function sr({data:t,isLoading:s,classPrefix:n}){const r=n,[o,l]=k(""),[a,i]=k(""),[h,d]=k("app"),[u,c]=k(new Set),[v,p]=k("Copy JSON");V(()=>{const y=setTimeout(()=>i(o),200);return()=>clearTimeout(y)},[o]);const f=t,g=P(y=>{c(b=>{const N=new Set(b);return N.has(y)?N.delete(y):N.add(y),N})},[]),x=P(()=>{if(!f)return;const y=h==="app"?f.app:f.env;if(!y)return;const b=Gn(y);c(new Set(b))},[f,h]),S=P(()=>{c(new Set)},[]),w=P(async()=>{if(f)try{const y=h==="app"?f.app:f.env;await navigator.clipboard.writeText(JSON.stringify(y,null,2)),p("Copied!"),setTimeout(()=>p("Copy JSON"),1500)}catch{}},[f,h]);return e("div",{children:[e("div",{className:`${r}-config-toolbar`,style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px"},children:[e("button",{type:"button",className:`${r}-config-tab${h==="app"?` ${r}-active`:""}`,onClick:()=>d("app"),children:"App Config"}),e("button",{type:"button",className:`${r}-config-tab${h==="env"?` ${r}-active`:""}`,onClick:()=>d("env"),children:"Env"}),e("div",{style:{position:"relative",flex:1},children:[e("input",{type:"text",className:`${r}-search`,placeholder:"Search keys and values...",value:o,onChange:y=>l(y.target.value),style:{width:"100%"}}),o&&e("button",{type:"button",onClick:()=>l(""),style:{position:"absolute",right:"6px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"14px",color:"var(--ss-dim)",padding:"0 2px",lineHeight:1},children:"×"})]}),h==="app"&&!a&&e(j,{children:[e("button",{type:"button",className:`${r}-btn`,onClick:x,children:"Expand All"}),e("button",{type:"button",className:`${r}-btn`,onClick:S,children:"Collapse All"})]}),e("button",{type:"button",className:`${r}-btn`,onClick:w,children:v})]}),s&&!t?e("div",{className:`${r}-empty`,children:"Loading config..."}):f?h==="env"?e(Xn,{env:f.env??{},search:a,p:r}):a?e(Yn,{source:f.app??{},search:a,p:r}):e("div",{className:`${r}-config-table-wrap`,children:e(tr,{obj:f.app,expandedPaths:u,onToggle:g,p:r})}):e("div",{className:`${r}-empty`,children:"Config not available"})]})}function ls({options:t={}}){const{data:s,isLoading:n}=Q("config",t);return e(sr,{data:s,isLoading:n,classPrefix:"ss-dash"})}const nr=Object.freeze(Object.defineProperty({__proto__:null,ConfigSection:ls,default:ls},Symbol.toStringTag,{value:"Module"})),rr=["password","secret","token","key","credential","auth"];function is(t){const s=t.toLowerCase();return rr.some(n=>s.includes(n))}function os(t){const s=Date.now()-t,n=Math.floor(s/1e3);if(n<60)return`${n}s ago`;const r=Math.floor(n/60);if(r<60)return`${r}m ago`;const o=Math.floor(r/60);return o<24?`${o}h ago`:`${Math.floor(o/24)}d ago`}function Ge(t){return t.toLocaleString()}function cs(t){return t<1e3?`${t}ms`:t<6e4?`${t/1e3}s`:t<36e5?`${t/6e4}m`:`${t/36e5}h`}function ar(t){if(!t&&t!==0)return"-";const s=Math.floor(t),n=Math.floor(s/86400),r=Math.floor(s%86400/3600),o=Math.floor(s%3600/60);return n>0?`${n}d ${r}h`:r>0?`${r}h ${o}m`:o>0?`${o}m ${s%60}s`:`${s}s`}function ds(t){if(t==null)return"-";if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")return String(t);if(Array.isArray(t))return t.join(", ")||"-";try{return JSON.stringify(t)}catch{return String(t)}}function fe({status:t,prefix:s}){let n=`${s}-dot`;return["healthy","active","connected","available","ready"].includes(t)?n+=` ${s}-dot-ok`:["errored","unavailable"].includes(t)&&(n+=` ${s}-dot-err`),e("span",{className:n})}const hs=()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})]}),us=()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94"}),e("path",{d:"M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19"}),e("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),e("path",{d:"M14.12 14.12a3 3 0 1 1-4.24-4.24"})]});function lr({value:t}){const[s,n]=k(!1);return e("span",{children:[s?t:"••••••••"," ",e("button",{type:"button",onClick:()=>n(r=>!r),style:{background:"none",border:"1px solid var(--ss-border)",borderRadius:3,padding:"0 4px",fontSize:"10px",color:"var(--ss-dim)",cursor:"pointer",verticalAlign:"middle"},children:s?e(us,{}):e(hs,{})})]})}function ir({current:t,max:s,prefix:n}){const r=s>0?Math.min(100,Math.round(t/s*100)):0,o=r>=100;return e("div",{className:`${n}-bar`,children:[e("div",{className:`${n}-bar-track`,children:e("div",{className:`${n}-bar-fill${o?` ${n}-bar-fill-warn`:""}`,style:{width:`${r}%`}})}),e("span",{className:`${n}-bar-pct${o?` ${n}-bar-pct-warn`:""}`,children:[r,"%"]})]})}function or({config:t,prefix:s}){const n=Object.entries(t);return n.length===0?e("span",{className:`${s}-c-dim`,children:"-"}):e("span",{className:`${s}-c-muted`,children:n.map(([r,o],l)=>e("span",{children:[l>0&&", ",e("span",{className:`${s}-c-dim`,children:r}),"=",is(r)&&typeof o=="string"?e(lr,{value:o}):e("span",{children:ds(o)})]},r))})}function qe({label:t,value:s,prefix:n}){return e("div",{className:`${n}-info-card`,children:[e("span",{className:`${n}-info-card-label`,children:t}),e("span",{className:`${n}-info-card-value`,children:s})]})}function cr({data:t,tableClassName:s,classPrefix:n}){const r=n||"ss-dash",[o,l]=k(new Set),a=P(u=>{l(c=>{const v=new Set(c);return v.has(u)?v.delete(u):v.add(u),v})},[]),i=P((u,c)=>{if(c==null)return e("span",{className:`${r}-c-dim`,children:"null"});if(typeof c=="boolean")return e("span",{className:c?`${r}-c-green`:`${r}-c-red`,children:String(c)});if(Array.isArray(c))return e("span",{children:c.join(", ")||"-"});const v=ds(c);if(is(u)){const p=o.has(u);return e("span",{children:[p?v:"••••••••"," ",e("button",{type:"button",onClick:()=>a(u),style:{background:"none",border:"1px solid var(--ss-border)",borderRadius:3,padding:"0 4px",fontSize:"10px",color:"var(--ss-dim)",cursor:"pointer",verticalAlign:"middle"},children:p?e(us,{}):e(hs,{})})]})}return e("span",{children:v})},[o,a,r]),h={collectionInterval:"Stats Collection",dashboardBroadcast:"Dashboard Broadcast",debugBroadcast:"Debug Broadcast",persistFlush:"Persist Flush",retentionCleanup:"Retention Cleanup"},d={prometheus:"Prometheus",pinoHook:"Pino Log Hook",edgePlugin:"Edge Plugin",cacheInspector:"Cache Inspector",queueInspector:"Queue Inspector"};return e("div",{children:[e("h3",{className:`${r}-internals-title`,children:"Package Info"}),e("div",{className:`${r}-info-cards`,children:[e(qe,{label:"Version",value:t.package.version||"-",prefix:r}),e(qe,{label:"Node.js",value:t.package.nodeVersion||"-",prefix:r}),e(qe,{label:"AdonisJS",value:t.package.adonisVersion||"-",prefix:r}),e(qe,{label:"Uptime",value:ar(t.package.uptime),prefix:r})]}),t.collectors.length>0&&e(j,{children:[e("h3",{className:`${r}-internals-title`,children:"Collectors"}),e("table",{className:s,children:[e("thead",{children:e("tr",{children:[e("th",{children:"Collector"}),e("th",{children:"Status"}),e("th",{children:"Last Error"}),e("th",{children:"Config"})]})}),e("tbody",{children:t.collectors.map(u=>e("tr",{children:[e("td",{children:[e("code",{children:u.name}),u.label&&u.label!==u.name&&e("span",{className:`${r}-c-dim`,children:[" ",u.label]})]}),e("td",{children:[e(fe,{status:u.status,prefix:r}),u.status]}),e("td",{className:u.lastError?`${r}-c-red`:`${r}-c-dim`,children:u.lastError?e(j,{children:[u.lastError,u.lastErrorAt&&e("span",{className:`${r}-c-dim`,style:{fontSize:"10px"},children:os(u.lastErrorAt)})]}):"-"}),e("td",{children:e(or,{config:u.config,prefix:r})})]},u.name))})]})]}),e("h3",{className:`${r}-internals-title`,children:"Buffers"}),e("table",{className:s,children:[e("thead",{children:e("tr",{children:[e("th",{children:"Buffer"}),e("th",{children:"Usage"}),e("th",{children:"Fill %"})]})}),e("tbody",{children:Object.entries(t.buffers).map(([u,c])=>e("tr",{children:[e("td",{style:{textTransform:"capitalize"},children:u}),e("td",{children:[Ge(c.current)," / ",Ge(c.max)]}),e("td",{children:e(ir,{current:c.current,max:c.max,prefix:r})})]},u))})]}),e("h3",{className:`${r}-internals-title`,children:"Timers"}),e("table",{className:s,children:[e("thead",{children:e("tr",{children:[e("th",{children:"Timer"}),e("th",{children:"Status"}),e("th",{children:"Interval"})]})}),e("tbody",{children:Object.entries(t.timers).map(([u,c])=>e("tr",{children:[e("td",{children:h[u]||u}),e("td",{children:[e(fe,{status:c.active?"active":"inactive",prefix:r}),e("span",{className:c.active?`${r}-c-green`:`${r}-c-dim`,children:c.active?"active":"inactive"})]}),e("td",{children:c.active?c.intervalMs?cs(c.intervalMs):c.debounceMs?`${cs(c.debounceMs)} (debounce)`:"-":e("span",{className:`${r}-c-dim`,children:"—"})})]},u))})]}),e("h3",{className:`${r}-internals-title`,children:"Integrations"}),e("table",{className:s,children:[e("thead",{children:e("tr",{children:[e("th",{children:"Integration"}),e("th",{children:"Status"}),e("th",{children:"Details"})]})}),e("tbody",{children:[e("tr",{children:[e("td",{children:"Transmit (SSE)"}),e("td",{children:[e(fe,{status:t.transmit.available?"connected":"inactive",prefix:r}),t.transmit.available?"connected":"unavailable"]}),e("td",{style:{fontSize:"11px"},children:t.transmit.channels.length>0?`Channels: ${t.transmit.channels.join(", ")}`:"-"})]}),Object.entries(t.integrations).map(([u,c])=>{const v=c.active??c.available??!1,p=c.active?"active":c.available?"available":"unavailable";let f=c.mode?`Mode: ${c.mode}`:"-";return u==="edgePlugin"&&c.active?f="@serverStats() tag registered":u==="cacheInspector"&&c.available?f="Redis dependency detected":u==="queueInspector"&&c.available&&(f="Queue dependency detected"),e("tr",{children:[e("td",{children:d[u]||u}),e("td",{children:[e(fe,{status:v?"active":"inactive",prefix:r}),p]}),e("td",{className:`${r}-c-dim`,style:{fontSize:"11px"},children:f})]},u)})]})]}),t.storage&&e(j,{children:[e("h3",{className:`${r}-internals-title`,children:"Storage (SQLite)"}),e("table",{className:s,children:[e("thead",{children:e("tr",{children:[e("th",{style:{width:"200px"},children:"Metric"}),e("th",{children:"Value"})]})}),e("tbody",{children:[e("tr",{children:[e("td",{children:"Status"}),e("td",{children:[e(fe,{status:t.storage.ready?"ready":"inactive",prefix:r}),t.storage.ready?"ready":"not ready"]})]}),e("tr",{children:[e("td",{children:"DB Path"}),e("td",{children:e("code",{children:t.storage.dbPath})})]}),e("tr",{children:[e("td",{children:"File Size"}),e("td",{children:[t.storage.fileSizeMb.toFixed(1)," MB"]})]}),e("tr",{children:[e("td",{children:"WAL Size"}),e("td",{children:[t.storage.walSizeMb.toFixed(1)," MB"]})]}),e("tr",{children:[e("td",{children:"Retention"}),e("td",{children:[t.storage.retentionDays," days"]})]}),e("tr",{children:[e("td",{children:"Last Cleanup"}),e("td",{children:t.storage.lastCleanupAt?os(t.storage.lastCleanupAt):"-"})]})]})]}),t.storage.tables.length>0&&e("table",{className:s,style:{marginTop:8},children:[e("thead",{children:e("tr",{children:[e("th",{children:"Table"}),e("th",{children:"Rows"})]})}),e("tbody",{children:t.storage.tables.map(u=>e("tr",{children:[e("td",{children:e("code",{children:u.name})}),e("td",{children:Ge(u.rowCount)})]},u.name))})]})]}),e("h3",{className:`${r}-internals-title`,children:"Resolved Config"}),e("table",{className:s,children:[e("thead",{children:e("tr",{children:[e("th",{style:{width:"200px"},children:"Setting"}),e("th",{children:"Value"})]})}),e("tbody",{children:[e("tr",{children:[e("td",{children:"intervalMs"}),e("td",{children:t.config.intervalMs})]}),e("tr",{children:[e("td",{children:"transport"}),e("td",{children:t.config.transport})]}),e("tr",{children:[e("td",{children:"channelName"}),e("td",{children:t.config.channelName})]}),e("tr",{children:[e("td",{children:"endpoint"}),e("td",{children:t.config.endpoint===!1?"false":t.config.endpoint})]}),e("tr",{children:[e("td",{children:"skipInTest"}),e("td",{children:i("skipInTest",t.config.skipInTest)})]}),e("tr",{children:[e("td",{children:"onStats callback"}),e("td",{children:t.config.hasOnStatsCallback?"defined":"not defined"})]}),e("tr",{children:[e("td",{children:"shouldShow callback"}),e("td",{children:t.config.hasShouldShowCallback?"defined":"not defined"})]})]})]}),e("h4",{className:`${r}-internals-title`,children:"DevToolbar"}),e("table",{className:s,children:[e("thead",{children:e("tr",{children:[e("th",{style:{width:"200px"},children:"Setting"}),e("th",{children:"Value"})]})}),e("tbody",{children:Object.entries(t.devToolbar).map(([u,c])=>e("tr",{children:[e("td",{children:u==="customPaneCount"?"customPanes":u}),e("td",{children:u==="customPaneCount"?`${c} registered`:i(u,c)})]},u))})]})]})}function ps({options:t={},debugEndpoint:s="/admin/api/debug"}){const{baseUrl:n="",authToken:r}=t,[o,l]=k(null),[a,i]=k(!0),[h,d]=k(null),u=W(null),c=W(null),v=P(()=>(u.current||(u.current=new pe({baseUrl:n,authToken:r})),u.current),[n,r]),p=P(async()=>{try{const g=await v().get(`${s}/diagnostics`);l(g),d(null),i(!1)}catch(f){if(f instanceof We){d(f),i(!1),c.current&&(clearInterval(c.current),c.current=null);return}d(f instanceof Error?f:new Error(String(f))),i(!1)}},[s,v]);return V(()=>(i(!0),d(null),p(),c.current=setInterval(p,Mt),()=>{c.current&&(clearInterval(c.current),c.current=null)}),[p]),a&&!o?e("div",{className:"ss-dash-empty",children:"Loading diagnostics..."}):h?e("div",{className:"ss-dash-empty",children:["Error: ",h.message]}):o?e(cr,{data:o,tableClassName:"ss-dash-table",classPrefix:"ss-dash"}):e("div",{className:"ss-dash-empty",children:"Diagnostics not available"})}const dr=Object.freeze(Object.defineProperty({__proto__:null,InternalsSection:ps,default:ps},Symbol.toStringTag,{value:"Module"}))})();
