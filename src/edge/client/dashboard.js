(function(){"use strict";var ve,P,Ye,re,Ze,et,tt,st,Re,De,je,ye={},ge=[],ys=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,he=Array.isArray;function Y(t,s){for(var n in s)t[n]=s[n];return t}function Oe(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function be(t,s,n){var a,o,l,r={};for(l in s)l=="key"?a=s[l]:l=="ref"?o=s[l]:r[l]=s[l];if(arguments.length>2&&(r.children=arguments.length>3?ve.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(l in t.defaultProps)r[l]===void 0&&(r[l]=t.defaultProps[l]);return we(t,r,a,o,null)}function we(t,s,n,a,o){var l={type:t,props:s,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++Ye,__i:-1,__u:0};return o==null&&P.vnode!=null&&P.vnode(l),l}function O(t){return t.children}function Z(t,s){this.props=t,this.context=s}function oe(t,s){if(s==null)return t.__?oe(t.__,t.__i+1):null;for(var n;s<t.__k.length;s++)if((n=t.__k[s])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?oe(t):null}function gs(t){if(t.__P&&t.__d){var s=t.__v,n=s.__e,a=[],o=[],l=Y({},s);l.__v=s.__v+1,P.vnode&&P.vnode(l),Fe(t.__P,l,s,t.__n,t.__P.namespaceURI,32&s.__u?[n]:null,a,n??oe(s),!!(32&s.__u),o),l.__v=s.__v,l.__.__k[l.__i]=l,ct(a,l,o),s.__e=s.__=null,l.__e!=n&&nt(l)}}function nt(t){if((t=t.__)!=null&&t.__c!=null)return t.__e=t.__c.base=null,t.__k.some(function(s){if(s!=null&&s.__e!=null)return t.__e=t.__c.base=s.__e}),nt(t)}function at(t){(!t.__d&&(t.__d=!0)&&re.push(t)&&!Ne.__r++||Ze!=P.debounceRendering)&&((Ze=P.debounceRendering)||et)(Ne)}function Ne(){for(var t,s=1;re.length;)re.length>s&&re.sort(tt),t=re.shift(),s=re.length,gs(t);Ne.__r=0}function rt(t,s,n,a,o,l,r,i,h,d,u){var c,v,p,f,g,x,S,w=a&&a.__k||ge,y=s.length;for(h=bs(n,s,w,h,y),c=0;c<y;c++)(p=n.__k[c])!=null&&(v=p.__i!=-1&&w[p.__i]||ye,p.__i=c,x=Fe(t,p,v,o,l,r,i,h,d,u),f=p.__e,p.ref&&v.ref!=p.ref&&(v.ref&&Be(v.ref,null,p),u.push(p.ref,p.__c||f,p)),g==null&&f!=null&&(g=f),(S=!!(4&p.__u))||v.__k===p.__k?h=lt(p,h,t,S):typeof p.type=="function"&&x!==void 0?h=x:f&&(h=f.nextSibling),p.__u&=-7);return n.__e=g,h}function bs(t,s,n,a,o){var l,r,i,h,d,u=n.length,c=u,v=0;for(t.__k=new Array(o),l=0;l<o;l++)(r=s[l])!=null&&typeof r!="boolean"&&typeof r!="function"?(typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?r=t.__k[l]=we(null,r,null,null,null):he(r)?r=t.__k[l]=we(O,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?r=t.__k[l]=we(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):t.__k[l]=r,h=l+v,r.__=t,r.__b=t.__b+1,i=null,(d=r.__i=ws(r,n,h,c))!=-1&&(c--,(i=n[d])&&(i.__u|=2)),i==null||i.__v==null?(d==-1&&(o>u?v--:o<u&&v++),typeof r.type!="function"&&(r.__u|=4)):d!=h&&(d==h-1?v--:d==h+1?v++:(d>h?v--:v++,r.__u|=4))):t.__k[l]=null;if(c)for(l=0;l<u;l++)(i=n[l])!=null&&(2&i.__u)==0&&(i.__e==a&&(a=oe(i)),ht(i,i));return a}function lt(t,s,n,a){var o,l;if(typeof t.type=="function"){for(o=t.__k,l=0;o&&l<o.length;l++)o[l]&&(o[l].__=t,s=lt(o[l],s,n,a));return s}t.__e!=s&&(a&&(s&&t.type&&!s.parentNode&&(s=oe(t)),n.insertBefore(t.__e,s||null)),s=t.__e);do s=s&&s.nextSibling;while(s!=null&&s.nodeType==8);return s}function xe(t,s){return s=s||[],t==null||typeof t=="boolean"||(he(t)?t.some(function(n){xe(n,s)}):s.push(t)),s}function ws(t,s,n,a){var o,l,r,i=t.key,h=t.type,d=s[n],u=d!=null&&(2&d.__u)==0;if(d===null&&i==null||u&&i==d.key&&h==d.type)return n;if(a>(u?1:0)){for(o=n-1,l=n+1;o>=0||l<s.length;)if((d=s[r=o>=0?o--:l++])!=null&&(2&d.__u)==0&&i==d.key&&h==d.type)return r}return-1}function it(t,s,n){s[0]=="-"?t.setProperty(s,n??""):t[s]=n==null?"":typeof n!="number"||ys.test(s)?n:n+"px"}function ke(t,s,n,a,o){var l,r;e:if(s=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof a=="string"&&(t.style.cssText=a=""),a)for(s in a)n&&s in n||it(t.style,s,"");if(n)for(s in n)a&&n[s]==a[s]||it(t.style,s,n[s])}else if(s[0]=="o"&&s[1]=="n")l=s!=(s=s.replace(st,"$1")),r=s.toLowerCase(),s=r in t||s=="onFocusOut"||s=="onFocusIn"?r.slice(2):s.slice(2),t.l||(t.l={}),t.l[s+l]=n,n?a?n.u=a.u:(n.u=Re,t.addEventListener(s,l?je:De,l)):t.removeEventListener(s,l?je:De,l);else{if(o=="http://www.w3.org/2000/svg")s=s.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(s!="width"&&s!="height"&&s!="href"&&s!="list"&&s!="form"&&s!="tabIndex"&&s!="download"&&s!="rowSpan"&&s!="colSpan"&&s!="role"&&s!="popover"&&s in t)try{t[s]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&s[4]!="-"?t.removeAttribute(s):t.setAttribute(s,s=="popover"&&n==1?"":n))}}function ot(t){return function(s){if(this.l){var n=this.l[s.type+t];if(s.t==null)s.t=Re++;else if(s.t<n.u)return;return n(P.event?P.event(s):s)}}}function Fe(t,s,n,a,o,l,r,i,h,d){var u,c,v,p,f,g,x,S,w,y,b,N,$,T,L,q=s.type;if(s.constructor!==void 0)return null;128&n.__u&&(h=!!(32&n.__u),l=[i=s.__e=n.__e]),(u=P.__b)&&u(s);e:if(typeof q=="function")try{if(S=s.props,w="prototype"in q&&q.prototype.render,y=(u=q.contextType)&&a[u.__c],b=u?y?y.props.value:u.__:a,n.__c?x=(c=s.__c=n.__c).__=c.__E:(w?s.__c=c=new q(S,b):(s.__c=c=new Z(S,b),c.constructor=q,c.render=xs),y&&y.sub(c),c.state||(c.state={}),c.__n=a,v=c.__d=!0,c.__h=[],c._sb=[]),w&&c.__s==null&&(c.__s=c.state),w&&q.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=Y({},c.__s)),Y(c.__s,q.getDerivedStateFromProps(S,c.__s))),p=c.props,f=c.state,c.__v=s,v)w&&q.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),w&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(w&&q.getDerivedStateFromProps==null&&S!==p&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(S,b),s.__v==n.__v||!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(S,c.__s,b)===!1){s.__v!=n.__v&&(c.props=S,c.state=c.__s,c.__d=!1),s.__e=n.__e,s.__k=n.__k,s.__k.some(function(I){I&&(I.__=s)}),ge.push.apply(c.__h,c._sb),c._sb=[],c.__h.length&&r.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(S,c.__s,b),w&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(p,f,g)})}if(c.context=b,c.props=S,c.__P=t,c.__e=!1,N=P.__r,$=0,w)c.state=c.__s,c.__d=!1,N&&N(s),u=c.render(c.props,c.state,c.context),ge.push.apply(c.__h,c._sb),c._sb=[];else do c.__d=!1,N&&N(s),u=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++$<25);c.state=c.__s,c.getChildContext!=null&&(a=Y(Y({},a),c.getChildContext())),w&&!v&&c.getSnapshotBeforeUpdate!=null&&(g=c.getSnapshotBeforeUpdate(p,f)),T=u!=null&&u.type===O&&u.key==null?dt(u.props.children):u,i=rt(t,he(T)?T:[T],s,n,a,o,l,r,i,h,d),c.base=s.__e,s.__u&=-161,c.__h.length&&r.push(c),x&&(c.__E=c.__=null)}catch(I){if(s.__v=null,h||l!=null)if(I.then){for(s.__u|=h?160:128;i&&i.nodeType==8&&i.nextSibling;)i=i.nextSibling;l[l.indexOf(i)]=null,s.__e=i}else{for(L=l.length;L--;)Oe(l[L]);Ie(s)}else s.__e=n.__e,s.__k=n.__k,I.then||Ie(s);P.__e(I,s,n)}else l==null&&s.__v==n.__v?(s.__k=n.__k,s.__e=n.__e):i=s.__e=Ns(n.__e,s,n,a,o,l,r,h,d);return(u=P.diffed)&&u(s),128&s.__u?void 0:i}function Ie(t){t&&(t.__c&&(t.__c.__e=!0),t.__k&&t.__k.some(Ie))}function ct(t,s,n){for(var a=0;a<n.length;a++)Be(n[a],n[++a],n[++a]);P.__c&&P.__c(s,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(l){l.call(o)})}catch(l){P.__e(l,o.__v)}})}function dt(t){return typeof t!="object"||t==null||t.__b>0?t:he(t)?t.map(dt):Y({},t)}function Ns(t,s,n,a,o,l,r,i,h){var d,u,c,v,p,f,g,x=n.props||ye,S=s.props,w=s.type;if(w=="svg"?o="http://www.w3.org/2000/svg":w=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),l!=null){for(d=0;d<l.length;d++)if((p=l[d])&&"setAttribute"in p==!!w&&(w?p.localName==w:p.nodeType==3)){t=p,l[d]=null;break}}if(t==null){if(w==null)return document.createTextNode(S);t=document.createElementNS(o,w,S.is&&S),i&&(P.__m&&P.__m(s,l),i=!1),l=null}if(w==null)x===S||i&&t.data==S||(t.data=S);else{if(l=l&&ve.call(t.childNodes),!i&&l!=null)for(x={},d=0;d<t.attributes.length;d++)x[(p=t.attributes[d]).name]=p.value;for(d in x)p=x[d],d=="dangerouslySetInnerHTML"?c=p:d=="children"||d in S||d=="value"&&"defaultValue"in S||d=="checked"&&"defaultChecked"in S||ke(t,d,null,p,o);for(d in S)p=S[d],d=="children"?v=p:d=="dangerouslySetInnerHTML"?u=p:d=="value"?f=p:d=="checked"?g=p:i&&typeof p!="function"||x[d]===p||ke(t,d,p,x[d],o);if(u)i||c&&(u.__html==c.__html||u.__html==t.innerHTML)||(t.innerHTML=u.__html),s.__k=[];else if(c&&(t.innerHTML=""),rt(s.type=="template"?t.content:t,he(v)?v:[v],s,n,a,w=="foreignObject"?"http://www.w3.org/1999/xhtml":o,l,r,l?l[0]:n.__k&&oe(n,0),i,h),l!=null)for(d=l.length;d--;)Oe(l[d]);i||(d="value",w=="progress"&&f==null?t.removeAttribute("value"):f!=null&&(f!==t[d]||w=="progress"&&!f||w=="option"&&f!=x[d])&&ke(t,d,f,x[d],o),d="checked",g!=null&&g!=t[d]&&ke(t,d,g,x[d],o))}return t}function Be(t,s,n){try{if(typeof t=="function"){var a=typeof t.__u=="function";a&&t.__u(),a&&s==null||(t.__u=t(s))}else t.current=s}catch(o){P.__e(o,n)}}function ht(t,s,n){var a,o;if(P.unmount&&P.unmount(t),(a=t.ref)&&(a.current&&a.current!=t.__e||Be(a,null,s)),(a=t.__c)!=null){if(a.componentWillUnmount)try{a.componentWillUnmount()}catch(l){P.__e(l,s)}a.base=a.__P=null}if(a=t.__k)for(o=0;o<a.length;o++)a[o]&&ht(a[o],s,n||typeof t.type!="function");n||Oe(t.__e),t.__c=t.__=t.__e=void 0}function xs(t,s,n){return this.constructor(t,n)}function ks(t,s,n){var a,o,l,r;s==document&&(s=document.documentElement),P.__&&P.__(t,s),o=(a=!1)?null:s.__k,l=[],r=[],Fe(s,t=s.__k=be(O,null,[t]),o||ye,ye,s.namespaceURI,o?null:s.firstChild?ve.call(s.childNodes):null,l,o?o.__e:s.firstChild,a,r),ct(l,t,r)}ve=ge.slice,P={__e:function(t,s,n,a){for(var o,l,r;s=s.__;)if((o=s.__c)&&!o.__)try{if((l=o.constructor)&&l.getDerivedStateFromError!=null&&(o.setState(l.getDerivedStateFromError(t)),r=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,a||{}),r=o.__d),r)return o.__E=o}catch(i){t=i}throw t}},Ye=0,Z.prototype.setState=function(t,s){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Y({},this.state),typeof t=="function"&&(t=t(Y({},n),this.props)),t&&Y(n,t),t!=null&&this.__v&&(s&&this._sb.push(s),at(this))},Z.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),at(this))},Z.prototype.render=O,re=[],et=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,tt=function(t,s){return t.__v.__b-s.__v.__b},Ne.__r=0,st=/(PointerCapture)$|Capture$/i,Re=0,De=ot(!1),je=ot(!0);var $s=0;function e(t,s,n,a,o,l){s||(s={});var r,i,h=s;if("ref"in h)for(i in h={},s)i=="ref"?r=s[i]:h[i]=s[i];var d={type:t,props:h,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--$s,__i:-1,__u:0,__source:o,__self:l};if(typeof t=="function"&&(r=t.defaultProps))for(i in r)h[i]===void 0&&(h[i]=r[i]);return P.vnode&&P.vnode(d),d}var ue,B,Ue,ut,pe=0,pt=[],H=P,mt=H.__b,ft=H.__r,_t=H.diffed,vt=H.__c,yt=H.unmount,gt=H.__;function He(t,s){H.__h&&H.__h(B,t,pe||s),pe=0;var n=B.__H||(B.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function k(t){return pe=1,Ss(Nt,t)}function Ss(t,s,n){var a=He(ue++,2);if(a.t=t,!a.__c&&(a.__=[n?n(s):Nt(void 0,s),function(i){var h=a.__N?a.__N[0]:a.__[0],d=a.t(h,i);h!==d&&(a.__N=[d,a.__[1]],a.__c.setState({}))}],a.__c=B,!B.__f)){var o=function(i,h,d){if(!a.__c.__H)return!0;var u=a.__c.__H.__.filter(function(v){return v.__c});if(u.every(function(v){return!v.__N}))return!l||l.call(this,i,h,d);var c=a.__c.props!==i;return u.some(function(v){if(v.__N){var p=v.__[0];v.__=v.__N,v.__N=void 0,p!==v.__[0]&&(c=!0)}}),l&&l.call(this,i,h,d)||c};B.__f=!0;var l=B.shouldComponentUpdate,r=B.componentWillUpdate;B.componentWillUpdate=function(i,h,d){if(this.__e){var u=l;l=void 0,o(i,h,d),l=u}r&&r.call(this,i,h,d)},B.shouldComponentUpdate=o}return a.__N||a.__}function K(t,s){var n=He(ue++,3);!H.__s&&wt(n.__H,s)&&(n.__=t,n.u=s,B.__H.__h.push(n))}function V(t){return pe=5,z(function(){return{current:t}},[])}function z(t,s){var n=He(ue++,7);return wt(n.__H,s)&&(n.__=t(),n.__H=s,n.__h=t),n.__}function M(t,s){return pe=8,z(function(){return t},s)}function Cs(){for(var t;t=pt.shift();){var s=t.__H;if(t.__P&&s)try{s.__h.some($e),s.__h.some(ze),s.__h=[]}catch(n){s.__h=[],H.__e(n,t.__v)}}}H.__b=function(t){B=null,mt&&mt(t)},H.__=function(t,s){t&&s.__k&&s.__k.__m&&(t.__m=s.__k.__m),gt&&gt(t,s)},H.__r=function(t){ft&&ft(t),ue=0;var s=(B=t.__c).__H;s&&(Ue===B?(s.__h=[],B.__h=[],s.__.some(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(s.__h.some($e),s.__h.some(ze),s.__h=[],ue=0)),Ue=B},H.diffed=function(t){_t&&_t(t);var s=t.__c;s&&s.__H&&(s.__H.__h.length&&(pt.push(s)!==1&&ut===H.requestAnimationFrame||((ut=H.requestAnimationFrame)||Ts)(Cs)),s.__H.__.some(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Ue=B=null},H.__c=function(t,s){s.some(function(n){try{n.__h.some($e),n.__h=n.__h.filter(function(a){return!a.__||ze(a)})}catch(a){s.some(function(o){o.__h&&(o.__h=[])}),s=[],H.__e(a,n.__v)}}),vt&&vt(t,s)},H.unmount=function(t){yt&&yt(t);var s,n=t.__c;n&&n.__H&&(n.__H.__.some(function(a){try{$e(a)}catch(o){s=o}}),n.__H=void 0,s&&H.__e(s,n.__v))};var bt=typeof requestAnimationFrame=="function";function Ts(t){var s,n=function(){clearTimeout(a),bt&&cancelAnimationFrame(s),setTimeout(t)},a=setTimeout(n,35);bt&&(s=requestAnimationFrame(n))}function $e(t){var s=B,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),B=s}function ze(t){var s=B;t.__c=t.__(),B=s}function wt(t,s){return!t||t.length!==s.length||s.some(function(n,a){return n!==t[a]})}function Nt(t,s){return typeof s=="function"?s(t):s}function Ls(t,s){for(var n in s)t[n]=s[n];return t}function xt(t,s){for(var n in t)if(n!=="__source"&&!(n in s))return!0;for(var a in s)if(a!=="__source"&&t[a]!==s[a])return!0;return!1}function kt(t,s){this.props=t,this.context=s}(kt.prototype=new Z).isPureReactComponent=!0,kt.prototype.shouldComponentUpdate=function(t,s){return xt(this.props,t)||xt(this.state,s)};var $t=P.__b;P.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),$t&&$t(t)};var Es=P.__e;P.__e=function(t,s,n,a){if(t.then){for(var o,l=s;l=l.__;)if((o=l.__c)&&o.__c)return s.__e==null&&(s.__e=n.__e,s.__k=n.__k),o.__c(t,s)}Es(t,s,n,a)};var St=P.unmount;function Ct(t,s,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(a){typeof a.__c=="function"&&a.__c()}),t.__c.__H=null),(t=Ls({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=s),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(a){return Ct(a,s,n)})),t}function Tt(t,s,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(a){return Tt(a,s,n)}),t.__c&&t.__c.__P===s&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function Se(){this.__u=0,this.o=null,this.__b=null}function Lt(t){if(!t.__)return null;var s=t.__.__c;return s&&s.__a&&s.__a(t)}function G(t){var s,n,a,o=null;function l(r){if(s||(s=t()).then(function(i){i&&(o=i.default||i),a=!0},function(i){n=i,a=!0}),n)throw n;if(!a)throw s;return o?be(o,r):null}return l.displayName="Lazy",l.__f=!0,l}function Ce(){this.i=null,this.l=null}P.unmount=function(t){var s=t.__c;s&&(s.__z=!0),s&&s.__R&&s.__R(),s&&32&t.__u&&(t.type=null),St&&St(t)},(Se.prototype=new Z).__c=function(t,s){var n=s.__c,a=this;a.o==null&&(a.o=[]),a.o.push(n);var o=Lt(a.__v),l=!1,r=function(){l||a.__z||(l=!0,n.__R=null,o?o(h):h())};n.__R=r;var i=n.__P;n.__P=null;var h=function(){if(!--a.__u){if(a.state.__a){var d=a.state.__a;a.__v.__k[0]=Tt(d,d.__c.__P,d.__c.__O)}var u;for(a.setState({__a:a.__b=null});u=a.o.pop();)u.__P=i,u.forceUpdate()}};a.__u++||32&s.__u||a.setState({__a:a.__b=a.__v.__k[0]}),t.then(r,r)},Se.prototype.componentWillUnmount=function(){this.o=[]},Se.prototype.render=function(t,s){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),a=this.__v.__k[0].__c;this.__v.__k[0]=Ct(this.__b,n,a.__O=a.__P)}this.__b=null}var o=s.__a&&be(O,null,t.fallback);return o&&(o.__u&=-33),[be(O,null,s.__a?null:t.children),o]};var Et=function(t,s,n){if(++n[1]===n[0]&&t.l.delete(s),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};(Ce.prototype=new Z).__a=function(t){var s=this,n=Lt(s.__v),a=s.l.get(t);return a[0]++,function(o){var l=function(){s.props.revealOrder?(a.push(o),Et(s,t,a)):o()};n?n(l):l()}},Ce.prototype.render=function(t){this.i=null,this.l=new Map;var s=xe(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&s.reverse();for(var n=s.length;n--;)this.l.set(s[n],this.i=[1,0,this.i]);return t.children},Ce.prototype.componentDidUpdate=Ce.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(s,n){Et(t,n,s)})};var As=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Ms=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ps=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,qs=/[A-Z0-9]/g,Rs=typeof document<"u",Ds=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};Z.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(Z.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(s){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:s})}})});var At=P.event;function js(){}function Os(){return this.cancelBubble}function Fs(){return this.defaultPrevented}P.event=function(t){return At&&(t=At(t)),t.persist=js,t.isPropagationStopped=Os,t.isDefaultPrevented=Fs,t.nativeEvent=t};var Is={enumerable:!1,configurable:!0,get:function(){return this.class}},Mt=P.vnode;P.vnode=function(t){typeof t.type=="string"&&(function(s){var n=s.props,a=s.type,o={},l=a.indexOf("-")===-1;for(var r in n){var i=n[r];if(!(r==="value"&&"defaultValue"in n&&i==null||Rs&&r==="children"&&a==="noscript"||r==="class"||r==="className")){var h=r.toLowerCase();r==="defaultValue"&&"value"in n&&n.value==null?r="value":r==="download"&&i===!0?i="":h==="translate"&&i==="no"?i=!1:h[0]==="o"&&h[1]==="n"?h==="ondoubleclick"?r="ondblclick":h!=="onchange"||a!=="input"&&a!=="textarea"||Ds(n.type)?h==="onfocus"?r="onfocusin":h==="onblur"?r="onfocusout":Ps.test(r)&&(r=h):h=r="oninput":l&&Ms.test(r)?r=r.replace(qs,"-$&").toLowerCase():i===null&&(i=void 0),h==="oninput"&&o[r=h]&&(r="oninputCapture"),o[r]=i}}a=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=xe(n.children).forEach(function(d){d.props.selected=o.value.indexOf(d.props.value)!=-1})),a=="select"&&o.defaultValue!=null&&(o.value=xe(n.children).forEach(function(d){d.props.selected=o.multiple?o.defaultValue.indexOf(d.props.value)!=-1:o.defaultValue==d.props.value})),n.class&&!n.className?(o.class=n.class,Object.defineProperty(o,"className",Is)):n.className&&(o.class=o.className=n.className),s.props=o})(t),t.$$typeof=As,Mt&&Mt(t)};var Pt=P.__r;P.__r=function(t){Pt&&Pt(t),t.__c};var qt=P.diffed;P.diffed=function(t){qt&&qt(t);var s=t.props,n=t.__e;n!=null&&t.type==="textarea"&&"value"in s&&s.value!==n.value&&(n.value=s.value==null?"":s.value)};var Bs={Fragment:O};async function Us(){if(typeof window<"u"&&window.Transmit&&typeof window.Transmit=="function")return window.Transmit;try{const t=await import("@adonisjs/transmit-client");return t.Transmit??t.default??null}catch{return null}}function Hs(t){let s=null,n=null,a=!1;return{subscribe:async()=>{try{const r=await Us();if(!r)throw new Error("Transmit client not available (neither window.Transmit nor @adonisjs/transmit-client)");if(a)return;s=new r({baseUrl:t.baseUrl||window.location.origin,...t.authToken?{beforeSubscribe(i){return{headers:{Authorization:`Bearer ${t.authToken}`}}},beforeUnsubscribe(i){return{headers:{Authorization:`Bearer ${t.authToken}`}}}}:{}}),n=s.subscription(t.channelName),n.onMessage(i=>{a||t.onMessage(i)}),await n.create()}catch(r){t.onError&&t.onError(r)}},unsubscribe:async()=>{a=!0;try{n&&(await n.delete(),n=null),s&&(s=null)}catch{}}}}function zs(t){let s=!1;const n=Hs({baseUrl:t.baseUrl,channelName:t.channelName,authToken:t.authToken,onMessage:t.onMessage,onError:a=>{s=!0,t.onError?.(a),t.onDisconnect?.()}});return n.subscribe().then(()=>{s||t.onConnect?.()}).catch(a=>{t.onError?.(a),t.onDisconnect?.()}),{unsubscribe:()=>{n.unsubscribe().catch(()=>{})}}}class Ve extends Error{status;constructor(s=403){super(`Unauthorized (HTTP ${s})`),this.name="UnauthorizedError",this.status=s}}class Vs extends Error{status;body;constructor(s,n){super(`API error (HTTP ${s})`),this.name="ApiError",this.status=s,this.body=n}}class me{baseUrl;authToken;constructor(s){this.baseUrl=s.baseUrl.replace(/\/+$/,""),this.authToken=s.authToken}async fetch(s,n){const o={...{Accept:"application/json",...this.authToken?{Authorization:`Bearer ${this.authToken}`}:{}},...n?.headers},l=await globalThis.fetch(`${this.baseUrl}${s}`,{...n,headers:o,credentials:this.authToken?"omit":"include"});if(l.status===401||l.status===403)throw new Ve(l.status);if(!l.ok){const r=await l.text().catch(()=>"");throw new Vs(l.status,r)}return l.json()}async get(s,n){const a=n?`${s}?${n}`:s;return this.fetch(a)}async post(s,n){const a={method:"POST",...n!==void 0?{body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}:{}};return this.fetch(s,a)}async delete(s){return this.fetch(s,{method:"DELETE"})}}const Ws=5e3,Rt=1e4,Ks={overview:"/overview",requests:"/requests",queries:"/queries",events:"/events",routes:"/routes",logs:"/logs",emails:"/emails",timeline:"/traces",cache:"/cache",jobs:"/jobs",config:"/config"};function Qs(t){return Ks[t]||`/${t}`}class Js{constructor(s,n){this.client=s,this.basePath=n}async fetchSection(s,n){const a=Qs(s),o=n?`${this.basePath}${a}?${n}`:`${this.basePath}${a}`;return this.client.fetch(o)}async fetchChart(s){return this.client.fetch(`${this.basePath}/overview/chart?range=${s}`)}async fetchGroupedQueries(){return this.client.fetch(`${this.basePath}/queries/grouped`)}async explainQuery(s){return this.client.fetch(`${this.basePath}/queries/${s}/explain`)}async retryJob(s){return this.client.fetch(`${this.basePath}/jobs/${s}/retry`,{method:"POST"})}async fetchCacheKey(s){return this.client.fetch(`${this.basePath}/cache/${encodeURIComponent(s)}`)}async deleteCacheKey(s){return this.client.fetch(`${this.basePath}/cache/${encodeURIComponent(s)}`,{method:"DELETE"})}async fetchEmailPreview(s){return this.client.fetch(`${this.basePath}/emails/${s}/preview`)}}function Gs(t){const s=new URLSearchParams;if(t.page!==null&&t.page!==void 0&&s.set("page",String(t.page)),t.perPage!==null&&t.perPage!==void 0&&s.set("perPage",String(t.perPage)),t.search&&s.set("search",t.search),t.sort&&s.set("sort",t.sort),t.sortDir&&s.set("direction",t.sortDir),t.timeRange&&s.set("range",t.timeRange),t.filters)for(const[n,a]of Object.entries(t.filters))a&&s.set(n,a);return s.toString()}function Xs(t,s,n=2){if(s<=1)return[1];const a=[],o=Math.max(2,t-n),l=Math.min(s-1,t+n);a.push(1),o>2&&a.push("...");for(let r=o;r<=l;r++)a.push(r);return l<s-1&&a.push("..."),s>1&&a.push(s),a}function J(t,s={}){const{baseUrl:n="",dashboardEndpoint:a="/__stats/api",authToken:o,page:l=1,perPage:r=50,search:i,sort:h,sortDir:d,filters:u,timeRange:c,refreshKey:v}=s,[p,f]=k(null),[g,x]=k(null),[S,w]=k(!0),[y,b]=k(null),N=V(null),$=V(null),T=V(null),L=V(t),q=V(!1),I=M(()=>(N.current||(N.current=new me({baseUrl:n,authToken:o})),N.current),[n,o]),R=M(()=>($.current||($.current=new Js(I(),a)),$.current),[I,a]),C=M(async m=>{try{const _=R(),E=h&&h.replace(/[A-Z]/g,U=>"_"+U.toLowerCase()),A=Gs({page:l,perPage:r,search:i,sort:E,sortDir:d,filters:u,timeRange:c}),D=await _.fetchSection(t,A||void 0);D&&D.data!==void 0&&D.meta!==void 0?(f(D.data),x(D.meta)):(f(D),x(null)),b(null),w(!1),q.current=!0}catch(_){if(_ instanceof Ve){b(_),w(!1),T.current&&(clearInterval(T.current),T.current=null);return}m||(b(_ instanceof Error?_:new Error(String(_))),w(!1))}},[t,R,l,r,i,h,d,u,c]);K(()=>{const m=L.current!==t;L.current=t,m||!q.current?(w(!0),b(null),f(null),x(null),q.current=!1,C(!1)):C(!0);const E=t==="overview"?Ws:Rt;return T.current=setInterval(()=>C(!0),E),()=>{T.current&&(clearInterval(T.current),T.current=null)}},[t,C,v]);const j=M(()=>{C(!0)},[C]),X=M(async(m,_="post",E)=>{const A=I(),D=`${a}/${m}`;try{const U=_==="post"?await A.post(D,E):await A.delete(D);return await C(!0),U}catch(U){throw U instanceof Error?U:new Error(String(U))}},[a,I,C]);return{data:p,meta:g,isLoading:S,error:y,refresh:j,mutate:X,getApi:R}}const Dt="/admin/api/debug",jt={tracing:!1,process:!1,system:!1,http:!1,db:!1,redis:!1,queues:!1,cache:!1,app:!1,log:!1,emails:!1,dashboard:!1,customPanes:[]};function Ys(t){return{tracing:t.features?.tracing??!1,process:t.features?.process??!1,system:t.features?.system??!1,http:t.features?.http??!1,db:t.features?.db??!1,redis:t.features?.redis??!1,queues:t.features?.queues??!1,cache:t.features?.cache??!1,app:t.features?.app??!1,log:t.features?.log??!1,emails:t.features?.emails??!1,dashboard:t.features?.dashboard??!1,customPanes:t.customPanes??[]}}async function Zs(t,s=Dt){const n=`${s.replace(/\/+$/,"")}/config`;return t.fetch(n)}async function en(t){const{baseUrl:s="",debugEndpoint:n=Dt,authToken:a}=t,o=new me({baseUrl:s,authToken:a});try{const l=await Zs(o,n);return Ys(l)}catch{return jt}}function tn(t={}){const{baseUrl:s="",debugEndpoint:n="/admin/api/debug",authToken:a}=t,[o,l]=k(jt),[r,i]=k(!0),[h,d]=k(null),u=V(!1);return K(()=>{if(u.current)return;u.current=!0;let c=!1;return(async()=>{try{const p=await en({baseUrl:s,debugEndpoint:n,authToken:a});c||(l(p),i(!1))}catch(p){c||(d(p instanceof Error?p:new Error(String(p))),i(!1))}})(),()=>{c=!0}},[s,n,a]),{features:o,isLoading:r,error:h}}const Te="ss-dash-theme",We="ss-theme-change";function Le(){if(typeof window>"u")return"light";const t=localStorage.getItem(Te);return t==="dark"||t==="light"?t:window.matchMedia?.("(prefers-color-scheme: dark)").matches?"dark":"light"}function sn(t){typeof window>"u"||(localStorage.setItem(Te,t),window.dispatchEvent(new CustomEvent(We,{detail:t})))}function nn(){const s=Le()==="dark"?"light":"dark";return sn(s),s}function Ot(t){if(typeof window>"u")return()=>{};const s=l=>{const r=l.detail;(r==="dark"||r==="light")&&t(r)},n=l=>{if(l.key===Te){const r=l.newValue;t(r==="dark"||r==="light"?r:Le())}},a=window.matchMedia("(prefers-color-scheme: dark)"),o=l=>{localStorage.getItem(Te)||t(l.matches?"dark":"light")};return window.addEventListener(We,s),window.addEventListener("storage",n),a.addEventListener("change",o),()=>{window.removeEventListener(We,s),window.removeEventListener("storage",n),a.removeEventListener("change",o)}}function an(){const[t,s]=k(()=>Le());K(()=>Ot(o=>{s(o)}),[]);const n=M(()=>{const a=nn();return s(a),a},[]);return{theme:t,toggleTheme:n}}const F={queries:{viewBox:"0 0 24 24",elements:['<ellipse cx="12" cy="5" rx="9" ry="3"/>','<path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/>','<path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/>']},events:{viewBox:"0 0 24 24",elements:['<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>']},emails:{viewBox:"0 0 24 24",elements:['<path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>','<polyline points="22,6 12,13 2,6"/>']},routes:{viewBox:"0 0 24 24",elements:['<circle cx="12" cy="12" r="10"/>','<line x1="2" y1="12" x2="22" y2="12"/>','<path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>']},logs:{viewBox:"0 0 24 24",elements:['<line x1="8" y1="6" x2="21" y2="6"/>','<line x1="8" y1="12" x2="21" y2="12"/>','<line x1="8" y1="18" x2="21" y2="18"/>','<line x1="3" y1="6" x2="3.01" y2="6"/>','<line x1="3" y1="12" x2="3.01" y2="12"/>','<line x1="3" y1="18" x2="3.01" y2="18"/>']},timeline:{viewBox:"0 0 24 24",elements:['<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>']},cache:{viewBox:"0 0 24 24",elements:['<rect x="2" y="2" width="20" height="8" rx="2" ry="2"/>','<rect x="2" y="14" width="20" height="8" rx="2" ry="2"/>','<line x1="6" y1="6" x2="6.01" y2="6"/>','<line x1="6" y1="18" x2="6.01" y2="18"/>']},jobs:{viewBox:"0 0 24 24",elements:['<rect x="2" y="7" width="20" height="14" rx="2" ry="2"/>','<path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/>']},config:{viewBox:"0 0 24 24",elements:['<circle cx="12" cy="12" r="3"/>','<path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>']},internals:{viewBox:"0 0 24 24",elements:['<rect x="4" y="4" width="16" height="16" rx="2"/>','<rect x="9" y="9" width="6" height="6"/>','<line x1="9" y1="1" x2="9" y2="4"/>','<line x1="15" y1="1" x2="15" y2="4"/>','<line x1="9" y1="20" x2="9" y2="23"/>','<line x1="15" y1="20" x2="15" y2="23"/>','<line x1="20" y1="9" x2="23" y2="9"/>','<line x1="20" y1="14" x2="23" y2="14"/>','<line x1="1" y1="9" x2="4" y2="9"/>','<line x1="1" y1="14" x2="4" y2="14"/>']},overview:{viewBox:"0 0 24 24",elements:['<rect x="3" y="3" width="7" height="7"/>','<rect x="14" y="3" width="7" height="7"/>','<rect x="14" y="14" width="7" height="7"/>','<rect x="3" y="14" width="7" height="7"/>']},requests:{viewBox:"0 0 24 24",elements:['<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>']},"dashboard-timeline":{viewBox:"0 0 24 24",elements:['<circle cx="12" cy="12" r="10"/>','<polyline points="12 6 12 12 16 14"/>']},"custom-pane":{viewBox:"0 0 24 24",elements:['<rect x="3" y="3" width="18" height="18" rx="2"/>','<path d="M9 3v18"/>']},wrench:{viewBox:"0 0 24 24",elements:['<path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>']},"external-link":{viewBox:"0 0 24 24",elements:['<path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>','<polyline points="15 3 21 3 21 9"/>','<line x1="10" y1="14" x2="21" y2="3"/>']},sun:{viewBox:"0 0 24 24",elements:['<circle cx="12" cy="12" r="5"/>','<line x1="12" y1="1" x2="12" y2="3"/>','<line x1="12" y1="21" x2="12" y2="23"/>','<line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>','<line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>','<line x1="1" y1="12" x2="3" y2="12"/>','<line x1="21" y1="12" x2="23" y2="12"/>','<line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>','<line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>']},moon:{viewBox:"0 0 24 24",elements:['<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>']},search:{viewBox:"0 0 24 24",elements:['<circle cx="11" cy="11" r="8"/>','<line x1="21" y1="21" x2="16.65" y2="16.65"/>']},eye:{viewBox:"0 0 24 24",elements:['<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>','<circle cx="12" cy="12" r="3"/>']},"eye-off":{viewBox:"0 0 24 24",elements:['<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94"/>','<path d="M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19"/>','<line x1="1" y1="1" x2="23" y2="23"/>','<path d="M14.12 14.12a3 3 0 1 1-4.24-4.24"/>']},"chevron-right":{viewBox:"0 0 24 24",elements:['<path d="M9 18l6-6-6-6"/>']},"chevron-left":{viewBox:"0 0 24 24",elements:['<path d="M15 18l-6-6 6-6"/>']},"open-external":{viewBox:"0 0 16 16",elements:['<path d="M6 3H3v10h10v-3M9 1h6v6M7 9L15 1"/>']}};function rn({theme:t,onToggle:s,className:n="",classPrefix:a="ss-dash"}){const o=t==="dark";return e("button",{type:"button",className:`${a==="ss-dbg"?"ss-dbg-theme-toggle":"ss-dash-theme-btn"} ${n}`,onClick:s,title:o?"Switch to light theme":"Switch to dark theme","aria-label":o?"Switch to light theme":"Switch to dark theme",children:o?e("svg",{width:"16",height:"16",viewBox:F.sun.viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:F.sun.elements.join("")}}):e("svg",{width:"16",height:"16",viewBox:F.moon.viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:F.moon.elements.join("")}})})}const ln=["overview","requests","queries","events","routes","logs","emails","timeline","cache","jobs","config","internals"],on=G(()=>Promise.resolve().then(()=>Pn)),cn=G(()=>Promise.resolve().then(()=>On)),dn=G(()=>Promise.resolve().then(()=>Bn)),hn=G(()=>Promise.resolve().then(()=>Un)),un=G(()=>Promise.resolve().then(()=>Hn)),pn=G(()=>Promise.resolve().then(()=>Vn)),mn=G(()=>Promise.resolve().then(()=>Wn)),fn=G(()=>Promise.resolve().then(()=>Kn)),_n=G(()=>Promise.resolve().then(()=>Qn)),vn=G(()=>Promise.resolve().then(()=>Gn)),yn=G(()=>Promise.resolve().then(()=>aa)),gn=G(()=>Promise.resolve().then(()=>ha));function Ft(t){return t==="timeline"?"dashboard-timeline":t}function bn(t){const{baseUrl:s="",dashboardEndpoint:n="/__stats/api",debugEndpoint:a,authToken:o,backUrl:l="/",channelName:r="server-stats/dashboard"}=t,{features:i}=tn({baseUrl:s,debugEndpoint:a,authToken:o}),{theme:h,toggleTheme:d}=an(),[u,c]=k("overview"),[v,p]=k(()=>typeof window>"u"?!1:localStorage.getItem("ss-dash-sidebar")==="collapsed"),[f,g]=k(!1),[x,S]=k(0),w=V(0);K(()=>{if(!r)return;const C=zs({baseUrl:s,channelName:r,authToken:o,onMessage:()=>{w.current+=1,S(w.current)},onConnect:()=>g(!0),onDisconnect:()=>g(!1),onError:()=>g(!1)});return()=>C.unsubscribe()},[s,r,o]);const y=i.customPanes||[],b=M(C=>{const j=C.replace("#","").split("?")[0];return j&&[...ln,...y.map(m=>m.id)].includes(j)?j:"overview"},[y]);K(()=>{if(typeof window>"u")return;const C=b(window.location.hash);(C!=="overview"||window.location.hash)&&c(C)},[b]),K(()=>{const C=()=>{const j=b(window.location.hash);j!==u&&c(j)};return window.addEventListener("hashchange",C),()=>window.removeEventListener("hashchange",C)},[u,b]),K(()=>{typeof window>"u"||(window.location.hash=u)},[u]);const N=M(()=>{p(C=>{const j=!C;return localStorage.setItem("ss-dash-sidebar",j?"collapsed":"expanded"),j})},[]),$=z(()=>[{id:"overview",label:"Overview",visible:!0},{id:"requests",label:"Requests",visible:!0},{id:"queries",label:"Queries",visible:!0},{id:"events",label:"Events",visible:!0},{id:"routes",label:"Routes",visible:!0},{id:"logs",label:"Logs",visible:!0},{id:"emails",label:"Emails",visible:!0},{id:"timeline",label:"Timeline",visible:i.tracing},{id:"cache",label:"Cache",visible:i.cache},{id:"jobs",label:"Jobs",visible:i.queues},{id:"config",label:"Config",visible:!0},{id:"internals",label:"Internals",visible:!0}],[i]),T=z(()=>$.filter(C=>C.visible),[$]),L=z(()=>({baseUrl:s,dashboardEndpoint:n,authToken:o,refreshKey:x}),[s,n,o,x]),{data:q}=J("overview",L),I=z(()=>{if(!q)return{};const C={};if(q.totalRequests>0&&(C.requests={count:q.totalRequests}),q.queryStats?.total>0&&(C.queries={count:q.queryStats.total}),q.logLevelBreakdown){const j=q.logLevelBreakdown,X=j.error+j.warn+j.info+j.debug;X>0&&(C.logs={count:X})}return C},[q]),R=M(()=>{const C={overview:e(on,{options:L}),requests:e(cn,{options:L}),queries:e(dn,{options:L}),events:e(hn,{options:L}),routes:e(un,{options:L}),logs:e(pn,{options:L}),emails:e(mn,{options:L}),timeline:e(fn,{options:L}),cache:e(_n,{options:L}),jobs:e(vn,{options:L}),config:e(yn,{options:L}),internals:e(gn,{options:L,debugEndpoint:a})};return e("div",{className:"ss-dash-pane ss-dash-active",id:`ss-dash-pane-${u}`,children:e("div",{className:"ss-dash-pane-inner",children:e(Se,{fallback:e("div",{className:"ss-dash-empty",children:"Loading..."}),children:C[u]||e("div",{className:"ss-dash-empty",children:"Unknown section"})})})})},[u,L]);return e("div",{className:"ss-dash","data-theme":h,id:"ss-dash",children:[e("div",{className:"ss-dash-header",children:[e("div",{className:"ss-dash-header-left",children:[e("span",{className:"ss-dash-logo",children:"Server Stats"}),e("span",{className:"ss-dash-logo-sub",children:"Dashboard"})]}),e("div",{className:"ss-dash-header-center",children:[e("span",{className:`ss-dash-live-dot ${f?"ss-dash-connected":""}`,id:"ss-dash-live-dot"}),e("span",{className:`ss-dash-live-label ${f?"ss-dash-connected":""}`,id:"ss-dash-live-label",children:f?"Live":"Polling"})]}),e("div",{className:"ss-dash-header-right",children:[e(rn,{theme:h,onToggle:d}),l&&e("a",{href:l,className:"ss-dash-back-link",title:"Back to app",children:"← App"})]})]}),e("div",{className:"ss-dash-body",children:[e("div",{className:`ss-dash-sidebar ${v?"ss-dash-collapsed":""}`,id:"ss-dash-sidebar",children:[e("nav",{className:"ss-dash-nav",children:[T.map(C=>{const j=I[C.id];return e("button",{type:"button",className:`ss-dash-nav-item ${u===C.id?"ss-dash-active":""}`,"data-ss-section":C.id,onClick:()=>{C.id!==u&&c(C.id)},title:v?C.label:void 0,children:[e("span",{className:"ss-dash-nav-icon",children:e("svg",{width:"20",height:"20",viewBox:(F[Ft(C.id)]||F.config).viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:(F[Ft(C.id)]||F.config).elements.join("")}})}),e("span",{className:"ss-dash-nav-label",children:C.label}),j&&j.count>0&&e("span",{className:`ss-dash-nav-badge${j.variant?" "+j.variant:""}`,children:j.count})]},C.id)}),y.length>0&&e("div",{className:"ss-dash-nav-sep"}),y.map(C=>e("button",{type:"button",className:`ss-dash-nav-item ${u===C.id?"ss-dash-active":""}`,onClick:()=>c(C.id),title:v?C.label:void 0,children:[e("span",{className:"ss-dash-nav-icon",children:e("svg",{width:"20",height:"20",viewBox:F["custom-pane"].viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:F["custom-pane"].elements.join("")}})}),e("span",{className:"ss-dash-nav-label",children:C.label})]},C.id))]}),e("button",{type:"button",className:"ss-dash-sidebar-toggle",id:"ss-dash-sidebar-toggle",onClick:N,title:v?"Expand sidebar":"Collapse sidebar",children:v?e("svg",{width:"16",height:"16",viewBox:F["chevron-right"].viewBox,fill:"none",stroke:"currentColor",strokeWidth:"1.5",dangerouslySetInnerHTML:{__html:F["chevron-right"].elements.join("")}}):e("svg",{width:"16",height:"16",viewBox:F["chevron-left"].viewBox,fill:"none",stroke:"currentColor",strokeWidth:"1.5",dangerouslySetInnerHTML:{__html:F["chevron-left"].elements.join("")}})})]}),e("div",{className:"ss-dash-main",children:R()})]})]})}const It=document.getElementById("ss-dash-config"),ce=It?JSON.parse(It.textContent||"{}"):{};function Bt(t){document.documentElement.setAttribute("data-theme",t)}Bt(Le()),Ot(Bt);const Ut=document.getElementById("ss-dash");Ut&&ks(e(bn,{baseUrl:ce.baseUrl,dashboardEndpoint:ce.dashboardEndpoint,debugEndpoint:ce.debugEndpoint,authToken:ce.authToken,backUrl:ce.backUrl,channelName:ce.channelName}),Ut);function de(t){return t>=1e3?`${(t/1e3).toFixed(2)}s`:t>=1?`${t.toFixed(0)}ms`:`${t.toFixed(2)}ms`}function ne(t){if(!t)return"-";const s=typeof t=="string"?new Date(t):new Date(t);return Number.isNaN(s.getTime())?"-":s.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})+"."+String(s.getMilliseconds()).padStart(3,"0")}function ae(t){if(!t)return"-";const s=typeof t=="string"?new Date(t).getTime():t,n=Math.floor((Date.now()-s)/1e3);return n<0?"just now":n<60?`${n}s ago`:n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:`${Math.floor(n/86400)}d ago`}function wn(t){return t>500?"very-slow":t>100?"slow":"normal"}function Ke(t,s=100){if(t===null)return"null";if(t===void 0)return"-";if(typeof t=="string")return'"'+(t.length>40?t.slice(0,40)+"...":t)+'"';if(typeof t=="number"||typeof t=="boolean")return String(t);if(Array.isArray(t)){if(t.length===0)return"[]";const a="["+t.slice(0,3).map(o=>Ke(o,30)).join(", ")+(t.length>3?", ..."+t.length+" items":"")+"]";return a.length>s?"["+t.length+" items]":a}if(typeof t=="object"){const n=Object.keys(t);if(n.length===0)return"{}";const a=[];for(let l=0;l<Math.min(n.length,4);l++)a.push(n[l]+": "+Ke(t[n[l]],30));const o="{ "+a.join(", ")+(n.length>4?", ...+"+(n.length-4):"")+" }";return o.length>s?"{ "+n.slice(0,6).join(", ")+(n.length>6?", ...":"")+" }":o}return String(t)}const le={color:"#34d399",fillOpacityTop:.25,fillOpacityBottom:.02,strokeWidth:1.5,width:120,height:32,padding:2};function Nn(t){return{...le,...t}}function xn(t,s=le.width,n=le.height,a=le.padding){if(t.length<2)return null;const o=s-a*2,l=n-a*2,r=Math.min(...t),h=Math.max(...t)-r||1;return t.map((u,c)=>{const v=a+c/(t.length-1)*o,p=a+l-(u-r)/h*l;return`${v.toFixed(1)},${p.toFixed(1)}`}).join(" ")}function kn(t,s=le.width,n=le.height,a=le.padding){if(t.length<2)return null;const o=s-a*2,l=n-a*2,r=Math.min(...t),h=Math.max(...t)-r||1,d=t.map((p,f)=>{const g=a+f/(t.length-1)*o,x=a+l-(p-r)/h*l;return`${g.toFixed(1)},${x.toFixed(1)}`}),u=(a+o).toFixed(1),c=(a+l).toFixed(1),v=a.toFixed(1);return`M${d[0]} `+d.slice(1).map(p=>`L${p}`).join(" ")+` L${u},${c} L${v},${c} Z`}let $n=0;function Sn(){return`ss-grad-${$n++}`}function Cn(t){if(t.length===0)return null;const s=Math.min(...t),n=Math.max(...t),a=t.reduce((o,l)=>o+l,0)/t.length;return{min:s,max:n,avg:a}}function Tn(t,s){const n=Nn(s),a=xn(t,n.width,n.height,n.padding),o=kn(t,n.width,n.height,n.padding);return!a||!o?null:{points:a,areaPath:o,gradientId:Sn(),options:n,stats:Cn(t)}}function Ee({data:t,color:s="#34d399",width:n=120,height:a=32,className:o=""}){const l=z(()=>Tn(t,{width:n,height:a}),[t,n,a]),r=z(()=>"ss-grad-"+Math.random().toString(36).slice(2,8),[]),i={"--ss-accent":s};if(!l)return e("div",{className:`ss-dash-sparkline ${o}`,style:i,children:e("svg",{width:n,height:a,viewBox:`0 0 ${n} ${a}`,style:{display:"block"},children:e("text",{x:n/2,y:a/2+3,textAnchor:"middle",fill:"#737373",fontSize:"9",children:["collecting","…"]})})});const h=s||"var(--ss-accent)";return e("div",{className:`ss-dash-sparkline ${o}`,style:i,children:e("svg",{width:n,height:a,viewBox:`0 0 ${n} ${a}`,style:{display:"block"},children:[e("defs",{children:e("linearGradient",{id:r,x1:"0",y1:"0",x2:"0",y2:"1",children:[e("stop",{offset:"0%",stopColor:h,stopOpacity:"0.25"}),e("stop",{offset:"100%",stopColor:h,stopOpacity:"0.02"})]})}),e("path",{d:l.areaPath,fill:`url(#${r})`}),e("path",{className:"ss-dash-sparkline-line",d:"M"+l.points.replace(/ /g," L"),fill:"none",stroke:h,strokeWidth:"1.5",strokeLinejoin:"round",strokeLinecap:"round"})]})})}const Ln=[{value:"5m",label:"5m"},{value:"15m",label:"15m"},{value:"30m",label:"30m"},{value:"1h",label:"1h"},{value:"6h",label:"6h"},{value:"24h",label:"24h"},{value:"7d",label:"7d"}];function En({value:t,onChange:s,className:n=""}){return e("div",{className:`ss-dash-btn-group ${n}`,children:Ln.map(a=>e("button",{type:"button",className:`ss-dash-btn ${t===a.value?"ss-dash-active":""}`,onClick:()=>s(a.value),children:a.label},a.value))})}function An(t,s){if(t<=0)return[0];const n=t/s,a=Math.pow(10,Math.floor(Math.log10(n))),o=n/a;let l;o<=1?l=a:o<=2?l=2*a:o<=5?l=5*a:l=10*a;const r=[];for(let i=l;i<=t+l*.5;i+=l)r.push(Math.round(i));return r.length===0&&r.push(Math.ceil(t)),r}function Ht(t){try{return new Date(t).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"})}catch{return""}}function zt(t){if(t.length===0)return"";if(t.length===1)return`M${t[0].x},${t[0].y}`;let s=`M${t[0].x.toFixed(1)},${t[0].y.toFixed(1)}`;for(let n=0;n<t.length-1;n++){const a=t[n],o=t[n+1],l=(a.x+o.x)/2;s+=` C${l.toFixed(1)},${a.y.toFixed(1)} ${l.toFixed(1)},${o.y.toFixed(1)} ${o.x.toFixed(1)},${o.y.toFixed(1)}`}return s}function Vt(t){const s=wn(t);return s==="very-slow"?"ss-dash-very-slow":s==="slow"?"ss-dash-slow":""}function Mn({chartPoints:t}){const s={top:12,right:12,bottom:28,left:38},n=220,a=V(null),[o,l]=k(0);K(()=>{const E=a.current;if(!E)return;l(E.clientWidth);const A=new ResizeObserver(D=>{for(const U of D)l(U.contentRect.width)});return A.observe(E),()=>A.disconnect()},[]);const r=o||600,i=r-s.left-s.right,h=n-s.top-s.bottom,d=s.top+h,u=t.map(E=>{const A=E;return(E.requestCount??0)+(Number(A.request_count)||0)||E.total||0}),c=t.map(E=>{const A=E;return(E.errorCount??0)+(Number(A.error_count)||0)}),v=Math.max(...u,1),p=Math.ceil(v*1.1),f=c.some(E=>E>0),g=An(p,4),x=g.length>0?g[g.length-1]:p,S=E=>s.left+E/Math.max(t.length-1,1)*i,w=E=>s.top+h-E/(x||1)*h,y=t.map((E,A)=>({x:S(A),y:w(u[A])})),b=t.map((E,A)=>({x:S(A),y:w(c[A])})),N=zt(y),$=f?zt(b):"",T=y.length>1?`${N} L${y[y.length-1].x.toFixed(1)},${d} L${y[0].x.toFixed(1)},${d} Z`:"",L=f&&b.length>1?`${$} L${b[b.length-1].x.toFixed(1)},${d} L${b[0].x.toFixed(1)},${d} Z`:"",q=Math.min(10,t.length),I=Math.max(1,Math.ceil(t.length/q)),[R,C]=k({visible:!1,x:0,idx:-1}),j=M(E=>{const A=y[E].x;C({visible:!0,x:A,idx:E})},[y]),X=M(()=>{C({visible:!1,x:0,idx:-1})},[]),m=120,_=R.visible?Math.max(m/2,Math.min(R.x,r-m/2)):0;return e("div",{ref:a,style:{position:"relative"},children:[e("svg",{viewBox:`0 0 ${r} ${n}`,className:"ss-dash-chart-svg",children:[e("defs",{children:[e("linearGradient",{id:"ss-cg-total",x1:"0",y1:"0",x2:"0",y2:"1",children:[e("stop",{offset:"0%",stopColor:"var(--ss-accent)",stopOpacity:.3}),e("stop",{offset:"100%",stopColor:"var(--ss-accent)",stopOpacity:.02})]}),e("linearGradient",{id:"ss-cg-error",x1:"0",y1:"0",x2:"0",y2:"1",children:[e("stop",{offset:"0%",stopColor:"var(--ss-red-fg)",stopOpacity:.35}),e("stop",{offset:"100%",stopColor:"var(--ss-red-fg)",stopOpacity:.02})]})]}),g.map(E=>{const A=w(E);return e("g",{children:[e("line",{x1:s.left,y1:A,x2:r-s.right,y2:A,stroke:"var(--ss-border-faint)",strokeWidth:.5,strokeDasharray:"3,3"}),e("text",{x:s.left-6,y:A,textAnchor:"end",fill:"var(--ss-dim)",fontSize:9,dominantBaseline:"middle",children:E})]},`ytick-${E}`)}),T&&e("path",{d:T,fill:"url(#ss-cg-total)"}),N&&e("path",{d:N,fill:"none",stroke:"var(--ss-accent)",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"}),L&&e("path",{d:L,fill:"url(#ss-cg-error)"}),$&&e("path",{d:$,fill:"none",stroke:"var(--ss-red-fg)",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round",strokeDasharray:"4,2"}),t.map((E,A)=>{const D=u[A],U=c[A],W=y[A].x,se=y[A].y,fs=i/(t.length||1),_s=R.visible&&R.idx===A,vs=R.visible&&R.idx!==A;return e("g",{children:[e("rect",{x:W-fs/2,y:s.top,width:fs,height:h,fill:"transparent",className:"ss-dash-chart-hover-zone","data-idx":A,onMouseEnter:()=>j(A),onMouseLeave:X}),D>0&&e("circle",{cx:W,cy:se,r:_s?4:2.5,fill:"var(--ss-accent)",stroke:"var(--ss-surface)",strokeWidth:1,className:"ss-dash-chart-dot","data-idx":A,opacity:vs?.3:1}),U>0&&e("circle",{cx:W,cy:b[A].y,r:_s?3.5:2,fill:"var(--ss-red-fg)",stroke:"var(--ss-surface)",strokeWidth:1,className:"ss-dash-chart-dot ss-dash-chart-dot-err","data-idx":A,opacity:vs?.3:1})]},A)}),t.map((E,A)=>{if(A%I!==0&&A!==t.length-1)return null;const D=Ht(E.bucket);return D?e("text",{x:S(A),y:n-6,textAnchor:"middle",fill:"var(--ss-dim)",fontSize:9,children:D},`xlabel-${A}`):null})]}),R.visible&&R.idx>=0&&e("div",{className:"ss-dash-chart-tooltip",style:{left:_,top:s.top-4,transform:"translate(-50%, -100%)"},children:[e("div",{children:Ht(t[R.idx].bucket)}),e("div",{children:["Requests: ",u[R.idx]]}),c[R.idx]>0&&e("div",{style:{color:"var(--ss-red-fg)"},children:["Errors: ",c[R.idx]]})]})]})}function Wt({options:t={}}){const[s,n]=k("1h"),{data:a,isLoading:o}=J("overview",t),{data:l}=J("overview/chart",{...t,timeRange:s});if(o&&!a)return e("div",{className:"ss-dash-empty",children:"Loading overview..."});const r=a||{avgResponseTime:0,p95ResponseTime:0,requestsPerMinute:0,errorRate:0,totalRequests:0,slowestEndpoints:[],queryStats:{total:0,avgDuration:0,perRequest:0},recentErrors:[],topEvents:[],emailActivity:{sent:0,queued:0,failed:0},logLevelBreakdown:{error:0,warn:0,info:0,debug:0},cacheStats:null,jobQueueStatus:null,statusDistribution:{"2xx":0,"3xx":0,"4xx":0,"5xx":0},slowestQueries:[]},i=r,h=r.avgResponseTime||Number(i.avg_response_time)||0,d=r.p95ResponseTime||Number(i.p95_response_time)||0,u=r.requestsPerMinute||Number(i.requests_per_minute)||0,c=r.errorRate||Number(i.error_rate)||0,p=(r.totalRequests||Number(i.total_requests)||0)>0,f=l?.buckets||[],g=r.sparklines?.avgResponseTime??f.map(y=>y.avgDuration??0),x=r.sparklines?.p95ResponseTime??f.map(y=>y.p95Duration??0),S=r.sparklines?.requestsPerMinute??f.map(y=>y.requestCount??0),w=r.sparklines?.errorRate??f.map(y=>y.errorCount??0);return e("div",{className:"ss-dash-overview",children:[e("div",{className:"ss-dash-cards",children:[e("div",{className:"ss-dash-card",children:[e("div",{className:"ss-dash-card-title",children:"Avg Response Time"}),e("div",{className:`ss-dash-card-value ${p?h>500?"ss-dash-red":h>200?"ss-dash-amber":"ss-dash-accent":"ss-dash-dim"}`,children:p?de(h):"-"}),e("div",{className:"ss-dash-sparkline",children:e(Ee,{data:g,color:"#34d399",width:160,height:40})})]}),e("div",{className:"ss-dash-card",children:[e("div",{className:"ss-dash-card-title",children:"P95 Response Time"}),e("div",{className:`ss-dash-card-value ${p?d>500?"ss-dash-red":d>200?"ss-dash-amber":"ss-dash-accent":"ss-dash-dim"}`,children:p?de(d):"-"}),e("div",{className:"ss-dash-sparkline",children:e(Ee,{data:x,color:"#60a5fa",width:160,height:40})})]}),e("div",{className:"ss-dash-card",children:[e("div",{className:"ss-dash-card-title",children:"Requests / min"}),e("div",{className:`ss-dash-card-value ${p?"ss-dash-accent":"ss-dash-dim"}`,children:p?u.toFixed(1):"-"}),e("div",{className:"ss-dash-sparkline",children:e(Ee,{data:S,color:"#34d399",width:160,height:40})})]}),e("div",{className:"ss-dash-card",children:[e("div",{className:"ss-dash-card-title",children:"Error Rate"}),e("div",{className:`ss-dash-card-value ${p?c>5?"ss-dash-red":c>1?"ss-dash-amber":"ss-dash-accent":"ss-dash-dim"}`,children:p?`${c.toFixed(1)}%`:"-"}),e("div",{className:"ss-dash-sparkline",children:e(Ee,{data:w,color:"#f87171",width:160,height:40})})]})]}),e("div",{className:"ss-dash-chart-container",children:[e("div",{className:"ss-dash-chart-header",children:[e("span",{className:"ss-dash-chart-title",children:"Request Volume"}),e(En,{value:s,onChange:n})]}),e("div",{className:"ss-dash-chart",id:"ss-dash-chart-area",children:f.length===0?e("div",{className:"ss-dash-empty",style:{minHeight:"120px"},children:"No data for this range"}):e(Mn,{chartPoints:f})}),e("div",{className:"ss-dash-chart-legend",id:"ss-dash-chart-legend",children:[e("span",{className:"ss-dash-chart-legend-item",children:[e("span",{className:"ss-dash-legend-dot",style:{background:"var(--ss-accent)"}}),"Requests"]}),f.some(y=>(y.errorCount??0)>0)&&e("span",{className:"ss-dash-chart-legend-item",children:[e("span",{className:"ss-dash-legend-dot",style:{background:"var(--ss-red-fg)"}}),"Errors"]})]})]}),e("div",{className:"ss-dash-secondary-cards",children:[e("div",{className:"ss-dash-secondary-card",children:[e("div",{className:"ss-dash-secondary-card-title",children:e("a",{href:"#requests",className:"ss-dash-widget-link",children:"Slowest Endpoints"})}),r.slowestEndpoints.length===0?e("div",{className:"ss-dash-empty",style:{minHeight:"60px"},children:"No data yet"}):e("ul",{className:"ss-dash-secondary-list",children:r.slowestEndpoints.slice(0,5).map((y,b)=>{const N=y.url||y.pattern||"-";return e("li",{children:e("a",{href:`#requests?url=${encodeURIComponent(N)}`,className:"ss-dash-widget-row-link",children:[e("span",{title:N,children:N}),e("span",{className:`ss-dash-secondary-list-value ss-dash-duration ${Vt(y.avgDuration)}`,children:de(y.avgDuration)})]})},b)})})]}),e("div",{className:"ss-dash-secondary-card",children:[e("div",{className:"ss-dash-secondary-card-title",children:e("a",{href:"#queries",className:"ss-dash-widget-link",children:"Query Stats"})}),e("ul",{className:"ss-dash-secondary-list",children:[e("li",{children:[e("span",{children:"Total Queries"}),e("span",{className:"ss-dash-secondary-list-value",children:r.queryStats.total})]}),e("li",{children:[e("span",{children:"Avg Duration"}),e("span",{className:"ss-dash-secondary-list-value",children:de(r.queryStats.avgDuration)})]}),e("li",{children:[e("span",{children:"Queries / Request"}),e("span",{className:"ss-dash-secondary-list-value",children:r.queryStats.perRequest.toFixed(1)})]})]})]}),e("div",{className:"ss-dash-secondary-card",children:[e("div",{className:"ss-dash-secondary-card-title",children:e("a",{href:"#logs?level=error",className:"ss-dash-widget-link",children:"Recent Errors"})}),r.recentErrors.length===0?e("div",{className:"ss-dash-empty",style:{minHeight:"60px"},children:"No recent errors"}):e("ul",{className:"ss-dash-secondary-list",children:r.recentErrors.map((y,b)=>e("li",{children:e("a",{href:`#logs?id=${y.id??""}`,className:"ss-dash-widget-row-link",children:[e("span",{style:{color:"var(--ss-red-fg)"},title:y.message,children:y.message}),y.timestamp&&e("span",{className:"ss-dash-secondary-list-value",style:{color:"var(--ss-dim)"},title:ne(y.timestamp),children:ae(y.timestamp)})]})},b))})]}),e("div",{className:"ss-dash-secondary-card",children:[e("div",{className:"ss-dash-secondary-card-title",children:e("a",{href:"#events",className:"ss-dash-widget-link",children:"Top Events"})}),r.topEvents.length===0?e("div",{className:"ss-dash-empty",style:{minHeight:"60px"},children:"No events yet"}):e("ul",{className:"ss-dash-secondary-list",children:r.topEvents.slice(0,5).map((y,b)=>{const N=y.name||y.eventName||y.event_name||y.event||"";return e("li",{children:e("a",{href:`#events?event_name=${encodeURIComponent(N)}`,className:"ss-dash-widget-row-link",children:[e("span",{children:N}),e("span",{className:"ss-dash-secondary-list-value",children:y.count})]})},b)})})]}),e("div",{className:"ss-dash-secondary-card",children:[e("div",{className:"ss-dash-secondary-card-title",children:e("a",{href:"#emails",className:"ss-dash-widget-link",children:"Email Activity"})}),e("ul",{className:"ss-dash-secondary-list",children:[e("li",{children:e("a",{href:"#emails?status=sent",className:"ss-dash-widget-row-link",children:[e("span",{children:"Sent"}),e("span",{className:"ss-dash-secondary-list-value",children:r.emailActivity.sent})]})}),e("li",{children:e("a",{href:"#emails?status=queued",className:"ss-dash-widget-row-link",children:[e("span",{children:"Queued"}),e("span",{className:"ss-dash-secondary-list-value",children:r.emailActivity.queued})]})}),e("li",{children:e("a",{href:"#emails?status=failed",className:"ss-dash-widget-row-link",children:[e("span",{children:"Failed"}),e("span",{className:"ss-dash-secondary-list-value",style:r.emailActivity.failed>0?{color:"var(--ss-red-fg)"}:void 0,children:r.emailActivity.failed})]})})]})]}),e("div",{className:"ss-dash-secondary-card",children:[e("div",{className:"ss-dash-secondary-card-title",children:e("a",{href:"#logs",className:"ss-dash-widget-link",children:"Log Levels"})}),e("ul",{className:"ss-dash-secondary-list",children:[e("li",{children:e("a",{href:"#logs?level=error",className:"ss-dash-widget-row-link",children:[e("span",{style:{color:"var(--ss-red-fg)"},children:"Error"}),e("span",{className:"ss-dash-secondary-list-value",children:r.logLevelBreakdown.error})]})}),e("li",{children:e("a",{href:"#logs?level=warn",className:"ss-dash-widget-row-link",children:[e("span",{style:{color:"var(--ss-amber-fg)"},children:"Warn"}),e("span",{className:"ss-dash-secondary-list-value",children:r.logLevelBreakdown.warn})]})}),e("li",{children:e("a",{href:"#logs?level=info",className:"ss-dash-widget-row-link",children:[e("span",{style:{color:"var(--ss-green-fg)"},children:"Info"}),e("span",{className:"ss-dash-secondary-list-value",children:r.logLevelBreakdown.info})]})}),e("li",{children:e("a",{href:"#logs?level=debug",className:"ss-dash-widget-row-link",children:[e("span",{style:{color:"var(--ss-dim)"},children:"Debug"}),e("span",{className:"ss-dash-secondary-list-value",children:r.logLevelBreakdown.debug})]})})]})]}),r.cacheStats&&r.cacheStats.available&&e("div",{className:"ss-dash-secondary-card",children:[e("div",{className:"ss-dash-secondary-card-title",children:e("a",{href:"#cache",className:"ss-dash-widget-link",children:"Cache"})}),e("ul",{className:"ss-dash-secondary-list",children:[e("li",{children:e("a",{href:"#cache",className:"ss-dash-widget-row-link",children:[e("span",{children:"Keys"}),e("span",{className:"ss-dash-secondary-list-value",children:r.cacheStats.totalKeys})]})}),e("li",{children:e("a",{href:"#cache",className:"ss-dash-widget-row-link",children:[e("span",{children:"Hit Rate"}),e("span",{className:"ss-dash-secondary-list-value",children:[r.cacheStats.hitRate.toFixed(1),"%"]})]})}),e("li",{children:e("a",{href:"#cache",className:"ss-dash-widget-row-link",children:[e("span",{children:"Memory"}),e("span",{className:"ss-dash-secondary-list-value",children:r.cacheStats.memoryUsedHuman})]})})]})]}),r.jobQueueStatus&&r.jobQueueStatus.available&&e("div",{className:"ss-dash-secondary-card",children:[e("div",{className:"ss-dash-secondary-card-title",children:e("a",{href:"#jobs",className:"ss-dash-widget-link",children:"Job Queue"})}),e("ul",{className:"ss-dash-secondary-list",children:[e("li",{children:e("a",{href:"#jobs?status=active",className:"ss-dash-widget-row-link",children:[e("span",{children:"Active"}),e("span",{className:"ss-dash-secondary-list-value",children:r.jobQueueStatus.active})]})}),e("li",{children:e("a",{href:"#jobs?status=waiting",className:"ss-dash-widget-row-link",children:[e("span",{children:"Waiting"}),e("span",{className:"ss-dash-secondary-list-value",children:r.jobQueueStatus.waiting})]})}),e("li",{children:e("a",{href:"#jobs?status=failed",className:"ss-dash-widget-row-link",children:[e("span",{children:"Failed"}),e("span",{className:"ss-dash-secondary-list-value",style:r.jobQueueStatus.failed>0?{color:"var(--ss-red-fg)"}:void 0,children:r.jobQueueStatus.failed})]})}),e("li",{children:e("a",{href:"#jobs?status=completed",className:"ss-dash-widget-row-link",children:[e("span",{children:"Completed"}),e("span",{className:"ss-dash-secondary-list-value",children:r.jobQueueStatus.completed})]})})]})]}),e("div",{className:"ss-dash-secondary-card",children:[e("div",{className:"ss-dash-secondary-card-title",children:e("a",{href:"#requests",className:"ss-dash-widget-link",children:"Response Status"})}),e("ul",{className:"ss-dash-secondary-list",children:[e("li",{children:e("a",{href:"#requests?status=2xx",className:"ss-dash-widget-row-link",children:[e("span",{style:{color:"var(--ss-green-fg)"},children:"2xx"}),e("span",{className:"ss-dash-secondary-list-value",children:r.statusDistribution["2xx"]})]})}),e("li",{children:e("a",{href:"#requests?status=3xx",className:"ss-dash-widget-row-link",children:[e("span",{style:{color:"var(--ss-blue-fg)"},children:"3xx"}),e("span",{className:"ss-dash-secondary-list-value",children:r.statusDistribution["3xx"]})]})}),e("li",{children:e("a",{href:"#requests?status=4xx",className:"ss-dash-widget-row-link",children:[e("span",{style:{color:"var(--ss-amber-fg)"},children:"4xx"}),e("span",{className:"ss-dash-secondary-list-value",children:r.statusDistribution["4xx"]})]})}),e("li",{children:e("a",{href:"#requests?status=5xx",className:"ss-dash-widget-row-link",children:[e("span",{style:{color:"var(--ss-red-fg)"},children:"5xx"}),e("span",{className:"ss-dash-secondary-list-value",children:r.statusDistribution["5xx"]})]})})]})]}),e("div",{className:"ss-dash-secondary-card",children:[e("div",{className:"ss-dash-secondary-card-title",children:e("a",{href:"#queries",className:"ss-dash-widget-link",children:"Slowest Queries"})}),r.slowestQueries.length===0?e("div",{className:"ss-dash-empty",style:{minHeight:"60px"},children:"No query data yet"}):e("ul",{className:"ss-dash-secondary-list",children:r.slowestQueries.slice(0,5).map((y,b)=>{const N=y.sqlNormalized||y.normalizedSql||y.sql_normalized||y.sql||"-";return e("li",{children:e("a",{href:`#queries?pattern=${encodeURIComponent(N)}`,className:"ss-dash-widget-row-link",children:[e("span",{title:N,children:N}),e("span",{className:`ss-dash-secondary-list-value ss-dash-duration ${Vt(y.avgDuration)}`,children:de(y.avgDuration)})]})},b)})})]})]})]})}const Pn=Object.freeze(Object.defineProperty({__proto__:null,OverviewSection:Wt,default:Wt},Symbol.toStringTag,{value:"Module"}));function qn({color:t="muted",children:s,className:n="",classPrefix:a="ss-dash"}){return e("span",{className:`${a}-badge ${a}-badge-${t} ${n}`,children:s})}function fe({method:t,className:s="",classPrefix:n="ss-dash"}){return e("span",{className:`${n}-method ${n}-method-${t.toLowerCase()} ${s}`,children:t})}function Ae({code:t,className:s="",classPrefix:n="ss-dash"}){let a=`${n}-status-2xx`;return t>=500?a=`${n}-status-5xx`:t>=400?a=`${n}-status-4xx`:t>=300&&(a=`${n}-status-3xx`),e("span",{className:`${n}-status ${a} ${s}`,children:t})}const Rn="ss-col-resize",Kt="ss-resizing";function Dn(t){const s=Array.from(t.querySelectorAll("thead th"));if(s.length===0)return()=>{};const n=[];let a=!1;function o(){if(!a){a=!0;for(const l of s)l.style.width=l.offsetWidth+"px";t.style.tableLayout="fixed"}}for(const l of s){let r=function(h){h.preventDefault(),h.stopPropagation(),o();const d=h.clientX,u=l.offsetWidth;i.classList.add(Kt),i.setPointerCapture(h.pointerId);function c(p){const f=p.clientX-d,g=Math.max(30,u+f);l.style.width=g+"px"}function v(){i.classList.remove(Kt),i.removeEventListener("pointermove",c),i.removeEventListener("pointerup",v)}i.addEventListener("pointermove",c),i.addEventListener("pointerup",v)};if(!l.textContent?.trim())continue;const i=document.createElement("div");i.className=Rn,l.appendChild(i),i.addEventListener("pointerdown",r),n.push(()=>{i.removeEventListener("pointerdown",r),i.remove()})}return()=>{for(const l of n)l()}}function ee({columns:t,data:s,keyField:n="id",sort:a,sortDir:o,onSort:l,onRowClick:r,rowClassName:i,emptyMessage:h="No data",className:d="",renderAfterRow:u}){const c=M(p=>{l&&l(p)},[l]),v=V(null);return K(()=>{if(v.current)return Dn(v.current)},[s,t]),s.length===0?e("div",{className:"ss-dash-empty",children:h}):e("table",{ref:v,className:`ss-dash-table ${d}`,children:[e("colgroup",{children:t.map(p=>e("col",{style:p.width?{width:p.width}:void 0},p.key))}),e("thead",{children:e("tr",{children:t.map(p=>e("th",{onClick:p.sortable?()=>c(p.key):void 0,className:p.sortable?"ss-dash-sortable":"",children:[p.label,a===p.key&&e("span",{className:"ss-dash-sort-arrow",children:o==="asc"?" ▲":" ▼"})]},p.key))})}),e("tbody",{children:s.map((p,f)=>{const g=i?typeof i=="function"?i(p):i:"",x=r?"ss-dash-clickable":"";return e(Bs.Fragment,{children:[e("tr",{onClick:r?()=>r(p):void 0,className:`${x} ${g}`.trim(),children:t.map(S=>e("td",{children:S.render?S.render(p[S.key],p):p[S.key]??"-"},S.key))}),u?u(p,f):null]},p[n]??f)})})]})}function te({search:t,onSearchChange:s,placeholder:n="Search...",summary:a,children:o,className:l=""}){const r=M(()=>{s("")},[s]);return e("div",{className:`ss-dash-filter-bar ${l}`,children:[a!=null&&e("span",{className:"ss-dash-summary",children:a}),e("div",{className:"ss-dash-search-wrapper",children:[e("svg",{className:"ss-dash-search-icon",width:"14",height:"14",viewBox:F.search.viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:F.search.elements.join("")}}),e("input",{type:"text",className:"ss-dash-search",placeholder:n,value:t,onChange:i=>s(i.target.value)}),t&&e("button",{type:"button",className:"ss-dash-search-clear",onClick:r,children:"×"})]}),o&&e("div",{className:"ss-dash-filter-controls",children:o})]})}function ie({page:t,lastPage:s,total:n,onPageChange:a,className:o=""}){const l=z(()=>Xs(t,s),[t,s]),r=M(()=>{t>1&&a(t-1)},[t,a]),i=M(()=>{t<s&&a(t+1)},[t,s,a]);return s<=1?null:e("div",{className:`ss-dash-pagination ${o}`,children:[e("span",{className:"ss-dash-page-info",children:["Page ",t," of ",s," (",n," total)"]}),e("div",{className:"ss-dash-pagination-controls",children:[e("button",{type:"button",className:"ss-dash-page-btn",onClick:r,disabled:t<=1,children:"« Prev"}),l.map((h,d)=>h==="..."?e("span",{className:"ss-dash-page-ellipsis",children:"..."},`ellipsis-${d}`):e("button",{type:"button",className:`ss-dash-page-btn ${h===t?"ss-dash-active":""}`,onClick:()=>a(h),children:h},h)),e("button",{type:"button",className:"ss-dash-page-btn",onClick:i,disabled:t>=s,children:"Next »"})]})]})}const Qt={request:"#1e3a5f",middleware:"rgba(30, 58, 95, 0.7)",db:"#6d28d9",view:"#0e7490",mail:"#059669",event:"#b45309",custom:"var(--ss-dim)"},jn={request:"Request",middleware:"Middleware",db:"DB",mail:"Mail",event:"Event",view:"View",custom:"Custom"};function Jt({spans:t,totalDuration:s,className:n="",warnings:a}){const o=t||[],l=z(()=>[...o].sort((i,h)=>i.startOffset-h.startOffset),[o]),r=z(()=>{const i={};for(const h of l)i[h.id]=h.parentId?(i[h.parentId]||0)+1:0;return i},[l]);return o.length===0?e("div",{className:"ss-dash-empty",children:"No spans recorded"}):e("div",{className:`ss-dash-tl-waterfall ${n}`,children:[e("div",{className:"ss-dash-tl-legend",children:Object.entries(jn).map(([i,h])=>e("div",{className:"ss-dash-tl-legend-item",children:[e("span",{className:"ss-dash-tl-legend-dot",style:{background:Qt[i]||Qt.custom}}),e("span",{children:h})]},i))}),l.map(i=>{const h=s>0?i.startOffset/s*100:0,d=s>0?Math.max(i.duration/s*100,.5):1,u=r[i.id]||0,c=i.label.length>50?i.label.slice(0,50)+"...":i.label,v=i.category==="db"?"DB":i.category,p=i.category==="db"?"purple":i.category==="mail"?"green":i.category==="event"?"amber":i.category==="view"?"blue":"muted",f=i.metadata?Object.entries(i.metadata).filter(([,x])=>x!=null).map(([x,S])=>`${x}=${S}`).join(", "):"",g=f?`${i.label} (${i.duration.toFixed(2)}ms)
${f}`:`${i.label} (${i.duration.toFixed(2)}ms)`;return e("div",{className:"ss-dash-tl-row",children:[e("div",{className:"ss-dash-tl-label",title:g,style:{paddingLeft:8+u*16+"px"},children:[e("span",{className:`ss-dash-badge ss-dash-badge-${p}`,style:{fontSize:"9px",marginRight:"4px"},children:v}),c]}),e("div",{className:"ss-dash-tl-track",children:e("div",{className:`ss-dash-tl-bar ss-dash-tl-bar-${i.category||"custom"}`,style:{left:`${h}%`,width:`${d}%`},title:g})}),e("span",{className:"ss-dash-tl-dur",children:[i.duration.toFixed(2),"ms"]})]},i.id)}),a&&a.length>0&&e("div",{className:"ss-dash-tl-warnings",children:[e("div",{className:"ss-dash-tl-warnings-title",children:["Warnings (",a.length,")"]}),a.map((i,h)=>e("div",{className:"ss-dash-tl-warning",children:i},h))]})]})}function Gt({options:t={}}){const[s,n]=k(1),[a,o]=k(""),[l,r]=k("createdAt"),[i,h]=k("desc"),[d,u]=k(null),[c,v]=k(!1);K(()=>n(1),[a]);const{data:p,meta:f,isLoading:g,error:x}=J("requests",{...t,page:s,search:a,sort:l,sortDir:i}),S=V(null),w=M(()=>(S.current||(S.current=new me({baseUrl:t.baseUrl||"",authToken:t.authToken})),S.current),[t.baseUrl,t.authToken]),y=M($=>{const T=$.id;v(!0);const L=t.dashboardEndpoint||"/__stats/api";w().fetch(`${L}/requests/${T}`).then(q=>{u(q),v(!1)}).catch(()=>{v(!1)})},[w,t.dashboardEndpoint]),b=M($=>{l===$?h(T=>T==="asc"?"desc":"asc"):(r($),h("desc"))},[l]),N=p||[];if(d){let $=d.spans;if(typeof $=="string")try{$=JSON.parse($)}catch{$=[]}const T=Array.isArray($)?$:[];let L=d.warnings;if(typeof L=="string")try{L=JSON.parse(L)}catch{L=[]}const q=Array.isArray(L)?L:[],I=d.status_code||d.statusCode||0,R=d.total_duration||d.totalDuration||d.duration||0,C=d.span_count||d.spanCount||0;return e("div",{children:[e("div",{className:"ss-dash-tl-detail-header",children:[e("button",{type:"button",className:"ss-dash-btn",onClick:()=>u(null),children:"← Back to Requests"}),e(fe,{method:d.method||""}),e("span",{style:{color:"var(--ss-text)"},children:d.url}),e(Ae,{code:I}),e("span",{className:"ss-dash-tl-meta",children:[R.toFixed(1),"ms · ",C," spans"]})]}),e(Jt,{spans:T,totalDuration:R,warnings:q})]})}return c?e("div",{children:[e("div",{className:"ss-dash-tl-detail-header",children:e("button",{type:"button",className:"ss-dash-btn",onClick:()=>v(!1),children:"← Back to Requests"})}),e("div",{className:"ss-dash-empty",children:"Loading request detail..."})]}):e("div",{children:[e(te,{search:a,onSearchChange:o,placeholder:"Filter requests...",summary:`${f?.total??0} requests`}),x&&e("div",{className:"ss-dash-empty",children:"Failed to load requests"}),g&&!p?e("div",{className:"ss-dash-empty",children:"Loading requests..."}):e(O,{children:[e("div",{className:"ss-dash-table-wrap",children:e(ee,{columns:[{key:"id",label:"#",width:"40px",render:$=>e("span",{style:{color:"var(--ss-dim)"},children:$})},{key:"method",label:"Method",width:"70px",sortable:!0,render:$=>e(fe,{method:$})},{key:"url",label:"URL",sortable:!0,render:$=>e("span",{style:{color:"var(--ss-text)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:$,children:$})},{key:"statusCode",label:"Status",width:"60px",sortable:!0,render:($,T)=>{const L=T.status_code||T.statusCode||T.statusCode;return e(Ae,{code:L})}},{key:"duration",label:"Duration",width:"80px",sortable:!0,render:($,T)=>{const L=T.total_duration||T.totalDuration||T.duration||0;return e("span",{className:`ss-dash-duration ${L>500?"ss-dash-very-slow":L>100?"ss-dash-slow":""}`,children:[L.toFixed(1),"ms"]})}},{key:"spanCount",label:"Spans",width:"50px",render:($,T)=>{const L=T.span_count||T.spanCount||0;return e("span",{style:{color:"var(--ss-muted)",textAlign:"center"},children:L})}},{key:"warningCount",label:"⚠",width:"40px",render:($,T)=>{const L=T.warning_count||T.warningCount||0;return L>0?e("span",{style:{color:"var(--ss-amber-fg)",textAlign:"center",display:"block"},children:L}):e("span",{style:{color:"var(--ss-dim)",textAlign:"center",display:"block"},children:"-"})}},{key:"createdAt",label:"Time",width:"80px",sortable:!0,render:($,T)=>{const L=T.createdAt||T.created_at||T.timestamp||"";return e("span",{className:"ss-dash-event-time",title:ne(L),children:ae(L)})}}],data:N,sort:l,sortDir:i,onSort:b,onRowClick:y,emptyMessage:"No requests recorded yet"})}),f&&e(ie,{page:f.page,lastPage:f.lastPage,total:f.total,onPageChange:n})]})]})}const On=Object.freeze(Object.defineProperty({__proto__:null,RequestsSection:Gt,default:Gt},Symbol.toStringTag,{value:"Module"}));function Xt({node:t,depth:s=0}){if(!t)return null;const n=s*20,a=t["Node Type"]||"Unknown",o=t["Relation Name"]?e(O,{children:[" on ",e("strong",{children:t["Relation Name"]})]}):null,l=t.Alias&&t.Alias!==t["Relation Name"]?` (${t.Alias})`:"",r=t["Index Name"]?e(O,{children:[" using ",e("em",{children:t["Index Name"]})]}):null,i=[];if(t["Startup Cost"]!==null&&t["Startup Cost"]!==void 0&&i.push(`cost=${t["Startup Cost"]}..${t["Total Cost"]}`),t["Plan Rows"]!==null&&t["Plan Rows"]!==void 0&&i.push(`rows=${t["Plan Rows"]}`),t["Plan Width"]!==null&&t["Plan Width"]!==void 0&&i.push(`width=${t["Plan Width"]}`),t.Filter&&i.push(`filter: ${t.Filter}`),t["Index Cond"]&&i.push(`cond: ${t["Index Cond"]}`),t["Hash Cond"]&&i.push(`hash: ${t["Hash Cond"]}`),t["Join Type"]&&i.push(`join: ${t["Join Type"]}`),t["Sort Key"]){const d=Array.isArray(t["Sort Key"])?t["Sort Key"].join(", "):t["Sort Key"];i.push(`sort: ${d}`)}const h=t.Plans||[];return e("div",{className:"ss-dash-explain-node",style:{marginLeft:`${n}px`},children:[e("div",{className:"ss-dash-explain-node-header",children:[e("span",{className:"ss-dash-explain-node-type",children:a}),o,l,r]}),i.length>0&&e("div",{className:"ss-dash-explain-metrics",children:i.join(" · ")}),h.map((d,u)=>e(Xt,{node:d,depth:s+1},u))]})}function Fn({plan:t}){if(!t||!Array.isArray(t)||t.length===0)return e("div",{className:"ss-dash-explain-result",children:"No plan data returned"});const s=t[0];if(s&&s.Plan)return e("div",{className:"ss-dash-explain-result",children:e(Xt,{node:s.Plan,depth:0})});if(typeof s=="object"&&s!==null){const n=Object.keys(s);return e("div",{className:"ss-dash-explain-result",children:e("table",{children:[e("thead",{children:e("tr",{children:n.map(a=>e("th",{children:a},a))})}),e("tbody",{children:t.map((a,o)=>{const l=a;return e("tr",{children:n.map(r=>e("td",{children:l[r]!==null&&l[r]!==void 0?String(l[r]):"-"},r))},o)})})]})})}return e("div",{className:"ss-dash-explain-result",children:"No plan data returned"})}const In=8;function Yt({options:t={}}){const[s,n]=k(1),[a,o]=k(""),[l,r]=k("createdAt"),[i,h]=k("desc"),[d,u]=k("list"),[c,v]=k(null),[p,f]=k(null),[g,x]=k(null),S=M(m=>{m!==d&&(u(m),n(1),r(m==="list"?"createdAt":"count"),h("desc"),v(null),f(null),x(null))},[d]);K(()=>n(1),[a]);const w=d==="grouped"?"queries/grouped":"queries",{data:y,meta:b,isLoading:N,mutate:$}=J(w,{...t,page:s,search:a,sort:l,sortDir:i}),T=M(m=>{l===m?h(_=>_==="asc"?"desc":"asc"):(r(m),h("desc"))},[l]),L=M(async m=>{if(p&&p.queryId===m){f(null);return}x(m);try{const _=await $(`queries/${m}/explain`);_&&_.error?f({queryId:m,plan:[],error:_.error,message:_.message}):f({queryId:m,plan:_?.plan||_?.rows||[]})}catch(_){console.warn("[ss] Query explain failed:",_),f({queryId:m,plan:[],error:_ instanceof Error?_.message:String(_)})}finally{x(null)}},[$,p]),q=M(m=>{const _=m.id;return!p||p.queryId!==_?null:e("tr",{className:"ss-dash-explain-row",children:e("td",{colSpan:In,className:"ss-dash-explain",children:e("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[e("div",{style:{flex:1},children:p.error?e("div",{className:"ss-dash-explain-result ss-dash-explain-error",children:[e("strong",{children:"Error:"})," ",p.error,p.message&&e(O,{children:[e("br",{}),p.message]})]}):e(Fn,{plan:p.plan})}),e("button",{type:"button",className:"ss-dash-explain-btn",onClick:()=>f(null),style:{marginLeft:"8px",flexShrink:0},children:"Close"})]})})})},[p]),I=d==="grouped"?y?.groups||[]:y||[],R=z(()=>d!=="grouped"?I:I.map(m=>{const _={...m};return(_.sqlNormalized===null||_.sqlNormalized===void 0)&&(m.sql_normalized||m.pattern)&&(_.sqlNormalized=m.sql_normalized||m.pattern||""),(_.count===null||_.count===void 0)&&m.total_count!==null&&m.total_count!==void 0&&(_.count=m.total_count),(_.avgDuration===null||_.avgDuration===void 0)&&m.avg_duration!==null&&m.avg_duration!==void 0&&(_.avgDuration=m.avg_duration),(_.maxDuration===null||_.maxDuration===void 0)&&m.max_duration!==null&&m.max_duration!==void 0&&(_.maxDuration=m.max_duration),(_.minDuration===null||_.minDuration===void 0)&&m.min_duration!==null&&m.min_duration!==void 0&&(_.minDuration=m.min_duration),(_.totalDuration===null||_.totalDuration===void 0)&&m.total_duration!==null&&m.total_duration!==void 0&&(_.totalDuration=m.total_duration),(_.percentOfTotal===null||_.percentOfTotal===void 0)&&m.pct_time!==null&&m.pct_time!==void 0&&(_.percentOfTotal=m.pct_time),_}),[I,d]),C=z(()=>{const m=b?.total??R.length;let _=0,E=0,A=0,D=0;for(const W of R){const se=W.duration||0;A+=se,D++,se>100&&_++}const U=new Map;for(const W of R){const se=W.sqlNormalized||W.sql||W.sql_text||"";U.set(se,(U.get(se)||0)+1)}for(const W of U.values())W>1&&(E+=W);return{total:m,slow:_,duplicates:E,avgDuration:D>0?A/D:0}},[R,b]),j=z(()=>{const m=new Map;for(const _ of R){const E=_.sqlNormalized||_.sql||_.sql_text||"";m.set(E,(m.get(E)||0)+1)}return m},[R]),X=z(()=>{if(d==="grouped")return`${R.length} query patterns`;const m=[`${C.total} queries`];return C.slow>0&&m.push(`${C.slow} slow`),C.duplicates>0&&m.push(`${C.duplicates} dup`),m.push(`avg ${(C.avgDuration||0).toFixed(1)}ms`),m.join(", ")},[d,R.length,C]);return e("div",{children:[e(te,{search:a,onSearchChange:o,placeholder:"Filter queries...",summary:X,children:e("div",{className:"ss-dash-btn-group",children:[e("button",{type:"button",className:`ss-dash-btn ${d==="list"?"ss-dash-active":""}`,onClick:()=>S("list"),children:"List"}),e("button",{type:"button",className:`ss-dash-btn ${d==="grouped"?"ss-dash-active":""}`,onClick:()=>S("grouped"),children:"Grouped"})]})}),N&&!y?e("div",{className:"ss-dash-empty",children:"Loading queries..."}):d==="grouped"?e(O,{children:e("div",{className:"ss-dash-table-wrap",children:e(ee,{columns:[{key:"sqlNormalized",label:"Pattern",render:(m,_)=>{const E=m||"",A=(_.count||0)>=3;return e(O,{children:[e("span",{className:`ss-dash-sql ${c===E?"ss-dash-expanded":""}`,title:"Click to expand",onClick:D=>{D.stopPropagation(),v(c===E?null:E)},role:"button",tabIndex:0,onKeyDown:D=>D.key==="Enter"&&v(c===E?null:E),children:E}),A&&e(O,{children:[" ",e("span",{className:"ss-dash-dup",children:"DUP"})]})]})}},{key:"count",label:"Count",width:"60px",sortable:!0,render:m=>e("span",{style:{color:"var(--ss-muted)",textAlign:"center",display:"block"},children:m||0})},{key:"avgDuration",label:"Avg",width:"70px",sortable:!0,render:m=>{const _=m||0;return e("span",{className:`ss-dash-duration ${_>500?"ss-dash-very-slow":_>100?"ss-dash-slow":""}`,children:_.toFixed(2)+"ms"})}},{key:"minDuration",label:"Min",width:"70px",render:m=>e("span",{className:"ss-dash-duration",children:(m||0).toFixed(2)+"ms"})},{key:"maxDuration",label:"Max",width:"70px",render:m=>{const _=m||0;return e("span",{className:`ss-dash-duration ${_>500?"ss-dash-very-slow":_>100?"ss-dash-slow":""}`,children:_.toFixed(2)+"ms"})}},{key:"totalDuration",label:"Total",width:"70px",sortable:!0,render:m=>e("span",{className:"ss-dash-duration",children:(m||0).toFixed(1)+"ms"})},{key:"percentOfTotal",label:"% Time",width:"60px",render:m=>e("span",{style:{color:"var(--ss-muted)",textAlign:"center",display:"block"},children:(m||0).toFixed(1)+"%"})}],data:R,keyField:"sqlNormalized",sort:l,sortDir:i,onSort:T,emptyMessage:"No queries recorded"})})}):e(O,{children:[e("div",{className:"ss-dash-table-wrap",children:e(ee,{columns:[{key:"id",label:"#",width:"40px",render:m=>e("span",{style:{color:"var(--ss-dim)"},children:m})},{key:"sql",label:"SQL",render:(m,_)=>{const E=_.sql||_.sql_text||"";return e("div",{children:[e("span",{className:`ss-dash-sql ${c===_.id?"ss-dash-expanded":""}`,title:"Click to expand",onClick:A=>{A.stopPropagation(),v(c===_.id?null:_.id)},role:"button",tabIndex:0,onKeyDown:A=>A.key==="Enter"&&v(c===_.id?null:_.id),children:E}),(j.get((_.sqlNormalized||_.sql||_.sql_text)??"")??0)>1&&e("span",{className:"ss-dash-dup",children:["×",j.get((_.sqlNormalized||_.sql||_.sql_text)??"")]})]})}},{key:"duration",label:"Duration",width:"70px",sortable:!0,render:m=>{const _=m||0;return e("span",{className:`ss-dash-duration ${_>500?"ss-dash-very-slow":_>100?"ss-dash-slow":""}`,children:_.toFixed(2)+"ms"})}},{key:"method",label:"Method",width:"60px",render:(m,_)=>{const E=_.method||_.sql_method||"";return e("span",{className:`ss-dash-method ss-dash-method-${E.toLowerCase()}`,children:E})}},{key:"model",label:"Model",width:"90px",render:m=>e("span",{style:{color:"var(--ss-muted)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:m,children:m||"-"})},{key:"connection",label:"Connection",width:"80px",render:m=>e("span",{style:{color:"var(--ss-dim)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:m||"-"})},{key:"createdAt",label:"Time",width:"90px",sortable:!0,render:(m,_)=>{const E=m||_.created_at||_.timestamp||"";return e("span",{className:"ss-dash-event-time",title:ne(E),children:ae(E)})}},{key:"id",label:"",width:"70px",render:(m,_)=>{if((_.method||_.sql_method||"")!=="select")return null;const A=p?.queryId===_.id&&!p?.error;return e("button",{type:"button",className:`ss-dash-explain-btn${A?" ss-dash-explain-btn-active":""}`,onClick:D=>{D.stopPropagation(),L(_.id)},disabled:g===_.id,children:g===_.id?"...":"EXPLAIN"})}}],data:R,sort:l,sortDir:i,onSort:T,emptyMessage:"No queries recorded",renderAfterRow:q})}),b&&e(ie,{page:b.page,lastPage:b.lastPage,total:b.total,onPageChange:n})]})]})}const Bn=Object.freeze(Object.defineProperty({__proto__:null,QueriesSection:Yt,default:Yt},Symbol.toStringTag,{value:"Module"}));function Qe({data:t,maxPreviewLength:s=100,className:n="",classPrefix:a="ss-dash"}){const[o,l]=k(!1),r=z(()=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},[t]),i=z(()=>typeof r=="object"&&r!==null?Ke(r,s):String(r??"-"),[r,s]),h=z(()=>typeof r=="object"&&r!==null?JSON.stringify(r,null,2):String(r),[r]),d=M(()=>{l(c=>!c)},[]),u=M(async()=>{try{await navigator.clipboard.writeText(h)}catch{}},[h]);return!t&&t!==0&&t!==!1?e("span",{className:`ss-dim ${a}-c-dim`,children:"-"}):e("div",{className:`${a}-data-cell ${n}`,children:[e("span",{className:`${a}-data-preview`,onClick:d,role:"button",tabIndex:0,onKeyDown:c=>c.key==="Enter"&&d(),children:i}),o&&e("div",{className:`${a}-data-full`,onClick:d,children:[e("button",{className:`${a}-copy-btn`,onClick:c=>{c.stopPropagation(),u()},title:"Copy to clipboard",type:"button",children:"Copy"}),e("pre",{children:h})]})]})}function Zt({options:t={}}){const[s,n]=k(1),[a,o]=k(""),{data:l,meta:r,isLoading:i}=J("events",{...t,page:s,search:a}),h=l||[];return K(()=>n(1),[a]),e("div",{children:[e(te,{search:a,onSearchChange:o,placeholder:"Filter events...",summary:`${r?.total??0} events`}),i&&!l?e("div",{className:"ss-dash-empty",children:"Loading events..."}):e(O,{children:[e("div",{className:"ss-dash-table-wrap",children:e(ee,{columns:[{key:"id",label:"#",width:"40px",render:d=>e("span",{style:{color:"var(--ss-dim)"},children:d})},{key:"eventName",label:"Event",render:(d,u)=>{const c=u.event_name||u.eventName||u.event||"";return e("span",{className:"ss-dash-event-name",title:c,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:c})}},{key:"data",label:"Data",render:d=>e(Qe,{data:d,maxPreviewLength:80,className:"ss-dash-event-data"})},{key:"createdAt",label:"Time",width:"80px",render:(d,u)=>{const c=u.createdAt||u.created_at||u.timestamp;return e("span",{className:"ss-dash-event-time",title:ne(c),children:ae(c)})}}],data:h,emptyMessage:"No events recorded yet"})}),r&&e(ie,{page:r.page,lastPage:r.lastPage,total:r.total,onPageChange:n})]})]})}const Un=Object.freeze(Object.defineProperty({__proto__:null,EventsSection:Zt,default:Zt},Symbol.toStringTag,{value:"Module"}));function es({options:t={}}){const[s,n]=k(""),{data:a,isLoading:o,error:l}=J("routes",{...t,search:s}),r=a,i=Array.isArray(r)?r:r&&Array.isArray(r.routes)?r.routes:r&&Array.isArray(r.data)?r.data:[],h={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"};return e("div",{children:[e(te,{search:s,onSearchChange:n,placeholder:"Filter routes...",summary:`${i.length} routes`}),l?e("div",{className:"ss-dash-empty",children:"Failed to load routes"}):o&&!a?e("div",{className:"ss-dash-empty",children:"Loading routes..."}):e(O,{children:e("div",{className:"ss-dash-table-wrap",children:e(ee,{columns:[{key:"method",label:"Method",width:"70px",render:d=>e(fe,{method:d})},{key:"pattern",label:"Pattern",render:d=>e("span",{style:{color:"var(--ss-text)",...h},title:d,children:d})},{key:"name",label:"Name",width:"120px",render:d=>e("span",{style:{color:"var(--ss-muted)",...h},title:d||"-",children:d||"-"})},{key:"handler",label:"Handler",render:d=>e("span",{style:{color:"var(--ss-sql-color)",...h},title:d,children:d})},{key:"middleware",label:"Middleware",render:d=>{const u=d?.length?d.join(", "):"-";return e("span",{style:{color:"var(--ss-dim)",fontSize:"10px",...h},title:u,children:u})}}],data:i,keyField:"pattern",emptyMessage:"No routes available"})})})]})}const Hn=Object.freeze(Object.defineProperty({__proto__:null,RoutesSection:es,default:es},Symbol.toStringTag,{value:"Module"})),zn=["all","error","warn","info","debug"];function ts({options:t={}}){const[s,n]=k(1),[a,o]=k(""),[l,r]=k("all"),[i,h]=k(""),[d,u]=k(""),[c,v]=k([]),[p,f]=k("level"),[g,x]=k("equals"),[S,w]=k(""),y={};l!=="all"&&(y.level=l),i&&(y.request_id=i),c.forEach((m,_)=>{y[`filter_field_${_}`]=m.field,y[`filter_op_${_}`]=m.operator,y[`filter_value_${_}`]=m.value});const{data:b,meta:N,isLoading:$}=J("logs",{...t,page:s,search:a,filters:y}),T=b||[],L=M(m=>{h(m),u(m),n(1)},[]),q=M(()=>{const m=d.trim();h(m),n(1)},[d]),I=M(()=>{h(""),u(""),n(1)},[]),R=M(()=>{r("all"),n(1)},[]),C=M(()=>{const m=S.trim();m&&(v(_=>[..._,{field:p,operator:g,value:m}]),w(""))},[p,g,S]),j=M(m=>{v(_=>_.filter((E,A)=>A!==m))},[]),X=l!=="all"||i!==""||c.length>0;return e("div",{children:[e(te,{search:a,onSearchChange:o,placeholder:"Search logs...",summary:`${N?.total??0} logs`,children:e("div",{className:"ss-dash-log-filters",children:[zn.map(m=>e("button",{type:"button",className:`ss-dash-log-filter ${l===m?"ss-dash-active":""}`,onClick:()=>{r(m),n(1)},children:m},m)),e("input",{type:"text",className:"ss-dash-filter-input ss-dash-reqid-input",placeholder:"Filter by request ID...",value:d,onChange:m=>u(m.target.value),onKeyDown:m=>m.key==="Enter"&&q()}),(d||i)&&e("button",{type:"button",className:"ss-dash-btn ss-dash-reqid-clear",onClick:()=>{I()},children:"Clear"})]})}),e("div",{className:"ss-dash-structured-search",children:[e("select",{className:"ss-dash-filter-select",value:p,onChange:m=>f(m.target.value),children:[e("option",{value:"level",children:"level"}),e("option",{value:"message",children:"message"}),e("option",{value:"request_id",children:"request_id"}),e("option",{value:"userId",children:"userId"}),e("option",{value:"email",children:"email"}),e("option",{value:"path",children:"path"})]}),e("select",{className:"ss-dash-filter-select",value:g,onChange:m=>x(m.target.value),children:[e("option",{value:"equals",children:"equals"}),e("option",{value:"contains",children:"contains"}),e("option",{value:"starts_with",children:"starts with"})]}),e("input",{className:"ss-dash-filter-input",placeholder:"Value...",value:S,onChange:m=>w(m.target.value),onKeyDown:m=>m.key==="Enter"&&C()}),e("button",{type:"button",className:"ss-dash-btn",onClick:C,children:"Add"})]}),X&&e("div",{className:"ss-dash-filter-chips",children:[l!=="all"&&e("span",{className:"ss-dash-filter-chip",children:["level: ",l,e("button",{type:"button",className:"ss-dash-filter-chip-remove",onClick:R,children:"×"})]}),i&&e("span",{className:"ss-dash-filter-chip",children:["requestId: ",i.slice(0,8),"...",e("button",{type:"button",className:"ss-dash-filter-chip-remove",onClick:I,children:"×"})]}),c.map((m,_)=>e("span",{className:"ss-dash-filter-chip",children:[m.field," ",m.operator,' "',m.value,'"',e("button",{type:"button",className:"ss-dash-filter-chip-remove",onClick:()=>j(_),children:"×"})]},_))]}),$&&!b?e("div",{className:"ss-dash-empty",children:"Loading logs..."}):T.length===0?e("div",{className:"ss-dash-empty",children:["No log entries",i?` matching request ${i}`:l!=="all"?` for ${l}`:""]}):e("div",{className:"ss-dash-log-entries",children:T.map((m,_)=>{const E=(m.level||m.levelName||m.level_name||"info").toLowerCase(),A=m.message||m.msg||"",D=m.data||{},U=m.requestId||m.request_id||m["x-request-id"]||D.requestId||D.request_id||D["x-request-id"]||"",W=m.createdAt||m.created_at||m.time||m.timestamp||0;return e("div",{className:"ss-dash-log-entry",children:[e("span",{className:`ss-dash-log-level ss-dash-log-level-${E}`,children:E.toUpperCase()}),e("span",{className:"ss-dash-log-time",title:W?ne(W):"",children:W?ae(W):"-"}),U?e("span",{className:"ss-dash-log-reqid",title:U,onClick:()=>L(U),role:"button",tabIndex:0,onKeyDown:se=>se.key==="Enter"&&L(U),children:U.slice(0,8)}):e("span",{className:"ss-dash-log-reqid-empty",children:"--"}),e("span",{className:"ss-dash-log-msg",children:A})]},m.id||_)})}),N&&e(ie,{page:N.page,lastPage:N.lastPage,total:N.total,onPageChange:n})]})}const Vn=Object.freeze(Object.defineProperty({__proto__:null,LogsSection:ts,default:ts},Symbol.toStringTag,{value:"Module"}));function ss({options:t={}}){const[s,n]=k(1),[a,o]=k(""),[l,r]=k(null),[i,h]=k(null),{data:d,meta:u,isLoading:c}=J("emails",{...t,page:s,search:a}),v=d||[];K(()=>n(1),[a]);const p=M(async f=>{if(f.html){r(f.id),h(f.html);return}try{const{baseUrl:g="",dashboardEndpoint:x="/__stats/api",authToken:S}=t,w=`${g}${x}/emails/${f.id}/preview`,y={Accept:"text/html"};S&&(y.Authorization=`Bearer ${S}`);const N=await(await fetch(w,{headers:y,credentials:"same-origin"})).text();r(f.id),h(N)}catch{}},[t]);if(l&&i){const f=v.find(g=>g.id===l);return e("div",{className:"ss-dash-email-preview",id:"ss-dash-email-preview",children:[e("div",{className:"ss-dash-email-preview-header",children:[e("div",{className:"ss-dash-email-preview-meta",id:"ss-dash-email-preview-meta",children:f&&e(O,{children:[e("strong",{children:"Subject:"})," ",f.subject,"  |  ",e("strong",{children:"From:"})," ",f.from_addr||f.from,"  |  ",e("strong",{children:"To:"})," ",f.to_addr||f.to,(f.cc||f.cc_addr)&&e(O,{children:["  |  ",e("strong",{children:"CC:"})," ",f.cc||f.cc_addr]}),"  |  ",e("strong",{children:"Status:"})," ",e("span",{className:`ss-dash-badge ss-dash-email-status-${f.status}`,children:f.status}),f.mailer&&e(O,{children:["  |  ",e("strong",{children:"Mailer:"})," ",f.mailer]})]})}),e("button",{type:"button",className:"ss-dash-btn",id:"ss-dash-email-preview-close",onClick:()=>{r(null),h(null)},children:"Close"})]}),e("iframe",{className:"ss-dash-email-iframe",id:"ss-dash-email-iframe",srcDoc:i,title:"Email preview",sandbox:""})]})}return e("div",{children:[e(te,{search:a,onSearchChange:o,placeholder:"Filter emails...",summary:`${u?.total??0} emails`}),c&&!d?e("div",{className:"ss-dash-empty",children:"Loading emails..."}):e(O,{children:[e("div",{className:"ss-dash-table-wrap",children:e(ee,{columns:[{key:"id",label:"#",width:"40px",render:f=>e("span",{style:{color:"var(--ss-dim)"},children:f})},{key:"from",label:"From",width:"150px",render:(f,g)=>{const x=g.from_addr||g.from||"";return e("span",{title:x,style:{color:"var(--ss-text-secondary)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:x})}},{key:"to",label:"To",width:"150px",render:(f,g)=>{const x=g.to_addr||g.to||"";return e("span",{title:x,style:{color:"var(--ss-text-secondary)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:x})}},{key:"subject",label:"Subject",render:f=>{const g=f||"";return e("span",{title:g,style:{color:"var(--ss-sql-color)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:g})}},{key:"status",label:"Status",width:"80px",render:f=>{const g=f||"";return e("span",{className:`ss-dash-badge ss-dash-email-status-${g}`,children:g})}},{key:"attachmentCount",label:"ATT",width:"40px",render:(f,g)=>{const x=g.attachment_count||g.attachmentCount||0;return x>0?e("span",{style:{color:"var(--ss-dim)",textAlign:"center",display:"block"},children:x}):e("span",{style:{color:"var(--ss-dim)",textAlign:"center",display:"block"},children:"-"})}},{key:"mailer",label:"Mailer",width:"70px",render:f=>{const g=f||"";return e("span",{title:g,style:{color:"var(--ss-muted)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:g})}},{key:"createdAt",label:"Time",width:"80px",render:(f,g)=>{const x=g.createdAt||g.created_at||g.timestamp;return e("span",{className:"ss-dash-event-time",style:{whiteSpace:"nowrap"},title:ne(x),children:ae(x)})}}],data:v,onRowClick:p,rowClassName:"ss-dash-email-row",emptyMessage:"No emails captured yet"})}),u&&e(ie,{page:u.page,lastPage:u.lastPage,total:u.total,onPageChange:n})]})]})}const Wn=Object.freeze(Object.defineProperty({__proto__:null,EmailsSection:ss,default:ss},Symbol.toStringTag,{value:"Module"}));function ns({options:t={},tracingEnabled:s=!0}){const[n,a]=k(1),[o,l]=k(""),[r,i]=k(null),[h,d]=k(null),[u,c]=k(!1),{data:v,meta:p,isLoading:f,error:g}=J("traces",{...t,page:n,search:o}),x=v||[],S=V(null),w=M(()=>(S.current||(S.current=new me({baseUrl:t.baseUrl||"",authToken:t.authToken})),S.current),[t.baseUrl,t.authToken]);K(()=>{if(!r){d(null);return}let b=!1;c(!0);const N=t.dashboardEndpoint||"/__stats/api";return w().fetch(`${N}/traces/${r}`).then($=>{b||(d($),c(!1))}).catch(()=>{b||c(!1)}),()=>{b=!0}},[r,w,t.dashboardEndpoint]);const y=M(()=>i(null),[]);if(!s)return e("div",{className:"ss-dash-empty",children:"Tracing is not enabled. Enable tracing in your server-stats config to use the timeline."});if(r&&h){let b=h.spans;if(typeof b=="string")try{b=JSON.parse(b)}catch{b=[]}const N=Array.isArray(b)?b:[];let $=h.warnings;if(typeof $=="string")try{$=JSON.parse($)}catch{$=[]}const T=Array.isArray($)?$:[],L=h.total_duration||h.totalDuration||0,q=h.spanCount??N.length;return e("div",{children:[e("div",{className:"ss-dash-tl-detail-header",children:[e("button",{type:"button",className:"ss-dash-btn",onClick:y,children:"← Back"}),e(fe,{method:h.method||""}),e("span",{style:{color:"var(--ss-text)"},children:h.url}),e(Ae,{code:h.status_code||h.statusCode||0}),e("span",{className:"ss-dash-tl-meta",children:[L.toFixed(1),"ms · ",q," spans"]})]}),e(Jt,{spans:N,totalDuration:L,warnings:T})]})}return r&&u?e("div",{children:[e("div",{className:"ss-dash-tl-detail-header",children:e("button",{type:"button",className:"ss-dash-btn",onClick:y,children:"← Back"})}),e("div",{className:"ss-dash-empty",children:"Loading trace detail..."})]}):e("div",{children:[e(te,{search:o,onSearchChange:l,placeholder:"Filter traces...",summary:`${p?.total??0} traces`}),g&&e("div",{className:"ss-dash-empty",children:"Failed to load traces"}),f&&!v?e("div",{className:"ss-dash-empty",children:"Loading traces..."}):e(O,{children:[e("div",{className:"ss-dash-table-wrap",children:e(ee,{columns:[{key:"id",label:"#",width:"40px",render:b=>e("span",{style:{color:"var(--ss-dim)"},children:b})},{key:"method",label:"Method",width:"70px",render:b=>e(fe,{method:b})},{key:"url",label:"URL",render:b=>e("span",{style:{color:"var(--ss-text)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:b,children:b})},{key:"statusCode",label:"Status",width:"60px",render:b=>e(Ae,{code:b})},{key:"totalDuration",label:"Duration",width:"80px",render:b=>e("span",{className:`ss-dash-duration ${b>500?"ss-dash-very-slow":b>100?"ss-dash-slow":""}`,children:[b.toFixed(1),"ms"]})},{key:"spanCount",label:"Spans",width:"50px",render:b=>e("span",{style:{color:"var(--ss-muted)",textAlign:"center"},children:b})},{key:"createdAt",label:"Time",width:"80px",render:b=>e("span",{className:"ss-dash-event-time",title:ne(b),children:ae(b)})}],data:x,onRowClick:b=>i(b.id),emptyMessage:"No traces recorded"})}),p&&e(ie,{page:p.page,lastPage:p.lastPage,total:p.total,onPageChange:a})]})]})}const Kn=Object.freeze(Object.defineProperty({__proto__:null,TimelineSection:ns,default:ns},Symbol.toStringTag,{value:"Module"}));function as({options:t={}}){const[s,n]=k(""),[a,o]=k(null),[l,r]=k(null),[i,h]=k(!1),[d,u]=k(null),{data:c,isLoading:v,mutate:p,getApi:f}=J("cache",{...t,search:s}),g=c,x=M(async w=>{if(confirm(`Delete cache key "${w}"?`))try{await p(`cache/${encodeURIComponent(w)}`,"delete"),a===w&&(o(null),r(null),u(null))}catch{}},[p,a]),S=M(async w=>{if(a===w){o(null),r(null),u(null);return}o(w),r(null),u(null),h(!0);try{const b=await f().fetchCacheKey(w);r(b.value!==void 0?b.value:b.data!==void 0?b.data:b),u(null)}catch{r(null),u("Failed to fetch key value")}finally{h(!1)}},[a,f]);return e("div",{children:[g?.available&&g?.stats&&e("div",{className:"ss-dash-cache-stats",children:[e("div",{className:"ss-dash-cache-stat",children:[e("span",{className:"ss-dash-cache-stat-label",children:"Hit Rate:"}),e("span",{className:"ss-dash-cache-stat-value",children:[(g.stats.hitRate??0).toFixed(1),"%"]})]}),e("div",{className:"ss-dash-cache-stat",children:[e("span",{className:"ss-dash-cache-stat-label",children:"Hits:"}),e("span",{className:"ss-dash-cache-stat-value",children:g.stats.hits??0})]}),e("div",{className:"ss-dash-cache-stat",children:[e("span",{className:"ss-dash-cache-stat-label",children:"Misses:"}),e("span",{className:"ss-dash-cache-stat-value",children:g.stats.misses??0})]}),e("div",{className:"ss-dash-cache-stat",children:[e("span",{className:"ss-dash-cache-stat-label",children:"Keys:"}),e("span",{className:"ss-dash-cache-stat-value",children:g.stats.totalKeys||g.stats.keyCount||g.keys?.length||0})]})]}),e(te,{search:s,onSearchChange:n,placeholder:"Filter cache keys...",summary:`${(g?.keys||g?.data||[]).length} keys`}),v&&!c?e("div",{className:"ss-dash-empty",children:"Loading cache..."}):!g||!g.available?e("div",{className:"ss-dash-empty",children:"Cache inspector not available"}):e("div",{className:"ss-dash-table-wrap",children:e(ee,{columns:[{key:"key",label:"Key",render:w=>e("span",{title:w,style:{color:"var(--ss-sql-color)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},children:w})},{key:"type",label:"Type",width:"70px",render:w=>e("span",{style:{color:"var(--ss-muted)"},children:w})},{key:"size",label:"Size",width:"60px",render:w=>w!=null?w+"B":"-"},{key:"ttl",label:"TTL",width:"70px",render:w=>w>0?`${w}s`:"-"},{key:"_actions",label:"",width:"60px",render:(w,y)=>e("button",{type:"button",className:"ss-dash-retry-btn",onClick:b=>{b.stopPropagation(),x(y.key)},children:"Delete"})}],data:g.keys||g.data||[],keyField:"key",onRowClick:w=>S(w.key),emptyMessage:"No cache keys found"})}),a&&e("div",{className:"ss-dash-cache-detail",children:[e("h4",{children:["Key: ",a]}),i?e("div",{className:"ss-dash-empty",children:"Loading value..."}):d?e("div",{className:"ss-dash-empty",style:{color:"var(--ss-red-fg)"},children:d}):e(Qe,{data:l})]})]})}const Qn=Object.freeze(Object.defineProperty({__proto__:null,CacheSection:as,default:as},Symbol.toStringTag,{value:"Module"})),Jn=["all","active","waiting","delayed","completed","failed"];function rs({options:t={}}){const[s,n]=k(1),[a,o]=k(""),[l,r]=k("all"),[i,h]=k({}),d={};l!=="all"&&(d.status=l);const{data:u,meta:c,isLoading:v,error:p,refresh:f,mutate:g}=J("jobs",{...t,page:s,search:a,filters:d}),x=u,S=(x&&!Array.isArray(x)?x.jobs:Array.isArray(x)?x:null)||[],w=x&&!Array.isArray(x)?x.stats||x.overview:void 0,y=M(async N=>{h($=>({...$,[N]:"pending"}));try{await g(`jobs/${N}/retry`),h($=>({...$,[N]:"success"})),setTimeout(()=>{h($=>{const T={...$};return delete T[N],T}),f()},1e3)}catch{h($=>{const T={...$};return delete T[N],T})}},[g,f]),b={active:"blue",waiting:"amber",delayed:"purple",completed:"green",failed:"red"};return e("div",{children:[w&&e("div",{className:"ss-dash-job-stats",children:[e("div",{className:"ss-dash-job-stat",children:[e("span",{className:"ss-dash-job-stat-label",children:"Active:"}),e("span",{className:"ss-dash-job-stat-value",children:w.active??0})]}),e("div",{className:"ss-dash-job-stat",children:[e("span",{className:"ss-dash-job-stat-label",children:"Waiting:"}),e("span",{className:"ss-dash-job-stat-value",children:w.waiting??0})]}),e("div",{className:"ss-dash-job-stat",children:[e("span",{className:"ss-dash-job-stat-label",children:"Delayed:"}),e("span",{className:"ss-dash-job-stat-value",children:w.delayed??0})]}),e("div",{className:"ss-dash-job-stat",children:[e("span",{className:"ss-dash-job-stat-label",children:"Completed:"}),e("span",{className:"ss-dash-job-stat-value",children:w.completed??0})]}),e("div",{className:"ss-dash-job-stat",children:[e("span",{className:"ss-dash-job-stat-label",children:"Failed:"}),e("span",{className:"ss-dash-job-stat-value",style:{color:"var(--ss-red-fg)"},children:w.failed??0})]})]}),e(te,{search:a,onSearchChange:o,placeholder:"Filter jobs...",summary:`${c?.total??S.length} jobs`,children:e("div",{className:"ss-dash-btn-group",children:Jn.map(N=>e("button",{type:"button",className:`ss-dash-btn ${l===N?"ss-dash-active":""}`,onClick:()=>{r(N),n(1)},children:N.charAt(0).toUpperCase()+N.slice(1)},N))})}),v&&!u?e("div",{className:"ss-dash-empty",children:"Loading jobs..."}):p?e("div",{className:"ss-dash-empty",children:"Jobs/Queue not available"}):e(O,{children:[e("div",{className:"ss-dash-table-wrap",children:e(ee,{columns:[{key:"id",label:"ID",width:"40px",render:N=>e("span",{style:{color:"var(--ss-dim)"},children:N})},{key:"name",label:"Name",render:N=>e("span",{style:{color:"var(--ss-text)"},title:N,children:N})},{key:"status",label:"Status",width:"90px",render:N=>e(qn,{color:b[N]||"muted",children:N})},{key:"payload",label:"Payload",render:(N,$)=>e(Qe,{data:N||$?.data,maxPreviewLength:60})},{key:"attempts",label:"Tries",width:"50px",render:(N,$)=>e("span",{style:{color:"var(--ss-muted)",textAlign:"center",display:"block"},children:N||$.attemptsMade||0})},{key:"duration",label:"Duration",width:"75px",render:N=>e("span",{className:"ss-dash-duration",children:N!==null?de(N):"-"})},{key:"timestamp",label:"Time",width:"70px",render:(N,$)=>{const T=N||$?.createdAt||$?.processedAt||$?.created_at;return e("span",{className:"ss-dash-event-time",style:{whiteSpace:"nowrap"},title:ne(T),children:ae(T)})}},{key:"_actions",label:"",width:"50px",render:(N,$)=>{const T=$.id,L=i[T];return $.status!=="failed"?null:e("button",{type:"button",className:"ss-dash-retry-btn",disabled:L==="pending"||L==="success",onClick:q=>{q.stopPropagation(),y(T)},children:L==="pending"?"...":L==="success"?"OK":"Retry"})}}],data:S,emptyMessage:"No jobs found"})}),c&&e(ie,{page:c.page,lastPage:c.lastPage,total:c.total,onPageChange:n})]})]})}const Gn=Object.freeze(Object.defineProperty({__proto__:null,JobsSection:rs,default:rs},Symbol.toStringTag,{value:"Module"}));function Q(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)&&t.__redacted===!0}function Je(t,s){if(typeof t!="object"||t===null||t===void 0)return[{path:s,value:t}];if(Array.isArray(t)||Q(t))return[{path:s,value:t}];const n=[];for(const a of Object.keys(t)){const o=s?`${s}.${a}`:a,l=t[a];typeof l=="object"&&l!==null&&!Array.isArray(l)&&!Q(l)?n.push(...Je(l,o)):n.push({path:o,value:l})}return n}function Ge(t){return t==null?{text:"null",color:"var(--ss-dim)"}:typeof t=="boolean"?{text:String(t),color:t?"var(--ss-green-fg)":"var(--ss-red-fg)"}:typeof t=="number"?{text:String(t),color:"var(--ss-amber-fg)"}:Array.isArray(t)?{text:`[${t.map(n=>n==null?"null":typeof n=="object"?JSON.stringify(n):String(n)).join(", ")}]`,color:"var(--ss-purple-fg)"}:typeof t=="object"?{text:JSON.stringify(t),color:"var(--ss-dim)"}:{text:String(t)}}function ls(t){if(t==null||typeof t!="object"||Array.isArray(t)||Q(t))return 1;let s=0;for(const n of Object.keys(t))s+=ls(t[n]);return s}function Xn(t){if(t==null||typeof t!="object"||Array.isArray(t)||Q(t))return[];const s=[];for(const n of Object.keys(t)){const a=t[n];a!==null&&typeof a=="object"&&!Array.isArray(a)&&!Q(a)&&s.push(n)}return s}function Me(t,s,n){s&&navigator.clipboard.writeText(t).then(()=>{const a=s.textContent;s.textContent="✓",s.classList.add(`${n}-copy-row-ok`),setTimeout(()=>{s.textContent=a,s.classList.remove(`${n}-copy-row-ok`)},1200)}).catch(()=>{})}function Pe({redacted:t,p:s}){const[n,a]=k(!1);return e("span",{className:`${s}-config-redacted`,style:{display:"inline-flex",alignItems:"center",gap:"4px"},children:[e("span",{children:n?t.value:t.display}),e("button",{type:"button",className:`${s}-btn`,title:n?"Hide":"Reveal",style:{padding:"0 4px",fontSize:"0.85em",lineHeight:1,minWidth:"auto"},onClick:o=>{o.stopPropagation(),a(l=>!l)},children:n?e("svg",{width:"14",height:"14",viewBox:F["eye-off"].viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:F["eye-off"].elements.join("")}}):e("svg",{width:"14",height:"14",viewBox:F.eye.viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:F.eye.elements.join("")}})})]})}function Yn({env:t,search:s,p:n}){const a=V(new Map),o=s.toLowerCase(),l=Object.entries(t).filter(([r,i])=>{if(!o)return!0;const h=Q(i)?i.display:i==null?"":String(i);return r.toLowerCase().includes(o)||h.toLowerCase().includes(o)});return e("div",{className:`${n}-config-table-wrap`,children:e("table",{className:`${n}-table ${n}-config-env-table`,children:[e("thead",{children:e("tr",{children:[e("th",{children:"Variable"}),e("th",{children:"Value"}),e("th",{style:{width:36}})]})}),e("tbody",{children:[l.map(([r,i])=>{const h=Q(i),d=h?i.display:i==null?"null":String(i),u=`${r}=${d}`;return e("tr",{children:[e("td",{className:`${n}-env-key`,children:e("span",{className:`${n}-config-key`,children:r})}),e("td",{className:`${n}-env-val`,children:h?e(Pe,{redacted:i,p:n}):e("span",{className:`${n}-config-val`,children:d})}),e("td",{children:!h&&e("button",{type:"button",className:`${n}-copy-row-btn`,title:"Copy",ref:c=>{a.current.set(r,c)},onClick:c=>{c.stopPropagation(),Me(u,a.current.get(r)??null,n)},children:"⎘"})})]},r)}),l.length===0&&e("tr",{children:e("td",{colSpan:3,style:{textAlign:"center",color:"var(--ss-dim)"},children:"No matching variables"})})]})]})})}function Zn({source:t,search:s,p:n}){const a=V(new Map),o=s.toLowerCase(),l=Je(t,""),r=l.filter(i=>{const h=Q(i.value)?i.value.display:i.value===null||i.value===void 0?"":String(i.value);return i.path.toLowerCase().includes(o)||h.toLowerCase().includes(o)});return e("div",{className:`${n}-config-table-wrap`,children:[e("table",{className:`${n}-table`,children:[e("thead",{children:e("tr",{children:[e("th",{children:"Path"}),e("th",{children:"Value"}),e("th",{style:{width:36}})]})}),e("tbody",{children:[r.map(i=>{const h=Q(i.value),d=h?null:Ge(i.value),u=h?i.value.display:d.text,c=`${i.path}: ${u}`;return e("tr",{children:[e("td",{children:e("span",{className:`${n}-config-key`,style:{whiteSpace:"nowrap"},children:i.path})}),e("td",{children:h?e(Pe,{redacted:i.value,p:n}):e("span",{className:`${n}-config-val`,style:{wordBreak:"break-all",color:d.color},children:d.text})}),e("td",{children:!h&&e("button",{type:"button",className:`${n}-copy-row-btn`,title:"Copy",ref:v=>{a.current.set(i.path,v)},onClick:v=>{v.stopPropagation(),Me(c,a.current.get(i.path)??null,n)},children:"⎘"})})]},i.path)}),r.length===0&&e("tr",{children:e("td",{colSpan:3,style:{textAlign:"center",color:"var(--ss-dim)"},children:"No matching entries"})})]})]}),e("div",{style:{padding:"4px 16px",fontSize:"10px",color:"var(--ss-muted)"},children:[r.length," of ",l.length," entries"]})]})}function ea({obj:t,prefix:s,p:n}){const a=V(new Map),o=Je(t,s);return e("table",{className:`${n}-table ${n}-config-inner-table`,children:[e("thead",{children:e("tr",{children:[e("th",{style:{width:"35%"},children:"Key"}),e("th",{children:"Value"}),e("th",{style:{width:36}})]})}),e("tbody",{children:o.map(l=>{const r=l.path.indexOf(s+".")===0?l.path.slice(s.length+1):l.path,i=Q(l.value),h=i?null:Ge(l.value),d=i?l.value.display:h.text,u=`${l.path}: ${d}`;return e("tr",{children:[e("td",{title:r,children:e("span",{className:`${n}-config-key`,children:r})}),e("td",{title:d,children:i?e(Pe,{redacted:l.value,p:n}):e("span",{className:`${n}-config-val`,style:{color:h.color},children:h.text})}),e("td",{children:!i&&e("button",{type:"button",className:`${n}-copy-row-btn`,title:"Copy",ref:c=>{a.current.set(l.path,c)},onClick:c=>{c.stopPropagation(),Me(u,a.current.get(l.path)??null,n)},children:"⎘"})})]},l.path)})})]})}function ta({value:t,p:s}){if(t==null)return e("span",{className:`${s}-config-val`,style:{color:"var(--ss-dim)"},children:"null"});if(Q(t))return e(Pe,{redacted:t,p:s});if(typeof t=="boolean")return e("span",{className:`${s}-config-val`,style:{color:t?"var(--ss-green-fg)":"var(--ss-red-fg)"},children:String(t)});if(typeof t=="number")return e("span",{className:`${s}-config-val`,style:{color:"var(--ss-amber-fg)"},children:String(t)});if(Array.isArray(t)){const n=t.map(a=>a==null?"null":typeof a=="object"?JSON.stringify(a):String(a));return e("span",{className:`${s}-config-val`,style:{color:"var(--ss-purple-fg)"},children:["[",n.join(", "),"]"]})}return typeof t=="object"?e("span",{className:`${s}-config-val`,style:{color:"var(--ss-dim)"},children:JSON.stringify(t)}):e("span",{className:`${s}-config-val`,children:String(t)})}function sa({obj:t,expandedPaths:s,onToggle:n,p:a}){if(t==null||typeof t!="object"||Array.isArray(t)||Q(t))return null;const o=Object.keys(t),l=V(new Map);return e("div",{className:`${a}-config-sections`,children:o.map(r=>{const i=t[r],h=i!==null&&typeof i=="object"&&!Array.isArray(i)&&!Q(i),d=s.has(r),u=Q(i);return e("div",{className:`${a}-config-section`,children:[e("div",{className:`${a}-config-section-header${h?"":` ${a}-config-leaf`}`,onClick:h?()=>n(r):void 0,style:{cursor:h?"pointer":"default"},children:[h?e("span",{className:`${a}-config-toggle`,children:d?"▼":"▶"}):e("span",{className:`${a}-config-toggle`,style:{visibility:"hidden"},children:"•"}),e("span",{className:`${a}-config-key`,children:r}),h?e("span",{className:`${a}-config-count`,children:[ls(i)," entries"]}):e(O,{children:[e("span",{className:`${a}-config-val`,style:{marginLeft:"8px"},children:e(ta,{value:i,p:a})}),!u&&e("button",{type:"button",className:`${a}-copy-row-btn`,style:{marginLeft:"4px"},title:"Copy",ref:c=>{l.current.set(r,c)},onClick:c=>{c.stopPropagation();const v=Ge(i);Me(`${r}: ${v.text}`,l.current.get(r)??null,a)},children:"⎘"})]})]}),h&&d&&e("div",{className:`${a}-config-section-body`,children:e(ea,{obj:i,prefix:r,p:a})})]},r)})})}function na({data:t,isLoading:s,classPrefix:n}){const a=n,[o,l]=k(""),[r,i]=k(""),[h,d]=k("app"),[u,c]=k(new Set),[v,p]=k("Copy JSON");K(()=>{const y=setTimeout(()=>i(o),200);return()=>clearTimeout(y)},[o]);const f=t,g=M(y=>{c(b=>{const N=new Set(b);return N.has(y)?N.delete(y):N.add(y),N})},[]),x=M(()=>{if(!f)return;const y=h==="app"?f.app:f.env;if(!y)return;const b=Xn(y);c(new Set(b))},[f,h]),S=M(()=>{c(new Set)},[]),w=M(async()=>{if(f)try{const y=h==="app"?f.app:f.env;await navigator.clipboard.writeText(JSON.stringify(y,null,2)),p("Copied!"),setTimeout(()=>p("Copy JSON"),1500)}catch{}},[f,h]);return e("div",{children:[e("div",{className:`${a}-config-toolbar`,style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px"},children:[e("button",{type:"button",className:`${a}-config-tab${h==="app"?` ${a}-active`:""}`,onClick:()=>d("app"),children:"App Config"}),e("button",{type:"button",className:`${a}-config-tab${h==="env"?` ${a}-active`:""}`,onClick:()=>d("env"),children:"Env"}),e("div",{style:{position:"relative",flex:1},children:[e("input",{type:"text",className:`${a}-search`,placeholder:"Search keys and values...",value:o,onChange:y=>l(y.target.value),style:{width:"100%"}}),o&&e("button",{type:"button",onClick:()=>l(""),style:{position:"absolute",right:"6px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"14px",color:"var(--ss-dim)",padding:"0 2px",lineHeight:1},children:"×"})]}),h==="app"&&!r&&e(O,{children:[e("button",{type:"button",className:`${a}-btn`,onClick:x,children:"Expand All"}),e("button",{type:"button",className:`${a}-btn`,onClick:S,children:"Collapse All"})]}),e("button",{type:"button",className:`${a}-btn`,onClick:w,children:v})]}),s&&!t?e("div",{className:`${a}-empty`,children:"Loading config..."}):f?h==="env"?e(Yn,{env:f.env??{},search:r,p:a}):r?e(Zn,{source:f.app??{},search:r,p:a}):e("div",{className:`${a}-config-table-wrap`,children:e(sa,{obj:f.app,expandedPaths:u,onToggle:g,p:a})}):e("div",{className:`${a}-empty`,children:"Config not available"})]})}function is({options:t={}}){const{data:s,isLoading:n}=J("config",t);return e(na,{data:s,isLoading:n,classPrefix:"ss-dash"})}const aa=Object.freeze(Object.defineProperty({__proto__:null,ConfigSection:is,default:is},Symbol.toStringTag,{value:"Module"})),ra=["password","secret","token","key","credential","auth"];function os(t){const s=t.toLowerCase();return ra.some(n=>s.includes(n))}function cs(t){const s=Date.now()-t,n=Math.floor(s/1e3);if(n<60)return`${n}s ago`;const a=Math.floor(n/60);if(a<60)return`${a}m ago`;const o=Math.floor(a/60);return o<24?`${o}h ago`:`${Math.floor(o/24)}d ago`}function Xe(t){return t.toLocaleString()}function ds(t){return t<1e3?`${t}ms`:t<6e4?`${t/1e3}s`:t<36e5?`${t/6e4}m`:`${t/36e5}h`}function la(t){if(!t&&t!==0)return"-";const s=Math.floor(t),n=Math.floor(s/86400),a=Math.floor(s%86400/3600),o=Math.floor(s%3600/60);return n>0?`${n}d ${a}h`:a>0?`${a}h ${o}m`:o>0?`${o}m ${s%60}s`:`${s}s`}function hs(t){if(t==null)return"-";if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")return String(t);if(Array.isArray(t))return t.join(", ")||"-";try{return JSON.stringify(t)}catch{return String(t)}}function _e({status:t,prefix:s}){let n=`${s}-dot`;return["healthy","active","connected","available","ready"].includes(t)?n+=` ${s}-dot-ok`:["errored","unavailable"].includes(t)&&(n+=` ${s}-dot-err`),e("span",{className:n})}const us=()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:F.eye.viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:F.eye.elements.join("")}}),ps=()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:F["eye-off"].viewBox,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",dangerouslySetInnerHTML:{__html:F["eye-off"].elements.join("")}});function ia({value:t}){const[s,n]=k(!1);return e("span",{children:[s?t:"••••••••"," ",e("button",{type:"button",onClick:()=>n(a=>!a),style:{background:"none",border:"1px solid var(--ss-border)",borderRadius:3,padding:"0 4px",fontSize:"10px",color:"var(--ss-dim)",cursor:"pointer",verticalAlign:"middle"},children:s?e(ps,{}):e(us,{})})]})}function oa({current:t,max:s,prefix:n}){const a=s>0?Math.min(100,Math.round(t/s*100)):0,o=a>=100;return e("div",{className:`${n}-bar`,children:[e("div",{className:`${n}-bar-track`,children:e("div",{className:`${n}-bar-fill${o?` ${n}-bar-fill-warn`:""}`,style:{width:`${a}%`}})}),e("span",{className:`${n}-bar-pct${o?` ${n}-bar-pct-warn`:""}`,children:[a,"%"]})]})}function ca({config:t,prefix:s}){const n=Object.entries(t);return n.length===0?e("span",{className:`${s}-c-dim`,children:"-"}):e("span",{className:`${s}-c-muted`,children:n.map(([a,o],l)=>e("span",{children:[l>0&&", ",e("span",{className:`${s}-c-dim`,children:a}),"=",os(a)&&typeof o=="string"?e(ia,{value:o}):e("span",{children:hs(o)})]},a))})}function qe({label:t,value:s,prefix:n}){return e("div",{className:`${n}-info-card`,children:[e("span",{className:`${n}-info-card-label`,children:t}),e("span",{className:`${n}-info-card-value`,children:s})]})}function da({data:t,tableClassName:s,classPrefix:n}){const a=n||"ss-dash",[o,l]=k(new Set),r=M(u=>{l(c=>{const v=new Set(c);return v.has(u)?v.delete(u):v.add(u),v})},[]),i=M((u,c)=>{if(c==null)return e("span",{className:`${a}-c-dim`,children:"null"});if(typeof c=="boolean")return e("span",{className:c?`${a}-c-green`:`${a}-c-red`,children:String(c)});if(Array.isArray(c))return e("span",{children:c.join(", ")||"-"});const v=hs(c);if(os(u)){const p=o.has(u);return e("span",{children:[p?v:"••••••••"," ",e("button",{type:"button",onClick:()=>r(u),style:{background:"none",border:"1px solid var(--ss-border)",borderRadius:3,padding:"0 4px",fontSize:"10px",color:"var(--ss-dim)",cursor:"pointer",verticalAlign:"middle"},children:p?e(ps,{}):e(us,{})})]})}return e("span",{children:v})},[o,r,a]),h={collectionInterval:"Stats Collection",dashboardBroadcast:"Dashboard Broadcast",debugBroadcast:"Debug Broadcast",persistFlush:"Persist Flush",retentionCleanup:"Retention Cleanup"},d={prometheus:"Prometheus",pinoHook:"Pino Log Hook",edgePlugin:"Edge Plugin",cacheInspector:"Cache Inspector",queueInspector:"Queue Inspector"};return e("div",{children:[e("h3",{className:`${a}-internals-title`,children:"Package Info"}),e("div",{className:`${a}-info-cards`,children:[e(qe,{label:"Version",value:t.package.version||"-",prefix:a}),e(qe,{label:"Node.js",value:t.package.nodeVersion||"-",prefix:a}),e(qe,{label:"AdonisJS",value:t.package.adonisVersion||"-",prefix:a}),e(qe,{label:"Uptime",value:la(t.package.uptime),prefix:a})]}),t.collectors.length>0&&e(O,{children:[e("h3",{className:`${a}-internals-title`,children:"Collectors"}),e("table",{className:s,children:[e("thead",{children:e("tr",{children:[e("th",{children:"Collector"}),e("th",{children:"Status"}),e("th",{children:"Last Error"}),e("th",{children:"Config"})]})}),e("tbody",{children:t.collectors.map(u=>e("tr",{children:[e("td",{children:[e("code",{children:u.name}),u.label&&u.label!==u.name&&e("span",{className:`${a}-c-dim`,children:[" ",u.label]})]}),e("td",{children:[e(_e,{status:u.status,prefix:a}),u.status]}),e("td",{className:u.lastError?`${a}-c-red`:`${a}-c-dim`,children:u.lastError?e(O,{children:[u.lastError,u.lastErrorAt&&e("span",{className:`${a}-c-dim`,style:{fontSize:"10px"},children:cs(u.lastErrorAt)})]}):"-"}),e("td",{children:e(ca,{config:u.config,prefix:a})})]},u.name))})]})]}),e("h3",{className:`${a}-internals-title`,children:"Buffers"}),e("table",{className:s,children:[e("thead",{children:e("tr",{children:[e("th",{children:"Buffer"}),e("th",{children:"Usage"}),e("th",{children:"Fill %"})]})}),e("tbody",{children:Object.entries(t.buffers).map(([u,c])=>e("tr",{children:[e("td",{style:{textTransform:"capitalize"},children:u}),e("td",{children:[Xe(c.current)," / ",Xe(c.max)]}),e("td",{children:e(oa,{current:c.current,max:c.max,prefix:a})})]},u))})]}),e("h3",{className:`${a}-internals-title`,children:"Timers"}),e("table",{className:s,children:[e("thead",{children:e("tr",{children:[e("th",{children:"Timer"}),e("th",{children:"Status"}),e("th",{children:"Interval"})]})}),e("tbody",{children:Object.entries(t.timers).map(([u,c])=>e("tr",{children:[e("td",{children:h[u]||u}),e("td",{children:[e(_e,{status:c.active?"active":"inactive",prefix:a}),e("span",{className:c.active?`${a}-c-green`:`${a}-c-dim`,children:c.active?"active":"inactive"})]}),e("td",{children:c.active?c.intervalMs?ds(c.intervalMs):c.debounceMs?`${ds(c.debounceMs)} (debounce)`:"-":e("span",{className:`${a}-c-dim`,children:"—"})})]},u))})]}),e("h3",{className:`${a}-internals-title`,children:"Integrations"}),e("table",{className:s,children:[e("thead",{children:e("tr",{children:[e("th",{children:"Integration"}),e("th",{children:"Status"}),e("th",{children:"Details"})]})}),e("tbody",{children:[e("tr",{children:[e("td",{children:"Transmit (SSE)"}),e("td",{children:[e(_e,{status:t.transmit.available?"connected":"inactive",prefix:a}),t.transmit.available?"connected":"unavailable"]}),e("td",{style:{fontSize:"11px"},children:t.transmit.channels.length>0?`Channels: ${t.transmit.channels.join(", ")}`:"-"})]}),Object.entries(t.integrations).map(([u,c])=>{const v=c.active??c.available??!1,p=c.active?"active":c.available?"available":"unavailable";let f=c.mode?`Mode: ${c.mode}`:"-";return u==="edgePlugin"&&c.active?f="@serverStats() tag registered":u==="cacheInspector"&&c.available?f="Redis dependency detected":u==="queueInspector"&&c.available&&(f="Queue dependency detected"),e("tr",{children:[e("td",{children:d[u]||u}),e("td",{children:[e(_e,{status:v?"active":"inactive",prefix:a}),p]}),e("td",{className:`${a}-c-dim`,style:{fontSize:"11px"},children:f})]},u)})]})]}),t.storage&&e(O,{children:[e("h3",{className:`${a}-internals-title`,children:"Storage (SQLite)"}),e("table",{className:s,children:[e("thead",{children:e("tr",{children:[e("th",{style:{width:"200px"},children:"Metric"}),e("th",{children:"Value"})]})}),e("tbody",{children:[e("tr",{children:[e("td",{children:"Status"}),e("td",{children:[e(_e,{status:t.storage.ready?"ready":"inactive",prefix:a}),t.storage.ready?"ready":"not ready"]})]}),e("tr",{children:[e("td",{children:"DB Path"}),e("td",{children:e("code",{children:t.storage.dbPath})})]}),e("tr",{children:[e("td",{children:"File Size"}),e("td",{children:[t.storage.fileSizeMb.toFixed(1)," MB"]})]}),e("tr",{children:[e("td",{children:"WAL Size"}),e("td",{children:[t.storage.walSizeMb.toFixed(1)," MB"]})]}),e("tr",{children:[e("td",{children:"Retention"}),e("td",{children:[t.storage.retentionDays," days"]})]}),e("tr",{children:[e("td",{children:"Last Cleanup"}),e("td",{children:t.storage.lastCleanupAt?cs(t.storage.lastCleanupAt):"-"})]})]})]}),t.storage.tables.length>0&&e("table",{className:s,style:{marginTop:8},children:[e("thead",{children:e("tr",{children:[e("th",{children:"Table"}),e("th",{children:"Rows"})]})}),e("tbody",{children:t.storage.tables.map(u=>e("tr",{children:[e("td",{children:e("code",{children:u.name})}),e("td",{children:Xe(u.rowCount)})]},u.name))})]})]}),e("h3",{className:`${a}-internals-title`,children:"Resolved Config"}),e("table",{className:s,children:[e("thead",{children:e("tr",{children:[e("th",{style:{width:"200px"},children:"Setting"}),e("th",{children:"Value"})]})}),e("tbody",{children:[e("tr",{children:[e("td",{children:"intervalMs"}),e("td",{children:t.config.intervalMs})]}),e("tr",{children:[e("td",{children:"transport"}),e("td",{children:t.config.transport})]}),e("tr",{children:[e("td",{children:"channelName"}),e("td",{children:t.config.channelName})]}),e("tr",{children:[e("td",{children:"endpoint"}),e("td",{children:t.config.endpoint===!1?"false":t.config.endpoint})]}),e("tr",{children:[e("td",{children:"skipInTest"}),e("td",{children:i("skipInTest",t.config.skipInTest)})]}),e("tr",{children:[e("td",{children:"onStats callback"}),e("td",{children:t.config.hasOnStatsCallback?"defined":"not defined"})]}),e("tr",{children:[e("td",{children:"shouldShow callback"}),e("td",{children:t.config.hasShouldShowCallback?"defined":"not defined"})]})]})]}),e("h4",{className:`${a}-internals-title`,children:"DevToolbar"}),e("table",{className:s,children:[e("thead",{children:e("tr",{children:[e("th",{style:{width:"200px"},children:"Setting"}),e("th",{children:"Value"})]})}),e("tbody",{children:Object.entries(t.devToolbar).map(([u,c])=>e("tr",{children:[e("td",{children:u==="customPaneCount"?"customPanes":u}),e("td",{children:u==="customPaneCount"?`${c} registered`:i(u,c)})]},u))})]})]})}function ms({options:t={},debugEndpoint:s="/admin/api/debug"}){const{baseUrl:n="",authToken:a}=t,[o,l]=k(null),[r,i]=k(!0),[h,d]=k(null),u=V(null),c=V(null),v=M(()=>(u.current||(u.current=new me({baseUrl:n,authToken:a})),u.current),[n,a]),p=M(async()=>{try{const g=await v().get(`${s}/diagnostics`);l(g),d(null),i(!1)}catch(f){if(f instanceof Ve){d(f),i(!1),c.current&&(clearInterval(c.current),c.current=null);return}d(f instanceof Error?f:new Error(String(f))),i(!1)}},[s,v]);return K(()=>(i(!0),d(null),p(),c.current=setInterval(p,Rt),()=>{c.current&&(clearInterval(c.current),c.current=null)}),[p]),r&&!o?e("div",{className:"ss-dash-empty",children:"Loading diagnostics..."}):h?e("div",{className:"ss-dash-empty",children:["Error: ",h.message]}):o?e(da,{data:o,tableClassName:"ss-dash-table",classPrefix:"ss-dash"}):e("div",{className:"ss-dash-empty",children:"Diagnostics not available"})}const ha=Object.freeze(Object.defineProperty({__proto__:null,InternalsSection:ms,default:ms},Symbol.toStringTag,{value:"Module"}))})();
